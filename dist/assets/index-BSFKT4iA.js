(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();function Nu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Yb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var a=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(a,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),a}var cc={exports:{}},Sr={},uc={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Qb(){if(uh)return St;uh=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function w(T,B,ue){this.props=T,this.context=B,this.refs=S,this.updater=ue||k}w.prototype.isReactComponent={},w.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},w.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function P(){}P.prototype=w.prototype;function A(T,B,ue){this.props=T,this.context=B,this.refs=S,this.updater=ue||k}var R=A.prototype=new P;R.constructor=A,j(R,w.prototype),R.isPureReactComponent=!0;var O=Array.isArray,H=Object.prototype.hasOwnProperty,L={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function ne(T,B,ue){var ke,G={},he=null,Q=null;if(B!=null)for(ke in B.ref!==void 0&&(Q=B.ref),B.key!==void 0&&(he=""+B.key),B)H.call(B,ke)&&!U.hasOwnProperty(ke)&&(G[ke]=B[ke]);var le=arguments.length-2;if(le===1)G.children=ue;else if(1<le){for(var W=Array(le),we=0;we<le;we++)W[we]=arguments[we+2];G.children=W}if(T&&T.defaultProps)for(ke in le=T.defaultProps,le)G[ke]===void 0&&(G[ke]=le[ke]);return{$$typeof:n,type:T,key:he,ref:Q,props:G,_owner:L.current}}function ie(T,B){return{$$typeof:n,type:T.type,key:B,ref:T.ref,props:T.props,_owner:T._owner}}function q(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function V(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ue){return B[ue]})}var ce=/\/+/g;function Ce(T,B){return typeof T=="object"&&T!==null&&T.key!=null?V(""+T.key):B.toString(36)}function Re(T,B,ue,ke,G){var he=typeof T;(he==="undefined"||he==="boolean")&&(T=null);var Q=!1;if(T===null)Q=!0;else switch(he){case"string":case"number":Q=!0;break;case"object":switch(T.$$typeof){case n:case e:Q=!0}}if(Q)return Q=T,G=G(Q),T=ke===""?"."+Ce(Q,0):ke,O(G)?(ue="",T!=null&&(ue=T.replace(ce,"$&/")+"/"),Re(G,B,ue,"",function(we){return we})):G!=null&&(q(G)&&(G=ie(G,ue+(!G.key||Q&&Q.key===G.key?"":(""+G.key).replace(ce,"$&/")+"/")+T)),B.push(G)),1;if(Q=0,ke=ke===""?".":ke+":",O(T))for(var le=0;le<T.length;le++){he=T[le];var W=ke+Ce(he,le);Q+=Re(he,B,ue,W,G)}else if(W=v(T),typeof W=="function")for(T=W.call(T),le=0;!(he=T.next()).done;)he=he.value,W=ke+Ce(he,le++),Q+=Re(he,B,ue,W,G);else if(he==="object")throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Q}function Ue(T,B,ue){if(T==null)return T;var ke=[],G=0;return Re(T,ke,"","",function(he){return B.call(ue,he,G++)}),ke}function re(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(ue){(T._status===0||T._status===-1)&&(T._status=1,T._result=ue)},function(ue){(T._status===0||T._status===-1)&&(T._status=2,T._result=ue)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var De={current:null},J={transition:null},E={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:J,ReactCurrentOwner:L};return St.Children={map:Ue,forEach:function(T,B,ue){Ue(T,function(){B.apply(this,arguments)},ue)},count:function(T){var B=0;return Ue(T,function(){B++}),B},toArray:function(T){return Ue(T,function(B){return B})||[]},only:function(T){if(!q(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},St.Component=w,St.Fragment=a,St.Profiler=r,St.PureComponent=A,St.StrictMode=s,St.Suspense=h,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E,St.cloneElement=function(T,B,ue){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ke=j({},T.props),G=T.key,he=T.ref,Q=T._owner;if(B!=null){if(B.ref!==void 0&&(he=B.ref,Q=L.current),B.key!==void 0&&(G=""+B.key),T.type&&T.type.defaultProps)var le=T.type.defaultProps;for(W in B)H.call(B,W)&&!U.hasOwnProperty(W)&&(ke[W]=B[W]===void 0&&le!==void 0?le[W]:B[W])}var W=arguments.length-2;if(W===1)ke.children=ue;else if(1<W){le=Array(W);for(var we=0;we<W;we++)le[we]=arguments[we+2];ke.children=le}return{$$typeof:n,type:T.type,key:G,ref:he,props:ke,_owner:Q}},St.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:d,_context:T},T.Consumer=T},St.createElement=ne,St.createFactory=function(T){var B=ne.bind(null,T);return B.type=T,B},St.createRef=function(){return{current:null}},St.forwardRef=function(T){return{$$typeof:p,render:T}},St.isValidElement=q,St.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:re}},St.memo=function(T,B){return{$$typeof:f,type:T,compare:B===void 0?null:B}},St.startTransition=function(T){var B=J.transition;J.transition={};try{T()}finally{J.transition=B}},St.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},St.useCallback=function(T,B){return De.current.useCallback(T,B)},St.useContext=function(T){return De.current.useContext(T)},St.useDebugValue=function(){},St.useDeferredValue=function(T){return De.current.useDeferredValue(T)},St.useEffect=function(T,B){return De.current.useEffect(T,B)},St.useId=function(){return De.current.useId()},St.useImperativeHandle=function(T,B,ue){return De.current.useImperativeHandle(T,B,ue)},St.useInsertionEffect=function(T,B){return De.current.useInsertionEffect(T,B)},St.useLayoutEffect=function(T,B){return De.current.useLayoutEffect(T,B)},St.useMemo=function(T,B){return De.current.useMemo(T,B)},St.useReducer=function(T,B,ue){return De.current.useReducer(T,B,ue)},St.useRef=function(T){return De.current.useRef(T)},St.useState=function(T){return De.current.useState(T)},St.useSyncExternalStore=function(T,B,ue){return De.current.useSyncExternalStore(T,B,ue)},St.useTransition=function(){return De.current.useTransition()},St.version="18.2.0",St}var mh;function ku(){return mh||(mh=1,uc.exports=Qb()),uc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function Xb(){if(ph)return Sr;ph=1;var n=ku(),e=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(p,h,f){var g,y={},v=null,k=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(k=h.ref);for(g in h)s.call(h,g)&&!d.hasOwnProperty(g)&&(y[g]=h[g]);if(p&&p.defaultProps)for(g in h=p.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:p,key:v,ref:k,props:y,_owner:r.current}}return Sr.Fragment=a,Sr.jsx=u,Sr.jsxs=u,Sr}var hh;function Zb(){return hh||(hh=1,cc.exports=Xb()),cc.exports}var t=Zb(),C=ku();const Bg=Nu(C);var nl={},mc={exports:{}},Kn={},pc={exports:{}},hc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function ev(){return fh||(fh=1,(function(n){function e(J,E){var T=J.length;J.push(E);e:for(;0<T;){var B=T-1>>>1,ue=J[B];if(0<r(ue,E))J[B]=E,J[T]=ue,T=B;else break e}}function a(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var E=J[0],T=J.pop();if(T!==E){J[0]=T;e:for(var B=0,ue=J.length,ke=ue>>>1;B<ke;){var G=2*(B+1)-1,he=J[G],Q=G+1,le=J[Q];if(0>r(he,T))Q<ue&&0>r(le,he)?(J[B]=le,J[Q]=T,B=Q):(J[B]=he,J[G]=T,B=G);else if(Q<ue&&0>r(le,T))J[B]=le,J[Q]=T,B=Q;else break e}}return E}function r(J,E){var T=J.sortIndex-E.sortIndex;return T!==0?T:J.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var u=Date,p=u.now();n.unstable_now=function(){return u.now()-p}}var h=[],f=[],g=1,y=null,v=3,k=!1,j=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(J){for(var E=a(f);E!==null;){if(E.callback===null)s(f);else if(E.startTime<=J)s(f),E.sortIndex=E.expirationTime,e(h,E);else break;E=a(f)}}function O(J){if(S=!1,R(J),!j)if(a(h)!==null)j=!0,re(H);else{var E=a(f);E!==null&&De(O,E.startTime-J)}}function H(J,E){j=!1,S&&(S=!1,P(ne),ne=-1),k=!0;var T=v;try{for(R(E),y=a(h);y!==null&&(!(y.expirationTime>E)||J&&!V());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var ue=B(y.expirationTime<=E);E=n.unstable_now(),typeof ue=="function"?y.callback=ue:y===a(h)&&s(h),R(E)}else s(h);y=a(h)}if(y!==null)var ke=!0;else{var G=a(f);G!==null&&De(O,G.startTime-E),ke=!1}return ke}finally{y=null,v=T,k=!1}}var L=!1,U=null,ne=-1,ie=5,q=-1;function V(){return!(n.unstable_now()-q<ie)}function ce(){if(U!==null){var J=n.unstable_now();q=J;var E=!0;try{E=U(!0,J)}finally{E?Ce():(L=!1,U=null)}}else L=!1}var Ce;if(typeof A=="function")Ce=function(){A(ce)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Ue=Re.port2;Re.port1.onmessage=ce,Ce=function(){Ue.postMessage(null)}}else Ce=function(){w(ce,0)};function re(J){U=J,L||(L=!0,Ce())}function De(J,E){ne=w(function(){J(n.unstable_now())},E)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){j||k||(j=!0,re(H))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return a(h)},n.unstable_next=function(J){switch(v){case 1:case 2:case 3:var E=3;break;default:E=v}var T=v;v=E;try{return J()}finally{v=T}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,E){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var T=v;v=J;try{return E()}finally{v=T}},n.unstable_scheduleCallback=function(J,E,T){var B=n.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?B+T:B):T=B,J){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=T+ue,J={id:g++,callback:E,priorityLevel:J,startTime:T,expirationTime:ue,sortIndex:-1},T>B?(J.sortIndex=T,e(f,J),a(h)===null&&J===a(f)&&(S?(P(ne),ne=-1):S=!0,De(O,T-B))):(J.sortIndex=ue,e(h,J),j||k||(j=!0,re(H))),J},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(J){var E=v;return function(){var T=v;v=E;try{return J.apply(this,arguments)}finally{v=T}}}})(hc)),hc}var gh;function tv(){return gh||(gh=1,pc.exports=ev()),pc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function nv(){if(xh)return Kn;xh=1;var n=ku(),e=tv();function a(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,m=1;m<arguments.length;m++)o+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,r={};function d(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(r[i]=o,i=0;i<o.length;i++)s.add(o[i])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return h.call(y,i)?!0:h.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function k(i,o,m,x){if(m!==null&&m.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,o,m,x){if(o===null||typeof o>"u"||k(i,o,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,m,x,b,N,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=x,this.attributeNamespace=b,this.mustUseProperty=m,this.propertyName=i,this.type=o,this.sanitizeURL=N,this.removeEmptyString=I}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){w[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];w[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){w[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){w[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){w[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){w[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){w[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){w[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){w[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function A(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(P,A);w[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(P,A);w[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(P,A);w[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){w[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){w[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function R(i,o,m,x){var b=w.hasOwnProperty(o)?w[o]:null;(b!==null?b.type!==0:x||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(j(o,m,b,x)&&(m=null),x||b===null?v(o)&&(m===null?i.removeAttribute(o):i.setAttribute(o,""+m)):b.mustUseProperty?i[b.propertyName]=m===null?b.type===3?!1:"":m:(o=b.attributeName,x=b.attributeNamespace,m===null?i.removeAttribute(o):(b=b.type,m=b===3||b===4&&m===!0?"":""+m,x?i.setAttributeNS(x,o,m):i.setAttribute(o,m))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),L=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),V=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),J=Symbol.iterator;function E(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var T=Object.assign,B;function ue(i){if(B===void 0)try{throw Error()}catch(m){var o=m.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var ke=!1;function G(i,o){if(!i||ke)return"";ke=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var x=pe}Reflect.construct(i,[],o)}else{try{o.call()}catch(pe){x=pe}i.call(o.prototype)}else{try{throw Error()}catch(pe){x=pe}i()}}catch(pe){if(pe&&x&&typeof pe.stack=="string"){for(var b=pe.stack.split(`
`),N=x.stack.split(`
`),I=b.length-1,$=N.length-1;1<=I&&0<=$&&b[I]!==N[$];)$--;for(;1<=I&&0<=$;I--,$--)if(b[I]!==N[$]){if(I!==1||$!==1)do if(I--,$--,0>$||b[I]!==N[$]){var Y=`
`+b[I].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=I&&0<=$);break}}}finally{ke=!1,Error.prepareStackTrace=m}return(i=i?i.displayName||i.name:"")?ue(i):""}function he(i){switch(i.tag){case 5:return ue(i.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return i=G(i.type,!1),i;case 11:return i=G(i.type.render,!1),i;case 1:return i=G(i.type,!0),i;default:return""}}function Q(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case U:return"Fragment";case L:return"Portal";case ie:return"Profiler";case ne:return"StrictMode";case Ce:return"Suspense";case Re:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case q:return(i._context.displayName||"Context")+".Provider";case ce:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ue:return o=i.displayName||null,o!==null?o:Q(i.type)||"Memo";case re:o=i._payload,i=i._init;try{return Q(i(o))}catch{}}return null}function le(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(o);case 8:return o===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function W(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function we(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Be(i){var o=we(i)?"checked":"value",m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),x=""+i[o];if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,N=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return b.call(this)},set:function(I){x=""+I,N.call(this,I)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(I){x=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ze(i){i._valueTracker||(i._valueTracker=Be(i))}function Ke(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var m=o.getValue(),x="";return i&&(x=we(i)?i.checked?"true":"false":i.value),i=x,i!==m?(o.setValue(i),!0):!1}function Qe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function gt(i,o){var m=o.checked;return T({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??i._wrapperState.initialChecked})}function At(i,o){var m=o.defaultValue==null?"":o.defaultValue,x=o.checked!=null?o.checked:o.defaultChecked;m=W(o.value!=null?o.value:m),i._wrapperState={initialChecked:x,initialValue:m,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function wt(i,o){o=o.checked,o!=null&&R(i,"checked",o,!1)}function ft(i,o){wt(i,o);var m=W(o.value),x=o.type;if(m!=null)x==="number"?(m===0&&i.value===""||i.value!=m)&&(i.value=""+m):i.value!==""+m&&(i.value=""+m);else if(x==="submit"||x==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ve(i,o.type,m):o.hasOwnProperty("defaultValue")&&Ve(i,o.type,W(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ne(i,o,m){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var x=o.type;if(!(x!=="submit"&&x!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,m||o===i.value||(i.value=o),i.defaultValue=o}m=i.name,m!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,m!==""&&(i.name=m)}function Ve(i,o,m){(o!=="number"||Qe(i.ownerDocument)!==i)&&(m==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+m&&(i.defaultValue=""+m))}var _e=Array.isArray;function Je(i,o,m,x){if(i=i.options,o){o={};for(var b=0;b<m.length;b++)o["$"+m[b]]=!0;for(m=0;m<i.length;m++)b=o.hasOwnProperty("$"+i[m].value),i[m].selected!==b&&(i[m].selected=b),b&&x&&(i[m].defaultSelected=!0)}else{for(m=""+W(m),o=null,b=0;b<i.length;b++){if(i[b].value===m){i[b].selected=!0,x&&(i[b].defaultSelected=!0);return}o!==null||i[b].disabled||(o=i[b])}o!==null&&(o.selected=!0)}}function st(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(a(91));return T({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dt(i,o){var m=o.value;if(m==null){if(m=o.children,o=o.defaultValue,m!=null){if(o!=null)throw Error(a(92));if(_e(m)){if(1<m.length)throw Error(a(93));m=m[0]}o=m}o==null&&(o=""),m=o}i._wrapperState={initialValue:W(m)}}function yt(i,o){var m=W(o.value),x=W(o.defaultValue);m!=null&&(m=""+m,m!==i.value&&(i.value=m),o.defaultValue==null&&i.defaultValue!==m&&(i.defaultValue=m)),x!=null&&(i.defaultValue=""+x)}function Dt(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function ze(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?ze(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ie,M=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,m,x,b){MSApp.execUnsafeLocalFunction(function(){return i(o,m,x,b)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ie.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function de(i,o){if(o){var m=i.firstChild;if(m&&m===i.lastChild&&m.nodeType===3){m.nodeValue=o;return}}i.textContent=o}var z={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F=["Webkit","ms","Moz","O"];Object.keys(z).forEach(function(i){F.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),z[o]=z[i]})});function K(i,o,m){return o==null||typeof o=="boolean"||o===""?"":m||typeof o!="number"||o===0||z.hasOwnProperty(i)&&z[i]?(""+o).trim():o+"px"}function te(i,o){i=i.style;for(var m in o)if(o.hasOwnProperty(m)){var x=m.indexOf("--")===0,b=K(m,o[m],x);m==="float"&&(m="cssFloat"),x?i.setProperty(m,b):i[m]=b}}var X=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fe(i,o){if(o){if(X[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(a(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(a(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(a(61))}if(o.style!=null&&typeof o.style!="object")throw Error(a(62))}}function ye(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _=null;function D(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ae=null,se=null,Ae=null;function ut(i){if(i=mr(i)){if(typeof ae!="function")throw Error(a(280));var o=i.stateNode;o&&(o=xo(o),ae(i.stateNode,i.type,o))}}function Nt(i){se?Ae?Ae.push(i):Ae=[i]:se=i}function jt(){if(se){var i=se,o=Ae;if(Ae=se=null,ut(i),o)for(i=0;i<o.length;i++)ut(o[i])}}function wn(i,o){return i(o)}function ge(){}var Se=!1;function Me(i,o,m){if(Se)return i(o,m);Se=!0;try{return wn(i,o,m)}finally{Se=!1,(se!==null||Ae!==null)&&(ge(),jt())}}function et(i,o){var m=i.stateNode;if(m===null)return null;var x=xo(m);if(x===null)return null;m=x[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(i=i.type,x=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!x;break e;default:i=!1}if(i)return null;if(m&&typeof m!="function")throw Error(a(231,o,typeof m));return m}var mt=!1;if(p)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){mt=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{mt=!1}function Z(i,o,m,x,b,N,I,$,Y){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(m,pe)}catch(Pe){this.onError(Pe)}}var be=!1,xe=null,Fe=!1,an=null,ve={onError:function(i){be=!0,xe=i}};function je(i,o,m,x,b,N,I,$,Y){be=!1,xe=null,Z.apply(ve,arguments)}function He(i,o,m,x,b,N,I,$,Y){if(je.apply(this,arguments),be){if(be){var pe=xe;be=!1,xe=null}else throw Error(a(198));Fe||(Fe=!0,an=pe)}}function Ge(i){var o=i,m=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(m=o.return),i=o.return;while(i)}return o.tag===3?m:null}function Ye(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function lt(i){if(Ge(i)!==i)throw Error(a(188))}function vn(i){var o=i.alternate;if(!o){if(o=Ge(i),o===null)throw Error(a(188));return o!==i?null:i}for(var m=i,x=o;;){var b=m.return;if(b===null)break;var N=b.alternate;if(N===null){if(x=b.return,x!==null){m=x;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===m)return lt(b),i;if(N===x)return lt(b),o;N=N.sibling}throw Error(a(188))}if(m.return!==x.return)m=b,x=N;else{for(var I=!1,$=b.child;$;){if($===m){I=!0,m=b,x=N;break}if($===x){I=!0,x=b,m=N;break}$=$.sibling}if(!I){for($=N.child;$;){if($===m){I=!0,m=N,x=b;break}if($===x){I=!0,x=N,m=b;break}$=$.sibling}if(!I)throw Error(a(189))}}if(m.alternate!==x)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?i:o}function Yt(i){return i=vn(i),i!==null?Pn(i):null}function Pn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Pn(i);if(o!==null)return o;i=i.sibling}return null}var Cs=e.unstable_scheduleCallback,Ts=e.unstable_cancelCallback,oy=e.unstable_shouldYield,ly=e.unstable_requestPaint,Zt=e.unstable_now,dy=e.unstable_getCurrentPriorityLevel,El=e.unstable_ImmediatePriority,Ou=e.unstable_UserBlockingPriority,Yr=e.unstable_NormalPriority,cy=e.unstable_LowPriority,$u=e.unstable_IdlePriority,Qr=null,wa=null;function uy(i){if(wa&&typeof wa.onCommitFiberRoot=="function")try{wa.onCommitFiberRoot(Qr,i,void 0,(i.current.flags&128)===128)}catch{}}var la=Math.clz32?Math.clz32:hy,my=Math.log,py=Math.LN2;function hy(i){return i>>>=0,i===0?32:31-(my(i)/py|0)|0}var Xr=64,Zr=4194304;function Wi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function eo(i,o){var m=i.pendingLanes;if(m===0)return 0;var x=0,b=i.suspendedLanes,N=i.pingedLanes,I=m&268435455;if(I!==0){var $=I&~b;$!==0?x=Wi($):(N&=I,N!==0&&(x=Wi(N)))}else I=m&~b,I!==0?x=Wi(I):N!==0&&(x=Wi(N));if(x===0)return 0;if(o!==0&&o!==x&&(o&b)===0&&(b=x&-x,N=o&-o,b>=N||b===16&&(N&4194240)!==0))return o;if((x&4)!==0&&(x|=m&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=x;0<o;)m=31-la(o),b=1<<m,x|=i[m],o&=~b;return x}function fy(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gy(i,o){for(var m=i.suspendedLanes,x=i.pingedLanes,b=i.expirationTimes,N=i.pendingLanes;0<N;){var I=31-la(N),$=1<<I,Y=b[I];Y===-1?(($&m)===0||($&x)!==0)&&(b[I]=fy($,o)):Y<=o&&(i.expiredLanes|=$),N&=~$}}function _l(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Bu(){var i=Xr;return Xr<<=1,(Xr&4194240)===0&&(Xr=64),i}function Pl(i){for(var o=[],m=0;31>m;m++)o.push(i);return o}function zi(i,o,m){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-la(o),i[o]=m}function xy(i,o){var m=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var x=i.eventTimes;for(i=i.expirationTimes;0<m;){var b=31-la(m),N=1<<b;o[b]=0,x[b]=-1,i[b]=-1,m&=~N}}function Dl(i,o){var m=i.entangledLanes|=o;for(i=i.entanglements;m;){var x=31-la(m),b=1<<x;b&o|i[x]&o&&(i[x]|=o),m&=~b}}var Ut=0;function Vu(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ku,Ml,Hu,Gu,qu,Rl=!1,to=[],Ya=null,Qa=null,Xa=null,Yi=new Map,Qi=new Map,Za=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(i,o){switch(i){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Yi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(o.pointerId)}}function Xi(i,o,m,x,b,N){return i===null||i.nativeEvent!==N?(i={blockedOn:o,domEventName:m,eventSystemFlags:x,nativeEvent:N,targetContainers:[b]},o!==null&&(o=mr(o),o!==null&&Ml(o)),i):(i.eventSystemFlags|=x,o=i.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),i)}function by(i,o,m,x,b){switch(o){case"focusin":return Ya=Xi(Ya,i,o,m,x,b),!0;case"dragenter":return Qa=Xi(Qa,i,o,m,x,b),!0;case"mouseover":return Xa=Xi(Xa,i,o,m,x,b),!0;case"pointerover":var N=b.pointerId;return Yi.set(N,Xi(Yi.get(N)||null,i,o,m,x,b)),!0;case"gotpointercapture":return N=b.pointerId,Qi.set(N,Xi(Qi.get(N)||null,i,o,m,x,b)),!0}return!1}function Wu(i){var o=Ss(i.target);if(o!==null){var m=Ge(o);if(m!==null){if(o=m.tag,o===13){if(o=Ye(m),o!==null){i.blockedOn=o,qu(i.priority,function(){Hu(m)});return}}else if(o===3&&m.stateNode.current.memoizedState.isDehydrated){i.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}i.blockedOn=null}function no(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var m=Fl(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(m===null){m=i.nativeEvent;var x=new m.constructor(m.type,m);_=x,m.target.dispatchEvent(x),_=null}else return o=mr(m),o!==null&&Ml(o),i.blockedOn=m,!1;o.shift()}return!0}function zu(i,o,m){no(i)&&m.delete(o)}function vy(){Rl=!1,Ya!==null&&no(Ya)&&(Ya=null),Qa!==null&&no(Qa)&&(Qa=null),Xa!==null&&no(Xa)&&(Xa=null),Yi.forEach(zu),Qi.forEach(zu)}function Zi(i,o){i.blockedOn===o&&(i.blockedOn=null,Rl||(Rl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vy)))}function er(i){function o(b){return Zi(b,i)}if(0<to.length){Zi(to[0],i);for(var m=1;m<to.length;m++){var x=to[m];x.blockedOn===i&&(x.blockedOn=null)}}for(Ya!==null&&Zi(Ya,i),Qa!==null&&Zi(Qa,i),Xa!==null&&Zi(Xa,i),Yi.forEach(o),Qi.forEach(o),m=0;m<Za.length;m++)x=Za[m],x.blockedOn===i&&(x.blockedOn=null);for(;0<Za.length&&(m=Za[0],m.blockedOn===null);)Wu(m),m.blockedOn===null&&Za.shift()}var Xs=O.ReactCurrentBatchConfig,ao=!0;function Ny(i,o,m,x){var b=Ut,N=Xs.transition;Xs.transition=null;try{Ut=1,Ll(i,o,m,x)}finally{Ut=b,Xs.transition=N}}function ky(i,o,m,x){var b=Ut,N=Xs.transition;Xs.transition=null;try{Ut=4,Ll(i,o,m,x)}finally{Ut=b,Xs.transition=N}}function Ll(i,o,m,x){if(ao){var b=Fl(i,o,m,x);if(b===null)ed(i,o,x,so,m),Ju(i,x);else if(by(b,i,o,m,x))x.stopPropagation();else if(Ju(i,x),o&4&&-1<yy.indexOf(i)){for(;b!==null;){var N=mr(b);if(N!==null&&Ku(N),N=Fl(i,o,m,x),N===null&&ed(i,o,x,so,m),N===b)break;b=N}b!==null&&x.stopPropagation()}else ed(i,o,x,null,m)}}var so=null;function Fl(i,o,m,x){if(so=null,i=D(x),i=Ss(i),i!==null)if(o=Ge(i),o===null)i=null;else if(m=o.tag,m===13){if(i=Ye(o),i!==null)return i;i=null}else if(m===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return so=i,null}function Yu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dy()){case El:return 1;case Ou:return 4;case Yr:case cy:return 16;case $u:return 536870912;default:return 16}default:return 16}}var es=null,Ul=null,io=null;function Qu(){if(io)return io;var i,o=Ul,m=o.length,x,b="value"in es?es.value:es.textContent,N=b.length;for(i=0;i<m&&o[i]===b[i];i++);var I=m-i;for(x=1;x<=I&&o[m-x]===b[N-x];x++);return io=b.slice(i,1<x?1-x:void 0)}function ro(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function oo(){return!0}function Xu(){return!1}function Gn(i){function o(m,x,b,N,I){this._reactName=m,this._targetInst=b,this.type=x,this.nativeEvent=N,this.target=I,this.currentTarget=null;for(var $ in i)i.hasOwnProperty($)&&(m=i[$],this[$]=m?m(N):N[$]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?oo:Xu,this.isPropagationStopped=Xu,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),o}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=Gn(Zs),tr=T({},Zs,{view:0,detail:0}),jy=Gn(tr),$l,Bl,nr,lo=T({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==nr&&(nr&&i.type==="mousemove"?($l=i.screenX-nr.screenX,Bl=i.screenY-nr.screenY):Bl=$l=0,nr=i),$l)},movementY:function(i){return"movementY"in i?i.movementY:Bl}}),Zu=Gn(lo),wy=T({},lo,{dataTransfer:0}),Cy=Gn(wy),Ty=T({},tr,{relatedTarget:0}),Vl=Gn(Ty),Sy=T({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Iy=Gn(Sy),Ay=T({},Zs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ey=Gn(Ay),_y=T({},Zs,{data:0}),em=Gn(_y),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},My={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=My[i])?!!o[i]:!1}function Kl(){return Ry}var Ly=T({},tr,{key:function(i){if(i.key){var o=Py[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ro(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(i){return i.type==="keypress"?ro(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ro(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fy=Gn(Ly),Uy=T({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=Gn(Uy),Oy=T({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),$y=Gn(Oy),By=T({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vy=Gn(By),Ky=T({},lo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=Gn(Ky),Gy=[9,13,27,32],Hl=p&&"CompositionEvent"in window,ar=null;p&&"documentMode"in document&&(ar=document.documentMode);var qy=p&&"TextEvent"in window&&!ar,nm=p&&(!Hl||ar&&8<ar&&11>=ar),am=" ",sm=!1;function im(i,o){switch(i){case"keyup":return Gy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ei=!1;function Jy(i,o){switch(i){case"compositionend":return rm(o);case"keypress":return o.which!==32?null:(sm=!0,am);case"textInput":return i=o.data,i===am&&sm?null:i;default:return null}}function Wy(i,o){if(ei)return i==="compositionend"||!Hl&&im(i,o)?(i=Qu(),io=Ul=es=null,ei=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return nm&&o.locale!=="ko"?null:o.data;default:return null}}var zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!zy[i.type]:o==="textarea"}function lm(i,o,m,x){Nt(x),o=ho(o,"onChange"),0<o.length&&(m=new Ol("onChange","change",null,m,x),i.push({event:m,listeners:o}))}var sr=null,ir=null;function Yy(i){Tm(i,0)}function co(i){var o=ii(i);if(Ke(o))return i}function Qy(i,o){if(i==="change")return o}var dm=!1;if(p){var Gl;if(p){var ql="oninput"in document;if(!ql){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),ql=typeof cm.oninput=="function"}Gl=ql}else Gl=!1;dm=Gl&&(!document.documentMode||9<document.documentMode)}function um(){sr&&(sr.detachEvent("onpropertychange",mm),ir=sr=null)}function mm(i){if(i.propertyName==="value"&&co(ir)){var o=[];lm(o,ir,i,D(i)),Me(Yy,o)}}function Xy(i,o,m){i==="focusin"?(um(),sr=o,ir=m,sr.attachEvent("onpropertychange",mm)):i==="focusout"&&um()}function Zy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return co(ir)}function eb(i,o){if(i==="click")return co(o)}function tb(i,o){if(i==="input"||i==="change")return co(o)}function nb(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var da=typeof Object.is=="function"?Object.is:nb;function rr(i,o){if(da(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var m=Object.keys(i),x=Object.keys(o);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var b=m[x];if(!h.call(o,b)||!da(i[b],o[b]))return!1}return!0}function pm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hm(i,o){var m=pm(i);i=0;for(var x;m;){if(m.nodeType===3){if(x=i+m.textContent.length,i<=o&&x>=o)return{node:m,offset:o-i};i=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=pm(m)}}function fm(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?fm(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function gm(){for(var i=window,o=Qe();o instanceof i.HTMLIFrameElement;){try{var m=typeof o.contentWindow.location.href=="string"}catch{m=!1}if(m)i=o.contentWindow;else break;o=Qe(i.document)}return o}function Jl(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function ab(i){var o=gm(),m=i.focusedElem,x=i.selectionRange;if(o!==m&&m&&m.ownerDocument&&fm(m.ownerDocument.documentElement,m)){if(x!==null&&Jl(m)){if(o=x.start,i=x.end,i===void 0&&(i=o),"selectionStart"in m)m.selectionStart=o,m.selectionEnd=Math.min(i,m.value.length);else if(i=(o=m.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var b=m.textContent.length,N=Math.min(x.start,b);x=x.end===void 0?N:Math.min(x.end,b),!i.extend&&N>x&&(b=x,x=N,N=b),b=hm(m,N);var I=hm(m,x);b&&I&&(i.rangeCount!==1||i.anchorNode!==b.node||i.anchorOffset!==b.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(b.node,b.offset),i.removeAllRanges(),N>x?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=m;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<o.length;m++)i=o[m],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var sb=p&&"documentMode"in document&&11>=document.documentMode,ti=null,Wl=null,or=null,zl=!1;function xm(i,o,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;zl||ti==null||ti!==Qe(x)||(x=ti,"selectionStart"in x&&Jl(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),or&&rr(or,x)||(or=x,x=ho(Wl,"onSelect"),0<x.length&&(o=new Ol("onSelect","select",null,o,m),i.push({event:o,listeners:x}),o.target=ti)))}function uo(i,o){var m={};return m[i.toLowerCase()]=o.toLowerCase(),m["Webkit"+i]="webkit"+o,m["Moz"+i]="moz"+o,m}var ni={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},Yl={},ym={};p&&(ym=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function mo(i){if(Yl[i])return Yl[i];if(!ni[i])return i;var o=ni[i],m;for(m in o)if(o.hasOwnProperty(m)&&m in ym)return Yl[i]=o[m];return i}var bm=mo("animationend"),vm=mo("animationiteration"),Nm=mo("animationstart"),km=mo("transitionend"),jm=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(i,o){jm.set(i,o),d(o,[i])}for(var Ql=0;Ql<wm.length;Ql++){var Xl=wm[Ql],ib=Xl.toLowerCase(),rb=Xl[0].toUpperCase()+Xl.slice(1);ts(ib,"on"+rb)}ts(bm,"onAnimationEnd"),ts(vm,"onAnimationIteration"),ts(Nm,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(km,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("cancel close invalid load scroll toggle".split(" ").concat(lr));function Cm(i,o,m){var x=i.type||"unknown-event";i.currentTarget=m,He(x,o,void 0,i),i.currentTarget=null}function Tm(i,o){o=(o&4)!==0;for(var m=0;m<i.length;m++){var x=i[m],b=x.event;x=x.listeners;e:{var N=void 0;if(o)for(var I=x.length-1;0<=I;I--){var $=x[I],Y=$.instance,pe=$.currentTarget;if($=$.listener,Y!==N&&b.isPropagationStopped())break e;Cm(b,$,pe),N=Y}else for(I=0;I<x.length;I++){if($=x[I],Y=$.instance,pe=$.currentTarget,$=$.listener,Y!==N&&b.isPropagationStopped())break e;Cm(b,$,pe),N=Y}}}if(Fe)throw i=an,Fe=!1,an=null,i}function Vt(i,o){var m=o[rd];m===void 0&&(m=o[rd]=new Set);var x=i+"__bubble";m.has(x)||(Sm(o,i,2,!1),m.add(x))}function Zl(i,o,m){var x=0;o&&(x|=4),Sm(m,i,x,o)}var po="_reactListening"+Math.random().toString(36).slice(2);function dr(i){if(!i[po]){i[po]=!0,s.forEach(function(m){m!=="selectionchange"&&(ob.has(m)||Zl(m,!1,i),Zl(m,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[po]||(o[po]=!0,Zl("selectionchange",!1,o))}}function Sm(i,o,m,x){switch(Yu(o)){case 1:var b=Ny;break;case 4:b=ky;break;default:b=Ll}m=b.bind(null,o,m,i),b=void 0,!mt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),x?b!==void 0?i.addEventListener(o,m,{capture:!0,passive:b}):i.addEventListener(o,m,!0):b!==void 0?i.addEventListener(o,m,{passive:b}):i.addEventListener(o,m,!1)}function ed(i,o,m,x,b){var N=x;if((o&1)===0&&(o&2)===0&&x!==null)e:for(;;){if(x===null)return;var I=x.tag;if(I===3||I===4){var $=x.stateNode.containerInfo;if($===b||$.nodeType===8&&$.parentNode===b)break;if(I===4)for(I=x.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&(Y=I.stateNode.containerInfo,Y===b||Y.nodeType===8&&Y.parentNode===b))return;I=I.return}for(;$!==null;){if(I=Ss($),I===null)return;if(Y=I.tag,Y===5||Y===6){x=N=I;continue e}$=$.parentNode}}x=x.return}Me(function(){var pe=N,Pe=D(m),Le=[];e:{var Ee=jm.get(i);if(Ee!==void 0){var We=Ol,at=i;switch(i){case"keypress":if(ro(m)===0)break e;case"keydown":case"keyup":We=Fy;break;case"focusin":at="focus",We=Vl;break;case"focusout":at="blur",We=Vl;break;case"beforeblur":case"afterblur":We=Vl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=$y;break;case bm:case vm:case Nm:We=Iy;break;case km:We=Vy;break;case"scroll":We=jy;break;case"wheel":We=Hy;break;case"copy":case"cut":case"paste":We=Ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=tm}var it=(o&4)!==0,en=!it&&i==="scroll",oe=it?Ee!==null?Ee+"Capture":null:Ee;it=[];for(var ee=pe,me;ee!==null;){me=ee;var Oe=me.stateNode;if(me.tag===5&&Oe!==null&&(me=Oe,oe!==null&&(Oe=et(ee,oe),Oe!=null&&it.push(cr(ee,Oe,me)))),en)break;ee=ee.return}0<it.length&&(Ee=new We(Ee,at,null,m,Pe),Le.push({event:Ee,listeners:it}))}}if((o&7)===0){e:{if(Ee=i==="mouseover"||i==="pointerover",We=i==="mouseout"||i==="pointerout",Ee&&m!==_&&(at=m.relatedTarget||m.fromElement)&&(Ss(at)||at[Ra]))break e;if((We||Ee)&&(Ee=Pe.window===Pe?Pe:(Ee=Pe.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,We?(at=m.relatedTarget||m.toElement,We=pe,at=at?Ss(at):null,at!==null&&(en=Ge(at),at!==en||at.tag!==5&&at.tag!==6)&&(at=null)):(We=null,at=pe),We!==at)){if(it=Zu,Oe="onMouseLeave",oe="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(it=tm,Oe="onPointerLeave",oe="onPointerEnter",ee="pointer"),en=We==null?Ee:ii(We),me=at==null?Ee:ii(at),Ee=new it(Oe,ee+"leave",We,m,Pe),Ee.target=en,Ee.relatedTarget=me,Oe=null,Ss(Pe)===pe&&(it=new it(oe,ee+"enter",at,m,Pe),it.target=me,it.relatedTarget=en,Oe=it),en=Oe,We&&at)t:{for(it=We,oe=at,ee=0,me=it;me;me=ai(me))ee++;for(me=0,Oe=oe;Oe;Oe=ai(Oe))me++;for(;0<ee-me;)it=ai(it),ee--;for(;0<me-ee;)oe=ai(oe),me--;for(;ee--;){if(it===oe||oe!==null&&it===oe.alternate)break t;it=ai(it),oe=ai(oe)}it=null}else it=null;We!==null&&Im(Le,Ee,We,it,!1),at!==null&&en!==null&&Im(Le,en,at,it,!0)}}e:{if(Ee=pe?ii(pe):window,We=Ee.nodeName&&Ee.nodeName.toLowerCase(),We==="select"||We==="input"&&Ee.type==="file")var rt=Qy;else if(om(Ee))if(dm)rt=tb;else{rt=Zy;var pt=Xy}else(We=Ee.nodeName)&&We.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(rt=eb);if(rt&&(rt=rt(i,pe))){lm(Le,rt,m,Pe);break e}pt&&pt(i,Ee,pe),i==="focusout"&&(pt=Ee._wrapperState)&&pt.controlled&&Ee.type==="number"&&Ve(Ee,"number",Ee.value)}switch(pt=pe?ii(pe):window,i){case"focusin":(om(pt)||pt.contentEditable==="true")&&(ti=pt,Wl=pe,or=null);break;case"focusout":or=Wl=ti=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,xm(Le,m,Pe);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":xm(Le,m,Pe)}var ht;if(Hl)e:{switch(i){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else ei?im(i,m)&&(bt="onCompositionEnd"):i==="keydown"&&m.keyCode===229&&(bt="onCompositionStart");bt&&(nm&&m.locale!=="ko"&&(ei||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&ei&&(ht=Qu()):(es=Pe,Ul="value"in es?es.value:es.textContent,ei=!0)),pt=ho(pe,bt),0<pt.length&&(bt=new em(bt,i,null,m,Pe),Le.push({event:bt,listeners:pt}),ht?bt.data=ht:(ht=rm(m),ht!==null&&(bt.data=ht)))),(ht=qy?Jy(i,m):Wy(i,m))&&(pe=ho(pe,"onBeforeInput"),0<pe.length&&(Pe=new em("onBeforeInput","beforeinput",null,m,Pe),Le.push({event:Pe,listeners:pe}),Pe.data=ht))}Tm(Le,o)})}function cr(i,o,m){return{instance:i,listener:o,currentTarget:m}}function ho(i,o){for(var m=o+"Capture",x=[];i!==null;){var b=i,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=et(i,m),N!=null&&x.unshift(cr(i,N,b)),N=et(i,o),N!=null&&x.push(cr(i,N,b))),i=i.return}return x}function ai(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Im(i,o,m,x,b){for(var N=o._reactName,I=[];m!==null&&m!==x;){var $=m,Y=$.alternate,pe=$.stateNode;if(Y!==null&&Y===x)break;$.tag===5&&pe!==null&&($=pe,b?(Y=et(m,N),Y!=null&&I.unshift(cr(m,Y,$))):b||(Y=et(m,N),Y!=null&&I.push(cr(m,Y,$)))),m=m.return}I.length!==0&&i.push({event:o,listeners:I})}var lb=/\r\n?/g,db=/\u0000|\uFFFD/g;function Am(i){return(typeof i=="string"?i:""+i).replace(lb,`
`).replace(db,"")}function fo(i,o,m){if(o=Am(o),Am(i)!==o&&m)throw Error(a(425))}function go(){}var td=null,nd=null;function ad(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sd=typeof setTimeout=="function"?setTimeout:void 0,cb=typeof clearTimeout=="function"?clearTimeout:void 0,Em=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Em<"u"?function(i){return Em.resolve(null).then(i).catch(mb)}:sd;function mb(i){setTimeout(function(){throw i})}function id(i,o){var m=o,x=0;do{var b=m.nextSibling;if(i.removeChild(m),b&&b.nodeType===8)if(m=b.data,m==="/$"){if(x===0){i.removeChild(b),er(o);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=b}while(m);er(o)}function ns(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function _m(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var m=i.data;if(m==="$"||m==="$!"||m==="$?"){if(o===0)return i;o--}else m==="/$"&&o++}i=i.previousSibling}return null}var si=Math.random().toString(36).slice(2),Ca="__reactFiber$"+si,ur="__reactProps$"+si,Ra="__reactContainer$"+si,rd="__reactEvents$"+si,pb="__reactListeners$"+si,hb="__reactHandles$"+si;function Ss(i){var o=i[Ca];if(o)return o;for(var m=i.parentNode;m;){if(o=m[Ra]||m[Ca]){if(m=o.alternate,o.child!==null||m!==null&&m.child!==null)for(i=_m(i);i!==null;){if(m=i[Ca])return m;i=_m(i)}return o}i=m,m=i.parentNode}return null}function mr(i){return i=i[Ca]||i[Ra],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ii(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(a(33))}function xo(i){return i[ur]||null}var od=[],ri=-1;function as(i){return{current:i}}function Kt(i){0>ri||(i.current=od[ri],od[ri]=null,ri--)}function $t(i,o){ri++,od[ri]=i.current,i.current=o}var ss={},Cn=as(ss),Un=as(!1),Is=ss;function oi(i,o){var m=i.type.contextTypes;if(!m)return ss;var x=i.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===o)return x.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in m)b[N]=o[N];return x&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=b),b}function On(i){return i=i.childContextTypes,i!=null}function yo(){Kt(Un),Kt(Cn)}function Pm(i,o,m){if(Cn.current!==ss)throw Error(a(168));$t(Cn,o),$t(Un,m)}function Dm(i,o,m){var x=i.stateNode;if(o=o.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var b in x)if(!(b in o))throw Error(a(108,le(i)||"Unknown",b));return T({},m,x)}function bo(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ss,Is=Cn.current,$t(Cn,i),$t(Un,Un.current),!0}function Mm(i,o,m){var x=i.stateNode;if(!x)throw Error(a(169));m?(i=Dm(i,o,Is),x.__reactInternalMemoizedMergedChildContext=i,Kt(Un),Kt(Cn),$t(Cn,i)):Kt(Un),$t(Un,m)}var La=null,vo=!1,ld=!1;function Rm(i){La===null?La=[i]:La.push(i)}function fb(i){vo=!0,Rm(i)}function is(){if(!ld&&La!==null){ld=!0;var i=0,o=Ut;try{var m=La;for(Ut=1;i<m.length;i++){var x=m[i];do x=x(!0);while(x!==null)}La=null,vo=!1}catch(b){throw La!==null&&(La=La.slice(i+1)),Cs(El,is),b}finally{Ut=o,ld=!1}}return null}var li=[],di=0,No=null,ko=0,zn=[],Yn=0,As=null,Fa=1,Ua="";function Es(i,o){li[di++]=ko,li[di++]=No,No=i,ko=o}function Lm(i,o,m){zn[Yn++]=Fa,zn[Yn++]=Ua,zn[Yn++]=As,As=i;var x=Fa;i=Ua;var b=32-la(x)-1;x&=~(1<<b),m+=1;var N=32-la(o)+b;if(30<N){var I=b-b%5;N=(x&(1<<I)-1).toString(32),x>>=I,b-=I,Fa=1<<32-la(o)+b|m<<b|x,Ua=N+i}else Fa=1<<N|m<<b|x,Ua=i}function dd(i){i.return!==null&&(Es(i,1),Lm(i,1,0))}function cd(i){for(;i===No;)No=li[--di],li[di]=null,ko=li[--di],li[di]=null;for(;i===As;)As=zn[--Yn],zn[Yn]=null,Ua=zn[--Yn],zn[Yn]=null,Fa=zn[--Yn],zn[Yn]=null}var qn=null,Jn=null,Gt=!1,ca=null;function Fm(i,o){var m=ea(5,null,null,0);m.elementType="DELETED",m.stateNode=o,m.return=i,o=i.deletions,o===null?(i.deletions=[m],i.flags|=16):o.push(m)}function Um(i,o){switch(i.tag){case 5:var m=i.type;return o=o.nodeType!==1||m.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,qn=i,Jn=ns(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,qn=i,Jn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(m=As!==null?{id:Fa,overflow:Ua}:null,i.memoizedState={dehydrated:o,treeContext:m,retryLane:1073741824},m=ea(18,null,null,0),m.stateNode=o,m.return=i,i.child=m,qn=i,Jn=null,!0):!1;default:return!1}}function ud(i){return(i.mode&1)!==0&&(i.flags&128)===0}function md(i){if(Gt){var o=Jn;if(o){var m=o;if(!Um(i,o)){if(ud(i))throw Error(a(418));o=ns(m.nextSibling);var x=qn;o&&Um(i,o)?Fm(x,m):(i.flags=i.flags&-4097|2,Gt=!1,qn=i)}}else{if(ud(i))throw Error(a(418));i.flags=i.flags&-4097|2,Gt=!1,qn=i}}}function Om(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;qn=i}function jo(i){if(i!==qn)return!1;if(!Gt)return Om(i),Gt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!ad(i.type,i.memoizedProps)),o&&(o=Jn)){if(ud(i))throw $m(),Error(a(418));for(;o;)Fm(i,o),o=ns(o.nextSibling)}if(Om(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var m=i.data;if(m==="/$"){if(o===0){Jn=ns(i.nextSibling);break e}o--}else m!=="$"&&m!=="$!"&&m!=="$?"||o++}i=i.nextSibling}Jn=null}}else Jn=qn?ns(i.stateNode.nextSibling):null;return!0}function $m(){for(var i=Jn;i;)i=ns(i.nextSibling)}function ci(){Jn=qn=null,Gt=!1}function pd(i){ca===null?ca=[i]:ca.push(i)}var gb=O.ReactCurrentBatchConfig;function ua(i,o){if(i&&i.defaultProps){o=T({},o),i=i.defaultProps;for(var m in i)o[m]===void 0&&(o[m]=i[m]);return o}return o}var wo=as(null),Co=null,ui=null,hd=null;function fd(){hd=ui=Co=null}function gd(i){var o=wo.current;Kt(wo),i._currentValue=o}function xd(i,o,m){for(;i!==null;){var x=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,x!==null&&(x.childLanes|=o)):x!==null&&(x.childLanes&o)!==o&&(x.childLanes|=o),i===m)break;i=i.return}}function mi(i,o){Co=i,hd=ui=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&($n=!0),i.firstContext=null)}function Qn(i){var o=i._currentValue;if(hd!==i)if(i={context:i,memoizedValue:o,next:null},ui===null){if(Co===null)throw Error(a(308));ui=i,Co.dependencies={lanes:0,firstContext:i}}else ui=ui.next=i;return o}var _s=null;function yd(i){_s===null?_s=[i]:_s.push(i)}function Bm(i,o,m,x){var b=o.interleaved;return b===null?(m.next=m,yd(o)):(m.next=b.next,b.next=m),o.interleaved=m,Oa(i,x)}function Oa(i,o){i.lanes|=o;var m=i.alternate;for(m!==null&&(m.lanes|=o),m=i,i=i.return;i!==null;)i.childLanes|=o,m=i.alternate,m!==null&&(m.childLanes|=o),m=i,i=i.return;return m.tag===3?m.stateNode:null}var rs=!1;function bd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function $a(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function os(i,o,m){var x=i.updateQueue;if(x===null)return null;if(x=x.shared,(Pt&2)!==0){var b=x.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),x.pending=o,Oa(i,m)}return b=x.interleaved,b===null?(o.next=o,yd(x)):(o.next=b.next,b.next=o),x.interleaved=o,Oa(i,m)}function To(i,o,m){if(o=o.updateQueue,o!==null&&(o=o.shared,(m&4194240)!==0)){var x=o.lanes;x&=i.pendingLanes,m|=x,o.lanes=m,Dl(i,m)}}function Km(i,o){var m=i.updateQueue,x=i.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var b=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var I={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};N===null?b=N=I:N=N.next=I,m=m.next}while(m!==null);N===null?b=N=o:N=N.next=o}else b=N=o;m={baseState:x.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:x.shared,effects:x.effects},i.updateQueue=m;return}i=m.lastBaseUpdate,i===null?m.firstBaseUpdate=o:i.next=o,m.lastBaseUpdate=o}function So(i,o,m,x){var b=i.updateQueue;rs=!1;var N=b.firstBaseUpdate,I=b.lastBaseUpdate,$=b.shared.pending;if($!==null){b.shared.pending=null;var Y=$,pe=Y.next;Y.next=null,I===null?N=pe:I.next=pe,I=Y;var Pe=i.alternate;Pe!==null&&(Pe=Pe.updateQueue,$=Pe.lastBaseUpdate,$!==I&&($===null?Pe.firstBaseUpdate=pe:$.next=pe,Pe.lastBaseUpdate=Y))}if(N!==null){var Le=b.baseState;I=0,Pe=pe=Y=null,$=N;do{var Ee=$.lane,We=$.eventTime;if((x&Ee)===Ee){Pe!==null&&(Pe=Pe.next={eventTime:We,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var at=i,it=$;switch(Ee=o,We=m,it.tag){case 1:if(at=it.payload,typeof at=="function"){Le=at.call(We,Le,Ee);break e}Le=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=it.payload,Ee=typeof at=="function"?at.call(We,Le,Ee):at,Ee==null)break e;Le=T({},Le,Ee);break e;case 2:rs=!0}}$.callback!==null&&$.lane!==0&&(i.flags|=64,Ee=b.effects,Ee===null?b.effects=[$]:Ee.push($))}else We={eventTime:We,lane:Ee,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Pe===null?(pe=Pe=We,Y=Le):Pe=Pe.next=We,I|=Ee;if($=$.next,$===null){if($=b.shared.pending,$===null)break;Ee=$,$=Ee.next,Ee.next=null,b.lastBaseUpdate=Ee,b.shared.pending=null}}while(!0);if(Pe===null&&(Y=Le),b.baseState=Y,b.firstBaseUpdate=pe,b.lastBaseUpdate=Pe,o=b.shared.interleaved,o!==null){b=o;do I|=b.lane,b=b.next;while(b!==o)}else N===null&&(b.shared.lanes=0);Ms|=I,i.lanes=I,i.memoizedState=Le}}function Hm(i,o,m){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var x=i[o],b=x.callback;if(b!==null){if(x.callback=null,x=m,typeof b!="function")throw Error(a(191,b));b.call(x)}}}var Gm=new n.Component().refs;function vd(i,o,m,x){o=i.memoizedState,m=m(x,o),m=m==null?o:T({},o,m),i.memoizedState=m,i.lanes===0&&(i.updateQueue.baseState=m)}var Io={isMounted:function(i){return(i=i._reactInternals)?Ge(i)===i:!1},enqueueSetState:function(i,o,m){i=i._reactInternals;var x=Mn(),b=us(i),N=$a(x,b);N.payload=o,m!=null&&(N.callback=m),o=os(i,N,b),o!==null&&(ha(o,i,b,x),To(o,i,b))},enqueueReplaceState:function(i,o,m){i=i._reactInternals;var x=Mn(),b=us(i),N=$a(x,b);N.tag=1,N.payload=o,m!=null&&(N.callback=m),o=os(i,N,b),o!==null&&(ha(o,i,b,x),To(o,i,b))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var m=Mn(),x=us(i),b=$a(m,x);b.tag=2,o!=null&&(b.callback=o),o=os(i,b,x),o!==null&&(ha(o,i,x,m),To(o,i,x))}};function qm(i,o,m,x,b,N,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(x,N,I):o.prototype&&o.prototype.isPureReactComponent?!rr(m,x)||!rr(b,N):!0}function Jm(i,o,m){var x=!1,b=ss,N=o.contextType;return typeof N=="object"&&N!==null?N=Qn(N):(b=On(o)?Is:Cn.current,x=o.contextTypes,N=(x=x!=null)?oi(i,b):ss),o=new o(m,N),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Io,i.stateNode=o,o._reactInternals=i,x&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=b,i.__reactInternalMemoizedMaskedChildContext=N),o}function Wm(i,o,m,x){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(m,x),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(m,x),o.state!==i&&Io.enqueueReplaceState(o,o.state,null)}function Nd(i,o,m,x){var b=i.stateNode;b.props=m,b.state=i.memoizedState,b.refs=Gm,bd(i);var N=o.contextType;typeof N=="object"&&N!==null?b.context=Qn(N):(N=On(o)?Is:Cn.current,b.context=oi(i,N)),b.state=i.memoizedState,N=o.getDerivedStateFromProps,typeof N=="function"&&(vd(i,o,N,m),b.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(o=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),o!==b.state&&Io.enqueueReplaceState(b,b.state,null),So(i,m,b,x),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308)}function pr(i,o,m){if(i=m.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(a(309));var x=m.stateNode}if(!x)throw Error(a(147,i));var b=x,N=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===N?o.ref:(o=function(I){var $=b.refs;$===Gm&&($=b.refs={}),I===null?delete $[N]:$[N]=I},o._stringRef=N,o)}if(typeof i!="string")throw Error(a(284));if(!m._owner)throw Error(a(290,i))}return i}function Ao(i,o){throw i=Object.prototype.toString.call(o),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function zm(i){var o=i._init;return o(i._payload)}function Ym(i){function o(oe,ee){if(i){var me=oe.deletions;me===null?(oe.deletions=[ee],oe.flags|=16):me.push(ee)}}function m(oe,ee){if(!i)return null;for(;ee!==null;)o(oe,ee),ee=ee.sibling;return null}function x(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function b(oe,ee){return oe=ps(oe,ee),oe.index=0,oe.sibling=null,oe}function N(oe,ee,me){return oe.index=me,i?(me=oe.alternate,me!==null?(me=me.index,me<ee?(oe.flags|=2,ee):me):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function I(oe){return i&&oe.alternate===null&&(oe.flags|=2),oe}function $(oe,ee,me,Oe){return ee===null||ee.tag!==6?(ee=sc(me,oe.mode,Oe),ee.return=oe,ee):(ee=b(ee,me),ee.return=oe,ee)}function Y(oe,ee,me,Oe){var rt=me.type;return rt===U?Pe(oe,ee,me.props.children,Oe,me.key):ee!==null&&(ee.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===re&&zm(rt)===ee.type)?(Oe=b(ee,me.props),Oe.ref=pr(oe,ee,me),Oe.return=oe,Oe):(Oe=Wo(me.type,me.key,me.props,null,oe.mode,Oe),Oe.ref=pr(oe,ee,me),Oe.return=oe,Oe)}function pe(oe,ee,me,Oe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==me.containerInfo||ee.stateNode.implementation!==me.implementation?(ee=ic(me,oe.mode,Oe),ee.return=oe,ee):(ee=b(ee,me.children||[]),ee.return=oe,ee)}function Pe(oe,ee,me,Oe,rt){return ee===null||ee.tag!==7?(ee=Us(me,oe.mode,Oe,rt),ee.return=oe,ee):(ee=b(ee,me),ee.return=oe,ee)}function Le(oe,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=sc(""+ee,oe.mode,me),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case H:return me=Wo(ee.type,ee.key,ee.props,null,oe.mode,me),me.ref=pr(oe,null,ee),me.return=oe,me;case L:return ee=ic(ee,oe.mode,me),ee.return=oe,ee;case re:var Oe=ee._init;return Le(oe,Oe(ee._payload),me)}if(_e(ee)||E(ee))return ee=Us(ee,oe.mode,me,null),ee.return=oe,ee;Ao(oe,ee)}return null}function Ee(oe,ee,me,Oe){var rt=ee!==null?ee.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return rt!==null?null:$(oe,ee,""+me,Oe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case H:return me.key===rt?Y(oe,ee,me,Oe):null;case L:return me.key===rt?pe(oe,ee,me,Oe):null;case re:return rt=me._init,Ee(oe,ee,rt(me._payload),Oe)}if(_e(me)||E(me))return rt!==null?null:Pe(oe,ee,me,Oe,null);Ao(oe,me)}return null}function We(oe,ee,me,Oe,rt){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return oe=oe.get(me)||null,$(ee,oe,""+Oe,rt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case H:return oe=oe.get(Oe.key===null?me:Oe.key)||null,Y(ee,oe,Oe,rt);case L:return oe=oe.get(Oe.key===null?me:Oe.key)||null,pe(ee,oe,Oe,rt);case re:var pt=Oe._init;return We(oe,ee,me,pt(Oe._payload),rt)}if(_e(Oe)||E(Oe))return oe=oe.get(me)||null,Pe(ee,oe,Oe,rt,null);Ao(ee,Oe)}return null}function at(oe,ee,me,Oe){for(var rt=null,pt=null,ht=ee,bt=ee=0,yn=null;ht!==null&&bt<me.length;bt++){ht.index>bt?(yn=ht,ht=null):yn=ht.sibling;var Mt=Ee(oe,ht,me[bt],Oe);if(Mt===null){ht===null&&(ht=yn);break}i&&ht&&Mt.alternate===null&&o(oe,ht),ee=N(Mt,ee,bt),pt===null?rt=Mt:pt.sibling=Mt,pt=Mt,ht=yn}if(bt===me.length)return m(oe,ht),Gt&&Es(oe,bt),rt;if(ht===null){for(;bt<me.length;bt++)ht=Le(oe,me[bt],Oe),ht!==null&&(ee=N(ht,ee,bt),pt===null?rt=ht:pt.sibling=ht,pt=ht);return Gt&&Es(oe,bt),rt}for(ht=x(oe,ht);bt<me.length;bt++)yn=We(ht,oe,bt,me[bt],Oe),yn!==null&&(i&&yn.alternate!==null&&ht.delete(yn.key===null?bt:yn.key),ee=N(yn,ee,bt),pt===null?rt=yn:pt.sibling=yn,pt=yn);return i&&ht.forEach(function(hs){return o(oe,hs)}),Gt&&Es(oe,bt),rt}function it(oe,ee,me,Oe){var rt=E(me);if(typeof rt!="function")throw Error(a(150));if(me=rt.call(me),me==null)throw Error(a(151));for(var pt=rt=null,ht=ee,bt=ee=0,yn=null,Mt=me.next();ht!==null&&!Mt.done;bt++,Mt=me.next()){ht.index>bt?(yn=ht,ht=null):yn=ht.sibling;var hs=Ee(oe,ht,Mt.value,Oe);if(hs===null){ht===null&&(ht=yn);break}i&&ht&&hs.alternate===null&&o(oe,ht),ee=N(hs,ee,bt),pt===null?rt=hs:pt.sibling=hs,pt=hs,ht=yn}if(Mt.done)return m(oe,ht),Gt&&Es(oe,bt),rt;if(ht===null){for(;!Mt.done;bt++,Mt=me.next())Mt=Le(oe,Mt.value,Oe),Mt!==null&&(ee=N(Mt,ee,bt),pt===null?rt=Mt:pt.sibling=Mt,pt=Mt);return Gt&&Es(oe,bt),rt}for(ht=x(oe,ht);!Mt.done;bt++,Mt=me.next())Mt=We(ht,oe,bt,Mt.value,Oe),Mt!==null&&(i&&Mt.alternate!==null&&ht.delete(Mt.key===null?bt:Mt.key),ee=N(Mt,ee,bt),pt===null?rt=Mt:pt.sibling=Mt,pt=Mt);return i&&ht.forEach(function(zb){return o(oe,zb)}),Gt&&Es(oe,bt),rt}function en(oe,ee,me,Oe){if(typeof me=="object"&&me!==null&&me.type===U&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case H:e:{for(var rt=me.key,pt=ee;pt!==null;){if(pt.key===rt){if(rt=me.type,rt===U){if(pt.tag===7){m(oe,pt.sibling),ee=b(pt,me.props.children),ee.return=oe,oe=ee;break e}}else if(pt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===re&&zm(rt)===pt.type){m(oe,pt.sibling),ee=b(pt,me.props),ee.ref=pr(oe,pt,me),ee.return=oe,oe=ee;break e}m(oe,pt);break}else o(oe,pt);pt=pt.sibling}me.type===U?(ee=Us(me.props.children,oe.mode,Oe,me.key),ee.return=oe,oe=ee):(Oe=Wo(me.type,me.key,me.props,null,oe.mode,Oe),Oe.ref=pr(oe,ee,me),Oe.return=oe,oe=Oe)}return I(oe);case L:e:{for(pt=me.key;ee!==null;){if(ee.key===pt)if(ee.tag===4&&ee.stateNode.containerInfo===me.containerInfo&&ee.stateNode.implementation===me.implementation){m(oe,ee.sibling),ee=b(ee,me.children||[]),ee.return=oe,oe=ee;break e}else{m(oe,ee);break}else o(oe,ee);ee=ee.sibling}ee=ic(me,oe.mode,Oe),ee.return=oe,oe=ee}return I(oe);case re:return pt=me._init,en(oe,ee,pt(me._payload),Oe)}if(_e(me))return at(oe,ee,me,Oe);if(E(me))return it(oe,ee,me,Oe);Ao(oe,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ee!==null&&ee.tag===6?(m(oe,ee.sibling),ee=b(ee,me),ee.return=oe,oe=ee):(m(oe,ee),ee=sc(me,oe.mode,Oe),ee.return=oe,oe=ee),I(oe)):m(oe,ee)}return en}var pi=Ym(!0),Qm=Ym(!1),hr={},Ta=as(hr),fr=as(hr),gr=as(hr);function Ps(i){if(i===hr)throw Error(a(174));return i}function kd(i,o){switch($t(gr,o),$t(fr,i),$t(Ta,hr),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ot(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=ot(o,i)}Kt(Ta),$t(Ta,o)}function hi(){Kt(Ta),Kt(fr),Kt(gr)}function Xm(i){Ps(gr.current);var o=Ps(Ta.current),m=ot(o,i.type);o!==m&&($t(fr,i),$t(Ta,m))}function jd(i){fr.current===i&&(Kt(Ta),Kt(fr))}var Jt=as(0);function Eo(i){for(var o=i;o!==null;){if(o.tag===13){var m=o.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wd=[];function Cd(){for(var i=0;i<wd.length;i++)wd[i]._workInProgressVersionPrimary=null;wd.length=0}var _o=O.ReactCurrentDispatcher,Td=O.ReactCurrentBatchConfig,Ds=0,Wt=null,dn=null,gn=null,Po=!1,xr=!1,yr=0,xb=0;function Tn(){throw Error(a(321))}function Sd(i,o){if(o===null)return!1;for(var m=0;m<o.length&&m<i.length;m++)if(!da(i[m],o[m]))return!1;return!0}function Id(i,o,m,x,b,N){if(Ds=N,Wt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,_o.current=i===null||i.memoizedState===null?Nb:kb,i=m(x,b),xr){N=0;do{if(xr=!1,yr=0,25<=N)throw Error(a(301));N+=1,gn=dn=null,o.updateQueue=null,_o.current=jb,i=m(x,b)}while(xr)}if(_o.current=Ro,o=dn!==null&&dn.next!==null,Ds=0,gn=dn=Wt=null,Po=!1,o)throw Error(a(300));return i}function Ad(){var i=yr!==0;return yr=0,i}function Sa(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Wt.memoizedState=gn=i:gn=gn.next=i,gn}function Xn(){if(dn===null){var i=Wt.alternate;i=i!==null?i.memoizedState:null}else i=dn.next;var o=gn===null?Wt.memoizedState:gn.next;if(o!==null)gn=o,dn=i;else{if(i===null)throw Error(a(310));dn=i,i={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},gn===null?Wt.memoizedState=gn=i:gn=gn.next=i}return gn}function br(i,o){return typeof o=="function"?o(i):o}function Ed(i){var o=Xn(),m=o.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=i;var x=dn,b=x.baseQueue,N=m.pending;if(N!==null){if(b!==null){var I=b.next;b.next=N.next,N.next=I}x.baseQueue=b=N,m.pending=null}if(b!==null){N=b.next,x=x.baseState;var $=I=null,Y=null,pe=N;do{var Pe=pe.lane;if((Ds&Pe)===Pe)Y!==null&&(Y=Y.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),x=pe.hasEagerState?pe.eagerState:i(x,pe.action);else{var Le={lane:Pe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};Y===null?($=Y=Le,I=x):Y=Y.next=Le,Wt.lanes|=Pe,Ms|=Pe}pe=pe.next}while(pe!==null&&pe!==N);Y===null?I=x:Y.next=$,da(x,o.memoizedState)||($n=!0),o.memoizedState=x,o.baseState=I,o.baseQueue=Y,m.lastRenderedState=x}if(i=m.interleaved,i!==null){b=i;do N=b.lane,Wt.lanes|=N,Ms|=N,b=b.next;while(b!==i)}else b===null&&(m.lanes=0);return[o.memoizedState,m.dispatch]}function _d(i){var o=Xn(),m=o.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=i;var x=m.dispatch,b=m.pending,N=o.memoizedState;if(b!==null){m.pending=null;var I=b=b.next;do N=i(N,I.action),I=I.next;while(I!==b);da(N,o.memoizedState)||($n=!0),o.memoizedState=N,o.baseQueue===null&&(o.baseState=N),m.lastRenderedState=N}return[N,x]}function Zm(){}function ep(i,o){var m=Wt,x=Xn(),b=o(),N=!da(x.memoizedState,b);if(N&&(x.memoizedState=b,$n=!0),x=x.queue,Pd(ap.bind(null,m,x,i),[i]),x.getSnapshot!==o||N||gn!==null&&gn.memoizedState.tag&1){if(m.flags|=2048,vr(9,np.bind(null,m,x,b,o),void 0,null),xn===null)throw Error(a(349));(Ds&30)!==0||tp(m,o,b)}return b}function tp(i,o,m){i.flags|=16384,i={getSnapshot:o,value:m},o=Wt.updateQueue,o===null?(o={lastEffect:null,stores:null},Wt.updateQueue=o,o.stores=[i]):(m=o.stores,m===null?o.stores=[i]:m.push(i))}function np(i,o,m,x){o.value=m,o.getSnapshot=x,sp(o)&&ip(i)}function ap(i,o,m){return m(function(){sp(o)&&ip(i)})}function sp(i){var o=i.getSnapshot;i=i.value;try{var m=o();return!da(i,m)}catch{return!0}}function ip(i){var o=Oa(i,1);o!==null&&ha(o,i,1,-1)}function rp(i){var o=Sa();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:i},o.queue=i,i=i.dispatch=vb.bind(null,Wt,i),[o.memoizedState,i]}function vr(i,o,m,x){return i={tag:i,create:o,destroy:m,deps:x,next:null},o=Wt.updateQueue,o===null?(o={lastEffect:null,stores:null},Wt.updateQueue=o,o.lastEffect=i.next=i):(m=o.lastEffect,m===null?o.lastEffect=i.next=i:(x=m.next,m.next=i,i.next=x,o.lastEffect=i)),i}function op(){return Xn().memoizedState}function Do(i,o,m,x){var b=Sa();Wt.flags|=i,b.memoizedState=vr(1|o,m,void 0,x===void 0?null:x)}function Mo(i,o,m,x){var b=Xn();x=x===void 0?null:x;var N=void 0;if(dn!==null){var I=dn.memoizedState;if(N=I.destroy,x!==null&&Sd(x,I.deps)){b.memoizedState=vr(o,m,N,x);return}}Wt.flags|=i,b.memoizedState=vr(1|o,m,N,x)}function lp(i,o){return Do(8390656,8,i,o)}function Pd(i,o){return Mo(2048,8,i,o)}function dp(i,o){return Mo(4,2,i,o)}function cp(i,o){return Mo(4,4,i,o)}function up(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function mp(i,o,m){return m=m!=null?m.concat([i]):null,Mo(4,4,up.bind(null,o,i),m)}function Dd(){}function pp(i,o){var m=Xn();o=o===void 0?null:o;var x=m.memoizedState;return x!==null&&o!==null&&Sd(o,x[1])?x[0]:(m.memoizedState=[i,o],i)}function hp(i,o){var m=Xn();o=o===void 0?null:o;var x=m.memoizedState;return x!==null&&o!==null&&Sd(o,x[1])?x[0]:(i=i(),m.memoizedState=[i,o],i)}function fp(i,o,m){return(Ds&21)===0?(i.baseState&&(i.baseState=!1,$n=!0),i.memoizedState=m):(da(m,o)||(m=Bu(),Wt.lanes|=m,Ms|=m,i.baseState=!0),o)}function yb(i,o){var m=Ut;Ut=m!==0&&4>m?m:4,i(!0);var x=Td.transition;Td.transition={};try{i(!1),o()}finally{Ut=m,Td.transition=x}}function gp(){return Xn().memoizedState}function bb(i,o,m){var x=us(i);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},xp(i))yp(o,m);else if(m=Bm(i,o,m,x),m!==null){var b=Mn();ha(m,i,x,b),bp(m,o,x)}}function vb(i,o,m){var x=us(i),b={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(xp(i))yp(o,b);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=o.lastRenderedReducer,N!==null))try{var I=o.lastRenderedState,$=N(I,m);if(b.hasEagerState=!0,b.eagerState=$,da($,I)){var Y=o.interleaved;Y===null?(b.next=b,yd(o)):(b.next=Y.next,Y.next=b),o.interleaved=b;return}}catch{}finally{}m=Bm(i,o,b,x),m!==null&&(b=Mn(),ha(m,i,x,b),bp(m,o,x))}}function xp(i){var o=i.alternate;return i===Wt||o!==null&&o===Wt}function yp(i,o){xr=Po=!0;var m=i.pending;m===null?o.next=o:(o.next=m.next,m.next=o),i.pending=o}function bp(i,o,m){if((m&4194240)!==0){var x=o.lanes;x&=i.pendingLanes,m|=x,o.lanes=m,Dl(i,m)}}var Ro={readContext:Qn,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},Nb={readContext:Qn,useCallback:function(i,o){return Sa().memoizedState=[i,o===void 0?null:o],i},useContext:Qn,useEffect:lp,useImperativeHandle:function(i,o,m){return m=m!=null?m.concat([i]):null,Do(4194308,4,up.bind(null,o,i),m)},useLayoutEffect:function(i,o){return Do(4194308,4,i,o)},useInsertionEffect:function(i,o){return Do(4,2,i,o)},useMemo:function(i,o){var m=Sa();return o=o===void 0?null:o,i=i(),m.memoizedState=[i,o],i},useReducer:function(i,o,m){var x=Sa();return o=m!==void 0?m(o):o,x.memoizedState=x.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},x.queue=i,i=i.dispatch=bb.bind(null,Wt,i),[x.memoizedState,i]},useRef:function(i){var o=Sa();return i={current:i},o.memoizedState=i},useState:rp,useDebugValue:Dd,useDeferredValue:function(i){return Sa().memoizedState=i},useTransition:function(){var i=rp(!1),o=i[0];return i=yb.bind(null,i[1]),Sa().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,m){var x=Wt,b=Sa();if(Gt){if(m===void 0)throw Error(a(407));m=m()}else{if(m=o(),xn===null)throw Error(a(349));(Ds&30)!==0||tp(x,o,m)}b.memoizedState=m;var N={value:m,getSnapshot:o};return b.queue=N,lp(ap.bind(null,x,N,i),[i]),x.flags|=2048,vr(9,np.bind(null,x,N,m,o),void 0,null),m},useId:function(){var i=Sa(),o=xn.identifierPrefix;if(Gt){var m=Ua,x=Fa;m=(x&~(1<<32-la(x)-1)).toString(32)+m,o=":"+o+"R"+m,m=yr++,0<m&&(o+="H"+m.toString(32)),o+=":"}else m=xb++,o=":"+o+"r"+m.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},kb={readContext:Qn,useCallback:pp,useContext:Qn,useEffect:Pd,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:cp,useMemo:hp,useReducer:Ed,useRef:op,useState:function(){return Ed(br)},useDebugValue:Dd,useDeferredValue:function(i){var o=Xn();return fp(o,dn.memoizedState,i)},useTransition:function(){var i=Ed(br)[0],o=Xn().memoizedState;return[i,o]},useMutableSource:Zm,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1},jb={readContext:Qn,useCallback:pp,useContext:Qn,useEffect:Pd,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:cp,useMemo:hp,useReducer:_d,useRef:op,useState:function(){return _d(br)},useDebugValue:Dd,useDeferredValue:function(i){var o=Xn();return dn===null?o.memoizedState=i:fp(o,dn.memoizedState,i)},useTransition:function(){var i=_d(br)[0],o=Xn().memoizedState;return[i,o]},useMutableSource:Zm,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1};function fi(i,o){try{var m="",x=o;do m+=he(x),x=x.return;while(x);var b=m}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:i,source:o,stack:b,digest:null}}function Md(i,o,m){return{value:i,source:null,stack:m??null,digest:o??null}}function Rd(i,o){try{console.error(o.value)}catch(m){setTimeout(function(){throw m})}}var wb=typeof WeakMap=="function"?WeakMap:Map;function vp(i,o,m){m=$a(-1,m),m.tag=3,m.payload={element:null};var x=o.value;return m.callback=function(){Vo||(Vo=!0,Yd=x),Rd(i,o)},m}function Np(i,o,m){m=$a(-1,m),m.tag=3;var x=i.type.getDerivedStateFromError;if(typeof x=="function"){var b=o.value;m.payload=function(){return x(b)},m.callback=function(){Rd(i,o)}}var N=i.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(m.callback=function(){Rd(i,o),typeof x!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),m}function kp(i,o,m){var x=i.pingCache;if(x===null){x=i.pingCache=new wb;var b=new Set;x.set(o,b)}else b=x.get(o),b===void 0&&(b=new Set,x.set(o,b));b.has(m)||(b.add(m),i=Ub.bind(null,i,o,m),o.then(i,i))}function jp(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function wp(i,o,m,x,b){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(o=$a(-1,1),o.tag=2,os(m,o,1))),m.lanes|=1),i):(i.flags|=65536,i.lanes=b,i)}var Cb=O.ReactCurrentOwner,$n=!1;function Dn(i,o,m,x){o.child=i===null?Qm(o,null,m,x):pi(o,i.child,m,x)}function Cp(i,o,m,x,b){m=m.render;var N=o.ref;return mi(o,b),x=Id(i,o,m,x,N,b),m=Ad(),i!==null&&!$n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~b,Ba(i,o,b)):(Gt&&m&&dd(o),o.flags|=1,Dn(i,o,x,b),o.child)}function Tp(i,o,m,x,b){if(i===null){var N=m.type;return typeof N=="function"&&!ac(N)&&N.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(o.tag=15,o.type=N,Sp(i,o,N,x,b)):(i=Wo(m.type,null,x,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(N=i.child,(i.lanes&b)===0){var I=N.memoizedProps;if(m=m.compare,m=m!==null?m:rr,m(I,x)&&i.ref===o.ref)return Ba(i,o,b)}return o.flags|=1,i=ps(N,x),i.ref=o.ref,i.return=o,o.child=i}function Sp(i,o,m,x,b){if(i!==null){var N=i.memoizedProps;if(rr(N,x)&&i.ref===o.ref)if($n=!1,o.pendingProps=x=N,(i.lanes&b)!==0)(i.flags&131072)!==0&&($n=!0);else return o.lanes=i.lanes,Ba(i,o,b)}return Ld(i,o,m,x,b)}function Ip(i,o,m){var x=o.pendingProps,b=x.children,N=i!==null?i.memoizedState:null;if(x.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(xi,Wn),Wn|=m;else{if((m&1073741824)===0)return i=N!==null?N.baseLanes|m:m,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,$t(xi,Wn),Wn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=N!==null?N.baseLanes:m,$t(xi,Wn),Wn|=x}else N!==null?(x=N.baseLanes|m,o.memoizedState=null):x=m,$t(xi,Wn),Wn|=x;return Dn(i,o,b,m),o.child}function Ap(i,o){var m=o.ref;(i===null&&m!==null||i!==null&&i.ref!==m)&&(o.flags|=512,o.flags|=2097152)}function Ld(i,o,m,x,b){var N=On(m)?Is:Cn.current;return N=oi(o,N),mi(o,b),m=Id(i,o,m,x,N,b),x=Ad(),i!==null&&!$n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~b,Ba(i,o,b)):(Gt&&x&&dd(o),o.flags|=1,Dn(i,o,m,b),o.child)}function Ep(i,o,m,x,b){if(On(m)){var N=!0;bo(o)}else N=!1;if(mi(o,b),o.stateNode===null)Fo(i,o),Jm(o,m,x),Nd(o,m,x,b),x=!0;else if(i===null){var I=o.stateNode,$=o.memoizedProps;I.props=$;var Y=I.context,pe=m.contextType;typeof pe=="object"&&pe!==null?pe=Qn(pe):(pe=On(m)?Is:Cn.current,pe=oi(o,pe));var Pe=m.getDerivedStateFromProps,Le=typeof Pe=="function"||typeof I.getSnapshotBeforeUpdate=="function";Le||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==x||Y!==pe)&&Wm(o,I,x,pe),rs=!1;var Ee=o.memoizedState;I.state=Ee,So(o,x,I,b),Y=o.memoizedState,$!==x||Ee!==Y||Un.current||rs?(typeof Pe=="function"&&(vd(o,m,Pe,x),Y=o.memoizedState),($=rs||qm(o,m,$,x,Ee,Y,pe))?(Le||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=x,o.memoizedState=Y),I.props=x,I.state=Y,I.context=pe,x=$):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),x=!1)}else{I=o.stateNode,Vm(i,o),$=o.memoizedProps,pe=o.type===o.elementType?$:ua(o.type,$),I.props=pe,Le=o.pendingProps,Ee=I.context,Y=m.contextType,typeof Y=="object"&&Y!==null?Y=Qn(Y):(Y=On(m)?Is:Cn.current,Y=oi(o,Y));var We=m.getDerivedStateFromProps;(Pe=typeof We=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==Le||Ee!==Y)&&Wm(o,I,x,Y),rs=!1,Ee=o.memoizedState,I.state=Ee,So(o,x,I,b);var at=o.memoizedState;$!==Le||Ee!==at||Un.current||rs?(typeof We=="function"&&(vd(o,m,We,x),at=o.memoizedState),(pe=rs||qm(o,m,pe,x,Ee,at,Y)||!1)?(Pe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(x,at,Y),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(x,at,Y)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||$===i.memoizedProps&&Ee===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===i.memoizedProps&&Ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=x,o.memoizedState=at),I.props=x,I.state=at,I.context=Y,x=pe):(typeof I.componentDidUpdate!="function"||$===i.memoizedProps&&Ee===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===i.memoizedProps&&Ee===i.memoizedState||(o.flags|=1024),x=!1)}return Fd(i,o,m,x,N,b)}function Fd(i,o,m,x,b,N){Ap(i,o);var I=(o.flags&128)!==0;if(!x&&!I)return b&&Mm(o,m,!1),Ba(i,o,N);x=o.stateNode,Cb.current=o;var $=I&&typeof m.getDerivedStateFromError!="function"?null:x.render();return o.flags|=1,i!==null&&I?(o.child=pi(o,i.child,null,N),o.child=pi(o,null,$,N)):Dn(i,o,$,N),o.memoizedState=x.state,b&&Mm(o,m,!0),o.child}function _p(i){var o=i.stateNode;o.pendingContext?Pm(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Pm(i,o.context,!1),kd(i,o.containerInfo)}function Pp(i,o,m,x,b){return ci(),pd(b),o.flags|=256,Dn(i,o,m,x),o.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Od(i){return{baseLanes:i,cachePool:null,transitions:null}}function Dp(i,o,m){var x=o.pendingProps,b=Jt.current,N=!1,I=(o.flags&128)!==0,$;if(($=I)||($=i!==null&&i.memoizedState===null?!1:(b&2)!==0),$?(N=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(b|=1),$t(Jt,b&1),i===null)return md(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=x.children,i=x.fallback,N?(x=o.mode,N=o.child,I={mode:"hidden",children:I},(x&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=I):N=zo(I,x,0,null),i=Us(i,x,m,null),N.return=o,i.return=o,N.sibling=i,o.child=N,o.child.memoizedState=Od(m),o.memoizedState=Ud,i):$d(o,I));if(b=i.memoizedState,b!==null&&($=b.dehydrated,$!==null))return Tb(i,o,I,x,$,b,m);if(N){N=x.fallback,I=o.mode,b=i.child,$=b.sibling;var Y={mode:"hidden",children:x.children};return(I&1)===0&&o.child!==b?(x=o.child,x.childLanes=0,x.pendingProps=Y,o.deletions=null):(x=ps(b,Y),x.subtreeFlags=b.subtreeFlags&14680064),$!==null?N=ps($,N):(N=Us(N,I,m,null),N.flags|=2),N.return=o,x.return=o,x.sibling=N,o.child=x,x=N,N=o.child,I=i.child.memoizedState,I=I===null?Od(m):{baseLanes:I.baseLanes|m,cachePool:null,transitions:I.transitions},N.memoizedState=I,N.childLanes=i.childLanes&~m,o.memoizedState=Ud,x}return N=i.child,i=N.sibling,x=ps(N,{mode:"visible",children:x.children}),(o.mode&1)===0&&(x.lanes=m),x.return=o,x.sibling=null,i!==null&&(m=o.deletions,m===null?(o.deletions=[i],o.flags|=16):m.push(i)),o.child=x,o.memoizedState=null,x}function $d(i,o){return o=zo({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Lo(i,o,m,x){return x!==null&&pd(x),pi(o,i.child,null,m),i=$d(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Tb(i,o,m,x,b,N,I){if(m)return o.flags&256?(o.flags&=-257,x=Md(Error(a(422))),Lo(i,o,I,x)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(N=x.fallback,b=o.mode,x=zo({mode:"visible",children:x.children},b,0,null),N=Us(N,b,I,null),N.flags|=2,x.return=o,N.return=o,x.sibling=N,o.child=x,(o.mode&1)!==0&&pi(o,i.child,null,I),o.child.memoizedState=Od(I),o.memoizedState=Ud,N);if((o.mode&1)===0)return Lo(i,o,I,null);if(b.data==="$!"){if(x=b.nextSibling&&b.nextSibling.dataset,x)var $=x.dgst;return x=$,N=Error(a(419)),x=Md(N,x,void 0),Lo(i,o,I,x)}if($=(I&i.childLanes)!==0,$n||$){if(x=xn,x!==null){switch(I&-I){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(x.suspendedLanes|I))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Oa(i,b),ha(x,i,b,-1))}return nc(),x=Md(Error(a(421))),Lo(i,o,I,x)}return b.data==="$?"?(o.flags|=128,o.child=i.child,o=Ob.bind(null,i),b._reactRetry=o,null):(i=N.treeContext,Jn=ns(b.nextSibling),qn=o,Gt=!0,ca=null,i!==null&&(zn[Yn++]=Fa,zn[Yn++]=Ua,zn[Yn++]=As,Fa=i.id,Ua=i.overflow,As=o),o=$d(o,x.children),o.flags|=4096,o)}function Mp(i,o,m){i.lanes|=o;var x=i.alternate;x!==null&&(x.lanes|=o),xd(i.return,o,m)}function Bd(i,o,m,x,b){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:b}:(N.isBackwards=o,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=m,N.tailMode=b)}function Rp(i,o,m){var x=o.pendingProps,b=x.revealOrder,N=x.tail;if(Dn(i,o,x.children,m),x=Jt.current,(x&2)!==0)x=x&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Mp(i,m,o);else if(i.tag===19)Mp(i,m,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}x&=1}if($t(Jt,x),(o.mode&1)===0)o.memoizedState=null;else switch(b){case"forwards":for(m=o.child,b=null;m!==null;)i=m.alternate,i!==null&&Eo(i)===null&&(b=m),m=m.sibling;m=b,m===null?(b=o.child,o.child=null):(b=m.sibling,m.sibling=null),Bd(o,!1,b,m,N);break;case"backwards":for(m=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&Eo(i)===null){o.child=b;break}i=b.sibling,b.sibling=m,m=b,b=i}Bd(o,!0,m,null,N);break;case"together":Bd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Fo(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ba(i,o,m){if(i!==null&&(o.dependencies=i.dependencies),Ms|=o.lanes,(m&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(a(153));if(o.child!==null){for(i=o.child,m=ps(i,i.pendingProps),o.child=m,m.return=o;i.sibling!==null;)i=i.sibling,m=m.sibling=ps(i,i.pendingProps),m.return=o;m.sibling=null}return o.child}function Sb(i,o,m){switch(o.tag){case 3:_p(o),ci();break;case 5:Xm(o);break;case 1:On(o.type)&&bo(o);break;case 4:kd(o,o.stateNode.containerInfo);break;case 10:var x=o.type._context,b=o.memoizedProps.value;$t(wo,x._currentValue),x._currentValue=b;break;case 13:if(x=o.memoizedState,x!==null)return x.dehydrated!==null?($t(Jt,Jt.current&1),o.flags|=128,null):(m&o.child.childLanes)!==0?Dp(i,o,m):($t(Jt,Jt.current&1),i=Ba(i,o,m),i!==null?i.sibling:null);$t(Jt,Jt.current&1);break;case 19:if(x=(m&o.childLanes)!==0,(i.flags&128)!==0){if(x)return Rp(i,o,m);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),$t(Jt,Jt.current),x)break;return null;case 22:case 23:return o.lanes=0,Ip(i,o,m)}return Ba(i,o,m)}var Lp,Vd,Fp,Up;Lp=function(i,o){for(var m=o.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break;for(;m.sibling===null;){if(m.return===null||m.return===o)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Vd=function(){},Fp=function(i,o,m,x){var b=i.memoizedProps;if(b!==x){i=o.stateNode,Ps(Ta.current);var N=null;switch(m){case"input":b=gt(i,b),x=gt(i,x),N=[];break;case"select":b=T({},b,{value:void 0}),x=T({},x,{value:void 0}),N=[];break;case"textarea":b=st(i,b),x=st(i,x),N=[];break;default:typeof b.onClick!="function"&&typeof x.onClick=="function"&&(i.onclick=go)}fe(m,x);var I;m=null;for(pe in b)if(!x.hasOwnProperty(pe)&&b.hasOwnProperty(pe)&&b[pe]!=null)if(pe==="style"){var $=b[pe];for(I in $)$.hasOwnProperty(I)&&(m||(m={}),m[I]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(r.hasOwnProperty(pe)?N||(N=[]):(N=N||[]).push(pe,null));for(pe in x){var Y=x[pe];if($=b!=null?b[pe]:void 0,x.hasOwnProperty(pe)&&Y!==$&&(Y!=null||$!=null))if(pe==="style")if($){for(I in $)!$.hasOwnProperty(I)||Y&&Y.hasOwnProperty(I)||(m||(m={}),m[I]="");for(I in Y)Y.hasOwnProperty(I)&&$[I]!==Y[I]&&(m||(m={}),m[I]=Y[I])}else m||(N||(N=[]),N.push(pe,m)),m=Y;else pe==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,$=$?$.__html:void 0,Y!=null&&$!==Y&&(N=N||[]).push(pe,Y)):pe==="children"?typeof Y!="string"&&typeof Y!="number"||(N=N||[]).push(pe,""+Y):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(r.hasOwnProperty(pe)?(Y!=null&&pe==="onScroll"&&Vt("scroll",i),N||$===Y||(N=[])):(N=N||[]).push(pe,Y))}m&&(N=N||[]).push("style",m);var pe=N;(o.updateQueue=pe)&&(o.flags|=4)}},Up=function(i,o,m,x){m!==x&&(o.flags|=4)};function Nr(i,o){if(!Gt)switch(i.tailMode){case"hidden":o=i.tail;for(var m=null;o!==null;)o.alternate!==null&&(m=o),o=o.sibling;m===null?i.tail=null:m.sibling=null;break;case"collapsed":m=i.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:x.sibling=null}}function Sn(i){var o=i.alternate!==null&&i.alternate.child===i.child,m=0,x=0;if(o)for(var b=i.child;b!==null;)m|=b.lanes|b.childLanes,x|=b.subtreeFlags&14680064,x|=b.flags&14680064,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)m|=b.lanes|b.childLanes,x|=b.subtreeFlags,x|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=x,i.childLanes=m,o}function Ib(i,o,m){var x=o.pendingProps;switch(cd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(o),null;case 1:return On(o.type)&&yo(),Sn(o),null;case 3:return x=o.stateNode,hi(),Kt(Un),Kt(Cn),Cd(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(i===null||i.child===null)&&(jo(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ca!==null&&(Zd(ca),ca=null))),Vd(i,o),Sn(o),null;case 5:jd(o);var b=Ps(gr.current);if(m=o.type,i!==null&&o.stateNode!=null)Fp(i,o,m,x,b),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!x){if(o.stateNode===null)throw Error(a(166));return Sn(o),null}if(i=Ps(Ta.current),jo(o)){x=o.stateNode,m=o.type;var N=o.memoizedProps;switch(x[Ca]=o,x[ur]=N,i=(o.mode&1)!==0,m){case"dialog":Vt("cancel",x),Vt("close",x);break;case"iframe":case"object":case"embed":Vt("load",x);break;case"video":case"audio":for(b=0;b<lr.length;b++)Vt(lr[b],x);break;case"source":Vt("error",x);break;case"img":case"image":case"link":Vt("error",x),Vt("load",x);break;case"details":Vt("toggle",x);break;case"input":At(x,N),Vt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!N.multiple},Vt("invalid",x);break;case"textarea":dt(x,N),Vt("invalid",x)}fe(m,N),b=null;for(var I in N)if(N.hasOwnProperty(I)){var $=N[I];I==="children"?typeof $=="string"?x.textContent!==$&&(N.suppressHydrationWarning!==!0&&fo(x.textContent,$,i),b=["children",$]):typeof $=="number"&&x.textContent!==""+$&&(N.suppressHydrationWarning!==!0&&fo(x.textContent,$,i),b=["children",""+$]):r.hasOwnProperty(I)&&$!=null&&I==="onScroll"&&Vt("scroll",x)}switch(m){case"input":Ze(x),Ne(x,N,!0);break;case"textarea":Ze(x),Dt(x);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(x.onclick=go)}x=b,o.updateQueue=x,x!==null&&(o.flags|=4)}else{I=b.nodeType===9?b:b.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ze(m)),i==="http://www.w3.org/1999/xhtml"?m==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof x.is=="string"?i=I.createElement(m,{is:x.is}):(i=I.createElement(m),m==="select"&&(I=i,x.multiple?I.multiple=!0:x.size&&(I.size=x.size))):i=I.createElementNS(i,m),i[Ca]=o,i[ur]=x,Lp(i,o,!1,!1),o.stateNode=i;e:{switch(I=ye(m,x),m){case"dialog":Vt("cancel",i),Vt("close",i),b=x;break;case"iframe":case"object":case"embed":Vt("load",i),b=x;break;case"video":case"audio":for(b=0;b<lr.length;b++)Vt(lr[b],i);b=x;break;case"source":Vt("error",i),b=x;break;case"img":case"image":case"link":Vt("error",i),Vt("load",i),b=x;break;case"details":Vt("toggle",i),b=x;break;case"input":At(i,x),b=gt(i,x),Vt("invalid",i);break;case"option":b=x;break;case"select":i._wrapperState={wasMultiple:!!x.multiple},b=T({},x,{value:void 0}),Vt("invalid",i);break;case"textarea":dt(i,x),b=st(i,x),Vt("invalid",i);break;default:b=x}fe(m,b),$=b;for(N in $)if($.hasOwnProperty(N)){var Y=$[N];N==="style"?te(i,Y):N==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&M(i,Y)):N==="children"?typeof Y=="string"?(m!=="textarea"||Y!=="")&&de(i,Y):typeof Y=="number"&&de(i,""+Y):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(r.hasOwnProperty(N)?Y!=null&&N==="onScroll"&&Vt("scroll",i):Y!=null&&R(i,N,Y,I))}switch(m){case"input":Ze(i),Ne(i,x,!1);break;case"textarea":Ze(i),Dt(i);break;case"option":x.value!=null&&i.setAttribute("value",""+W(x.value));break;case"select":i.multiple=!!x.multiple,N=x.value,N!=null?Je(i,!!x.multiple,N,!1):x.defaultValue!=null&&Je(i,!!x.multiple,x.defaultValue,!0);break;default:typeof b.onClick=="function"&&(i.onclick=go)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Sn(o),null;case 6:if(i&&o.stateNode!=null)Up(i,o,i.memoizedProps,x);else{if(typeof x!="string"&&o.stateNode===null)throw Error(a(166));if(m=Ps(gr.current),Ps(Ta.current),jo(o)){if(x=o.stateNode,m=o.memoizedProps,x[Ca]=o,(N=x.nodeValue!==m)&&(i=qn,i!==null))switch(i.tag){case 3:fo(x.nodeValue,m,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&fo(x.nodeValue,m,(i.mode&1)!==0)}N&&(o.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[Ca]=o,o.stateNode=x}return Sn(o),null;case 13:if(Kt(Jt),x=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Gt&&Jn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)$m(),ci(),o.flags|=98560,N=!1;else if(N=jo(o),x!==null&&x.dehydrated!==null){if(i===null){if(!N)throw Error(a(318));if(N=o.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(a(317));N[Ca]=o}else ci(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Sn(o),N=!1}else ca!==null&&(Zd(ca),ca=null),N=!0;if(!N)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=m,o):(x=x!==null,x!==(i!==null&&i.memoizedState!==null)&&x&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Jt.current&1)!==0?cn===0&&(cn=3):nc())),o.updateQueue!==null&&(o.flags|=4),Sn(o),null);case 4:return hi(),Vd(i,o),i===null&&dr(o.stateNode.containerInfo),Sn(o),null;case 10:return gd(o.type._context),Sn(o),null;case 17:return On(o.type)&&yo(),Sn(o),null;case 19:if(Kt(Jt),N=o.memoizedState,N===null)return Sn(o),null;if(x=(o.flags&128)!==0,I=N.rendering,I===null)if(x)Nr(N,!1);else{if(cn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=Eo(i),I!==null){for(o.flags|=128,Nr(N,!1),x=I.updateQueue,x!==null&&(o.updateQueue=x,o.flags|=4),o.subtreeFlags=0,x=m,m=o.child;m!==null;)N=m,i=x,N.flags&=14680066,I=N.alternate,I===null?(N.childLanes=0,N.lanes=i,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=I.childLanes,N.lanes=I.lanes,N.child=I.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=I.memoizedProps,N.memoizedState=I.memoizedState,N.updateQueue=I.updateQueue,N.type=I.type,i=I.dependencies,N.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),m=m.sibling;return $t(Jt,Jt.current&1|2),o.child}i=i.sibling}N.tail!==null&&Zt()>yi&&(o.flags|=128,x=!0,Nr(N,!1),o.lanes=4194304)}else{if(!x)if(i=Eo(I),i!==null){if(o.flags|=128,x=!0,m=i.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),Nr(N,!0),N.tail===null&&N.tailMode==="hidden"&&!I.alternate&&!Gt)return Sn(o),null}else 2*Zt()-N.renderingStartTime>yi&&m!==1073741824&&(o.flags|=128,x=!0,Nr(N,!1),o.lanes=4194304);N.isBackwards?(I.sibling=o.child,o.child=I):(m=N.last,m!==null?m.sibling=I:o.child=I,N.last=I)}return N.tail!==null?(o=N.tail,N.rendering=o,N.tail=o.sibling,N.renderingStartTime=Zt(),o.sibling=null,m=Jt.current,$t(Jt,x?m&1|2:m&1),o):(Sn(o),null);case 22:case 23:return tc(),x=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==x&&(o.flags|=8192),x&&(o.mode&1)!==0?(Wn&1073741824)!==0&&(Sn(o),o.subtreeFlags&6&&(o.flags|=8192)):Sn(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function Ab(i,o){switch(cd(o),o.tag){case 1:return On(o.type)&&yo(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return hi(),Kt(Un),Kt(Cn),Cd(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return jd(o),null;case 13:if(Kt(Jt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(a(340));ci()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Kt(Jt),null;case 4:return hi(),null;case 10:return gd(o.type._context),null;case 22:case 23:return tc(),null;case 24:return null;default:return null}}var Uo=!1,In=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function gi(i,o){var m=i.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){Qt(i,o,x)}else m.current=null}function Kd(i,o,m){try{m()}catch(x){Qt(i,o,x)}}var Op=!1;function _b(i,o){if(td=ao,i=gm(),Jl(i)){if("selectionStart"in i)var m={start:i.selectionStart,end:i.selectionEnd};else e:{m=(m=i.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var b=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var I=0,$=-1,Y=-1,pe=0,Pe=0,Le=i,Ee=null;t:for(;;){for(var We;Le!==m||b!==0&&Le.nodeType!==3||($=I+b),Le!==N||x!==0&&Le.nodeType!==3||(Y=I+x),Le.nodeType===3&&(I+=Le.nodeValue.length),(We=Le.firstChild)!==null;)Ee=Le,Le=We;for(;;){if(Le===i)break t;if(Ee===m&&++pe===b&&($=I),Ee===N&&++Pe===x&&(Y=I),(We=Le.nextSibling)!==null)break;Le=Ee,Ee=Le.parentNode}Le=We}m=$===-1||Y===-1?null:{start:$,end:Y}}else m=null}m=m||{start:0,end:0}}else m=null;for(nd={focusedElem:i,selectionRange:m},ao=!1,Xe=o;Xe!==null;)if(o=Xe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Xe=i;else for(;Xe!==null;){o=Xe;try{var at=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var it=at.memoizedProps,en=at.memoizedState,oe=o.stateNode,ee=oe.getSnapshotBeforeUpdate(o.elementType===o.type?it:ua(o.type,it),en);oe.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var me=o.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Oe){Qt(o,o.return,Oe)}if(i=o.sibling,i!==null){i.return=o.return,Xe=i;break}Xe=o.return}return at=Op,Op=!1,at}function kr(i,o,m){var x=o.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var b=x=x.next;do{if((b.tag&i)===i){var N=b.destroy;b.destroy=void 0,N!==void 0&&Kd(o,m,N)}b=b.next}while(b!==x)}}function Oo(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var m=o=o.next;do{if((m.tag&i)===i){var x=m.create;m.destroy=x()}m=m.next}while(m!==o)}}function Hd(i){var o=i.ref;if(o!==null){var m=i.stateNode;switch(i.tag){case 5:i=m;break;default:i=m}typeof o=="function"?o(i):o.current=i}}function $p(i){var o=i.alternate;o!==null&&(i.alternate=null,$p(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ca],delete o[ur],delete o[rd],delete o[pb],delete o[hb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Bp(i){return i.tag===5||i.tag===3||i.tag===4}function Vp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Bp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gd(i,o,m){var x=i.tag;if(x===5||x===6)i=i.stateNode,o?m.nodeType===8?m.parentNode.insertBefore(i,o):m.insertBefore(i,o):(m.nodeType===8?(o=m.parentNode,o.insertBefore(i,m)):(o=m,o.appendChild(i)),m=m._reactRootContainer,m!=null||o.onclick!==null||(o.onclick=go));else if(x!==4&&(i=i.child,i!==null))for(Gd(i,o,m),i=i.sibling;i!==null;)Gd(i,o,m),i=i.sibling}function qd(i,o,m){var x=i.tag;if(x===5||x===6)i=i.stateNode,o?m.insertBefore(i,o):m.appendChild(i);else if(x!==4&&(i=i.child,i!==null))for(qd(i,o,m),i=i.sibling;i!==null;)qd(i,o,m),i=i.sibling}var Nn=null,ma=!1;function ls(i,o,m){for(m=m.child;m!==null;)Kp(i,o,m),m=m.sibling}function Kp(i,o,m){if(wa&&typeof wa.onCommitFiberUnmount=="function")try{wa.onCommitFiberUnmount(Qr,m)}catch{}switch(m.tag){case 5:In||gi(m,o);case 6:var x=Nn,b=ma;Nn=null,ls(i,o,m),Nn=x,ma=b,Nn!==null&&(ma?(i=Nn,m=m.stateNode,i.nodeType===8?i.parentNode.removeChild(m):i.removeChild(m)):Nn.removeChild(m.stateNode));break;case 18:Nn!==null&&(ma?(i=Nn,m=m.stateNode,i.nodeType===8?id(i.parentNode,m):i.nodeType===1&&id(i,m),er(i)):id(Nn,m.stateNode));break;case 4:x=Nn,b=ma,Nn=m.stateNode.containerInfo,ma=!0,ls(i,o,m),Nn=x,ma=b;break;case 0:case 11:case 14:case 15:if(!In&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){b=x=x.next;do{var N=b,I=N.destroy;N=N.tag,I!==void 0&&((N&2)!==0||(N&4)!==0)&&Kd(m,o,I),b=b.next}while(b!==x)}ls(i,o,m);break;case 1:if(!In&&(gi(m,o),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch($){Qt(m,o,$)}ls(i,o,m);break;case 21:ls(i,o,m);break;case 22:m.mode&1?(In=(x=In)||m.memoizedState!==null,ls(i,o,m),In=x):ls(i,o,m);break;default:ls(i,o,m)}}function Hp(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var m=i.stateNode;m===null&&(m=i.stateNode=new Eb),o.forEach(function(x){var b=$b.bind(null,i,x);m.has(x)||(m.add(x),x.then(b,b))})}}function pa(i,o){var m=o.deletions;if(m!==null)for(var x=0;x<m.length;x++){var b=m[x];try{var N=i,I=o,$=I;e:for(;$!==null;){switch($.tag){case 5:Nn=$.stateNode,ma=!1;break e;case 3:Nn=$.stateNode.containerInfo,ma=!0;break e;case 4:Nn=$.stateNode.containerInfo,ma=!0;break e}$=$.return}if(Nn===null)throw Error(a(160));Kp(N,I,b),Nn=null,ma=!1;var Y=b.alternate;Y!==null&&(Y.return=null),b.return=null}catch(pe){Qt(b,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Gp(o,i),o=o.sibling}function Gp(i,o){var m=i.alternate,x=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(pa(o,i),Ia(i),x&4){try{kr(3,i,i.return),Oo(3,i)}catch(it){Qt(i,i.return,it)}try{kr(5,i,i.return)}catch(it){Qt(i,i.return,it)}}break;case 1:pa(o,i),Ia(i),x&512&&m!==null&&gi(m,m.return);break;case 5:if(pa(o,i),Ia(i),x&512&&m!==null&&gi(m,m.return),i.flags&32){var b=i.stateNode;try{de(b,"")}catch(it){Qt(i,i.return,it)}}if(x&4&&(b=i.stateNode,b!=null)){var N=i.memoizedProps,I=m!==null?m.memoizedProps:N,$=i.type,Y=i.updateQueue;if(i.updateQueue=null,Y!==null)try{$==="input"&&N.type==="radio"&&N.name!=null&&wt(b,N),ye($,I);var pe=ye($,N);for(I=0;I<Y.length;I+=2){var Pe=Y[I],Le=Y[I+1];Pe==="style"?te(b,Le):Pe==="dangerouslySetInnerHTML"?M(b,Le):Pe==="children"?de(b,Le):R(b,Pe,Le,pe)}switch($){case"input":ft(b,N);break;case"textarea":yt(b,N);break;case"select":var Ee=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var We=N.value;We!=null?Je(b,!!N.multiple,We,!1):Ee!==!!N.multiple&&(N.defaultValue!=null?Je(b,!!N.multiple,N.defaultValue,!0):Je(b,!!N.multiple,N.multiple?[]:"",!1))}b[ur]=N}catch(it){Qt(i,i.return,it)}}break;case 6:if(pa(o,i),Ia(i),x&4){if(i.stateNode===null)throw Error(a(162));b=i.stateNode,N=i.memoizedProps;try{b.nodeValue=N}catch(it){Qt(i,i.return,it)}}break;case 3:if(pa(o,i),Ia(i),x&4&&m!==null&&m.memoizedState.isDehydrated)try{er(o.containerInfo)}catch(it){Qt(i,i.return,it)}break;case 4:pa(o,i),Ia(i);break;case 13:pa(o,i),Ia(i),b=i.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(zd=Zt())),x&4&&Hp(i);break;case 22:if(Pe=m!==null&&m.memoizedState!==null,i.mode&1?(In=(pe=In)||Pe,pa(o,i),In=pe):pa(o,i),Ia(i),x&8192){if(pe=i.memoizedState!==null,(i.stateNode.isHidden=pe)&&!Pe&&(i.mode&1)!==0)for(Xe=i,Pe=i.child;Pe!==null;){for(Le=Xe=Pe;Xe!==null;){switch(Ee=Xe,We=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:kr(4,Ee,Ee.return);break;case 1:gi(Ee,Ee.return);var at=Ee.stateNode;if(typeof at.componentWillUnmount=="function"){x=Ee,m=Ee.return;try{o=x,at.props=o.memoizedProps,at.state=o.memoizedState,at.componentWillUnmount()}catch(it){Qt(x,m,it)}}break;case 5:gi(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Wp(Le);continue}}We!==null?(We.return=Ee,Xe=We):Wp(Le)}Pe=Pe.sibling}e:for(Pe=null,Le=i;;){if(Le.tag===5){if(Pe===null){Pe=Le;try{b=Le.stateNode,pe?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):($=Le.stateNode,Y=Le.memoizedProps.style,I=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,$.style.display=K("display",I))}catch(it){Qt(i,i.return,it)}}}else if(Le.tag===6){if(Pe===null)try{Le.stateNode.nodeValue=pe?"":Le.memoizedProps}catch(it){Qt(i,i.return,it)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===i)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===i)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===i)break e;Pe===Le&&(Pe=null),Le=Le.return}Pe===Le&&(Pe=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:pa(o,i),Ia(i),x&4&&Hp(i);break;case 21:break;default:pa(o,i),Ia(i)}}function Ia(i){var o=i.flags;if(o&2){try{e:{for(var m=i.return;m!==null;){if(Bp(m)){var x=m;break e}m=m.return}throw Error(a(160))}switch(x.tag){case 5:var b=x.stateNode;x.flags&32&&(de(b,""),x.flags&=-33);var N=Vp(i);qd(i,N,b);break;case 3:case 4:var I=x.stateNode.containerInfo,$=Vp(i);Gd(i,$,I);break;default:throw Error(a(161))}}catch(Y){Qt(i,i.return,Y)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Pb(i,o,m){Xe=i,qp(i)}function qp(i,o,m){for(var x=(i.mode&1)!==0;Xe!==null;){var b=Xe,N=b.child;if(b.tag===22&&x){var I=b.memoizedState!==null||Uo;if(!I){var $=b.alternate,Y=$!==null&&$.memoizedState!==null||In;$=Uo;var pe=In;if(Uo=I,(In=Y)&&!pe)for(Xe=b;Xe!==null;)I=Xe,Y=I.child,I.tag===22&&I.memoizedState!==null?zp(b):Y!==null?(Y.return=I,Xe=Y):zp(b);for(;N!==null;)Xe=N,qp(N),N=N.sibling;Xe=b,Uo=$,In=pe}Jp(i)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,Xe=N):Jp(i)}}function Jp(i){for(;Xe!==null;){var o=Xe;if((o.flags&8772)!==0){var m=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:In||Oo(5,o);break;case 1:var x=o.stateNode;if(o.flags&4&&!In)if(m===null)x.componentDidMount();else{var b=o.elementType===o.type?m.memoizedProps:ua(o.type,m.memoizedProps);x.componentDidUpdate(b,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var N=o.updateQueue;N!==null&&Hm(o,N,x);break;case 3:var I=o.updateQueue;if(I!==null){if(m=null,o.child!==null)switch(o.child.tag){case 5:m=o.child.stateNode;break;case 1:m=o.child.stateNode}Hm(o,I,m)}break;case 5:var $=o.stateNode;if(m===null&&o.flags&4){m=$;var Y=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&m.focus();break;case"img":Y.src&&(m.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Pe=pe.memoizedState;if(Pe!==null){var Le=Pe.dehydrated;Le!==null&&er(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}In||o.flags&512&&Hd(o)}catch(Ee){Qt(o,o.return,Ee)}}if(o===i){Xe=null;break}if(m=o.sibling,m!==null){m.return=o.return,Xe=m;break}Xe=o.return}}function Wp(i){for(;Xe!==null;){var o=Xe;if(o===i){Xe=null;break}var m=o.sibling;if(m!==null){m.return=o.return,Xe=m;break}Xe=o.return}}function zp(i){for(;Xe!==null;){var o=Xe;try{switch(o.tag){case 0:case 11:case 15:var m=o.return;try{Oo(4,o)}catch(Y){Qt(o,m,Y)}break;case 1:var x=o.stateNode;if(typeof x.componentDidMount=="function"){var b=o.return;try{x.componentDidMount()}catch(Y){Qt(o,b,Y)}}var N=o.return;try{Hd(o)}catch(Y){Qt(o,N,Y)}break;case 5:var I=o.return;try{Hd(o)}catch(Y){Qt(o,I,Y)}}}catch(Y){Qt(o,o.return,Y)}if(o===i){Xe=null;break}var $=o.sibling;if($!==null){$.return=o.return,Xe=$;break}Xe=o.return}}var Db=Math.ceil,$o=O.ReactCurrentDispatcher,Jd=O.ReactCurrentOwner,Zn=O.ReactCurrentBatchConfig,Pt=0,xn=null,sn=null,kn=0,Wn=0,xi=as(0),cn=0,jr=null,Ms=0,Bo=0,Wd=0,wr=null,Bn=null,zd=0,yi=1/0,Va=null,Vo=!1,Yd=null,ds=null,Ko=!1,cs=null,Ho=0,Cr=0,Qd=null,Go=-1,qo=0;function Mn(){return(Pt&6)!==0?Zt():Go!==-1?Go:Go=Zt()}function us(i){return(i.mode&1)===0?1:(Pt&2)!==0&&kn!==0?kn&-kn:gb.transition!==null?(qo===0&&(qo=Bu()),qo):(i=Ut,i!==0||(i=window.event,i=i===void 0?16:Yu(i.type)),i)}function ha(i,o,m,x){if(50<Cr)throw Cr=0,Qd=null,Error(a(185));zi(i,m,x),((Pt&2)===0||i!==xn)&&(i===xn&&((Pt&2)===0&&(Bo|=m),cn===4&&ms(i,kn)),Vn(i,x),m===1&&Pt===0&&(o.mode&1)===0&&(yi=Zt()+500,vo&&is()))}function Vn(i,o){var m=i.callbackNode;gy(i,o);var x=eo(i,i===xn?kn:0);if(x===0)m!==null&&Ts(m),i.callbackNode=null,i.callbackPriority=0;else if(o=x&-x,i.callbackPriority!==o){if(m!=null&&Ts(m),o===1)i.tag===0?fb(Qp.bind(null,i)):Rm(Qp.bind(null,i)),ub(function(){(Pt&6)===0&&is()}),m=null;else{switch(Vu(x)){case 1:m=El;break;case 4:m=Ou;break;case 16:m=Yr;break;case 536870912:m=$u;break;default:m=Yr}m=ih(m,Yp.bind(null,i))}i.callbackPriority=o,i.callbackNode=m}}function Yp(i,o){if(Go=-1,qo=0,(Pt&6)!==0)throw Error(a(327));var m=i.callbackNode;if(bi()&&i.callbackNode!==m)return null;var x=eo(i,i===xn?kn:0);if(x===0)return null;if((x&30)!==0||(x&i.expiredLanes)!==0||o)o=Jo(i,x);else{o=x;var b=Pt;Pt|=2;var N=Zp();(xn!==i||kn!==o)&&(Va=null,yi=Zt()+500,Ls(i,o));do try{Lb();break}catch($){Xp(i,$)}while(!0);fd(),$o.current=N,Pt=b,sn!==null?o=0:(xn=null,kn=0,o=cn)}if(o!==0){if(o===2&&(b=_l(i),b!==0&&(x=b,o=Xd(i,b))),o===1)throw m=jr,Ls(i,0),ms(i,x),Vn(i,Zt()),m;if(o===6)ms(i,x);else{if(b=i.current.alternate,(x&30)===0&&!Mb(b)&&(o=Jo(i,x),o===2&&(N=_l(i),N!==0&&(x=N,o=Xd(i,N))),o===1))throw m=jr,Ls(i,0),ms(i,x),Vn(i,Zt()),m;switch(i.finishedWork=b,i.finishedLanes=x,o){case 0:case 1:throw Error(a(345));case 2:Fs(i,Bn,Va);break;case 3:if(ms(i,x),(x&130023424)===x&&(o=zd+500-Zt(),10<o)){if(eo(i,0)!==0)break;if(b=i.suspendedLanes,(b&x)!==x){Mn(),i.pingedLanes|=i.suspendedLanes&b;break}i.timeoutHandle=sd(Fs.bind(null,i,Bn,Va),o);break}Fs(i,Bn,Va);break;case 4:if(ms(i,x),(x&4194240)===x)break;for(o=i.eventTimes,b=-1;0<x;){var I=31-la(x);N=1<<I,I=o[I],I>b&&(b=I),x&=~N}if(x=b,x=Zt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Db(x/1960))-x,10<x){i.timeoutHandle=sd(Fs.bind(null,i,Bn,Va),x);break}Fs(i,Bn,Va);break;case 5:Fs(i,Bn,Va);break;default:throw Error(a(329))}}}return Vn(i,Zt()),i.callbackNode===m?Yp.bind(null,i):null}function Xd(i,o){var m=wr;return i.current.memoizedState.isDehydrated&&(Ls(i,o).flags|=256),i=Jo(i,o),i!==2&&(o=Bn,Bn=m,o!==null&&Zd(o)),i}function Zd(i){Bn===null?Bn=i:Bn.push.apply(Bn,i)}function Mb(i){for(var o=i;;){if(o.flags&16384){var m=o.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var b=m[x],N=b.getSnapshot;b=b.value;try{if(!da(N(),b))return!1}catch{return!1}}}if(m=o.child,o.subtreeFlags&16384&&m!==null)m.return=o,o=m;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ms(i,o){for(o&=~Wd,o&=~Bo,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var m=31-la(o),x=1<<m;i[m]=-1,o&=~x}}function Qp(i){if((Pt&6)!==0)throw Error(a(327));bi();var o=eo(i,0);if((o&1)===0)return Vn(i,Zt()),null;var m=Jo(i,o);if(i.tag!==0&&m===2){var x=_l(i);x!==0&&(o=x,m=Xd(i,x))}if(m===1)throw m=jr,Ls(i,0),ms(i,o),Vn(i,Zt()),m;if(m===6)throw Error(a(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Fs(i,Bn,Va),Vn(i,Zt()),null}function ec(i,o){var m=Pt;Pt|=1;try{return i(o)}finally{Pt=m,Pt===0&&(yi=Zt()+500,vo&&is())}}function Rs(i){cs!==null&&cs.tag===0&&(Pt&6)===0&&bi();var o=Pt;Pt|=1;var m=Zn.transition,x=Ut;try{if(Zn.transition=null,Ut=1,i)return i()}finally{Ut=x,Zn.transition=m,Pt=o,(Pt&6)===0&&is()}}function tc(){Wn=xi.current,Kt(xi)}function Ls(i,o){i.finishedWork=null,i.finishedLanes=0;var m=i.timeoutHandle;if(m!==-1&&(i.timeoutHandle=-1,cb(m)),sn!==null)for(m=sn.return;m!==null;){var x=m;switch(cd(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&yo();break;case 3:hi(),Kt(Un),Kt(Cn),Cd();break;case 5:jd(x);break;case 4:hi();break;case 13:Kt(Jt);break;case 19:Kt(Jt);break;case 10:gd(x.type._context);break;case 22:case 23:tc()}m=m.return}if(xn=i,sn=i=ps(i.current,null),kn=Wn=o,cn=0,jr=null,Wd=Bo=Ms=0,Bn=wr=null,_s!==null){for(o=0;o<_s.length;o++)if(m=_s[o],x=m.interleaved,x!==null){m.interleaved=null;var b=x.next,N=m.pending;if(N!==null){var I=N.next;N.next=b,x.next=I}m.pending=x}_s=null}return i}function Xp(i,o){do{var m=sn;try{if(fd(),_o.current=Ro,Po){for(var x=Wt.memoizedState;x!==null;){var b=x.queue;b!==null&&(b.pending=null),x=x.next}Po=!1}if(Ds=0,gn=dn=Wt=null,xr=!1,yr=0,Jd.current=null,m===null||m.return===null){cn=1,jr=o,sn=null;break}e:{var N=i,I=m.return,$=m,Y=o;if(o=kn,$.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pe=Y,Pe=$,Le=Pe.tag;if((Pe.mode&1)===0&&(Le===0||Le===11||Le===15)){var Ee=Pe.alternate;Ee?(Pe.updateQueue=Ee.updateQueue,Pe.memoizedState=Ee.memoizedState,Pe.lanes=Ee.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var We=jp(I);if(We!==null){We.flags&=-257,wp(We,I,$,N,o),We.mode&1&&kp(N,pe,o),o=We,Y=pe;var at=o.updateQueue;if(at===null){var it=new Set;it.add(Y),o.updateQueue=it}else at.add(Y);break e}else{if((o&1)===0){kp(N,pe,o),nc();break e}Y=Error(a(426))}}else if(Gt&&$.mode&1){var en=jp(I);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),wp(en,I,$,N,o),pd(fi(Y,$));break e}}N=Y=fi(Y,$),cn!==4&&(cn=2),wr===null?wr=[N]:wr.push(N),N=I;do{switch(N.tag){case 3:N.flags|=65536,o&=-o,N.lanes|=o;var oe=vp(N,Y,o);Km(N,oe);break e;case 1:$=Y;var ee=N.type,me=N.stateNode;if((N.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(ds===null||!ds.has(me)))){N.flags|=65536,o&=-o,N.lanes|=o;var Oe=Np(N,$,o);Km(N,Oe);break e}}N=N.return}while(N!==null)}th(m)}catch(rt){o=rt,sn===m&&m!==null&&(sn=m=m.return);continue}break}while(!0)}function Zp(){var i=$o.current;return $o.current=Ro,i===null?Ro:i}function nc(){(cn===0||cn===3||cn===2)&&(cn=4),xn===null||(Ms&268435455)===0&&(Bo&268435455)===0||ms(xn,kn)}function Jo(i,o){var m=Pt;Pt|=2;var x=Zp();(xn!==i||kn!==o)&&(Va=null,Ls(i,o));do try{Rb();break}catch(b){Xp(i,b)}while(!0);if(fd(),Pt=m,$o.current=x,sn!==null)throw Error(a(261));return xn=null,kn=0,cn}function Rb(){for(;sn!==null;)eh(sn)}function Lb(){for(;sn!==null&&!oy();)eh(sn)}function eh(i){var o=sh(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,o===null?th(i):sn=o,Jd.current=null}function th(i){var o=i;do{var m=o.alternate;if(i=o.return,(o.flags&32768)===0){if(m=Ib(m,o,Wn),m!==null){sn=m;return}}else{if(m=Ab(m,o),m!==null){m.flags&=32767,sn=m;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{cn=6,sn=null;return}}if(o=o.sibling,o!==null){sn=o;return}sn=o=i}while(o!==null);cn===0&&(cn=5)}function Fs(i,o,m){var x=Ut,b=Zn.transition;try{Zn.transition=null,Ut=1,Fb(i,o,m,x)}finally{Zn.transition=b,Ut=x}return null}function Fb(i,o,m,x){do bi();while(cs!==null);if((Pt&6)!==0)throw Error(a(327));m=i.finishedWork;var b=i.finishedLanes;if(m===null)return null;if(i.finishedWork=null,i.finishedLanes=0,m===i.current)throw Error(a(177));i.callbackNode=null,i.callbackPriority=0;var N=m.lanes|m.childLanes;if(xy(i,N),i===xn&&(sn=xn=null,kn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Ko||(Ko=!0,ih(Yr,function(){return bi(),null})),N=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||N){N=Zn.transition,Zn.transition=null;var I=Ut;Ut=1;var $=Pt;Pt|=4,Jd.current=null,_b(i,m),Gp(m,i),ab(nd),ao=!!td,nd=td=null,i.current=m,Pb(m),ly(),Pt=$,Ut=I,Zn.transition=N}else i.current=m;if(Ko&&(Ko=!1,cs=i,Ho=b),N=i.pendingLanes,N===0&&(ds=null),uy(m.stateNode),Vn(i,Zt()),o!==null)for(x=i.onRecoverableError,m=0;m<o.length;m++)b=o[m],x(b.value,{componentStack:b.stack,digest:b.digest});if(Vo)throw Vo=!1,i=Yd,Yd=null,i;return(Ho&1)!==0&&i.tag!==0&&bi(),N=i.pendingLanes,(N&1)!==0?i===Qd?Cr++:(Cr=0,Qd=i):Cr=0,is(),null}function bi(){if(cs!==null){var i=Vu(Ho),o=Zn.transition,m=Ut;try{if(Zn.transition=null,Ut=16>i?16:i,cs===null)var x=!1;else{if(i=cs,cs=null,Ho=0,(Pt&6)!==0)throw Error(a(331));var b=Pt;for(Pt|=4,Xe=i.current;Xe!==null;){var N=Xe,I=N.child;if((Xe.flags&16)!==0){var $=N.deletions;if($!==null){for(var Y=0;Y<$.length;Y++){var pe=$[Y];for(Xe=pe;Xe!==null;){var Pe=Xe;switch(Pe.tag){case 0:case 11:case 15:kr(8,Pe,N)}var Le=Pe.child;if(Le!==null)Le.return=Pe,Xe=Le;else for(;Xe!==null;){Pe=Xe;var Ee=Pe.sibling,We=Pe.return;if($p(Pe),Pe===pe){Xe=null;break}if(Ee!==null){Ee.return=We,Xe=Ee;break}Xe=We}}}var at=N.alternate;if(at!==null){var it=at.child;if(it!==null){at.child=null;do{var en=it.sibling;it.sibling=null,it=en}while(it!==null)}}Xe=N}}if((N.subtreeFlags&2064)!==0&&I!==null)I.return=N,Xe=I;else e:for(;Xe!==null;){if(N=Xe,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:kr(9,N,N.return)}var oe=N.sibling;if(oe!==null){oe.return=N.return,Xe=oe;break e}Xe=N.return}}var ee=i.current;for(Xe=ee;Xe!==null;){I=Xe;var me=I.child;if((I.subtreeFlags&2064)!==0&&me!==null)me.return=I,Xe=me;else e:for(I=ee;Xe!==null;){if($=Xe,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Oo(9,$)}}catch(rt){Qt($,$.return,rt)}if($===I){Xe=null;break e}var Oe=$.sibling;if(Oe!==null){Oe.return=$.return,Xe=Oe;break e}Xe=$.return}}if(Pt=b,is(),wa&&typeof wa.onPostCommitFiberRoot=="function")try{wa.onPostCommitFiberRoot(Qr,i)}catch{}x=!0}return x}finally{Ut=m,Zn.transition=o}}return!1}function nh(i,o,m){o=fi(m,o),o=vp(i,o,1),i=os(i,o,1),o=Mn(),i!==null&&(zi(i,1,o),Vn(i,o))}function Qt(i,o,m){if(i.tag===3)nh(i,i,m);else for(;o!==null;){if(o.tag===3){nh(o,i,m);break}else if(o.tag===1){var x=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ds===null||!ds.has(x))){i=fi(m,i),i=Np(o,i,1),o=os(o,i,1),i=Mn(),o!==null&&(zi(o,1,i),Vn(o,i));break}}o=o.return}}function Ub(i,o,m){var x=i.pingCache;x!==null&&x.delete(o),o=Mn(),i.pingedLanes|=i.suspendedLanes&m,xn===i&&(kn&m)===m&&(cn===4||cn===3&&(kn&130023424)===kn&&500>Zt()-zd?Ls(i,0):Wd|=m),Vn(i,o)}function ah(i,o){o===0&&((i.mode&1)===0?o=1:(o=Zr,Zr<<=1,(Zr&130023424)===0&&(Zr=4194304)));var m=Mn();i=Oa(i,o),i!==null&&(zi(i,o,m),Vn(i,m))}function Ob(i){var o=i.memoizedState,m=0;o!==null&&(m=o.retryLane),ah(i,m)}function $b(i,o){var m=0;switch(i.tag){case 13:var x=i.stateNode,b=i.memoizedState;b!==null&&(m=b.retryLane);break;case 19:x=i.stateNode;break;default:throw Error(a(314))}x!==null&&x.delete(o),ah(i,m)}var sh;sh=function(i,o,m){if(i!==null)if(i.memoizedProps!==o.pendingProps||Un.current)$n=!0;else{if((i.lanes&m)===0&&(o.flags&128)===0)return $n=!1,Sb(i,o,m);$n=(i.flags&131072)!==0}else $n=!1,Gt&&(o.flags&1048576)!==0&&Lm(o,ko,o.index);switch(o.lanes=0,o.tag){case 2:var x=o.type;Fo(i,o),i=o.pendingProps;var b=oi(o,Cn.current);mi(o,m),b=Id(null,o,x,i,b,m);var N=Ad();return o.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,On(x)?(N=!0,bo(o)):N=!1,o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,bd(o),b.updater=Io,o.stateNode=b,b._reactInternals=o,Nd(o,x,i,m),o=Fd(null,o,x,!0,N,m)):(o.tag=0,Gt&&N&&dd(o),Dn(null,o,b,m),o=o.child),o;case 16:x=o.elementType;e:{switch(Fo(i,o),i=o.pendingProps,b=x._init,x=b(x._payload),o.type=x,b=o.tag=Vb(x),i=ua(x,i),b){case 0:o=Ld(null,o,x,i,m);break e;case 1:o=Ep(null,o,x,i,m);break e;case 11:o=Cp(null,o,x,i,m);break e;case 14:o=Tp(null,o,x,ua(x.type,i),m);break e}throw Error(a(306,x,""))}return o;case 0:return x=o.type,b=o.pendingProps,b=o.elementType===x?b:ua(x,b),Ld(i,o,x,b,m);case 1:return x=o.type,b=o.pendingProps,b=o.elementType===x?b:ua(x,b),Ep(i,o,x,b,m);case 3:e:{if(_p(o),i===null)throw Error(a(387));x=o.pendingProps,N=o.memoizedState,b=N.element,Vm(i,o),So(o,x,null,m);var I=o.memoizedState;if(x=I.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=N,o.memoizedState=N,o.flags&256){b=fi(Error(a(423)),o),o=Pp(i,o,x,m,b);break e}else if(x!==b){b=fi(Error(a(424)),o),o=Pp(i,o,x,m,b);break e}else for(Jn=ns(o.stateNode.containerInfo.firstChild),qn=o,Gt=!0,ca=null,m=Qm(o,null,x,m),o.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(ci(),x===b){o=Ba(i,o,m);break e}Dn(i,o,x,m)}o=o.child}return o;case 5:return Xm(o),i===null&&md(o),x=o.type,b=o.pendingProps,N=i!==null?i.memoizedProps:null,I=b.children,ad(x,b)?I=null:N!==null&&ad(x,N)&&(o.flags|=32),Ap(i,o),Dn(i,o,I,m),o.child;case 6:return i===null&&md(o),null;case 13:return Dp(i,o,m);case 4:return kd(o,o.stateNode.containerInfo),x=o.pendingProps,i===null?o.child=pi(o,null,x,m):Dn(i,o,x,m),o.child;case 11:return x=o.type,b=o.pendingProps,b=o.elementType===x?b:ua(x,b),Cp(i,o,x,b,m);case 7:return Dn(i,o,o.pendingProps,m),o.child;case 8:return Dn(i,o,o.pendingProps.children,m),o.child;case 12:return Dn(i,o,o.pendingProps.children,m),o.child;case 10:e:{if(x=o.type._context,b=o.pendingProps,N=o.memoizedProps,I=b.value,$t(wo,x._currentValue),x._currentValue=I,N!==null)if(da(N.value,I)){if(N.children===b.children&&!Un.current){o=Ba(i,o,m);break e}}else for(N=o.child,N!==null&&(N.return=o);N!==null;){var $=N.dependencies;if($!==null){I=N.child;for(var Y=$.firstContext;Y!==null;){if(Y.context===x){if(N.tag===1){Y=$a(-1,m&-m),Y.tag=2;var pe=N.updateQueue;if(pe!==null){pe=pe.shared;var Pe=pe.pending;Pe===null?Y.next=Y:(Y.next=Pe.next,Pe.next=Y),pe.pending=Y}}N.lanes|=m,Y=N.alternate,Y!==null&&(Y.lanes|=m),xd(N.return,m,o),$.lanes|=m;break}Y=Y.next}}else if(N.tag===10)I=N.type===o.type?null:N.child;else if(N.tag===18){if(I=N.return,I===null)throw Error(a(341));I.lanes|=m,$=I.alternate,$!==null&&($.lanes|=m),xd(I,m,o),I=N.sibling}else I=N.child;if(I!==null)I.return=N;else for(I=N;I!==null;){if(I===o){I=null;break}if(N=I.sibling,N!==null){N.return=I.return,I=N;break}I=I.return}N=I}Dn(i,o,b.children,m),o=o.child}return o;case 9:return b=o.type,x=o.pendingProps.children,mi(o,m),b=Qn(b),x=x(b),o.flags|=1,Dn(i,o,x,m),o.child;case 14:return x=o.type,b=ua(x,o.pendingProps),b=ua(x.type,b),Tp(i,o,x,b,m);case 15:return Sp(i,o,o.type,o.pendingProps,m);case 17:return x=o.type,b=o.pendingProps,b=o.elementType===x?b:ua(x,b),Fo(i,o),o.tag=1,On(x)?(i=!0,bo(o)):i=!1,mi(o,m),Jm(o,x,b),Nd(o,x,b,m),Fd(null,o,x,!0,i,m);case 19:return Rp(i,o,m);case 22:return Ip(i,o,m)}throw Error(a(156,o.tag))};function ih(i,o){return Cs(i,o)}function Bb(i,o,m,x){this.tag=i,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(i,o,m,x){return new Bb(i,o,m,x)}function ac(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Vb(i){if(typeof i=="function")return ac(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ce)return 11;if(i===Ue)return 14}return 2}function ps(i,o){var m=i.alternate;return m===null?(m=ea(i.tag,o,i.key,i.mode),m.elementType=i.elementType,m.type=i.type,m.stateNode=i.stateNode,m.alternate=i,i.alternate=m):(m.pendingProps=o,m.type=i.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=i.flags&14680064,m.childLanes=i.childLanes,m.lanes=i.lanes,m.child=i.child,m.memoizedProps=i.memoizedProps,m.memoizedState=i.memoizedState,m.updateQueue=i.updateQueue,o=i.dependencies,m.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},m.sibling=i.sibling,m.index=i.index,m.ref=i.ref,m}function Wo(i,o,m,x,b,N){var I=2;if(x=i,typeof i=="function")ac(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case U:return Us(m.children,b,N,o);case ne:I=8,b|=8;break;case ie:return i=ea(12,m,o,b|2),i.elementType=ie,i.lanes=N,i;case Ce:return i=ea(13,m,o,b),i.elementType=Ce,i.lanes=N,i;case Re:return i=ea(19,m,o,b),i.elementType=Re,i.lanes=N,i;case De:return zo(m,b,N,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:I=10;break e;case V:I=9;break e;case ce:I=11;break e;case Ue:I=14;break e;case re:I=16,x=null;break e}throw Error(a(130,i==null?i:typeof i,""))}return o=ea(I,m,o,b),o.elementType=i,o.type=x,o.lanes=N,o}function Us(i,o,m,x){return i=ea(7,i,x,o),i.lanes=m,i}function zo(i,o,m,x){return i=ea(22,i,x,o),i.elementType=De,i.lanes=m,i.stateNode={isHidden:!1},i}function sc(i,o,m){return i=ea(6,i,null,o),i.lanes=m,i}function ic(i,o,m){return o=ea(4,i.children!==null?i.children:[],i.key,o),o.lanes=m,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Kb(i,o,m,x,b){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=x,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function rc(i,o,m,x,b,N,I,$,Y){return i=new Kb(i,o,m,$,Y),o===1?(o=1,N===!0&&(o|=8)):o=0,N=ea(3,null,null,o),i.current=N,N.stateNode=i,N.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(N),i}function Hb(i,o,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:x==null?null:""+x,children:i,containerInfo:o,implementation:m}}function rh(i){if(!i)return ss;i=i._reactInternals;e:{if(Ge(i)!==i||i.tag!==1)throw Error(a(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(On(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(i.tag===1){var m=i.type;if(On(m))return Dm(i,m,o)}return o}function oh(i,o,m,x,b,N,I,$,Y){return i=rc(m,x,!0,i,b,N,I,$,Y),i.context=rh(null),m=i.current,x=Mn(),b=us(m),N=$a(x,b),N.callback=o??null,os(m,N,b),i.current.lanes=b,zi(i,b,x),Vn(i,x),i}function Yo(i,o,m,x){var b=o.current,N=Mn(),I=us(b);return m=rh(m),o.context===null?o.context=m:o.pendingContext=m,o=$a(N,I),o.payload={element:i},x=x===void 0?null:x,x!==null&&(o.callback=x),i=os(b,o,I),i!==null&&(ha(i,b,I,N),To(i,b,I)),I}function Qo(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function lh(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var m=i.retryLane;i.retryLane=m!==0&&m<o?m:o}}function oc(i,o){lh(i,o),(i=i.alternate)&&lh(i,o)}function Gb(){return null}var dh=typeof reportError=="function"?reportError:function(i){console.error(i)};function lc(i){this._internalRoot=i}Xo.prototype.render=lc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(a(409));Yo(i,o,null,null)},Xo.prototype.unmount=lc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Rs(function(){Yo(null,i,null,null)}),o[Ra]=null}};function Xo(i){this._internalRoot=i}Xo.prototype.unstable_scheduleHydration=function(i){if(i){var o=Gu();i={blockedOn:null,target:i,priority:o};for(var m=0;m<Za.length&&o!==0&&o<Za[m].priority;m++);Za.splice(m,0,i),m===0&&Wu(i)}};function dc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Zo(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ch(){}function qb(i,o,m,x,b){if(b){if(typeof x=="function"){var N=x;x=function(){var pe=Qo(I);N.call(pe)}}var I=oh(o,x,i,0,null,!1,!1,"",ch);return i._reactRootContainer=I,i[Ra]=I.current,dr(i.nodeType===8?i.parentNode:i),Rs(),I}for(;b=i.lastChild;)i.removeChild(b);if(typeof x=="function"){var $=x;x=function(){var pe=Qo(Y);$.call(pe)}}var Y=rc(i,0,!1,null,null,!1,!1,"",ch);return i._reactRootContainer=Y,i[Ra]=Y.current,dr(i.nodeType===8?i.parentNode:i),Rs(function(){Yo(o,Y,m,x)}),Y}function el(i,o,m,x,b){var N=m._reactRootContainer;if(N){var I=N;if(typeof b=="function"){var $=b;b=function(){var Y=Qo(I);$.call(Y)}}Yo(o,I,i,b)}else I=qb(m,o,i,b,x);return Qo(I)}Ku=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var m=Wi(o.pendingLanes);m!==0&&(Dl(o,m|1),Vn(o,Zt()),(Pt&6)===0&&(yi=Zt()+500,is()))}break;case 13:Rs(function(){var x=Oa(i,1);if(x!==null){var b=Mn();ha(x,i,1,b)}}),oc(i,1)}},Ml=function(i){if(i.tag===13){var o=Oa(i,134217728);if(o!==null){var m=Mn();ha(o,i,134217728,m)}oc(i,134217728)}},Hu=function(i){if(i.tag===13){var o=us(i),m=Oa(i,o);if(m!==null){var x=Mn();ha(m,i,o,x)}oc(i,o)}},Gu=function(){return Ut},qu=function(i,o){var m=Ut;try{return Ut=i,o()}finally{Ut=m}},ae=function(i,o,m){switch(o){case"input":if(ft(i,m),o=m.name,m.type==="radio"&&o!=null){for(m=i;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<m.length;o++){var x=m[o];if(x!==i&&x.form===i.form){var b=xo(x);if(!b)throw Error(a(90));Ke(x),ft(x,b)}}}break;case"textarea":yt(i,m);break;case"select":o=m.value,o!=null&&Je(i,!!m.multiple,o,!1)}},wn=ec,ge=Rs;var Jb={usingClientEntryPoint:!1,Events:[mr,ii,xo,Nt,jt,ec]},Tr={findFiberByHostInstance:Ss,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Wb={bundleType:Tr.bundleType,version:Tr.version,rendererPackageName:Tr.rendererPackageName,rendererConfig:Tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Yt(i),i===null?null:i.stateNode},findFiberByHostInstance:Tr.findFiberByHostInstance||Gb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Qr=tl.inject(Wb),wa=tl}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jb,Kn.createPortal=function(i,o){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dc(o))throw Error(a(200));return Hb(i,o,null,m)},Kn.createRoot=function(i,o){if(!dc(i))throw Error(a(299));var m=!1,x="",b=dh;return o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),o=rc(i,1,!1,null,null,m,!1,x,b),i[Ra]=o.current,dr(i.nodeType===8?i.parentNode:i),new lc(o)},Kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=Yt(o),i=i===null?null:i.stateNode,i},Kn.flushSync=function(i){return Rs(i)},Kn.hydrate=function(i,o,m){if(!Zo(o))throw Error(a(200));return el(null,i,o,!0,m)},Kn.hydrateRoot=function(i,o,m){if(!dc(i))throw Error(a(405));var x=m!=null&&m.hydratedSources||null,b=!1,N="",I=dh;if(m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(I=m.onRecoverableError)),o=oh(o,null,i,1,m??null,b,!1,N,I),i[Ra]=o.current,dr(i),x)for(i=0;i<x.length;i++)m=x[i],b=m._getVersion,b=b(m._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[m,b]:o.mutableSourceEagerHydrationData.push(m,b);return new Xo(o)},Kn.render=function(i,o,m){if(!Zo(o))throw Error(a(200));return el(null,i,o,!1,m)},Kn.unmountComponentAtNode=function(i){if(!Zo(i))throw Error(a(40));return i._reactRootContainer?(Rs(function(){el(null,null,i,!1,function(){i._reactRootContainer=null,i[Ra]=null})}),!0):!1},Kn.unstable_batchedUpdates=ec,Kn.unstable_renderSubtreeIntoContainer=function(i,o,m,x){if(!Zo(m))throw Error(a(200));if(i==null||i._reactInternals===void 0)throw Error(a(38));return el(i,o,m,!1,x)},Kn.version="18.2.0-next-9e3b772b8-20220608",Kn}var yh;function av(){if(yh)return mc.exports;yh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mc.exports=nv(),mc.exports}var bh;function sv(){if(bh)return nl;bh=1;var n=av();return nl.createRoot=n.createRoot,nl.hydrateRoot=n.hydrateRoot,nl}var iv=sv();const rv=Nu(iv);var Te=(n=>(n.HOMEPAGE="Homepage",n.DASHBOARD="Dashboard",n.PROSPEK="Prospek",n.BOOKING="Booking",n.CLIENTS="Manajemen Klien",n.PROJECTS="Proyek",n.TEAM="Freelancer",n.FINANCE="Keuangan",n.CALENDAR="Kalender",n.CLIENT_REPORTS="Laporan Klien",n.PACKAGES="Input Package",n.PROMO_CODES="Kode Promo",n.ASSETS="Manajemen Aset",n.CONTRACTS="Kontrak Kerja",n.SOCIAL_MEDIA_PLANNER="Perencana Media Sosial",n.SOP="SOP",n.SETTINGS="Pengaturan",n))(Te||{}),_t=(n=>(n.LUNAS="Lunas",n.DP_TERBAYAR="DP Terbayar",n.BELUM_BAYAR="Belum Bayar",n))(_t||{}),Ot=(n=>(n.LEAD="Prospek",n.ACTIVE="Aktif",n.INACTIVE="Tidak Aktif",n.LOST="Hilang",n))(Ot||{}),An=(n=>(n.DIRECT="Langsung",n.VENDOR="Vendor",n))(An||{}),Tt=(n=>(n.DISCUSSION="Sedang Diskusi",n.FOLLOW_UP="Menunggu Follow Up",n.CONVERTED="Dikonversi",n.REJECTED="Ditolak",n))(Tt||{}),Ft=(n=>(n.WHATSAPP="WhatsApp",n.INSTAGRAM="Instagram",n.WEBSITE="Website",n.PHONE="Telepon",n.REFERRAL="Referensi",n.SUGGESTION_FORM="Form Saran",n.OTHER="Lainnya",n))(Ft||{}),Rt=(n=>(n.PRABAYAR="Prabayar",n.KREDIT="Kredit",n.DEBIT="Debit",n.TUNAI="Tunai",n))(Rt||{}),va=(n=>(n.AVAILABLE="Tersedia",n.IN_USE="Digunakan",n.MAINTENANCE="Perbaikan",n))(va||{}),xa=(n=>(n.PRAISE="Pujian",n.CONCERN="Perhatian",n.LATE_DEADLINE="Keterlambatan Deadline",n.GENERAL="Umum",n))(xa||{}),Ct=(n=>(n.VERY_SATISFIED="Sangat Puas",n.SATISFIED="Puas",n.NEUTRAL="Biasa Saja",n.UNSATISFIED="Tidak Puas",n))(Ct||{}),qt=(n=>(n.PENDING="Menunggu Revisi",n.IN_PROGRESS="Sedang Dikerjakan",n.COMPLETED="Revisi Selesai",n))(qt||{}),Ns=(n=>(n.INSTAGRAM_FEED="Instagram Feed",n.INSTAGRAM_STORY="Instagram Story",n.INSTAGRAM_REELS="Instagram Reels",n.TIKTOK="TikTok Video",n.BLOG="Artikel Blog",n))(Ns||{}),Xt=(n=>(n.DRAFT="Draf",n.SCHEDULED="Terjadwal",n.POSTED="Diposting",n.CANCELED="Dibatalkan",n))(Xt||{}),sa=(n=>(n.BARU="Baru",n.TERKONFIRMASI="Terkonfirmasi",n.DITOLAK="Ditolak",n))(sa||{}),$e=(n=>(n.INCOME="Pemasukan",n.EXPENSE="Pengeluaran",n))($e||{}),tn=(n=>(n.SAVING="Nabung & Bayar",n.LOCKED="Terkunci",n.SHARED="Bersama",n.EXPENSE="Anggaran Pengeluaran",n.REWARD_POOL="Tabungan Hadiah Freelancer",n))(tn||{});const Wa=n=>{if(!n)return"";let e=n.replace(/\D/g,"");return e.startsWith("0")?e="62"+e.substring(1):e.startsWith("62")||(e="62"+e),e},ov=(n,e)=>{var u;if(!n.startsWith("#"))return"#000000";let[a,s,r]=((u=n.match(/\w\w/g))==null?void 0:u.map(p=>parseInt(p,16)))||[0,0,0];const d=1-e/100;return a=Math.floor(a*d),s=Math.floor(s*d),r=Math.floor(r*d),`#${a.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`},lv=n=>{if(!n.startsWith("#"))return"0 0% 0%";let e=0,a=0,s=0;n.length==4?(e=parseInt(n[1]+n[1],16),a=parseInt(n[2]+n[2],16),s=parseInt(n[3]+n[3],16)):n.length==7&&(e=parseInt(n.substring(1,3),16),a=parseInt(n.substring(3,5),16),s=parseInt(n.substring(5,7),16)),e/=255,a/=255,s/=255;let r=Math.max(e,a,s),d=Math.min(e,a,s),u=0,p,h=(r+d)/2;if(r==d)u=p=0;else{let f=r-d;switch(p=h>.5?f/(2-r-d):f/(r+d),r){case e:u=(a-s)/f+(a<s?6:0);break;case a:u=(s-e)/f+2;break;case s:u=(e-a)/f+4;break}u/=6}return u=Math.round(u*360),p=Math.round(p*100),h=Math.round(h*100),`${u} ${p}% ${h}%`},jl=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 10.75l9-8.25 9 8.25"}),t.jsx("path",{d:"M4.75 9.75v10.5c0 .55.45 1 1 1h12.5c.55 0 1-.45 1-1v-10.5"}),t.jsx("path",{d:"M9.75 21.25v-6.5c0-.55.45-1 1-1h2.5c.55 0 1 .45 1 1v6.5"})]}),_n=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"9",cy:"8",r:"3.25"}),t.jsx("path",{d:"M3.75 19.75v-2c0-2.21 1.79-4 4-4h2.5c2.21 0 4 1.79 4 4v2"}),t.jsx("circle",{cx:"16",cy:"8",r:"3.25"}),t.jsx("path",{d:"M19.25 19.75v-2c0-2.21-1.79-4-4-4h-1.5"})]}),ka=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 6.75C2.75 5.64543 3.64543 4.75 4.75 4.75H9.25L11.25 6.75H19.25C20.3546 6.75 21.25 7.64543 21.25 8.75V17.25C21.25 18.3546 20.3546 19.25 19.25 19.25H4.75C3.64543 19.25 2.75 18.3546 2.75 17.25V6.75Z"}),t.jsx("line",{x1:"9.75",y1:"12.25",x2:"9.75",y2:"15.25"}),t.jsx("line",{x1:"12.75",y1:"10.75",x2:"12.75",y2:"15.25"}),t.jsx("line",{x1:"15.75",y1:"13.25",x2:"15.75",y2:"15.25"})]}),Kr=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"2.75",y:"7.75",width:"18.5",height:"13.5",rx:"2"}),t.jsx("path",{d:"M16.75 7.75V5.75c0-1.1-.9-2-2-2h-6c-1.1 0-2 .9-2 2v2"})]}),on=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2.75V21.25"}),t.jsx("path",{d:"M17.25 8.75A3.5 3.5 0 0 0 13.75 5.25H9.75a3.5 3.5 0 0 0 0 7h4a3.5 3.5 0 0 1 0 7H6.75"})]}),Gs=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"2.75",y:"4.75",width:"18.5",height:"16.5",rx:"2"}),t.jsx("path",{d:"M2.75 9.75h18.5"}),t.jsx("path",{d:"M8.75 2.75v4"}),t.jsx("path",{d:"M15.25 2.75v4"})]}),Vg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 8.75v8.5c0 .55.45 1 1 1h16.5c.55 0 1-.45 1-1v-8.5"}),t.jsx("path",{d:"M2.75 8.75L12 4.75l9.25 4"}),t.jsx("path",{d:"M12 21.25v-12"}),t.jsx("path",{d:"M18.25 12.25l-6.25 4-6.25-4"}),t.jsx("path",{d:"M2.75 8.75h18.5"})]}),Kg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 8.75a3.25 3.25 0 100 6.5 3.25 3.25 0 000-6.5z"}),t.jsx("path",{d:"M18.18 10.63a1.5 1.5 0 00.32-2.07l.55-.95a2 2 0 00-1-3.46l-1.1.2c-1-.7-2.18-1.1-3.45-1.1h-.01c-1.27 0-2.45.4-3.45 1.1l-1.1-.2a2 2 0 00-1 3.46l.55.95c.2.34.36.73.32 1.13 0 .4-.13.79-.32 1.13l-.55.95a2 2 0 001 3.46l1.1-.2c1 .7 2.18 1.1 3.45 1.1h.01c1.27 0 2.45-.4 3.45-1.1l1.1.2a2 2 0 001-3.46l-.55-.95a1.5 1.5 0 00-.32-1.13z"})]}),dv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2.75a9.25 9.25 0 109.25 9.25H12v-9.25z"}),t.jsx("path",{d:"M12.75 2.75a9.25 9.25 0 11-10 10"})]}),qs=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("circle",{cx:"12",cy:"12",r:"5.25"}),t.jsx("circle",{cx:"12",cy:"12",r:"1.25"})]}),nn=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),cv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M15.75 8.75l3.5 3.25-3.5 3.25"}),t.jsx("path",{d:"M8.75 12h10.5"}),t.jsx("path",{d:"M8.75 20.25h-4c-1.1 0-2-.9-2-2V5.75c0-1.1.9-2 2-2h4"})]}),uv=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M12.75 18.25A9.25 9.25 0 1121.25 9.75c-2.03 4.2-6.55 7.2-11.75 6.75-1.2-.1-2.35-.45-3.4-1"})}),mv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"4.25"}),t.jsx("path",{d:"M12 2.75V1.75"}),t.jsx("path",{d:"M12 22.25V21.25"}),t.jsx("path",{d:"M4.75 4.75l-.7-.7"}),t.jsx("path",{d:"M19.25 19.25l-.7-.7"}),t.jsx("path",{d:"M2.75 12H1.75"}),t.jsx("path",{d:"M22.25 12H21.25"}),t.jsx("path",{d:"M4.75 19.25l-.7.7"}),t.jsx("path",{d:"M19.25 4.75l-.7.7"})]}),Hr=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"9 18 15 12 9 6"})}),qa=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"2.75",y:"4.75",width:"18.5",height:"14.5",rx:"2"}),t.jsx("line",{x1:"2.75",y1:"9.75",x2:"21.25",y2:"9.75"})]}),Hs=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M15.75 4.75h3.5c.55 0 1 .45 1 1v14.5c0 .55-.45 1-1 1h-13c-.55 0-1-.45 1-1v-14.5c0-.55.45-1 1-1h3.5"}),t.jsx("path",{d:"M12.75 2.75h-1.5c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h1.5c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1z"}),t.jsx("path",{d:"M8.75 12.75h6.5"}),t.jsx("path",{d:"M8.75 16.75h6.5"})]}),Gr=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9.75 18.25h4.5"}),t.jsx("path",{d:"M12 21.25v-3"}),t.jsx("path",{d:"M12 15.25c-3.18 0-5.75-2.57-5.75-5.75 0-3.18 2.57-5.75 5.75-5.75s5.75 2.57 5.75 5.75c0 1.94-.97 3.67-2.45 4.75"})]}),ia=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),qr=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 8.75a2 2 0 012-2h3.5l1.5-2.5h5l1.5 2.5h3.5a2 2 0 012 2v10.5a2 2 0 01-2 2h-16.5a2 2 0 01-2-2v-10.5z"}),t.jsx("circle",{cx:"12",cy:"13.5",r:"3.25"})]}),oa=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M13.75 2.75v6.5h6.5"}),t.jsx("path",{d:"M14.75 21.25H5.75c-1.1 0-2-.9-2-2V4.75c0-1.1.9-2 2-2h8l5.5 5.5v9c0 1.1-.9 2-2 2z"}),t.jsx("path",{d:"M8.75 13.75h6.5"}),t.jsx("path",{d:"M8.75 17.75h6.5"})]}),Pa=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 12c1.5-4.5 5-7.25 9.25-7.25s7.75 2.75 9.25 7.25c-1.5 4.5-5 7.25-9.25 7.25s-7.75-2.75-9.25-7.25z"}),t.jsx("circle",{cx:"12",cy:"12",r:"2.25"})]}),ln=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M16.75 3.25a2.121 2.121 0 013 3L8.75 17.25l-4 1 1-4L16.75 3.25z"}),t.jsx("path",{d:"M14.75 5.25l3 3"})]}),fn=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3.75 6.75h16.5"}),t.jsx("path",{d:"M18.75 6.75v12.5c0 1.1-.9 2-2 2h-9.5c-1.1 0-2-.9-2-2V6.75"}),t.jsx("path",{d:"M8.75 6.75V4.75c0-1.1.9-2 2-2h2.5c1.1 0 2 .9 2 2v2"}),t.jsx("path",{d:"M9.75 11.75v5.5"}),t.jsx("path",{d:"M14.25 11.75v5.5"})]}),Na=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M5.75 18.25h12.5"}),t.jsx("path",{d:"M19.25 12.25v-6.5c0-.55-.45-1-1-1h-12.5c-.55 0-1 .45 1-1v6.5"}),t.jsx("path",{d:"M4.75 12.25h1.5c.28 0 .5.22.5.5v7.5c0 .55.45 1 1 1h8.5c.55 0 1-.45 1-1v-7.5c0-.28.22-.5.5-.5h1.5c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-1.5"})]}),Fn=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"18",cy:"5",r:"3"}),t.jsx("circle",{cx:"6",cy:"12",r:"3"}),t.jsx("circle",{cx:"18",cy:"19",r:"3"}),t.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),t.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),Hg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 7.75v-4h4"}),t.jsx("path",{d:"M3.56 12.25a9.25 9.25 0 102.19-4.5L2.75 7.75"}),t.jsx("path",{d:"M12 7.75v4.5l3 2"})]}),vs=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),t.jsx("polyline",{points:"17 6 23 6 23 12"})]}),wl=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),Js=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M21.25 11.75c0 4.14-3.36 7.5-7.5 7.5h-1l-4.5 3v-3h-1.5c-4.14 0-7.5-3.36-7.5-7.5v-4.5c0-4.14 3.36-7.5 7.5-7.5h6c4.14 0 7.5 3.36 7.5 7.5v1.5z"})}),pv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M15.75 14.25l-3.5 3.5"}),t.jsx("path",{d:"M12.25 17.75v-3.5h-3.5"}),t.jsx("path",{d:"M21.25 15.25c0 .55-.45 1-1 1-2.02 0-3.92-.78-5.3-2.17s-2.17-3.28-2.17-5.3c0-.55.45-1 1-1 .9 0 1.76.15 2.55.43.34.12.55.51.45.88l-.6 2.1c-.1.36-.45.6-.83.5s-.7-.28-.95-.53c-.76-.76-.76-2 0-2.76.25-.25.38-.6.28-.95l-1.05-3.7c-.1-.36-.48-.57-.85-.45-1.07.35-2.07.86-3 1.57-2.7 2.07-3.88 5.78-2.5 9.25 1.5 3.75 4.88 6.5 8.75 6.5 1.4 0 2.75-.3 4-1 .98-.7 1.6-1.7 1.9-2.88"})]}),ju=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 21.25C12 21.25 4.75 15.25 4.75 10C4.75 6.54822 7.29822 3.75 12 3.75C16.7018 3.75 19.25 6.54822 19.25 10C19.25 15.25 12 21.25 12 21.25Z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3.25"})]}),Gg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"}),t.jsx("polyline",{points:"17 18 23 18 23 12"})]}),_a=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("polyline",{points:"19 12 12 19 5 12"})]}),ya=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),t.jsx("polyline",{points:"5 12 12 5 19 12"})]}),$i=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2.75 14.75v3.5c0 .55.45 1 1 1h16.5c.55 0 1-.45 1-1v-3.5"}),t.jsx("path",{d:"M12 15.75v-13"}),t.jsx("path",{d:"M8.75 12.75l3.25 3 3.25-3"})]}),Bc=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),t.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),t.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),t.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),t.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),t.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Vc=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]}),Ur=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M8.75 11.75l2.5 2.5 5-5"}),t.jsx("path",{d:"M2.75 5.75c0-1.1.9-2 2-2h14.5c1.1 0 2 .9 2 2v12.5c0 1.1-.9 2-2 2H4.75c-1.1 0-2-.9-2-2V5.75z"})]}),ks=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("path",{d:"M12 7.75v4.5l3 2"})]}),Jr=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21.25 3.75L2.75 11.25l7.5 2.5 2.5 7.5 7.5-18.5z"}),t.jsx("path",{d:"M10.25 13.75l7.5-7.5"})]}),Da=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 21.25a9.25 9.25 0 100-18.5 9.25 9.25 0 000 18.5z"}),t.jsx("path",{d:"M8.75 12.25l2.5 2.5 5-5"})]}),Kc=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3.75 14.75v4.5c0 .55.45 1 1 1h4"}),t.jsx("path",{d:"M19.75 14.75c1.1 0 2 .9 2 2v2.5"}),t.jsx("path",{d:"M2.75 12.75c0-4.14 3.36-7.5 7.5-7.5h.5c3.85 0 7.08 2.92 7.45 6.75"}),t.jsx("path",{d:"M11.75 14.75h4.5c.55 0 1 .45 1 1v4.5c0 .55-.45 1-1 1h-12c-1.1 0-2-.9-2-2V13.75c0-1 .6-1.87 1.5-2.2"}),t.jsx("path",{d:"M15.75 8.75v1.5"})]}),hv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14.75 18.75v-2c0-2.21-1.79-4-4-4h-4.5c-2.21 0-4 1.79-4 4v2"}),t.jsx("circle",{cx:"8.25",cy:"6.75",r:"3"}),t.jsx("path",{d:"M16.75 11.75l2 2 4-4"})]}),fv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3.75",y:"11.75",width:"16.5",height:"9.5",rx:"2"}),t.jsx("path",{d:"M6.75 11.75V7.75c0-2.76 2.24-5 5-5s5 2.24 5 5v4"})]}),gv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),t.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),t.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),qg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"2.75",y:"6.75",width:"18.5",height:"10.5",rx:"2"}),t.jsx("circle",{cx:"12",cy:"12",r:"2.25"})]}),xv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"8.25",cy:"15.75",r:"4.5"}),t.jsx("path",{d:"M12.75 11.25l5-5"}),t.jsx("path",{d:"M15.75 9.25l2-2"})]}),vh=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("path",{d:"M8.75 14.75s1.5 2 3.25 2 3.25-2 3.25-2"}),t.jsx("circle",{cx:"9.25",cy:"9.75",r:".5",fill:"currentColor"}),t.jsx("circle",{cx:"14.75",cy:"9.75",r:".5",fill:"currentColor"})]}),yv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M7 10v12"}),t.jsx("path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 3 1.88Z"})]}),Nh=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("path",{d:"M8.75 15.75h6.5"}),t.jsx("circle",{cx:"9.25",cy:"9.75",r:".5",fill:"currentColor"}),t.jsx("circle",{cx:"14.75",cy:"9.75",r:".5",fill:"currentColor"})]}),kh=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"12",cy:"12",r:"9.25"}),t.jsx("path",{d:"M15.25 15.75s-1.5-2-3.25-2-3.25 2-3.25 2"}),t.jsx("circle",{cx:"9.25",cy:"9.75",r:".5",fill:"currentColor"}),t.jsx("circle",{cx:"14.75",cy:"9.75",r:".5",fill:"currentColor"})]}),Jg=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"15 18 9 12 15 6"})}),bv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"2.75",y:"2.75",width:"18.5",height:"18.5",rx:"2"}),t.jsx("circle",{cx:"8.75",cy:"8.75",r:"1.5"}),t.jsx("path",{d:"M21.25 14.75l-4.5-4.5-9 9"})]}),Or=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),t.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),fc=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"20 6 9 17 4 12"})}),Wg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9.5 2.5l1.5 4 4 1.5-4 1.5-1.5 4-1.5-4-4-1.5 4-1.5 1.5-4z"}),t.jsx("path",{d:"M18.5 12.5l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"}),t.jsx("path",{d:"M18.5 2.5l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"})]}),vv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),t.jsx("line",{x1:"14",y1:"14",x2:"14",y2:"14.01"}),t.jsx("line",{x1:"17",y1:"14",x2:"17",y2:"14.01"}),t.jsx("line",{x1:"14",y1:"17",x2:"14",y2:"17.01"}),t.jsx("line",{x1:"17",y1:"17",x2:"17",y2:"17.01"}),t.jsx("line",{x1:"21",y1:"14",x2:"21",y2:"14.01"}),t.jsx("line",{x1:"14",y1:"21",x2:"14",y2:"21.01"}),t.jsx("line",{x1:"17",y1:"21",x2:"17",y2:"21.01"}),t.jsx("line",{x1:"21",y1:"17",x2:"21",y2:"21.01"}),t.jsx("line",{x1:"21",y1:"21",x2:"21",y2:"21.01"})]}),$r=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.47 14.38C17.2 14.24 16.1 13.71 15.88 13.62C15.67 13.53 15.51 13.5 15.36 13.77C15.21 14.04 14.67 14.65 14.53 14.81C14.38 14.97 14.24 15 13.97 14.86C13.7 14.71 12.83 14.41 11.8 13.54C11 12.86 10.45 12.03 10.31 11.76C10.16 11.49 10.31 11.35 10.45 11.21C10.58 11.07 10.75 10.85 10.9 10.69C11.04 10.53 11.1 10.41 11.21 10.22C11.33 10.03 11.27 9.87 11.2 9.73C11.12 9.59 10.61 8.31 10.4 7.78C10.19 7.25 9.98 7.32 9.83 7.31C9.69 7.31 9.53 7.31 9.38 7.31C9.23 7.31 8.95 7.38 8.75 7.65C8.55 7.92 7.9 8.49 7.9 9.61C7.9 10.73 8.78 11.82 8.92 11.96C9.06 12.11 10.66 14.49 13 15.46C15.34 16.43 15.34 16.03 15.82 15.96C16.3 15.89 17.24 15.35 17.42 14.81C17.6 14.27 17.6 13.8 17.52 13.66C17.44 13.53 17.3 13.46 17.16 13.41L17.47 14.38Z"}),t.jsx("path",{d:"M21.12 12.42C21.12 17.39 17.14 21.38 12.18 21.38C10.29 21.38 8.52 20.85 7.03 19.94L3 21L4.09 17.12C3.12 15.65 2.55 13.92 2.55 12.23C2.55 7.26 6.53 3.28 11.49 3.28C13.88 3.28 16.04 4.16 17.76 5.61C19.48 7.06 20.57 8.93 20.57 11.01"})]}),Hc=[{view:Te.DASHBOARD,label:"Dasbor",icon:jl},{view:Te.PROSPEK,label:"Prospek",icon:qs},{view:Te.BOOKING,label:"Booking",icon:Hs},{view:Te.CLIENTS,label:"Klien",icon:_n},{view:Te.PROJECTS,label:"Proyek",icon:ka},{view:Te.TEAM,label:"Freelancer",icon:Kr},{view:Te.FINANCE,label:"Keuangan",icon:on},{view:Te.CALENDAR,label:"Kalender",icon:Gs},{view:Te.SOCIAL_MEDIA_PLANNER,label:"Perencana Sosmed",icon:Fn},{view:Te.PACKAGES,label:"Paket",icon:Vg},{view:Te.ASSETS,label:"Aset",icon:qr},{view:Te.CONTRACTS,label:"Kontrak",icon:oa},{view:Te.PROMO_CODES,label:"Kode Promo",icon:Gr},{view:Te.SOP,label:"SOP",icon:Or},{view:Te.CLIENT_REPORTS,label:"Laporan Klien",icon:dv},{view:Te.SETTINGS,label:"Pengaturan",icon:Kg}],Gc=[{id:"welcome",title:"Ucapan Selamat Datang",template:'Halo {clientName}, selamat! Booking Anda untuk proyek "{projectName}" telah kami konfirmasi. Kami sangat senang bisa bekerja sama dengan Anda! Tim kami akan segera menghubungi Anda untuk langkah selanjutnya. Terima kasih!'},{id:"next_steps",title:"Langkah Selanjutnya",template:'Hai {clientName}, menindaklanjuti konfirmasi proyek "{projectName}", berikut adalah beberapa langkah selanjutnya yang bisa kita diskusikan: [Sebutkan langkah selanjutnya, misal: jadwal meeting, survey lokasi, dll]. Mohon informasikan waktu terbaik Anda. Terima kasih.'},{id:"payment_reminder",title:"Pengingat Pelunasan",template:`Yth. {clientName},

Ini adalah pengingat ramah untuk pembayaran pelunasan proyek "{projectName}" Anda yang akan segera jatuh tempo.

Mohon informasikan jika Anda sudah melakukan pembayaran.

Terima kasih.`}],wu="c1e1f2b4-a0f1-4a47-9c9c-2b2a6b2a0c1b",Nv="d2e2f3b5-b1f2-5b58-8d8d-3c3b7c3b1d2c",kv=`prof-${wu.slice(0,23)}`,jv=[{id:wu,email:"admin@vena.pictures",password:"admin",fullName:"Andi Vena",role:"Admin",isApproved:!0},{id:Nv,email:"member@vena.pictures",password:"member",fullName:"Rina Asisten",role:"Member",permissions:[Te.CLIENTS,Te.PROJECTS,Te.CALENDAR,Te.SOCIAL_MEDIA_PLANNER],isApproved:!0}],al="CLI001",gc="CLI002",jh="CLI004",wh="CLI005",Ch="CLI006",Th="CLI007",Sh="CLI008",Ih="CLI009",ta="TM001",Ir="TM002",xc="TM003",yc="TM004",wv="TM005",sl="TM006",qc="PKG001",zg="PKG002",Yg="PKG003",Qg="PKG004",Jc="PKG005",Wc="PKG006",na="PRJ001",Ar="PRJ002",Er="PRJ004",bc="PRJ005",Cv="PRJ007",Tv="PRJ008",Sv="PRJ009",Iv="PRJ010",Av="PRJ012",Ev="ADDON001",Xg="ADDON002",_v="ADDON003",Zg="ADDON004",Pv="PROMO001",Dv="PROMO002",Mv="CTR001",Rv="CTR002",Lv="REV001",Ah="CARD001",Fv="CARD002",Eh="CARD_CASH_001",Uv="POC001",Ov="POC002",$v="POC003",Bv="POC_REWARD_POOL",Vv=[{id:qc,name:"Paket Pernikahan Silver",price:12e6,category:"Pernikahan",physicalItems:[{name:"Album Cetak Eksklusif 20x30cm 20 Halaman",price:85e4},{name:"Cetak Foto 16R + Bingkai Minimalis (2pcs)",price:4e5}],digitalItems:["Semua file foto (JPG) hasil seleksi","1 Video highlight (3-5 menit)"],processingTime:"30 hari kerja",photographers:"2 Fotografer",videographers:"1 Videografer"},{id:zg,name:"Paket Pernikahan Gold",price:25e6,category:"Pernikahan",physicalItems:[{name:"Album Cetak Premium 25x30cm 30 Halaman",price:15e5},{name:"Cetak Foto 20R + Bingkai Premium (2pcs)",price:75e4},{name:"Box Kayu Eksklusif + Flashdisk 64GB",price:5e5}],digitalItems:["Semua file foto (JPG) tanpa seleksi","1 Video sinematik (5-7 menit)","Video Teaser 1 menit untuk sosmed"],processingTime:"45 hari kerja",photographers:"2 Fotografer",videographers:"2 Videografer"},{id:Yg,name:"Paket Acara Korporat",price:8e6,category:"Korporat",physicalItems:[],digitalItems:["Dokumentasi foto (JPG)","1 Video dokumentasi (10-15 menit)"],processingTime:"14 hari kerja",photographers:"1 Fotografer",videographers:"1 Videografer"},{id:Qg,name:"Paket Lamaran",price:5e6,category:"Lamaran",physicalItems:[],digitalItems:["Semua file foto (JPG) hasil seleksi","1 Video highlight (1-2 menit)"],processingTime:"14 hari kerja",photographers:"1 Fotografer"},{id:Jc,name:"Paket Prewedding",price:65e5,category:"Prewedding",physicalItems:[{name:"Cetak Foto Kanvas 40x60cm",price:6e5}],digitalItems:["50 foto edit high-resolution","1 video sinematik 1 menit"],processingTime:"21 hari kerja",photographers:"1 Fotografer",videographers:"1 Videografer"},{id:Wc,name:"Sesi Foto Keluarga",price:35e5,category:"Keluarga",physicalItems:[{name:"Cetak Foto 10R + Bingkai (5pcs)",price:35e4}],digitalItems:["25 foto edit high-resolution"],processingTime:"10 hari kerja",photographers:"1 Fotografer"}],Kv=[{id:Ev,name:"Same Day Edit Video",price:25e5},{id:Xg,name:"Aerial Drone Shot",price:15e5},{id:_v,name:"Jasa MUA Profesional",price:1e6},{id:Zg,name:"Album Tambahan untuk Orang Tua",price:12e5}],Pr={id:kv,adminUserId:wu,fullName:"Andi Vena",email:"admin@vena.pictures",phone:"081288889999",companyName:"Vena Pictures",website:"https://venapictures.com",address:"Jl. Kreatif No. 10, Jakarta Pusat",bankAccount:"BCA - 9876543210 a/n Vena Pictures",authorizedSigner:"Andi Vena",idNumber:"3171234567890002",bio:"Mengabadikan momen dengan sentuhan sinematik. Spesialis pernikahan dan prewedding di Vena Pictures.",incomeCategories:["DP Proyek","Pelunasan Proyek","Penjualan Cetak","Sewa Alat","Modal","Penjualan Add-on"],expenseCategories:["Gaji Freelancer","Transportasi","Akomodasi","Konsumsi","Peralatan","Marketing","Operasional Kantor","Sewa Tempat","Cetak Album","Penarikan Hadiah Freelancer","Transfer Internal","Penutupan Anggaran","Biaya Produksi Lain"],projectTypes:["Pernikahan","Lamaran","Prewedding","Korporat","Ulang Tahun","Produk","Keluarga"],eventTypes:["Meeting Klien","Survey Lokasi","Libur","Workshop","Acara Internal","Lainnya"],assetCategories:["Kamera","Lensa","Lighting","Komputer","Drone","Aksesoris","Lainnya"],sopCategories:["Pernikahan","Korporat","Umum","Editing","Prewedding"],packageCategories:["Pernikahan","Lamaran","Prewedding","Korporat","Ulang Tahun","Produk","Keluarga"],projectStatusConfig:[{id:"status_1",name:"Persiapan",color:"#6366f1",subStatuses:[{name:"Briefing Internal",note:"Rapat tim internal untuk membahas konsep."},{name:"Survey Lokasi",note:"Kunjungan ke lokasi acara jika diperlukan."}],note:"Tahap awal persiapan proyek."},{id:"status_2",name:"Dikonfirmasi",color:"#3b82f6",subStatuses:[{name:"Pembayaran DP",note:"Menunggu konfirmasi pembayaran DP dari klien."},{name:"Penjadwalan Tim",note:"Mengalokasikan freelancer untuk proyek."}],note:"Proyek telah dikonfirmasi oleh klien."},{id:"status_3",name:"Editing",color:"#8b5cf6",subStatuses:[{name:"Seleksi Foto",note:"Proses pemilihan foto terbaik oleh tim atau klien."},{name:"Color Grading Video",note:"Penyesuaian warna pada video."},{name:"Music Scoring",note:"Pemilihan musik latar untuk video."}],note:"Proses pasca-produksi."},{id:"status_4",name:"Revisi",color:"#14b8a6",subStatuses:[],note:"Tahap revisi berdasarkan masukan klien."},{id:"status_5",name:"Cetak",color:"#f97316",subStatuses:[{name:"Approval Desain Album",note:"Menunggu persetujuan final desain album dari klien."},{name:"Proses Cetak",note:"Album dan foto sedang dalam proses pencetakan."},{name:"QC Album",note:"Pemeriksaan kualitas hasil cetakan."}],note:"Proses pencetakan output fisik."},{id:"status_6",name:"Dikirim",color:"#06b6d4",subStatuses:[],note:"Hasil akhir telah dikirim ke klien."},{id:"status_7",name:"Selesai",color:"#10b981",subStatuses:[],note:"Proyek telah selesai dan semua pembayaran lunas."},{id:"status_8",name:"Dibatalkan",color:"#ef4444",subStatuses:[],note:"Proyek dibatalkan oleh klien atau vendor."}],notificationSettings:{newProject:!0,paymentConfirmation:!0,deadlineReminder:!0},securitySettings:{twoFactorEnabled:!1},briefingTemplate:`Halo tim,
Berikut adalah briefing untuk acara besok.

Key Persons:
- [Nama CP Klien]
- [Nama WO]

Jangan lupa:
- Bawa baterai cadangan & memory card kosong.
- Datang 1 jam sebelum acara dimulai.
- Dress code: Hitam rapi.

Semangat!`,termsAndConditions:` **Syarat & Ketentuan Umum**
- Harga yang tertera dapat berubah sewaktu-waktu sebelum adanya kesepakatan.

 **Pembayaran**
- Pemesanan dianggap sah setelah pembayaran Uang Muka (DP) sebesar 50% dari total biaya.
- Pelunasan wajib dilakukan paling lambat 3 (tiga) hari sebelum tanggal acara.

 **Pembatalan & Perubahan Jadwal**
- Uang Muka (DP) yang telah dibayarkan tidak dapat dikembalikan (non-refundable) jika terjadi pembatalan dari pihak klien.
- Perubahan jadwal dapat dilakukan maksimal 1 (satu) kali dengan konfirmasi selambat-lambatnya 14 hari sebelum tanggal acara, tergantung ketersediaan tim.

 **Hasil Akhir**
- Waktu pengerjaan hasil akhir (foto & video) adalah sesuai dengan yang tertera pada detail paket, dihitung setelah semua materi dan data dari klien kami terima.
- Hak cipta hasil foto dan video tetap menjadi milik Vena Pictures. Klien mendapatkan hak guna pribadi dan non-komersial.
- Vena Pictures berhak menggunakan hasil foto dan video untuk keperluan portofolio dan promosi dengan seizin klien.`,contractTemplate:`
<h2 style="text-align: center; font-size: 1.2em; font-weight: bold;">SURAT PERJANJIAN KERJA SAMA</h2>
<h3 style="text-align: center; font-size: 1.1em; font-weight: bold;">JASA FOTOGRAFI & VIDEOGRAFI</h3>
<p style="text-align: center;">Nomor: {contractNumber}</p>
<br/>
<p>Pada hari ini, tanggal <strong>{signingDate}</strong>, bertempat di <strong>{signingLocation}</strong>, kami yang bertanda tangan di bawah ini:</p>
<br/>
<ol style="list-style-type: decimal; padding-left: 20px;">
    <li>
        <strong>{vendorSignerName}</strong>, dalam jabatannya selaku Pemilik dari <strong>{vendorCompanyName}</strong>, beralamat di {vendorAddress} (selanjutnya disebut "PIHAK PERTAMA").
    </li>
    <li>
        <strong>{clientName1}</strong>, beralamat di {clientAddress1}, dengan nomor telepon {clientPhone1} (selanjutnya disebut "PIHAK KEDUA").
    </li>
</ol>
<br/>
<p>PIHAK PERTAMA dan PIHAK KEDUA secara bersama-sama sepakat untuk mengadakan perjanjian kerja sama dengan ketentuan sebagai berikut:</p>
<br/>
<h4 style="text-align: center; font-weight: bold;">PASAL 1: LINGKUP PEKERJAAN</h4>
<p>PIHAK PERTAMA setuju untuk menyediakan jasa dokumentasi untuk acara <strong>{projectName}</strong> milik PIHAK KEDUA yang akan diselenggarakan pada tanggal <strong>{projectDate}</strong> di lokasi <strong>{projectLocation}</strong>.</p>
<br/>
<h4 style="text-align: center; font-weight: bold;">PASAL 2: DETAIL LAYANAN</h4>
<p>Layanan yang diberikan oleh PIHAK PERTAMA mencakup:</p>
<ul style="list-style-type: disc; padding-left: 40px;">
    <li>Durasi Peliputan: {shootingDuration}</li>
    <li>Jumlah Personel: {personnelCount}</li>
    <li>Output Digital: {guaranteedPhotos} dalam format {digitalFilesFormat}</li>
    <li>Output Fisik: {albumDetails}</li>
    <li>Layanan Tambahan: {otherItems}</li>
    <li>Estimasi Waktu Pengerjaan: {deliveryTimeframe}</li>
</ul>
<br/>
<h4 style="text-align: center; font-weight: bold;">PASAL 3: BIAYA DAN PEMBAYARAN</h4>
<p>Total biaya untuk layanan yang disebutkan dalam Pasal 2 adalah sebesar <strong>{totalCost}</strong>. Pembayaran dilakukan dengan skema sebagai berikut:</p>
<ul style="list-style-type: disc; padding-left: 40px;">
    <li>Uang Muka (DP) sebesar <strong>{dpAmount}</strong> dibayarkan pada tanggal <strong>{dpDate}</strong>.</li>
    <li>Pelunasan dibayarkan paling lambat pada tanggal <strong>{finalPaymentDate}</strong>.</li>
</ul>
<br/>
<h4 style="text-align: center; font-weight: bold;">PASAL 4: PEMBATALAN</h4>
<p>{cancellationPolicy}</p>
<br/>
<h4 style="text-align: center; font-weight: bold;">PASAL 5: PENUTUP</h4>
<p>Perjanjian ini dibuat dan ditandatangani oleh kedua belah pihak dalam keadaan sadar dan tanpa paksaan. Hal-hal lain yang belum diatur akan diselesaikan secara musyawarah.</p>
`,logoBase64:void 0,brandColor:"#3b82f6",publicPageConfig:{template:"classic",title:"Galeri & Paket Layanan Kami",introduction:"Lihat portofolio terbaru dan paket layanan yang kami tawarkan. Kami siap mengabadikan momen spesial Anda.",galleryImages:[]},packageShareTemplate:`Halo {leadName},

Terima kasih atas ketertarikan Anda dengan layanan dari Vena Pictures. Berikut adalah tautan untuk melihat daftar paket layanan kami:

{packageLink}

Jangan ragu untuk bertanya jika ada yang kurang jelas.

Terima kasih,
Tim Vena Pictures`,bookingFormTemplate:`Halo {leadName},

Menindaklanjuti diskusi kita, silakan isi formulir pemesanan pada tautan berikut untuk melanjutkan ke tahap selanjutnya:

{bookingFormLink}

Kami tunggu konfirmasinya.

Terima kasih,
Tim Vena Pictures`,chatTemplates:Gc},kt={profile:Pr,packages:Vv,addOns:Kv,clients:[{id:al,name:"Budi & Sinta",email:"budi.sinta@example.com",phone:"081234567890",whatsapp:"6281234567890",since:"2023-01-15",instagram:"@budisinta.wedding",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-05-20T10:00:00Z",portalAccessId:"portal-budi-sinta"},{id:gc,name:"PT Sejahtera Abadi",email:"hrd@sejahteraabadi.com",phone:"021-555-1234",since:"2023-03-22",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-07-10T14:00:00Z",portalAccessId:"portal-sejahtera-abadi"},{id:jh,name:"Dewi & Rian",email:"dewi.rian@example.com",phone:"08111222333",since:"2023-08-01",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-06-25T11:00:00Z",portalAccessId:"portal-dewi-rian"},{id:wh,name:"Farhan & Aisyah",email:"farhan.aisyah@example.com",phone:"085678901234",since:"2023-11-10",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-07-12T09:00:00Z",portalAccessId:"portal-farhan-aisyah"},{id:Ch,name:"Agung & Bella",email:"agung.bella@example.com",phone:"087712345678",since:"2024-02-05",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-07-15T16:00:00Z",portalAccessId:"portal-agung-bella"},{id:Th,name:"Rina & Doni",email:"rina.doni@example.com",phone:"089987654321",since:"2024-04-12",status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:"2024-07-01T13:00:00Z",portalAccessId:"portal-rina-doni"},{id:Sh,name:"CV Maju Jaya",email:"contact@majujaya.co.id",phone:"031-888-4567",since:"2024-05-20",status:Ot.INACTIVE,clientType:An.VENDOR,lastContact:"2024-06-15T10:00:00Z",portalAccessId:"portal-maju-jaya"},{id:Ih,name:"Kevin & Laura",email:"kevin.laura@example.com",phone:"082123450987",since:"2024-01-10",status:Ot.LOST,clientType:An.DIRECT,lastContact:"2024-03-01T18:00:00Z",portalAccessId:"portal-kevin-laura"}],teamMembers:[{id:ta,name:"Andi Pratama",role:"Fotografer",email:"andi.p@freelance.com",phone:"081211112222",standardFee:2e6,noRek:"BCA 1234567890",rewardBalance:25e4,rating:4.8,performanceNotes:[{id:"pn1",date:"2024-02-15T10:00:00Z",note:"Komposisi foto sangat baik di acara Budi & Sinta.",type:xa.PRAISE}],portalAccessId:"freelance-andi"},{id:Ir,name:"Citra Lestari",role:"Videografer",email:"citra.l@freelance.com",phone:"081233334444",standardFee:25e5,noRek:"Mandiri 0987654321",rewardBalance:15e4,rating:4.5,performanceNotes:[],portalAccessId:"freelance-citra"},{id:xc,name:"Doni Firmansyah",role:"Editor",email:"doni.f@freelance.com",phone:"081255556666",standardFee:15e5,rewardBalance:0,rating:4.2,performanceNotes:[{id:"pn2",date:"2024-05-10T10:00:00Z",note:" consegna video teaser terlambat 1 hari untuk proyek Farhan & Aisyah.",type:xa.LATE_DEADLINE}],portalAccessId:"freelance-doni"},{id:yc,name:"Rian Hidayat",role:"Asisten Fotografer",email:"rian.h@freelance.com",phone:"081277778888",standardFee:75e4,rewardBalance:5e4,rating:4,performanceNotes:[],portalAccessId:"freelance-rian"},{id:wv,name:"Fira Anjani",role:"MUA",email:"fira.a@freelance.com",phone:"081299990000",standardFee:1e6,rewardBalance:0,rating:5,performanceNotes:[],portalAccessId:"freelance-fira"},{id:sl,name:"Eka Wijaya",role:"Pilot Drone",email:"eka.w@freelance.com",phone:"081212341234",standardFee:12e5,rewardBalance:1e5,rating:4.7,performanceNotes:[],portalAccessId:"freelance-eka"}],projects:[{id:na,projectName:"Pernikahan Budi & Sinta",clientName:"Budi & Sinta",clientId:al,projectType:"Pernikahan",packageName:"Paket Pernikahan Gold",packageId:zg,addOns:[{id:Xg,name:"Aerial Drone Shot",price:15e5}],date:"2024-02-14",deadlineDate:"2024-03-30",location:"Hotel Mulia, Jakarta",progress:100,status:"Selesai",totalCost:265e5,amountPaid:265e5,paymentStatus:_t.LUNAS,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:2e6,reward:25e4},{memberId:Ir,name:"Citra Lestari",role:"Videografer",fee:25e5},{memberId:sl,name:"Eka Wijaya",role:"Pilot Drone",fee:12e5,reward:1e5}],finalDriveLink:"https://bit.ly/vena-budi-sinta"},{id:Ar,projectName:"Acara Tahunan PT Sejahtera Abadi",clientName:"PT Sejahtera Abadi",clientId:gc,projectType:"Korporat",packageName:"Paket Acara Korporat",packageId:Yg,addOns:[],date:"2024-08-20",deadlineDate:"2024-09-03",location:"Ritz-Carlton, Jakarta",progress:60,status:"Editing",activeSubStatuses:["Color Grading Video"],totalCost:8e6,amountPaid:4e6,paymentStatus:_t.DP_TERBAYAR,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:1e6},{memberId:Ir,name:"Citra Lestari",role:"Videografer",fee:15e5}]},{id:Er,projectName:"Lamaran Dewi & Rian",clientName:"Dewi & Rian",clientId:jh,projectType:"Lamaran",packageName:"Paket Lamaran",packageId:Qg,addOns:[],date:"2024-06-15",deadlineDate:"2024-06-29",location:"Plataran Menteng, Jakarta",progress:95,status:"Dikirim",shippingDetails:"Dikirim via GDrive",totalCost:5e6,amountPaid:5e6,paymentStatus:_t.LUNAS,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:15e5}]},{id:bc,projectName:"Prewedding Farhan & Aisyah",clientName:"Farhan & Aisyah",clientId:wh,projectType:"Prewedding",packageName:"Paket Prewedding",packageId:Jc,addOns:[],date:"2024-05-05",deadlineDate:"2024-05-26",location:"Bromo, Jawa Timur",progress:80,status:"Revisi",totalCost:65e5,amountPaid:65e5,paymentStatus:_t.LUNAS,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:2e6},{memberId:xc,name:"Doni Firmansyah",role:"Editor",fee:1e6}],revisions:[{id:Lv,date:"2024-05-22T10:00:00Z",adminNotes:"Klien meminta tone warna lebih warm dan ada beberapa foto yang ingin dihilangkan jerawatnya.",deadline:"2024-05-25T10:00:00Z",freelancerId:xc,status:qt.PENDING}]},{id:Cv,projectName:"Pernikahan Agung & Bella",clientName:"Agung & Bella",clientId:Ch,projectType:"Pernikahan",packageName:"Paket Pernikahan Silver",packageId:qc,addOns:[],date:"2024-09-10",location:"Bandung",progress:10,status:"Persiapan",totalCost:12e6,amountPaid:0,paymentStatus:_t.BELUM_BAYAR,team:[]},{id:Tv,projectName:"Pernikahan Rina & Doni",clientName:"Rina & Doni",clientId:Th,projectType:"Pernikahan",packageName:"Paket Pernikahan Silver",packageId:qc,addOns:[{id:Zg,name:"Album Tambahan untuk Orang Tua",price:12e5}],date:"2024-07-28",deadlineDate:"2024-08-28",location:"Bali",progress:90,status:"Cetak",activeSubStatuses:["Proses Cetak"],totalCost:132e5,amountPaid:66e5,paymentStatus:_t.DP_TERBAYAR,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:2e6},{memberId:yc,name:"Rian Hidayat",role:"Asisten Fotografer",fee:75e4}]},{id:Sv,projectName:"Foto Produk CV Maju Jaya",clientName:"CV Maju Jaya",clientId:Sh,projectType:"Produk",packageName:"Sesi Foto Keluarga",packageId:Wc,addOns:[],date:"2024-06-01",deadlineDate:"2024-06-11",location:"Studio Vena",progress:100,status:"Selesai",totalCost:35e5,amountPaid:35e5,paymentStatus:_t.LUNAS,team:[{memberId:ta,name:"Andi Pratama",role:"Fotografer",fee:1e6}]},{id:Iv,projectName:"Prewedding Kevin & Laura",clientName:"Kevin & Laura",clientId:Ih,projectType:"Prewedding",packageName:"Paket Prewedding",packageId:Jc,addOns:[],date:"2024-04-15",location:"Yogyakarta",progress:25,status:"Dibatalkan",totalCost:65e5,amountPaid:325e4,paymentStatus:_t.DP_TERBAYAR,team:[],rejectionReason:"Klien membatalkan H-2 karena alasan pribadi."},{id:Av,projectName:"Sesi Maternity Budi & Sinta",clientName:"Budi & Sinta",clientId:al,projectType:"Keluarga",packageName:"Sesi Foto Keluarga",packageId:Wc,addOns:[],date:"2024-08-15",location:"Studio Vena",progress:0,status:"Dikonfirmasi",bookingStatus:sa.BARU,totalCost:35e5,amountPaid:1e6,paymentStatus:_t.DP_TERBAYAR,team:[]}],transactions:[{id:"TRN001",date:"2024-01-20",description:"DP Proyek Pernikahan Budi & Sinta",amount:1325e4,type:$e.INCOME,projectId:na,category:"DP Proyek",method:"Transfer Bank",cardId:"CARD001"},{id:"TRN002",date:"2024-02-10",description:"Pelunasan Proyek Pernikahan Budi & Sinta",amount:1325e4,type:$e.INCOME,projectId:na,category:"Pelunasan Proyek",method:"Transfer Bank",cardId:"CARD001"},{id:"TRN003",date:"2024-02-20",description:"Gaji Freelancer - Andi P (Budi & Sinta)",amount:2e6,type:$e.EXPENSE,projectId:na,category:"Gaji Freelancer",method:"Transfer Bank",cardId:"CARD001"},{id:"TRN004",date:"2024-02-20",description:"Gaji Freelancer - Citra L (Budi & Sinta)",amount:25e5,type:$e.EXPENSE,projectId:na,category:"Gaji Freelancer",method:"Transfer Bank",cardId:"CARD001"},{id:"TRN005",date:"2024-07-10",description:"DP Proyek Acara Tahunan PT SA",amount:4e6,type:$e.INCOME,projectId:Ar,category:"DP Proyek",method:"Transfer Bank",cardId:"CARD002"},{id:"TRN006",date:"2024-07-05",description:"Biaya langganan Adobe Creative Cloud",amount:87e4,type:$e.EXPENSE,category:"Operasional Kantor",method:"Kartu",cardId:"CARD001"},{id:"TRN007",date:"2024-06-01",description:"Pelunasan Proyek Lamaran Dewi & Rian",amount:5e6,type:$e.INCOME,projectId:Er,category:"Pelunasan Proyek",method:"Tunai",cardId:Eh},{id:"TRN008",date:"2024-04-15",description:"Pelunasan Proyek Prewedding F&A",amount:65e5,type:$e.INCOME,projectId:bc,category:"Pelunasan Proyek",method:"Transfer Bank",cardId:"CARD001"}],cards:[{id:Ah,cardHolderName:"Andi Vena",bankName:"BCA",cardType:Rt.DEBIT,lastFourDigits:"3090",expiryDate:"09/28",balance:525e5,colorGradient:"from-blue-500 to-sky-400"},{id:Fv,cardHolderName:"Andi Vena",bankName:"Mandiri",cardType:Rt.KREDIT,lastFourDigits:"1121",expiryDate:"11/27",balance:-25e5,colorGradient:"from-yellow-400 to-amber-500"},{id:Eh,cardHolderName:"Kas Operasional",bankName:"Tunai",cardType:Rt.TUNAI,lastFourDigits:"CASH",balance:5e6,colorGradient:"from-slate-100 to-slate-300"}],pockets:[{id:Uv,name:"Dana Pajak 2024",description:"Alokasi dana untuk pembayaran pajak tahunan.",icon:"clipboard-list",type:tn.LOCKED,amount:5e6,lockEndDate:"2025-03-31"},{id:Ov,name:"Tabungan Lensa & Kamera Baru",description:"Menabung untuk upgrade gear.",icon:"piggy-bank",type:tn.SAVING,amount:85e5,goalAmount:4e7},{id:$v,name:"Anggaran Operasional Juli 2024",description:"Dana untuk pengeluaran bulanan.",icon:"clipboard-list",type:tn.EXPENSE,amount:2e6,goalAmount:5e6,sourceCardId:Ah},{id:Bv,name:"Tabungan Hadiah Freelancer",description:"Akumulasi hadiah untuk tim.",icon:"star",type:tn.REWARD_POOL,amount:5e5}],leads:[{id:"LEAD001",name:"Calon Klien - Sarah",contactChannel:Ft.INSTAGRAM,location:"Jakarta",status:Tt.DISCUSSION,date:new Date().toISOString(),notes:"Menanyakan paket prewedding untuk bulan Desember."},{id:"LEAD002",name:"Bapak Hendra - Corporate",contactChannel:Ft.WEBSITE,location:"Surabaya",status:Tt.FOLLOW_UP,date:new Date(Date.now()-7200*60*1e3).toISOString(),notes:"Minta penawaran untuk acara gathering kantor. Sudah dikirim, tunggu balasan."},{id:"LEAD003",name:"Rini",contactChannel:Ft.WHATSAPP,location:"Tangerang",status:Tt.REJECTED,date:new Date(Date.now()-14400*60*1e3).toISOString(),notes:"Budget tidak sesuai."}],notifications:[{id:"NOTIF001",title:"Prospek Baru dari Instagram!",message:"Sarah menanyakan tentang paket prewedding.",timestamp:new Date().toISOString(),isRead:!1,icon:"lead",link:{view:Te.PROSPEK}},{id:"NOTIF002",title:"Pembayaran Diterima",message:"DP sebesar Rp 4.000.000 dari PT Sejahtera Abadi telah dikonfirmasi.",timestamp:"2024-07-10T14:05:00Z",isRead:!0,icon:"payment",link:{view:Te.FINANCE}},{id:"NOTIF003",title:"Deadline Mendekat",message:'Proyek "Lamaran Dewi & Rian" akan melewati deadline dalam 3 hari.',timestamp:"2024-06-26T09:00:00Z",isRead:!0,icon:"deadline",link:{view:Te.PROJECTS,action:{type:"VIEW_PROJECT_DETAILS",id:Er}}}],sops:[{id:"SOP001",title:"Alur Kerja Hari-H Pernikahan",category:"Pernikahan",content:`1. Tim berkumpul di lokasi 1 jam sebelum acara.
2. Briefing cepat dengan WO dan CP Klien.
3. Pembagian tugas: Fotografer A (pengantin), Fotografer B (tamu & detail), Videografer (sinematik).
4. Selalu backup data setiap selesai sesi (e.g., setelah akad).`,lastUpdated:"2023-12-01T10:00:00Z"},{id:"SOP002",title:"Prosedur Backup Data",category:"Umum",content:`1. Segera setelah acara selesai, backup semua memory card ke 2 hard drive terpisah.
2. Satu hard drive disimpan di kantor, satu dibawa pulang oleh PIC.
3. Beri nama folder dengan format: YYYY-MM-DD_[NamaProyek].`,lastUpdated:"2023-11-20T10:00:00Z"}],promoCodes:[{id:Pv,code:"WEDDINGFEST",discountType:"percentage",discountValue:10,isActive:!0,usageCount:5,maxUsage:20,expiryDate:"2024-12-31",createdAt:"2024-01-01T10:00:00Z"},{id:Dv,code:"AKHIRTAHUN",discountType:"fixed",discountValue:1e6,isActive:!1,usageCount:15,maxUsage:15,expiryDate:"2023-12-31",createdAt:"2023-11-01T10:00:00Z"}],socialMediaPosts:[{id:"POST001",projectId:na,clientName:"Budi & Sinta",postType:Ns.INSTAGRAM_FEED,platform:"Instagram",scheduledDate:"2024-03-01T10:00:00Z",caption:"Momen bahagia dari pernikahan Budi & Sinta. Sebuah kehormatan bagi kami untuk mengabadikannya. #VenaPictures #WeddingDay",status:Xt.POSTED},{id:"POST002",projectId:bc,clientName:"Farhan & Aisyah",postType:Ns.TIKTOK,platform:"TikTok",scheduledDate:"2024-07-25T19:00:00Z",caption:"BTS keseruan prewedding Farhan & Aisyah di Bromo! #prewedding #bromo #behindthescenes",status:Xt.SCHEDULED},{id:"POST003",projectId:"GENERAL",clientName:"Konten Umum",postType:Ns.BLOG,platform:"Website",scheduledDate:"2024-08-01T10:00:00Z",caption:"5 Tips Memilih Fotografer Pernikahan yang Tepat",status:Xt.DRAFT}],assets:[{id:"ASSET001",name:"Sony A7 IV",category:"Kamera",purchaseDate:"2023-01-10",purchasePrice:38e6,serialNumber:"SN12345678",status:va.AVAILABLE,notes:"Kamera utama"},{id:"ASSET002",name:"Sony FE 50mm f/1.8",category:"Lensa",purchaseDate:"2023-01-10",purchasePrice:35e5,status:va.AVAILABLE},{id:"ASSET003",name:"DJI Mavic 3",category:"Drone",purchaseDate:"2023-05-15",purchasePrice:32e6,serialNumber:"SN98765432",status:va.IN_USE,notes:"Digunakan untuk proyek PT SA"}],clientFeedback:[{id:"FB001",clientName:"Budi & Sinta",satisfaction:Ct.VERY_SATISFIED,rating:5,feedback:"Tim Vena Pictures sangat profesional dan hasilnya melebihi ekspektasi! Terima kasih banyak!",date:"2024-04-05T10:00:00Z"},{id:"FB002",clientName:"Kevin & Laura",satisfaction:Ct.UNSATISFIED,rating:2,feedback:"Komunikasi kurang lancar dan ada beberapa permintaan kami yang terlewat saat sesi foto.",date:"2024-03-02T10:00:00Z"}],contracts:[{id:Mv,contractNumber:"VP/CTR/2024/001",clientId:al,projectId:na,signingDate:"2024-01-16",signingLocation:"Kantor Vena Pictures",createdAt:"2024-01-16T10:00:00Z",clientName1:"Budi Santoso",clientAddress1:"Jl. Merdeka No. 1, Jakarta",clientPhone1:"081234567890",shootingDuration:"8 Jam",guaranteedPhotos:"300 Foto Edit",albumDetails:"1 Album 20x30cm 20 Halaman",digitalFilesFormat:"JPG High-Res",otherItems:"Video Sinematik 5-7 menit",personnelCount:"2 Fotografer, 2 Videografer",deliveryTimeframe:"45 hari kerja",dpDate:"2024-01-20",finalPaymentDate:"2024-02-10",cancellationPolicy:"DP tidak dapat dikembalikan.",jurisdiction:"Jakarta Pusat",vendorSignature:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",clientSignature:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="},{id:Rv,contractNumber:"VP/CTR/2024/002",clientId:gc,projectId:Ar,signingDate:"2024-07-09",signingLocation:"Kantor PT Sejahtera Abadi",createdAt:"2024-07-09T10:00:00Z",clientName1:"HRD PT Sejahtera Abadi",clientAddress1:"Jl. Jenderal Sudirman Kav. 52-53, Jakarta",clientPhone1:"021-555-1234",shootingDuration:"6 Jam",guaranteedPhotos:"Semua foto (JPG)",albumDetails:"Tidak ada",digitalFilesFormat:"JPG High-Res",otherItems:"Video dokumentasi 10-15 menit",personnelCount:"1 Fotografer, 1 Videografer",deliveryTimeframe:"14 hari kerja",dpDate:"2024-07-10",finalPaymentDate:"2024-08-17",cancellationPolicy:"DP tidak dapat dikembalikan.",jurisdiction:"Jakarta Selatan",vendorSignature:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}],teamProjectPayments:[{id:"TPP001",projectId:na,teamMemberName:"Andi Pratama",teamMemberId:ta,date:"2024-02-14",status:"Paid",fee:2e6,reward:25e4},{id:"TPP002",projectId:na,teamMemberName:"Citra Lestari",teamMemberId:Ir,date:"2024-02-14",status:"Paid",fee:25e5},{id:"TPP003",projectId:na,teamMemberName:"Eka Wijaya",teamMemberId:sl,date:"2024-02-14",status:"Paid",fee:12e5,reward:1e5},{id:"TPP004",projectId:Ar,teamMemberName:"Andi Pratama",teamMemberId:ta,date:"2024-08-20",status:"Unpaid",fee:1e6},{id:"TPP005",projectId:Ar,teamMemberName:"Citra Lestari",teamMemberId:Ir,date:"2024-08-20",status:"Unpaid",fee:15e5},{id:"TPP006",projectId:Er,teamMemberName:"Andi Pratama",teamMemberId:ta,date:"2024-06-15",status:"Paid",fee:15e5}],teamPaymentRecords:[{id:"TPR001",recordNumber:"PAY-FR-TM001-20240220",teamMemberId:ta,date:"2024-02-20",projectPaymentIds:["TPP001","TPP006"],totalAmount:35e5,vendorSignature:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}],rewardLedgerEntries:[{id:"RLE001",teamMemberId:ta,date:"2024-02-15",description:"Hadiah dari proyek Pernikahan Budi & Sinta",amount:25e4,projectId:na},{id:"RLE002",teamMemberId:sl,date:"2024-02-15",description:"Hadiah dari proyek Pernikahan Budi & Sinta",amount:1e5,projectId:na},{id:"RLE003",teamMemberId:yc,date:"2024-07-01",description:"Hadiah dari proyek Lamaran Dewi & Rian",amount:5e4,projectId:Er}]};Pr.projectStatusConfig,Pr.briefingTemplate,Pr.packageShareTemplate,Pr.bookingFormTemplate;const Hv=({activeView:n,setActiveView:e,isOpen:a,setIsOpen:s,currentUser:r})=>{const[d,u]=C.useState(()=>typeof window<"u"&&window.localStorage&&localStorage.getItem("theme")||"light");C.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const p=()=>{u(f=>f==="light"?"dark":"light")},h=C.useMemo(()=>{if(!r)return[];if(r.role==="Admin")return Hc;const f=new Set(r.permissions||[]);return Hc.filter(g=>f.has(g.view))},[r]);return C.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`
          fixed inset-0 
          bg-black/50 
          backdrop-blur-sm
          z-30 
          xl:hidden 
          transition-all duration-300 ease-out
          ${a?"opacity-100 visible":"opacity-0 invisible"}
        `,onClick:()=>s(!1)}),t.jsxs("aside",{id:"sidebar",className:`
          fixed xl:relative 
          inset-y-0 left-0 
          w-72 sm:w-80 xl:w-64
          bg-brand-surface 
          flex-col flex-shrink-0 flex 
          z-40 
          transform transition-all duration-300 ease-out
          xl:translate-x-0
          border-r border-brand-border/50
          shadow-2xl xl:shadow-none
          ${a?"translate-x-0":"-translate-x-full"}
        `,style:{paddingTop:"var(--safe-area-inset-top, 0px)",paddingBottom:"var(--safe-area-inset-bottom, 0px)",paddingLeft:"var(--safe-area-inset-left, 0px)"},children:[t.jsx("div",{className:`
          h-16 sm:h-20 
          flex items-center 
          px-4 sm:px-6 
          border-b border-brand-border/50
          bg-brand-surface
        `,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`
              w-8 h-8 
              rounded-xl 
              bg-gradient-to-br from-brand-accent to-brand-accent-hover
              flex items-center justify-center
              shadow-lg
            `,children:t.jsx("span",{className:"text-white font-bold text-sm",children:"V"})}),t.jsx("span",{className:`
              text-lg sm:text-xl 
              font-extrabold 
              text-gradient
              select-none
            `,children:"Vena Pictures"})]})}),t.jsx("nav",{className:`
          flex-1 
          px-3 sm:px-4 
          py-4 sm:py-6 
          overflow-y-auto 
          overscroll-contain
        `,style:{WebkitOverflowScrolling:"touch"},children:t.jsx("ul",{className:"space-y-1",children:h.map((f,g)=>t.jsx("li",{children:t.jsxs("a",{href:"#",onClick:y=>{y.preventDefault(),e(f.view),s(!1)},className:`
                    flex items-center 
                    px-3 sm:px-4 
                    py-3 sm:py-3.5 
                    my-1 
                    text-sm font-semibold 
                    rounded-xl 
                    transition-all duration-200
                    group
                    relative
                    overflow-hidden
                    min-h-[48px]
                    ${n===f.view?"bg-brand-accent text-white shadow-lg shadow-brand-accent/25":"text-brand-text-primary hover:bg-brand-input active:bg-brand-input/80"}
                  `,style:{animationDelay:`${g*50}ms`,animation:a?"slideInLeft 0.3s ease-out forwards":"none"},children:[n===f.view&&t.jsx("div",{className:`
                      absolute inset-0 
                      bg-gradient-to-r 
                      from-transparent 
                      via-white/10 
                      to-transparent 
                      -translate-x-full 
                      group-hover:translate-x-full 
                      transition-transform duration-1000
                    `}),t.jsx("div",{className:`
                    w-6 sm:w-7 
                    mr-3 sm:mr-4 
                    flex-shrink-0 
                    flex items-center justify-center
                    relative
                  `,children:t.jsx(f.icon,{className:`
                      w-5 h-5 sm:w-6 sm:h-6
                      transition-all duration-200
                      ${n!==f.view?"text-brand-text-secondary group-hover:text-brand-text-primary":"text-white"}
                    `})}),t.jsx("span",{className:`
                    flex-1 
                    truncate
                    relative
                    leading-tight
                  `,children:f.label}),n===f.view&&t.jsx("div",{className:`
                      w-1.5 h-6 
                      bg-white/30 
                      rounded-full
                      flex-shrink-0
                    `})]})},f.view))})}),t.jsxs("div",{className:`
          px-4 sm:px-6 
          py-4 sm:py-6 
          flex-shrink-0 
          border-t border-brand-border/50
          bg-brand-surface
        `,children:[r&&t.jsxs("div",{className:`
              flex items-center 
              gap-3 
              mb-4 sm:mb-6
              p-3
              rounded-xl
              bg-brand-input/50
              border border-brand-border/30
            `,children:[t.jsx("div",{className:`
                w-10 h-10 sm:w-12 sm:h-12 
                rounded-full 
                bg-gradient-to-br from-brand-accent/20 to-brand-accent/10
                flex items-center justify-center
                border-2 border-brand-accent/20
                flex-shrink-0
              `,children:t.jsx(_n,{className:"w-5 h-5 sm:w-6 sm:h-6 text-brand-accent"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:`
                  font-semibold 
                  text-sm sm:text-base 
                  text-brand-text-light
                  truncate
                  leading-tight
                `,children:r.fullName}),t.jsx("p",{className:`
                  text-xs sm:text-sm 
                  text-brand-text-secondary
                  truncate
                  leading-tight
                `,children:r.role})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("button",{onClick:p,className:`
                p-3 sm:p-3.5
                rounded-xl 
                text-brand-text-primary 
                hover:bg-brand-input 
                active:bg-brand-input/80
                transition-all duration-200
                flex-shrink-0
                min-w-[48px] min-h-[48px]
                flex items-center justify-center
                group
                flex-1
              `,"aria-label":`Ganti ke mode ${d==="light"?"gelap":"terang"}`,children:d==="light"?t.jsx(uv,{className:`
                  w-5 h-5 sm:w-6 sm:h-6 
                  text-brand-text-secondary 
                  group-hover:text-brand-text-primary
                  transition-colors duration-200
                `}):t.jsx(mv,{className:`
                  w-5 h-5 sm:w-6 sm:h-6 
                  text-brand-text-secondary 
                  group-hover:text-brand-text-primary
                  transition-colors duration-200
                `})})})]})]}),t.jsx("style",{children:`
        @keyframes slideInLeft {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        /* Enhanced scrollbar for navigation */
        nav::-webkit-scrollbar {
          width: 6px;
        }
        
        nav::-webkit-scrollbar-track {
          background: transparent;
        }
        
        nav::-webkit-scrollbar-thumb {
          background: var(--color-border);
          border-radius: 3px;
        }
        
        nav::-webkit-scrollbar-thumb:hover {
          background: var(--color-text-secondary);
        }
        
        /* iOS momentum scrolling */
        @supports (-webkit-touch-callout: none) {
          nav {
            -webkit-overflow-scrolling: touch;
          }
        }
      `})]})},qe=({icon:n,title:e,value:a,change:s,changeType:r,iconBgColor:d="bg-gray-700/50",iconColor:u="text-brand-text-primary",subtitle:p})=>{const h=r==="increase"?"text-brand-success":"text-brand-danger",f=y=>t.jsxs("svg",{...y,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),t.jsx("polyline",{points:"16 7 22 7 22 13"})]}),g=y=>t.jsxs("svg",{...y,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),t.jsx("polyline",{points:"16 17 22 17 22 11"})]});return t.jsxs("div",{className:`
      bg-brand-surface 
      p-3 sm:p-4 md:p-6 
      rounded-2xl 
      flex items-start 
      gap-3 sm:gap-4 md:gap-5 
      shadow-soft
      border border-brand-border/50 
      hover:shadow-lg 
      hover:shadow-brand-accent/5
      hover:border-brand-border
      hover:-translate-y-0.5
      transition-all duration-300 ease-out
      group
      backdrop-blur-sm
      relative
      overflow-hidden
    `,children:[t.jsx("div",{className:`
        absolute inset-0 
        bg-gradient-to-br 
        from-brand-accent/0 
        to-brand-accent/0 
        group-hover:from-brand-accent/2 
        group-hover:to-transparent 
        transition-all duration-300
        pointer-events-none
      `}),t.jsxs("div",{className:`
        w-12 h-12 
        sm:w-14 sm:h-14 
        md:w-16 md:h-16 
        rounded-2xl
        flex items-center justify-center 
        flex-shrink-0 
        ${d} ${u}
        shadow-sm
        group-hover:scale-105
        transition-all duration-300
        relative
        overflow-hidden
      `,children:[t.jsx("div",{className:`
          absolute inset-0 
          bg-gradient-to-r 
          from-transparent 
          via-white/10 
          to-transparent 
          -translate-x-full 
          group-hover:translate-x-full 
          transition-transform duration-1000
        `}),t.jsx("div",{className:`
          w-5 h-5 
          sm:w-6 sm:h-6 
          md:w-7 md:h-7
          relative z-10
        `,children:n})]}),t.jsxs("div",{className:"flex-grow overflow-hidden min-w-0 relative z-10",children:[t.jsx("p",{className:`
          text-xs sm:text-sm 
          text-brand-text-secondary 
          font-medium 
          truncate
          mb-1 sm:mb-2
          leading-tight
        `,children:e}),t.jsxs("div",{className:"flex items-end gap-2 flex-wrap mb-1",children:[t.jsx("p",{className:`
            text-lg sm:text-xl md:text-2xl lg:text-3xl 
            font-bold 
            text-brand-text-light 
            break-words 
            leading-none
            group-hover:text-brand-accent
            transition-colors duration-300
          `,children:a}),s&&t.jsxs("div",{className:`
              flex items-center 
              text-xs sm:text-sm 
              font-semibold 
              ${h}
              gap-1
              bg-white/50
              dark:bg-black/20
              px-2 py-1
              rounded-full
              shadow-sm
            `,children:[r==="increase"?t.jsx(f,{className:"w-3 h-3 sm:w-4 sm:h-4"}):t.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.jsx("span",{children:s})]})]}),p&&t.jsx("p",{className:`
            text-xs sm:text-sm 
            text-brand-text-secondary 
            mt-1 sm:mt-2
            line-clamp-2
            leading-tight
          `,children:p})]}),t.jsx("div",{className:`
        absolute top-0 right-0 
        w-8 h-8 
        bg-gradient-to-bl 
        from-brand-accent/10 
        to-transparent 
        opacity-0 
        group-hover:opacity-100 
        transition-opacity duration-300
      `})]})},Gv=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M18 6 6 18"}),t.jsx("path",{d:"m6 6 12 12"})]}),nt=({isOpen:n,onClose:e,title:a,children:s,footer:r,size:d="2xl"})=>{if(C.useEffect(()=>{if(n){document.body.style.overflow="hidden",document.body.style.paddingRight="var(--scrollbar-width, 0px)";const p=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="",document.body.style.paddingRight=""}}},[n,e]),!n)return null;const u={sm:"max-w-sm w-full",md:"max-w-md w-full",lg:"max-w-lg w-full",xl:"max-w-xl w-full","2xl":"max-w-2xl w-full","3xl":"max-w-3xl w-full","4xl":"max-w-4xl w-full","5xl":"max-w-5xl w-full"};return t.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex justify-center items-center p-4 sm:p-6 md:p-8 transition-all duration-300",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",style:{paddingTop:"calc(1rem + var(--safe-area-inset-top, 0px))",paddingBottom:"calc(1rem + var(--safe-area-inset-bottom, 0px))",paddingLeft:"calc(1rem + var(--safe-area-inset-left, 0px))",paddingRight:"calc(1rem + var(--safe-area-inset-right, 0px))"},children:[t.jsxs("div",{className:`
          bg-brand-surface text-brand-text-primary 
          rounded-2xl sm:rounded-3xl 
          shadow-2xl 
          ${u[d]} 
          max-h-[calc(100vh-2rem)] 
          sm:max-h-[calc(100vh-4rem)] 
          md:max-h-[calc(100vh-6rem)]
          flex flex-col 
          transform transition-all duration-300 
          animate-scale-in 
          border border-brand-border/50
          backdrop-blur-xl
        `,onClick:p=>p.stopPropagation(),children:[t.jsxs("div",{className:`
          flex justify-between items-center 
          p-4 sm:p-6 
          border-b border-brand-border/50 
          flex-shrink-0
          bg-brand-surface/90 backdrop-blur-sm
          rounded-t-2xl sm:rounded-t-3xl
        `,children:[t.jsx("h3",{id:"modal-title",className:`
              text-lg sm:text-xl 
              font-semibold 
              text-brand-text-light
              truncate
              pr-4
            `,children:a}),t.jsx("button",{onClick:e,className:`
              text-brand-text-secondary 
              hover:text-brand-text-light 
              active:text-brand-text-light
              p-2
              rounded-full 
              hover:bg-brand-input 
              active:bg-brand-input
              transition-all duration-200
              flex-shrink-0
              min-w-[44px] min-h-[44px]
              flex items-center justify-center
              focus:outline-none
              focus:ring-2 focus:ring-brand-accent/20
              focus:bg-brand-input
              -mr-2
            `,"aria-label":"Close modal",type:"button",children:t.jsx(Gv,{className:"w-5 h-5"})})]}),t.jsx("div",{className:`
          p-4 sm:p-6 
          overflow-y-auto 
          flex-1
          modal-content-area
          overscroll-contain
          scroll-smooth
        `,style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"thin"},children:s}),r&&t.jsx("div",{className:`
            flex justify-end items-center 
            p-4 sm:p-6 
            bg-brand-bg/50 
            border-t border-brand-border/50 
            rounded-b-2xl sm:rounded-b-3xl 
            flex-shrink-0
            backdrop-blur-sm
            gap-3
          `,children:r})]}),t.jsx("style",{children:`
        @keyframes scaleIn {
          from { 
            transform: scale(0.95) translateY(10px); 
            opacity: 0; 
          }
          to { 
            transform: scale(1) translateY(0); 
            opacity: 1; 
          }
        }
        
        .animate-scale-in {
          animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        /* Enhanced mobile modal styles */
        @media (max-width: 640px) {
          .modal-content-area {
            /* Better mobile scrolling */
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
          }
        }
        
        /* Enhanced scrollbar for modal content */
        .modal-content-area::-webkit-scrollbar {
          width: 6px;
        }
        
        .modal-content-area::-webkit-scrollbar-track {
          background: transparent;
        }
        
        .modal-content-area::-webkit-scrollbar-thumb {
          background: var(--color-border);
          border-radius: 3px;
        }
        
        .modal-content-area::-webkit-scrollbar-thumb:hover {
          background: var(--color-text-secondary);
        }
        
        /* iOS specific optimizations */
        @supports (-webkit-touch-callout: none) {
          .modal-content-area {
            -webkit-overflow-scrolling: touch;
          }
        }
      `})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qv,Jv;function Wv(){return{geminiUrl:qv,vertexUrl:Jv}}function zv(n,e,a,s){var r,d;if(!(n!=null&&n.baseUrl)){const u=Wv();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:a:(d=u.geminiUrl)!==null&&d!==void 0?d:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs{}function tt(n,e){const a=/\{([^}]+)\}/g;return n.replace(a,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const d=e[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(n,e,a){for(let d=0;d<e.length-1;d++){const u=e[d];if(u.endsWith("[]")){const p=u.slice(0,-2);if(!(p in n))if(Array.isArray(a))n[p]=Array.from({length:a.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[p])){const h=n[p];if(Array.isArray(a))for(let f=0;f<h.length;f++){const g=h[f];c(g,e.slice(d+1),a[f])}else for(const f of h)c(f,e.slice(d+1),a)}return}else if(u.endsWith("[0]")){const p=u.slice(0,-3);p in n||(n[p]=[{}]);const h=n[p];c(h[0],e.slice(d+1),a);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!a||typeof a=="object"&&Object.keys(a).length===0||a===r)return;if(typeof r=="object"&&typeof a=="object"&&r!==null&&a!==null)Object.assign(r,a);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof a=="object"&&a!==null&&!Array.isArray(a)?Object.assign(n,a):n[s]=a}function l(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let a=0;a<e.length;a++){if(typeof n!="object"||n===null)return;const s=e[a];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in n){const d=n[r];return Array.isArray(d)?d.map(u=>l(u,e.slice(a+1))):void 0}else return}else n=n[s]}return n}catch(a){if(a instanceof TypeError)return;throw a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cu(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yv(n){const e={},a=l(n,["operationName"]);a!=null&&c(e,["_url","operationName"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function Qv(n){const e={},a=l(n,["operationName"]);a!=null&&c(e,["operationName"],a);const s=l(n,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const r=l(n,["config"]);return r!=null&&c(e,["config"],r),e}function Xv(n){const e={},a=l(n,["operationName"]);a!=null&&c(e,["_url","operationName"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function Zv(n){const e={},a=l(n,["video","uri"]);a!=null&&c(e,["uri"],a);const s=l(n,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Cu(s));const r=l(n,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function e0(n){const e={},a=l(n,["_self"]);return a!=null&&c(e,["video"],Zv(a)),e}function t0(n){const e={},a=l(n,["generatedSamples"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(u=>e0(u))),c(e,["generatedVideos"],d)}const s=l(n,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=l(n,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function n0(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["metadata"]);s!=null&&c(e,["metadata"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);d!=null&&c(e,["error"],d);const u=l(n,["response","generateVideoResponse"]);return u!=null&&c(e,["response"],t0(u)),e}function a0(n){const e={},a=l(n,["gcsUri"]);a!=null&&c(e,["uri"],a);const s=l(n,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Cu(s));const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function s0(n){const e={},a=l(n,["_self"]);return a!=null&&c(e,["video"],a0(a)),e}function i0(n){const e={},a=l(n,["videos"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(u=>s0(u))),c(e,["generatedVideos"],d)}const s=l(n,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=l(n,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function r0(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["metadata"]);s!=null&&c(e,["metadata"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);d!=null&&c(e,["error"],d);const u=l(n,["response"]);return u!=null&&c(e,["response"],i0(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _h;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_h||(_h={}));var Ph;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Ph||(Ph={}));var ba;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ba||(ba={}));var Dh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Dh||(Dh={}));var Mh;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Mh||(Mh={}));var Rh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Rh||(Rh={}));var Lh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lh||(Lh={}));var Fh;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Fh||(Fh={}));var Uh;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Uh||(Uh={}));var Oh;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Oh||(Oh={}));var $h;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})($h||($h={}));var Bh;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Bh||(Bh={}));var Vh;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Vh||(Vh={}));var Kh;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Kh||(Kh={}));var Hh;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hh||(Hh={}));var xl;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xl||(xl={}));var Gh;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gh||(Gh={}));var zc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zc||(zc={}));var qh;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(qh||(qh={}));var Jh;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Jh||(Jh={}));var Wh;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Wh||(Wh={}));var zh;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(zh||(zh={}));var Yh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Yh||(Yh={}));var Qh;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Qh||(Qh={}));var Xh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Xh||(Xh={}));var Zh;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Zh||(Zh={}));var ef;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ef||(ef={}));var tf;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tf||(tf={}));var nf;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nf||(nf={}));var af;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(af||(af={}));var sf;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sf||(sf={}));var rf;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rf||(rf={}));var of;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(of||(of={}));var lf;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(lf||(lf={}));var df;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(df||(df={}));var cf;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(cf||(cf={}));var uf;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(uf||(uf={}));var mf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(mf||(mf={}));var pf;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pf||(pf={}));var hf;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hf||(hf={}));var ff;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ff||(ff={}));var gf;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(gf||(gf={}));var xf;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(xf||(xf={}));var yf;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yf||(yf={}));var bf;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(bf||(bf={}));var Mi;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Mi||(Mi={}));class Yc{constructor(e){const a={};for(const s of e.headers.entries())a[s[0]]=s[1];this.headers=a,this.responseInternal=e}json(){return this.responseInternal.json()}}class _r{get text(){var e,a,s,r,d,u,p,h;if(((r=(s=(a=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const y=[];for(const v of(h=(p=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)!==null&&h!==void 0?h:[]){for(const[k,j]of Object.entries(v))k!=="text"&&k!=="thought"&&(j!==null||j!==void 0)&&y.push(k);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;g=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,a,s,r,d,u,p,h;if(((r=(s=(a=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const y of(h=(p=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)!==null&&h!==void 0?h:[]){for(const[v,k]of Object.entries(y))v!=="inlineData"&&(k!==null||k!==void 0)&&g.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,a,s,r,d,u,p,h;if(((r=(s=(a=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(p=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,a,s,r,d,u,p,h,f;if(((r=(s=(a=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(h=(p=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,a,s,r,d,u,p,h,f;if(((r=(s=(a=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(h=(p=(u=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class vf{}class Nf{}class o0{}class l0{}class d0{}class c0{}class kf{}class jf{}class wf{}class u0{}class yl{_fromAPIResponse({apiResponse:e,isVertexAI:a}){const s=new yl;let r;const d=e;return a?r=r0(d):r=n0(d),Object.assign(s,r),s}}class Cf{}class Tf{}class Sf{}class m0{}class p0{}class h0{}class If{}class f0{get text(){var e,a,s;let r="",d=!1;const u=[];for(const p of(s=(a=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||a===void 0?void 0:a.parts)!==null&&s!==void 0?s:[]){for(const[h,f]of Object.entries(p))h!=="text"&&h!=="thought"&&f!==null&&u.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,r+=p.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var e,a,s;let r="";const d=[];for(const u of(s=(a=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||a===void 0?void 0:a.parts)!==null&&s!==void 0?s:[]){for(const[p,h]of Object.entries(u))p!=="inlineData"&&h!==null&&d.push(p);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class g0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const a=e.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ex(n,e){const a=Lt(n,e);return a?a.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${a}`:a.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${a}`:a:""}function tx(n){return Array.isArray(n)?n.map(e=>bl(e)):[bl(n)]}function bl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function nx(n){const e=bl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ax(n){const e=bl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Af(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function sx(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Af(e)):[Af(n)]}function Qc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Ef(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function _f(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function En(n){if(n==null)throw new Error("ContentUnion is required");return Qc(n)?n:{role:"user",parts:sx(n)}}function Tu(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(a=>{const s=En(a);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const a=En(e);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]}return Array.isArray(e)?e.map(a=>En(a)):[En(e)]}function ra(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Ef(n)||_f(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[En(n)]}const e=[],a=[],s=Qc(n[0]);for(const r of n){const d=Qc(r);if(d!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)e.push(r);else{if(Ef(r)||_f(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(r)}}return s||e.push({role:"user",parts:sx(a)}),e}function x0(n,e){n.includes("null")&&(e.nullable=!0);const a=n.filter(s=>s!=="null");if(a.length===1)e.type=Object.values(ba).includes(a[0].toUpperCase())?a[0].toUpperCase():ba.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of a)e.anyOf.push({type:Object.values(ba).includes(s.toUpperCase())?s.toUpperCase():ba.TYPE_UNSPECIFIED})}}function Ri(n){const e={},a=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(e.nullable=!0,n=d[1]):d[1].type==="null"&&(e.nullable=!0,n=d[0])),n.type instanceof Array&&x0(n.type,e);for(const[u,p]of Object.entries(n))if(p!=null)if(u=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(ba).includes(p.toUpperCase())?p.toUpperCase():ba.TYPE_UNSPECIFIED}else if(a.includes(u))e[u]=Ri(p);else if(s.includes(u)){const h=[];for(const f of p){if(f.type=="null"){e.nullable=!0;continue}h.push(Ri(f))}e[u]=h}else if(r.includes(u)){const h={};for(const[f,g]of Object.entries(p))h[f]=Ri(g);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=p}return e}function Su(n){return Ri(n)}function Iu(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Au(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Vi(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ri(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ri(e.response));return n}function Ki(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const a of n)e.push(a);return e}function y0(n,e,a,s=1){const r=!e.startsWith(`${a}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${a}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${a}/${e}`:e:r?`${a}/${e}`:e}function za(n,e){if(typeof e!="string")throw new Error("name must be a string");return y0(n,e,"cachedContents")}function ix(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ys(n){return Cu(n)}function b0(n){return n!=null&&typeof n=="object"&&"name"in n}function v0(n){return n!=null&&typeof n=="object"&&"video"in n}function N0(n){return n!=null&&typeof n=="object"&&"uri"in n}function rx(n){var e;let a;if(b0(n)&&(a=n.name),!(N0(n)&&(a=n.uri,a===void 0))&&!(v0(n)&&(a=(e=n.video)===null||e===void 0?void 0:e.uri,a===void 0))){if(typeof n=="string"&&(a=n),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const r=a.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${a}`);a=r[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function ox(n,e){let a;return n.isVertexAI()?a=e?"publishers/google/models":"models":a=e?"models":"tunedModels",a}function lx(n){for(const e of["models","tunedModels","publisherModels"])if(k0(n,e))return n[e];return[]}function k0(n,e){return n!==null&&typeof n=="object"&&e in n}function j0(n,e={}){const a=n,s={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(s.responseJsonSchema=a.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function w0(n,e={}){const a=[],s=new Set;for(const r of n){const d=r.name;if(s.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);s.add(d);const u=j0(r,e);u.functionDeclarations&&a.push(...u.functionDeclarations)}return{functionDeclarations:a}}function dx(n,e){let a;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))a={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))a={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))a={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");a={inlinedRequests:e}}else a=e;const s=[a.gcsUri,a.bigqueryUri].filter(Boolean).length,r=[a.inlinedRequests,a.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return a}function C0(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cx(n){if(typeof n!="object"||n===null)return{};const e=n,a=e.inlinedResponses;if(typeof a!="object"||a===null)return n;const r=a.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let d=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){d=!0;break}}return d&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Hi(n,e){const a=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(a))return a.split("/").pop();throw new Error(`Invalid batch job name: ${a}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(a))return a.split("/").pop();if(/^\d+$/.test(a))return a;throw new Error(`Invalid batch job name: ${a}.`)}function ux(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T0(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function S0(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function I0(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function A0(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function E0(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],T0(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],S0(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],I0(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],A0(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function mx(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>E0(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function _0(n){const e={},a=l(n,["anyOf"]);a!=null&&c(e,["anyOf"],a);const s=l(n,["default"]);s!=null&&c(e,["default"],s);const r=l(n,["description"]);r!=null&&c(e,["description"],r);const d=l(n,["enum"]);d!=null&&c(e,["enum"],d);const u=l(n,["example"]);u!=null&&c(e,["example"],u);const p=l(n,["format"]);p!=null&&c(e,["format"],p);const h=l(n,["items"]);h!=null&&c(e,["items"],h);const f=l(n,["maxItems"]);f!=null&&c(e,["maxItems"],f);const g=l(n,["maxLength"]);g!=null&&c(e,["maxLength"],g);const y=l(n,["maxProperties"]);y!=null&&c(e,["maxProperties"],y);const v=l(n,["maximum"]);v!=null&&c(e,["maximum"],v);const k=l(n,["minItems"]);k!=null&&c(e,["minItems"],k);const j=l(n,["minLength"]);j!=null&&c(e,["minLength"],j);const S=l(n,["minProperties"]);S!=null&&c(e,["minProperties"],S);const w=l(n,["minimum"]);w!=null&&c(e,["minimum"],w);const P=l(n,["nullable"]);P!=null&&c(e,["nullable"],P);const A=l(n,["pattern"]);A!=null&&c(e,["pattern"],A);const R=l(n,["properties"]);R!=null&&c(e,["properties"],R);const O=l(n,["propertyOrdering"]);O!=null&&c(e,["propertyOrdering"],O);const H=l(n,["required"]);H!=null&&c(e,["required"],H);const L=l(n,["title"]);L!=null&&c(e,["title"],L);const U=l(n,["type"]);return U!=null&&c(e,["type"],U),e}function P0(n){const e={};if(l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=l(n,["category"]);a!=null&&c(e,["category"],a);const s=l(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function D0(n){const e={},a=l(n,["behavior"]);a!=null&&c(e,["behavior"],a);const s=l(n,["description"]);s!=null&&c(e,["description"],s);const r=l(n,["name"]);r!=null&&c(e,["name"],r);const d=l(n,["parameters"]);d!=null&&c(e,["parameters"],d);const u=l(n,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const p=l(n,["response"]);p!=null&&c(e,["response"],p);const h=l(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function M0(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function R0(n){const e={},a=l(n,["timeRangeFilter"]);if(a!=null&&c(e,["timeRangeFilter"],M0(a)),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function L0(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function F0(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],L0(a)),e}function U0(){return{}}function O0(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function $0(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>D0(f))),c(e,["functionDeclarations"],h)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=l(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],R0(s));const r=l(n,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],F0(r)),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(n,["urlContext"])!=null&&c(e,["urlContext"],U0());const u=l(n,["computerUse"]);u!=null&&c(e,["computerUse"],O0(u));const p=l(n,["codeExecution"]);return p!=null&&c(e,["codeExecution"],p),e}function B0(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function V0(n){const e={},a=l(n,["latitude"]);a!=null&&c(e,["latitude"],a);const s=l(n,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function K0(n){const e={},a=l(n,["latLng"]);a!=null&&c(e,["latLng"],V0(a));const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function H0(n){const e={},a=l(n,["functionCallingConfig"]);a!=null&&c(e,["functionCallingConfig"],B0(a));const s=l(n,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],K0(s)),e}function G0(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function px(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],G0(a)),e}function q0(n){const e={},a=l(n,["speaker"]);a!=null&&c(e,["speaker"],a);const s=l(n,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],px(s)),e}function J0(n){const e={},a=l(n,["speakerVoiceConfigs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>q0(r))),c(e,["speakerVoiceConfigs"],s)}return e}function W0(n){const e={},a=l(n,["voiceConfig"]);a!=null&&c(e,["voiceConfig"],px(a));const s=l(n,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],J0(s));const r=l(n,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function z0(n){const e={},a=l(n,["includeThoughts"]);a!=null&&c(e,["includeThoughts"],a);const s=l(n,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function Y0(n,e,a){const s={},r=l(e,["systemInstruction"]);a!==void 0&&r!=null&&c(a,["systemInstruction"],mx(En(r)));const d=l(e,["temperature"]);d!=null&&c(s,["temperature"],d);const u=l(e,["topP"]);u!=null&&c(s,["topP"],u);const p=l(e,["topK"]);p!=null&&c(s,["topK"],p);const h=l(e,["candidateCount"]);h!=null&&c(s,["candidateCount"],h);const f=l(e,["maxOutputTokens"]);f!=null&&c(s,["maxOutputTokens"],f);const g=l(e,["stopSequences"]);g!=null&&c(s,["stopSequences"],g);const y=l(e,["responseLogprobs"]);y!=null&&c(s,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&c(s,["logprobs"],v);const k=l(e,["presencePenalty"]);k!=null&&c(s,["presencePenalty"],k);const j=l(e,["frequencyPenalty"]);j!=null&&c(s,["frequencyPenalty"],j);const S=l(e,["seed"]);S!=null&&c(s,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&c(s,["responseMimeType"],w);const P=l(e,["responseSchema"]);P!=null&&c(s,["responseSchema"],_0(Su(P)));const A=l(e,["responseJsonSchema"]);if(A!=null&&c(s,["responseJsonSchema"],A),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=l(e,["safetySettings"]);if(a!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map(ce=>P0(ce))),c(a,["safetySettings"],V)}const O=l(e,["tools"]);if(a!==void 0&&O!=null){let V=Ki(O);Array.isArray(V)&&(V=V.map(ce=>$0(Vi(ce)))),c(a,["tools"],V)}const H=l(e,["toolConfig"]);if(a!==void 0&&H!=null&&c(a,["toolConfig"],H0(H)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=l(e,["cachedContent"]);a!==void 0&&L!=null&&c(a,["cachedContent"],za(n,L));const U=l(e,["responseModalities"]);U!=null&&c(s,["responseModalities"],U);const ne=l(e,["mediaResolution"]);ne!=null&&c(s,["mediaResolution"],ne);const ie=l(e,["speechConfig"]);if(ie!=null&&c(s,["speechConfig"],W0(Iu(ie))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=l(e,["thinkingConfig"]);return q!=null&&c(s,["thinkingConfig"],z0(q)),s}function Q0(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["request","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>mx(p))),c(a,["request","contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["request","generationConfig"],Y0(n,d,a)),a}function X0(n,e){const a={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=l(e,["fileName"]);s!=null&&c(a,["fileName"],s);const r=l(e,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Q0(n,u))),c(a,["requests","requests"],d)}return a}function Z0(n,e){const a={},s=l(n,["displayName"]);if(e!==void 0&&s!=null&&c(e,["batch","displayName"],s),l(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return a}function vc(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["src"]);r!=null&&c(a,["batch","inputConfig"],X0(n,dx(n,r)));const d=l(e,["config"]);return d!=null&&c(a,["config"],Z0(d,a)),a}function eN(n,e){const a={},s=l(n,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const r=l(n,["title"]);e!==void 0&&r!=null&&c(e,["requests[]","title"],r);const d=l(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&c(e,["requests[]","outputDimensionality"],d),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function tN(n,e){const a={},s=l(e,["contents"]);s!=null&&c(a,["requests[]","request","content"],Tu(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],eN(r,a)),a}function nN(n,e){const a={},s=l(e,["fileName"]);s!=null&&c(a,["file_name"],s);const r=l(e,["inlinedRequests"]);return r!=null&&c(a,["requests"],tN(n,r)),a}function aN(n,e){const a={},s=l(n,["displayName"]);return e!==void 0&&s!=null&&c(e,["batch","displayName"],s),a}function Nc(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["src"]);r!=null&&c(a,["batch","inputConfig"],nN(n,r));const d=l(e,["config"]);return d!=null&&c(a,["config"],aN(d,a)),a}function sN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function iN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function rN(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);if(e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),l(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return a}function oN(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],rN(a,e)),e}function lN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function dN(n){const e={},a=l(n,["format"]);a!=null&&c(e,["instancesFormat"],a);const s=l(n,["gcsUri"]);s!=null&&c(e,["gcsSource","uris"],s);const r=l(n,["bigqueryUri"]);if(r!=null&&c(e,["bigquerySource","inputUri"],r),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cN(n){const e={},a=l(n,["format"]);a!=null&&c(e,["predictionsFormat"],a);const s=l(n,["gcsUri"]);s!=null&&c(e,["gcsDestination","outputUriPrefix"],s);const r=l(n,["bigqueryUri"]);if(r!=null&&c(e,["bigqueryDestination","outputUri"],r),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uN(n,e){const a={},s=l(n,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=l(n,["dest"]);return e!==void 0&&r!=null&&c(e,["outputConfig"],cN(C0(r))),a}function mN(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["model"],Lt(n,s));const r=l(e,["src"]);r!=null&&c(a,["inputConfig"],dN(dx(n,r)));const d=l(e,["config"]);return d!=null&&c(a,["config"],uN(d,a)),a}function pN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function hN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function fN(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const d=l(n,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),a}function gN(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],fN(a,e)),e}function xN(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],Hi(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function yN(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function bN(n){const e={},a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function vN(n){const e={},a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function NN(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function kN(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],yN(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],bN(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],vN(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],NN(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function jN(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>kN(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function wN(n){const e={},a=l(n,["citationSources"]);return a!=null&&c(e,["citations"],a),e}function CN(n){const e={},a=l(n,["retrievedUrl"]);a!=null&&c(e,["retrievedUrl"],a);const s=l(n,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function TN(n){const e={},a=l(n,["urlMetadata"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>CN(r))),c(e,["urlMetadata"],s)}return e}function SN(n){const e={},a=l(n,["content"]);a!=null&&c(e,["content"],jN(a));const s=l(n,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],wN(s));const r=l(n,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const d=l(n,["finishReason"]);d!=null&&c(e,["finishReason"],d);const u=l(n,["urlContextMetadata"]);u!=null&&c(e,["urlContextMetadata"],TN(u));const p=l(n,["avgLogprobs"]);p!=null&&c(e,["avgLogprobs"],p);const h=l(n,["groundingMetadata"]);h!=null&&c(e,["groundingMetadata"],h);const f=l(n,["index"]);f!=null&&c(e,["index"],f);const g=l(n,["logprobsResult"]);g!=null&&c(e,["logprobsResult"],g);const y=l(n,["safetyRatings"]);return y!=null&&c(e,["safetyRatings"],y),e}function IN(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(f=>SN(f))),c(e,["candidates"],h)}const r=l(n,["modelVersion"]);r!=null&&c(e,["modelVersion"],r);const d=l(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const u=l(n,["responseId"]);u!=null&&c(e,["responseId"],u);const p=l(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function Eu(n){const e={},a=l(n,["details"]);a!=null&&c(e,["details"],a);const s=l(n,["code"]);s!=null&&c(e,["code"],s);const r=l(n,["message"]);return r!=null&&c(e,["message"],r),e}function AN(n){const e={},a=l(n,["response"]);a!=null&&c(e,["response"],IN(a));const s=l(n,["error"]);return s!=null&&c(e,["error"],Eu(s)),e}function EN(n){const e={},a=l(n,["values"]);return a!=null&&c(e,["values"],a),e}function _N(n){const e={},a=l(n,["embedding"]);a!=null&&c(e,["embedding"],EN(a));const s=l(n,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function PN(n){const e={},a=l(n,["response"]);a!=null&&c(e,["response"],_N(a));const s=l(n,["error"]);return s!=null&&c(e,["error"],Eu(s)),e}function DN(n){const e={},a=l(n,["responsesFile"]);a!=null&&c(e,["fileName"],a);const s=l(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(u=>AN(u))),c(e,["inlinedResponses"],d)}const r=l(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>PN(u))),c(e,["inlinedEmbedContentResponses"],d)}return e}function _i(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["metadata","displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["metadata","state"]);r!=null&&c(e,["state"],ux(r));const d=l(n,["metadata","createTime"]);d!=null&&c(e,["createTime"],d);const u=l(n,["metadata","endTime"]);u!=null&&c(e,["endTime"],u);const p=l(n,["metadata","updateTime"]);p!=null&&c(e,["updateTime"],p);const h=l(n,["metadata","model"]);h!=null&&c(e,["model"],h);const f=l(n,["metadata","output"]);return f!=null&&c(e,["dest"],DN(cx(f))),e}function MN(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>_i(u))),c(e,["batchJobs"],d)}return e}function RN(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);return d!=null&&c(e,["error"],Eu(d)),e}function hx(n){const e={},a=l(n,["details"]);a!=null&&c(e,["details"],a);const s=l(n,["code"]);s!=null&&c(e,["code"],s);const r=l(n,["message"]);return r!=null&&c(e,["message"],r),e}function LN(n){const e={},a=l(n,["instancesFormat"]);a!=null&&c(e,["format"],a);const s=l(n,["gcsSource","uris"]);s!=null&&c(e,["gcsUri"],s);const r=l(n,["bigquerySource","inputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function FN(n){const e={},a=l(n,["predictionsFormat"]);a!=null&&c(e,["format"],a);const s=l(n,["gcsDestination","outputUriPrefix"]);s!=null&&c(e,["gcsUri"],s);const r=l(n,["bigqueryDestination","outputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function Xc(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["state"]);r!=null&&c(e,["state"],ux(r));const d=l(n,["error"]);d!=null&&c(e,["error"],hx(d));const u=l(n,["createTime"]);u!=null&&c(e,["createTime"],u);const p=l(n,["startTime"]);p!=null&&c(e,["startTime"],p);const h=l(n,["endTime"]);h!=null&&c(e,["endTime"],h);const f=l(n,["updateTime"]);f!=null&&c(e,["updateTime"],f);const g=l(n,["model"]);g!=null&&c(e,["model"],g);const y=l(n,["inputConfig"]);y!=null&&c(e,["src"],LN(y));const v=l(n,["outputConfig"]);return v!=null&&c(e,["dest"],FN(cx(v))),e}function UN(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Xc(u))),c(e,["batchJobs"],d)}return e}function ON(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);return d!=null&&c(e,["error"],hx(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ws;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ws||(Ws={}));class Wr{constructor(e,a,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=a,this.init(e,s,r)}init(e,a,s){var r,d;this.nameInternal=e,this.pageInternal=a[this.nameInternal]||[],this.sdkHttpResponseInternal=a==null?void 0:a.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=a.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(d=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends zs{constructor(e){super(),this.apiClient=e,this.create=async a=>{var s,r;if(this.apiClient.isVertexAI())return a.config=this.formatDestination(a.src,a.config),this.createInternal(a);const d=a.src;if(!(Array.isArray(a.src)||d.inlinedRequests!==void 0))return this.createInternal(a);const p=this.createInlinedGenerateContentRequest(a),h=p.path,f=p.body,g=vc(this.apiClient,a)._query||{};return this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=a.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=a.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()).then(v=>_i(v))},this.createEmbeddings=async a=>{var s,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(a.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(a);const p=this.createInlinedEmbedContentRequest(a),h=p.path,f=p.body,g=Nc(this.apiClient,a)._query||{};return this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=a.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=a.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()).then(v=>_i(v))},this.list=async(a={})=>new Wr(Ws.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(a),a)}createInlinedGenerateContentRequest(e){const a=vc(this.apiClient,e),s=a._url,r=tt("{model}:batchGenerateContent",s),p=a.batch.inputConfig.requests,h=p.requests,f=[];for(const g of h){const y=Object.assign({},g);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const k=y.request;k.systemInstruction=v,y.request=k}f.push(y)}return p.requests=f,delete a.config,delete a._url,delete a._query,{path:r,body:a}}createInlinedEmbedContentRequest(e){const a=Nc(this.apiClient,e),s=a._url,r=tt("{model}:asyncBatchEmbedContent",s),p=a.batch.inputConfig.requests,h=p.requests,f=[];delete p.config;for(const g of h){const y=Object.assign({},g),v=y.request;for(const k in y)k!=="request"&&(v[k]=y[k],delete y[k]);f.push(y)}return p.requests=f,delete a.config,delete a._url,delete a._query,{path:r,body:a}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,a){const s=a?Object.assign({},a):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const d=this.getGcsUri(e),u=this.getBigqueryUri(e);if(d)d.endsWith(".jsonl")?s.dest=`${d.slice(0,-6)}/dest`:s.dest=`${d}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=mN(this.apiClient,e);return p=tt("batchPredictionJobs",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>Xc(g))}else{const f=vc(this.apiClient,e);return p=tt("{model}:batchGenerateContent",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>_i(g))}}async createEmbeddingsInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Nc(this.apiClient,e);return d=tt("{model}:asyncBatchEmbedContent",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>_i(h))}}async get(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=pN(this.apiClient,e);return p=tt("batchPredictionJobs/{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>Xc(g))}else{const f=sN(this.apiClient,e);return p=tt("batches/{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>_i(g))}}async cancel(e){var a,s,r,d;let u="",p={};if(this.apiClient.isVertexAI()){const h=hN(this.apiClient,e);u=tt("batchPredictionJobs/{name}:cancel",h._url),p=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=iN(this.apiClient,e);u=tt("batches/{name}:cancel",h._url),p=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=gN(e);return p=tt("batchPredictionJobs",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=UN(g),v=new If;return Object.assign(v,y),v})}else{const f=oN(e);return p=tt("batches",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=MN(g),v=new If;return Object.assign(v,y),v})}}async delete(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=xN(this.apiClient,e);return p=tt("batchPredictionJobs/{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>ON(g))}else{const f=lN(this.apiClient,e);return p=tt("batches/{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>RN(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function VN(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function KN(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function HN(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function GN(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],BN(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],VN(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],KN(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],HN(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function Pf(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>GN(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function qN(n){const e={},a=l(n,["behavior"]);a!=null&&c(e,["behavior"],a);const s=l(n,["description"]);s!=null&&c(e,["description"],s);const r=l(n,["name"]);r!=null&&c(e,["name"],r);const d=l(n,["parameters"]);d!=null&&c(e,["parameters"],d);const u=l(n,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const p=l(n,["response"]);p!=null&&c(e,["response"],p);const h=l(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function JN(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function WN(n){const e={},a=l(n,["timeRangeFilter"]);if(a!=null&&c(e,["timeRangeFilter"],JN(a)),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zN(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function YN(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],zN(a)),e}function QN(){return{}}function XN(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function ZN(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>qN(f))),c(e,["functionDeclarations"],h)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=l(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],WN(s));const r=l(n,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],YN(r)),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(n,["urlContext"])!=null&&c(e,["urlContext"],QN());const u=l(n,["computerUse"]);u!=null&&c(e,["computerUse"],XN(u));const p=l(n,["codeExecution"]);return p!=null&&c(e,["codeExecution"],p),e}function ek(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function tk(n){const e={},a=l(n,["latitude"]);a!=null&&c(e,["latitude"],a);const s=l(n,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function nk(n){const e={},a=l(n,["latLng"]);a!=null&&c(e,["latLng"],tk(a));const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function ak(n){const e={},a=l(n,["functionCallingConfig"]);a!=null&&c(e,["functionCallingConfig"],ek(a));const s=l(n,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],nk(s)),e}function sk(n,e){const a={},s=l(n,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=l(n,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const d=l(n,["displayName"]);e!==void 0&&d!=null&&c(e,["displayName"],d);const u=l(n,["contents"]);if(e!==void 0&&u!=null){let g=ra(u);Array.isArray(g)&&(g=g.map(y=>Pf(y))),c(e,["contents"],g)}const p=l(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],Pf(En(p)));const h=l(n,["tools"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>ZN(y))),c(e,["tools"],g)}const f=l(n,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],ak(f)),l(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return a}function ik(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["model"],ex(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],sk(r,a)),a}function rk(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function ok(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function lk(n,e){const a={},s=l(n,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=l(n,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),a}function dk(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],lk(r,a)),a}function ck(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),a}function uk(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],ck(a,e)),e}function mk(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function pk(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["data"]);s!=null&&c(e,["data"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function hk(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function fk(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function gk(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],mk(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],pk(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],hk(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],fk(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function Df(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>gk(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function xk(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=l(n,["description"]);a!=null&&c(e,["description"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["parameters"]);r!=null&&c(e,["parameters"],r);const d=l(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const u=l(n,["response"]);u!=null&&c(e,["response"],u);const p=l(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function yk(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function bk(n){const e={},a=l(n,["timeRangeFilter"]);a!=null&&c(e,["timeRangeFilter"],yk(a));const s=l(n,["excludeDomains"]);return s!=null&&c(e,["excludeDomains"],s),e}function vk(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Nk(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],vk(a)),e}function kk(n){const e={},a=l(n,["excludeDomains"]);return a!=null&&c(e,["excludeDomains"],a),e}function jk(n){const e={},a=l(n,["apiKeyString"]);return a!=null&&c(e,["apiKeyString"],a),e}function wk(n){const e={},a=l(n,["apiKeyConfig"]);a!=null&&c(e,["apiKeyConfig"],jk(a));const s=l(n,["authType"]);s!=null&&c(e,["authType"],s);const r=l(n,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const d=l(n,["httpBasicAuthConfig"]);d!=null&&c(e,["httpBasicAuthConfig"],d);const u=l(n,["oauthConfig"]);u!=null&&c(e,["oauthConfig"],u);const p=l(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function Ck(n){const e={},a=l(n,["authConfig"]);return a!=null&&c(e,["authConfig"],wk(a)),e}function Tk(){return{}}function Sk(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function Ik(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>xk(v))),c(e,["functionDeclarations"],y)}const s=l(n,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=l(n,["googleSearch"]);r!=null&&c(e,["googleSearch"],bk(r));const d=l(n,["googleSearchRetrieval"]);d!=null&&c(e,["googleSearchRetrieval"],Nk(d));const u=l(n,["enterpriseWebSearch"]);u!=null&&c(e,["enterpriseWebSearch"],kk(u));const p=l(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],Ck(p)),l(n,["urlContext"])!=null&&c(e,["urlContext"],Tk());const f=l(n,["computerUse"]);f!=null&&c(e,["computerUse"],Sk(f));const g=l(n,["codeExecution"]);return g!=null&&c(e,["codeExecution"],g),e}function Ak(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function Ek(n){const e={},a=l(n,["latitude"]);a!=null&&c(e,["latitude"],a);const s=l(n,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function _k(n){const e={},a=l(n,["latLng"]);a!=null&&c(e,["latLng"],Ek(a));const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Pk(n){const e={},a=l(n,["functionCallingConfig"]);a!=null&&c(e,["functionCallingConfig"],Ak(a));const s=l(n,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],_k(s)),e}function Dk(n,e){const a={},s=l(n,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=l(n,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const d=l(n,["displayName"]);e!==void 0&&d!=null&&c(e,["displayName"],d);const u=l(n,["contents"]);if(e!==void 0&&u!=null){let y=ra(u);Array.isArray(y)&&(y=y.map(v=>Df(v))),c(e,["contents"],y)}const p=l(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],Df(En(p)));const h=l(n,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(v=>Ik(v))),c(e,["tools"],y)}const f=l(n,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],Pk(f));const g=l(n,["kmsKeyName"]);return e!==void 0&&g!=null&&c(e,["encryption_spec","kmsKeyName"],g),a}function Mk(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["model"],ex(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],Dk(r,a)),a}function Rk(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function Lk(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function Fk(n,e){const a={},s=l(n,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=l(n,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),a}function Uk(n,e){const a={},s=l(e,["name"]);s!=null&&c(a,["_url","name"],za(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],Fk(r,a)),a}function Ok(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),a}function $k(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],Ok(a,e)),e}function fl(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["model"]);r!=null&&c(e,["model"],r);const d=l(n,["createTime"]);d!=null&&c(e,["createTime"],d);const u=l(n,["updateTime"]);u!=null&&c(e,["updateTime"],u);const p=l(n,["expireTime"]);p!=null&&c(e,["expireTime"],p);const h=l(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function Bk(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}function Vk(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>fl(u))),c(e,["cachedContents"],d)}return e}function gl(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["model"]);r!=null&&c(e,["model"],r);const d=l(n,["createTime"]);d!=null&&c(e,["createTime"],d);const u=l(n,["updateTime"]);u!=null&&c(e,["updateTime"],u);const p=l(n,["expireTime"]);p!=null&&c(e,["expireTime"],p);const h=l(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function Kk(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}function Hk(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>gl(u))),c(e,["cachedContents"],d)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gk extends zs{constructor(e){super(),this.apiClient=e,this.list=async(a={})=>new Wr(Ws.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(a),a)}async create(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Mk(this.apiClient,e);return p=tt("cachedContents",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>gl(g))}else{const f=ik(this.apiClient,e);return p=tt("cachedContents",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>fl(g))}}async get(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Rk(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>gl(g))}else{const f=rk(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>fl(g))}}async delete(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Lk(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Kk(g),v=new Tf;return Object.assign(v,y),v})}else{const f=ok(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Bk(g),v=new Tf;return Object.assign(v,y),v})}}async update(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Uk(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>gl(g))}else{const f=dk(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>fl(g))}}async listInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=$k(e);return p=tt("cachedContents",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Hk(g),v=new Sf;return Object.assign(v,y),v})}else{const f=uk(e);return p=tt("cachedContents",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Vk(g),v=new Sf;return Object.assign(v,y),v})}}}function Mf(n){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&n[e],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ht(n){return this instanceof Ht?(this.v=n,this):new Ht(n)}function Li(n,e,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,e||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(k){return function(j){return Promise.resolve(j).then(k,y)}}function p(k,j){s[k]&&(r[k]=function(S){return new Promise(function(w,P){d.push([k,S,w,P])>1||h(k,S)})},j&&(r[k]=j(r[k])))}function h(k,j){try{f(s[k](j))}catch(S){v(d[0][3],S)}}function f(k){k.value instanceof Ht?Promise.resolve(k.value.v).then(g,y):v(d[0][2],k)}function g(k){h("next",k)}function y(k){h("throw",k)}function v(k,j){k(j),d.shift(),d.length&&h(d[0][0],d[0][1])}}function Mr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],a;return e?e.call(n):(n=typeof Mf=="function"?Mf(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(d){a[d]=n[d]&&function(u){return new Promise(function(p,h){u=n[d](u),r(p,h,u.done,u.value)})}}function r(d,u,p,h){Promise.resolve(h).then(function(f){d({value:f,done:p})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const a=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return a===void 0?!1:fx(a)}function fx(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Jk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rf(n){if(n===void 0||n.length===0)return[];const e=[],a=n.length;let s=0;for(;s<a;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let d=!0;for(;s<a&&n[s].role==="model";)r.push(n[s]),d&&!fx(n[s])&&(d=!1),s++;d?e.push(...r):e.pop()}return e}class Wk{constructor(e,a){this.modelsModule=e,this.apiClient=a}create(e){return new zk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zk{constructor(e,a,s,r={},d=[]){this.apiClient=e,this.modelsModule=a,this.model=s,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),Jk(d)}async sendMessage(e){var a;await this.sendPromise;const s=En(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(a=e.config)!==null&&a!==void 0?a:this.config});return this.sendPromise=(async()=>{var d,u,p;const h=await r,f=(u=(d=h.candidates)===null||d===void 0?void 0:d[0])===null||u===void 0?void 0:u.content,g=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];g!=null&&(v=(p=g.slice(y))!==null&&p!==void 0?p:[]);const k=f?[f]:[];this.recordHistory(s,k,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var a;await this.sendPromise;const s=En(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(a=e.config)!==null&&a!==void 0?a:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,s)}getHistory(e=!1){const a=e?Rf(this.history):this.history;return structuredClone(a)}processStreamResponse(e,a){var s,r;return Li(this,arguments,function*(){var u,p,h,f;const g=[];try{for(var y=!0,v=Mr(e),k;k=yield Ht(v.next()),u=k.done,!u;y=!0){f=k.value,y=!1;const j=f;if(qk(j)){const S=(r=(s=j.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;S!==void 0&&g.push(S)}yield yield Ht(j)}}catch(j){p={error:j}}finally{try{!y&&!u&&(h=v.return)&&(yield Ht(h.call(v)))}finally{if(p)throw p.error}}this.recordHistory(a,g)})}recordHistory(e,a,s){let r=[];a.length>0&&a.every(d=>d.role!==void 0)?r=a:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Rf(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),a}function Qk(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],Yk(a,e)),e}function Xk(n){const e={},a=l(n,["details"]);a!=null&&c(e,["details"],a);const s=l(n,["message"]);s!=null&&c(e,["message"],s);const r=l(n,["code"]);return r!=null&&c(e,["code"],r),e}function Zk(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["mimeType"]);r!=null&&c(e,["mimeType"],r);const d=l(n,["sizeBytes"]);d!=null&&c(e,["sizeBytes"],d);const u=l(n,["createTime"]);u!=null&&c(e,["createTime"],u);const p=l(n,["expirationTime"]);p!=null&&c(e,["expirationTime"],p);const h=l(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const f=l(n,["sha256Hash"]);f!=null&&c(e,["sha256Hash"],f);const g=l(n,["uri"]);g!=null&&c(e,["uri"],g);const y=l(n,["downloadUri"]);y!=null&&c(e,["downloadUri"],y);const v=l(n,["state"]);v!=null&&c(e,["state"],v);const k=l(n,["source"]);k!=null&&c(e,["source"],k);const j=l(n,["videoMetadata"]);j!=null&&c(e,["videoMetadata"],j);const S=l(n,["error"]);return S!=null&&c(e,["error"],Xk(S)),e}function ej(n){const e={},a=l(n,["file"]);a!=null&&c(e,["file"],Zk(a));const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function tj(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","file"],rx(a));const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function nj(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","file"],rx(a));const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function aj(n){const e={},a=l(n,["details"]);a!=null&&c(e,["details"],a);const s=l(n,["message"]);s!=null&&c(e,["message"],s);const r=l(n,["code"]);return r!=null&&c(e,["code"],r),e}function Zc(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["mimeType"]);r!=null&&c(e,["mimeType"],r);const d=l(n,["sizeBytes"]);d!=null&&c(e,["sizeBytes"],d);const u=l(n,["createTime"]);u!=null&&c(e,["createTime"],u);const p=l(n,["expirationTime"]);p!=null&&c(e,["expirationTime"],p);const h=l(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const f=l(n,["sha256Hash"]);f!=null&&c(e,["sha256Hash"],f);const g=l(n,["uri"]);g!=null&&c(e,["uri"],g);const y=l(n,["downloadUri"]);y!=null&&c(e,["downloadUri"],y);const v=l(n,["state"]);v!=null&&c(e,["state"],v);const k=l(n,["source"]);k!=null&&c(e,["source"],k);const j=l(n,["videoMetadata"]);j!=null&&c(e,["videoMetadata"],j);const S=l(n,["error"]);return S!=null&&c(e,["error"],aj(S)),e}function sj(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Zc(u))),c(e,["files"],d)}return e}function ij(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}function rj(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oj extends zs{constructor(e){super(),this.apiClient=e,this.list=async(a={})=>new Wr(Ws.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(a),a)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(a=>Zc(a))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Qk(e);return d=tt("files",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const f=sj(h),g=new m0;return Object.assign(g,f),g})}}async createInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ej(e);return d=tt("upload/v1beta/files",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const f=ij(h),g=new p0;return Object.assign(g,f),g})}}async get(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tj(e);return d=tt("files/{file}",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Zc(h))}}async delete(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nj(e);return d=tt("files/{file}",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const f=rj(h),g=new h0;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lj(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function gx(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],lj(a)),e}function dj(n){const e={},a=l(n,["speaker"]);a!=null&&c(e,["speaker"],a);const s=l(n,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],gx(s)),e}function cj(n){const e={},a=l(n,["speakerVoiceConfigs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>dj(r))),c(e,["speakerVoiceConfigs"],s)}return e}function uj(n){const e={},a=l(n,["voiceConfig"]);a!=null&&c(e,["voiceConfig"],gx(a));const s=l(n,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],cj(s));const r=l(n,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function mj(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function pj(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function hj(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function fj(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function gj(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],mj(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],pj(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],hj(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],fj(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function xj(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>gj(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function yj(n){const e={},a=l(n,["behavior"]);a!=null&&c(e,["behavior"],a);const s=l(n,["description"]);s!=null&&c(e,["description"],s);const r=l(n,["name"]);r!=null&&c(e,["name"],r);const d=l(n,["parameters"]);d!=null&&c(e,["parameters"],d);const u=l(n,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const p=l(n,["response"]);p!=null&&c(e,["response"],p);const h=l(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function bj(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function vj(n){const e={},a=l(n,["timeRangeFilter"]);if(a!=null&&c(e,["timeRangeFilter"],bj(a)),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nj(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function kj(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],Nj(a)),e}function jj(){return{}}function wj(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function Cj(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>yj(f))),c(e,["functionDeclarations"],h)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=l(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],vj(s));const r=l(n,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],kj(r)),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(n,["urlContext"])!=null&&c(e,["urlContext"],jj());const u=l(n,["computerUse"]);u!=null&&c(e,["computerUse"],wj(u));const p=l(n,["codeExecution"]);return p!=null&&c(e,["codeExecution"],p),e}function Tj(n){const e={},a=l(n,["handle"]);if(a!=null&&c(e,["handle"],a),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Lf(){return{}}function Sj(n){const e={},a=l(n,["disabled"]);a!=null&&c(e,["disabled"],a);const s=l(n,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=l(n,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const d=l(n,["prefixPaddingMs"]);d!=null&&c(e,["prefixPaddingMs"],d);const u=l(n,["silenceDurationMs"]);return u!=null&&c(e,["silenceDurationMs"],u),e}function Ij(n){const e={},a=l(n,["automaticActivityDetection"]);a!=null&&c(e,["automaticActivityDetection"],Sj(a));const s=l(n,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=l(n,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function Aj(n){const e={},a=l(n,["targetTokens"]);return a!=null&&c(e,["targetTokens"],a),e}function Ej(n){const e={},a=l(n,["triggerTokens"]);a!=null&&c(e,["triggerTokens"],a);const s=l(n,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],Aj(s)),e}function _j(n){const e={},a=l(n,["proactiveAudio"]);return a!=null&&c(e,["proactiveAudio"],a),e}function Pj(n,e){const a={},s=l(n,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=l(n,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const d=l(n,["temperature"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","temperature"],d);const u=l(n,["topP"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","topP"],u);const p=l(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const h=l(n,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const f=l(n,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const g=l(n,["seed"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","seed"],g);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","speechConfig"],uj(Au(y)));const v=l(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=l(n,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],xj(En(k)));const j=l(n,["tools"]);if(e!==void 0&&j!=null){let H=Ki(j);Array.isArray(H)&&(H=H.map(L=>Cj(Vi(L)))),c(e,["setup","tools"],H)}const S=l(n,["sessionResumption"]);e!==void 0&&S!=null&&c(e,["setup","sessionResumption"],Tj(S));const w=l(n,["inputAudioTranscription"]);e!==void 0&&w!=null&&c(e,["setup","inputAudioTranscription"],Lf());const P=l(n,["outputAudioTranscription"]);e!==void 0&&P!=null&&c(e,["setup","outputAudioTranscription"],Lf());const A=l(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],Ij(A));const R=l(n,["contextWindowCompression"]);e!==void 0&&R!=null&&c(e,["setup","contextWindowCompression"],Ej(R));const O=l(n,["proactivity"]);return e!==void 0&&O!=null&&c(e,["setup","proactivity"],_j(O)),a}function Dj(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["setup","model"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],Pj(r,a)),a}function Mj(){return{}}function Rj(){return{}}function Lj(n){const e={},a=l(n,["media"]);a!=null&&c(e,["mediaChunks"],tx(a));const s=l(n,["audio"]);s!=null&&c(e,["audio"],ax(s));const r=l(n,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const d=l(n,["video"]);d!=null&&c(e,["video"],nx(d));const u=l(n,["text"]);return u!=null&&c(e,["text"],u),l(n,["activityStart"])!=null&&c(e,["activityStart"],Mj()),l(n,["activityEnd"])!=null&&c(e,["activityEnd"],Rj()),e}function xx(n){const e={},a=l(n,["text"]);a!=null&&c(e,["text"],a);const s=l(n,["weight"]);return s!=null&&c(e,["weight"],s),e}function Fj(n){const e={},a=l(n,["weightedPrompts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>xx(r))),c(e,["weightedPrompts"],s)}return e}function yx(n){const e={},a=l(n,["temperature"]);a!=null&&c(e,["temperature"],a);const s=l(n,["topK"]);s!=null&&c(e,["topK"],s);const r=l(n,["seed"]);r!=null&&c(e,["seed"],r);const d=l(n,["guidance"]);d!=null&&c(e,["guidance"],d);const u=l(n,["bpm"]);u!=null&&c(e,["bpm"],u);const p=l(n,["density"]);p!=null&&c(e,["density"],p);const h=l(n,["brightness"]);h!=null&&c(e,["brightness"],h);const f=l(n,["scale"]);f!=null&&c(e,["scale"],f);const g=l(n,["muteBass"]);g!=null&&c(e,["muteBass"],g);const y=l(n,["muteDrums"]);y!=null&&c(e,["muteDrums"],y);const v=l(n,["onlyBassAndDrums"]);v!=null&&c(e,["onlyBassAndDrums"],v);const k=l(n,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function Uj(n){const e={},a=l(n,["musicGenerationConfig"]);return a!=null&&c(e,["musicGenerationConfig"],yx(a)),e}function bx(n){const e={},a=l(n,["model"]);return a!=null&&c(e,["model"],a),e}function vx(n){const e={},a=l(n,["weightedPrompts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>xx(r))),c(e,["weightedPrompts"],s)}return e}function eu(n){const e={},a=l(n,["setup"]);a!=null&&c(e,["setup"],bx(a));const s=l(n,["clientContent"]);s!=null&&c(e,["clientContent"],vx(s));const r=l(n,["musicGenerationConfig"]);r!=null&&c(e,["musicGenerationConfig"],yx(r));const d=l(n,["playbackControl"]);return d!=null&&c(e,["playbackControl"],d),e}function Oj(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function $j(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],Oj(a)),e}function Bj(n){const e={},a=l(n,["voiceConfig"]);if(a!=null&&c(e,["voiceConfig"],$j(a)),l(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Vj(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function Kj(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["data"]);s!=null&&c(e,["data"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Hj(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Gj(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function qj(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],Vj(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],Kj(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],Hj(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],Gj(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function Jj(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>qj(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function Wj(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=l(n,["description"]);a!=null&&c(e,["description"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["parameters"]);r!=null&&c(e,["parameters"],r);const d=l(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const u=l(n,["response"]);u!=null&&c(e,["response"],u);const p=l(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function zj(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Yj(n){const e={},a=l(n,["timeRangeFilter"]);a!=null&&c(e,["timeRangeFilter"],zj(a));const s=l(n,["excludeDomains"]);return s!=null&&c(e,["excludeDomains"],s),e}function Qj(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Xj(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],Qj(a)),e}function Zj(n){const e={},a=l(n,["excludeDomains"]);return a!=null&&c(e,["excludeDomains"],a),e}function ew(n){const e={},a=l(n,["apiKeyString"]);return a!=null&&c(e,["apiKeyString"],a),e}function tw(n){const e={},a=l(n,["apiKeyConfig"]);a!=null&&c(e,["apiKeyConfig"],ew(a));const s=l(n,["authType"]);s!=null&&c(e,["authType"],s);const r=l(n,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const d=l(n,["httpBasicAuthConfig"]);d!=null&&c(e,["httpBasicAuthConfig"],d);const u=l(n,["oauthConfig"]);u!=null&&c(e,["oauthConfig"],u);const p=l(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function nw(n){const e={},a=l(n,["authConfig"]);return a!=null&&c(e,["authConfig"],tw(a)),e}function aw(){return{}}function sw(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function iw(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>Wj(v))),c(e,["functionDeclarations"],y)}const s=l(n,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=l(n,["googleSearch"]);r!=null&&c(e,["googleSearch"],Yj(r));const d=l(n,["googleSearchRetrieval"]);d!=null&&c(e,["googleSearchRetrieval"],Xj(d));const u=l(n,["enterpriseWebSearch"]);u!=null&&c(e,["enterpriseWebSearch"],Zj(u));const p=l(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],nw(p)),l(n,["urlContext"])!=null&&c(e,["urlContext"],aw());const f=l(n,["computerUse"]);f!=null&&c(e,["computerUse"],sw(f));const g=l(n,["codeExecution"]);return g!=null&&c(e,["codeExecution"],g),e}function rw(n){const e={},a=l(n,["handle"]);a!=null&&c(e,["handle"],a);const s=l(n,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function Ff(){return{}}function ow(n){const e={},a=l(n,["disabled"]);a!=null&&c(e,["disabled"],a);const s=l(n,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=l(n,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const d=l(n,["prefixPaddingMs"]);d!=null&&c(e,["prefixPaddingMs"],d);const u=l(n,["silenceDurationMs"]);return u!=null&&c(e,["silenceDurationMs"],u),e}function lw(n){const e={},a=l(n,["automaticActivityDetection"]);a!=null&&c(e,["automaticActivityDetection"],ow(a));const s=l(n,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=l(n,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function dw(n){const e={},a=l(n,["targetTokens"]);return a!=null&&c(e,["targetTokens"],a),e}function cw(n){const e={},a=l(n,["triggerTokens"]);a!=null&&c(e,["triggerTokens"],a);const s=l(n,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],dw(s)),e}function uw(n){const e={},a=l(n,["proactiveAudio"]);return a!=null&&c(e,["proactiveAudio"],a),e}function mw(n,e){const a={},s=l(n,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=l(n,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const d=l(n,["temperature"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","temperature"],d);const u=l(n,["topP"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","topP"],u);const p=l(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const h=l(n,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const f=l(n,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const g=l(n,["seed"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","seed"],g);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","speechConfig"],Bj(Au(y)));const v=l(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=l(n,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],Jj(En(k)));const j=l(n,["tools"]);if(e!==void 0&&j!=null){let H=Ki(j);Array.isArray(H)&&(H=H.map(L=>iw(Vi(L)))),c(e,["setup","tools"],H)}const S=l(n,["sessionResumption"]);e!==void 0&&S!=null&&c(e,["setup","sessionResumption"],rw(S));const w=l(n,["inputAudioTranscription"]);e!==void 0&&w!=null&&c(e,["setup","inputAudioTranscription"],Ff());const P=l(n,["outputAudioTranscription"]);e!==void 0&&P!=null&&c(e,["setup","outputAudioTranscription"],Ff());const A=l(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],lw(A));const R=l(n,["contextWindowCompression"]);e!==void 0&&R!=null&&c(e,["setup","contextWindowCompression"],cw(R));const O=l(n,["proactivity"]);return e!==void 0&&O!=null&&c(e,["setup","proactivity"],uw(O)),a}function pw(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["setup","model"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],mw(r,a)),a}function hw(){return{}}function fw(){return{}}function gw(n){const e={},a=l(n,["media"]);a!=null&&c(e,["mediaChunks"],tx(a));const s=l(n,["audio"]);s!=null&&c(e,["audio"],ax(s));const r=l(n,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const d=l(n,["video"]);d!=null&&c(e,["video"],nx(d));const u=l(n,["text"]);return u!=null&&c(e,["text"],u),l(n,["activityStart"])!=null&&c(e,["activityStart"],hw()),l(n,["activityEnd"])!=null&&c(e,["activityEnd"],fw()),e}function xw(){return{}}function yw(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function bw(n){const e={},a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function vw(n){const e={},a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Nx(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function Nw(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],yw(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],bw(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],vw(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],Nx(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function kw(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>Nw(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function Uf(n){const e={},a=l(n,["text"]);a!=null&&c(e,["text"],a);const s=l(n,["finished"]);return s!=null&&c(e,["finished"],s),e}function jw(n){const e={},a=l(n,["retrievedUrl"]);a!=null&&c(e,["retrievedUrl"],a);const s=l(n,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function ww(n){const e={},a=l(n,["urlMetadata"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>jw(r))),c(e,["urlMetadata"],s)}return e}function Cw(n){const e={},a=l(n,["modelTurn"]);a!=null&&c(e,["modelTurn"],kw(a));const s=l(n,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=l(n,["interrupted"]);r!=null&&c(e,["interrupted"],r);const d=l(n,["groundingMetadata"]);d!=null&&c(e,["groundingMetadata"],d);const u=l(n,["generationComplete"]);u!=null&&c(e,["generationComplete"],u);const p=l(n,["inputTranscription"]);p!=null&&c(e,["inputTranscription"],Uf(p));const h=l(n,["outputTranscription"]);h!=null&&c(e,["outputTranscription"],Uf(h));const f=l(n,["urlContextMetadata"]);return f!=null&&c(e,["urlContextMetadata"],ww(f)),e}function Tw(n){const e={},a=l(n,["functionCalls"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>Nx(r))),c(e,["functionCalls"],s)}return e}function Sw(n){const e={},a=l(n,["ids"]);return a!=null&&c(e,["ids"],a),e}function il(n){const e={},a=l(n,["modality"]);a!=null&&c(e,["modality"],a);const s=l(n,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Iw(n){const e={},a=l(n,["promptTokenCount"]);a!=null&&c(e,["promptTokenCount"],a);const s=l(n,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=l(n,["responseTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const d=l(n,["toolUsePromptTokenCount"]);d!=null&&c(e,["toolUsePromptTokenCount"],d);const u=l(n,["thoughtsTokenCount"]);u!=null&&c(e,["thoughtsTokenCount"],u);const p=l(n,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const h=l(n,["promptTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(k=>il(k))),c(e,["promptTokensDetails"],v)}const f=l(n,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(k=>il(k))),c(e,["cacheTokensDetails"],v)}const g=l(n,["responseTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(k=>il(k))),c(e,["responseTokensDetails"],v)}const y=l(n,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(k=>il(k))),c(e,["toolUsePromptTokensDetails"],v)}return e}function Aw(n){const e={},a=l(n,["timeLeft"]);return a!=null&&c(e,["timeLeft"],a),e}function Ew(n){const e={},a=l(n,["newHandle"]);a!=null&&c(e,["newHandle"],a);const s=l(n,["resumable"]);s!=null&&c(e,["resumable"],s);const r=l(n,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function _w(n){const e={};l(n,["setupComplete"])!=null&&c(e,["setupComplete"],xw());const s=l(n,["serverContent"]);s!=null&&c(e,["serverContent"],Cw(s));const r=l(n,["toolCall"]);r!=null&&c(e,["toolCall"],Tw(r));const d=l(n,["toolCallCancellation"]);d!=null&&c(e,["toolCallCancellation"],Sw(d));const u=l(n,["usageMetadata"]);u!=null&&c(e,["usageMetadata"],Iw(u));const p=l(n,["goAway"]);p!=null&&c(e,["goAway"],Aw(p));const h=l(n,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],Ew(h)),e}function Pw(){return{}}function Dw(n){const e={},a=l(n,["text"]);a!=null&&c(e,["text"],a);const s=l(n,["weight"]);return s!=null&&c(e,["weight"],s),e}function Mw(n){const e={},a=l(n,["weightedPrompts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>Dw(r))),c(e,["weightedPrompts"],s)}return e}function Rw(n){const e={},a=l(n,["temperature"]);a!=null&&c(e,["temperature"],a);const s=l(n,["topK"]);s!=null&&c(e,["topK"],s);const r=l(n,["seed"]);r!=null&&c(e,["seed"],r);const d=l(n,["guidance"]);d!=null&&c(e,["guidance"],d);const u=l(n,["bpm"]);u!=null&&c(e,["bpm"],u);const p=l(n,["density"]);p!=null&&c(e,["density"],p);const h=l(n,["brightness"]);h!=null&&c(e,["brightness"],h);const f=l(n,["scale"]);f!=null&&c(e,["scale"],f);const g=l(n,["muteBass"]);g!=null&&c(e,["muteBass"],g);const y=l(n,["muteDrums"]);y!=null&&c(e,["muteDrums"],y);const v=l(n,["onlyBassAndDrums"]);v!=null&&c(e,["onlyBassAndDrums"],v);const k=l(n,["musicGenerationMode"]);return k!=null&&c(e,["musicGenerationMode"],k),e}function Lw(n){const e={},a=l(n,["clientContent"]);a!=null&&c(e,["clientContent"],Mw(a));const s=l(n,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],Rw(s)),e}function Fw(n){const e={},a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const r=l(n,["sourceMetadata"]);return r!=null&&c(e,["sourceMetadata"],Lw(r)),e}function Uw(n){const e={},a=l(n,["audioChunks"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>Fw(r))),c(e,["audioChunks"],s)}return e}function Ow(n){const e={},a=l(n,["text"]);a!=null&&c(e,["text"],a);const s=l(n,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function $w(n){const e={};l(n,["setupComplete"])!=null&&c(e,["setupComplete"],Pw());const s=l(n,["serverContent"]);s!=null&&c(e,["serverContent"],Uw(s));const r=l(n,["filteredPrompt"]);return r!=null&&c(e,["filteredPrompt"],Ow(r)),e}function Bw(n){const e={},a=l(n,["sessionId"]);return a!=null&&c(e,["sessionId"],a),e}function Vw(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function Kw(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["data"]);s!=null&&c(e,["data"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Hw(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function kx(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function Gw(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],Vw(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],Kw(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],Hw(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],kx(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function qw(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>Gw(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function Of(n){const e={},a=l(n,["text"]);a!=null&&c(e,["text"],a);const s=l(n,["finished"]);return s!=null&&c(e,["finished"],s),e}function Jw(n){const e={},a=l(n,["modelTurn"]);a!=null&&c(e,["modelTurn"],qw(a));const s=l(n,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=l(n,["interrupted"]);r!=null&&c(e,["interrupted"],r);const d=l(n,["groundingMetadata"]);d!=null&&c(e,["groundingMetadata"],d);const u=l(n,["generationComplete"]);u!=null&&c(e,["generationComplete"],u);const p=l(n,["inputTranscription"]);p!=null&&c(e,["inputTranscription"],Of(p));const h=l(n,["outputTranscription"]);return h!=null&&c(e,["outputTranscription"],Of(h)),e}function Ww(n){const e={},a=l(n,["functionCalls"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>kx(r))),c(e,["functionCalls"],s)}return e}function zw(n){const e={},a=l(n,["ids"]);return a!=null&&c(e,["ids"],a),e}function rl(n){const e={},a=l(n,["modality"]);a!=null&&c(e,["modality"],a);const s=l(n,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Yw(n){const e={},a=l(n,["promptTokenCount"]);a!=null&&c(e,["promptTokenCount"],a);const s=l(n,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=l(n,["candidatesTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const d=l(n,["toolUsePromptTokenCount"]);d!=null&&c(e,["toolUsePromptTokenCount"],d);const u=l(n,["thoughtsTokenCount"]);u!=null&&c(e,["thoughtsTokenCount"],u);const p=l(n,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const h=l(n,["promptTokensDetails"]);if(h!=null){let k=h;Array.isArray(k)&&(k=k.map(j=>rl(j))),c(e,["promptTokensDetails"],k)}const f=l(n,["cacheTokensDetails"]);if(f!=null){let k=f;Array.isArray(k)&&(k=k.map(j=>rl(j))),c(e,["cacheTokensDetails"],k)}const g=l(n,["candidatesTokensDetails"]);if(g!=null){let k=g;Array.isArray(k)&&(k=k.map(j=>rl(j))),c(e,["responseTokensDetails"],k)}const y=l(n,["toolUsePromptTokensDetails"]);if(y!=null){let k=y;Array.isArray(k)&&(k=k.map(j=>rl(j))),c(e,["toolUsePromptTokensDetails"],k)}const v=l(n,["trafficType"]);return v!=null&&c(e,["trafficType"],v),e}function Qw(n){const e={},a=l(n,["timeLeft"]);return a!=null&&c(e,["timeLeft"],a),e}function Xw(n){const e={},a=l(n,["newHandle"]);a!=null&&c(e,["newHandle"],a);const s=l(n,["resumable"]);s!=null&&c(e,["resumable"],s);const r=l(n,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function Zw(n){const e={},a=l(n,["setupComplete"]);a!=null&&c(e,["setupComplete"],Bw(a));const s=l(n,["serverContent"]);s!=null&&c(e,["serverContent"],Jw(s));const r=l(n,["toolCall"]);r!=null&&c(e,["toolCall"],Ww(r));const d=l(n,["toolCallCancellation"]);d!=null&&c(e,["toolCallCancellation"],zw(d));const u=l(n,["usageMetadata"]);u!=null&&c(e,["usageMetadata"],Yw(u));const p=l(n,["goAway"]);p!=null&&c(e,["goAway"],Qw(p));const h=l(n,["sessionResumptionUpdate"]);return h!=null&&c(e,["sessionResumptionUpdate"],Xw(h)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eC(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function tC(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function nC(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function aC(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function sC(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],eC(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],tC(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],nC(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],aC(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function Tl(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>sC(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function iC(n){const e={},a=l(n,["anyOf"]);a!=null&&c(e,["anyOf"],a);const s=l(n,["default"]);s!=null&&c(e,["default"],s);const r=l(n,["description"]);r!=null&&c(e,["description"],r);const d=l(n,["enum"]);d!=null&&c(e,["enum"],d);const u=l(n,["example"]);u!=null&&c(e,["example"],u);const p=l(n,["format"]);p!=null&&c(e,["format"],p);const h=l(n,["items"]);h!=null&&c(e,["items"],h);const f=l(n,["maxItems"]);f!=null&&c(e,["maxItems"],f);const g=l(n,["maxLength"]);g!=null&&c(e,["maxLength"],g);const y=l(n,["maxProperties"]);y!=null&&c(e,["maxProperties"],y);const v=l(n,["maximum"]);v!=null&&c(e,["maximum"],v);const k=l(n,["minItems"]);k!=null&&c(e,["minItems"],k);const j=l(n,["minLength"]);j!=null&&c(e,["minLength"],j);const S=l(n,["minProperties"]);S!=null&&c(e,["minProperties"],S);const w=l(n,["minimum"]);w!=null&&c(e,["minimum"],w);const P=l(n,["nullable"]);P!=null&&c(e,["nullable"],P);const A=l(n,["pattern"]);A!=null&&c(e,["pattern"],A);const R=l(n,["properties"]);R!=null&&c(e,["properties"],R);const O=l(n,["propertyOrdering"]);O!=null&&c(e,["propertyOrdering"],O);const H=l(n,["required"]);H!=null&&c(e,["required"],H);const L=l(n,["title"]);L!=null&&c(e,["title"],L);const U=l(n,["type"]);return U!=null&&c(e,["type"],U),e}function rC(n){const e={};if(l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=l(n,["category"]);a!=null&&c(e,["category"],a);const s=l(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function oC(n){const e={},a=l(n,["behavior"]);a!=null&&c(e,["behavior"],a);const s=l(n,["description"]);s!=null&&c(e,["description"],s);const r=l(n,["name"]);r!=null&&c(e,["name"],r);const d=l(n,["parameters"]);d!=null&&c(e,["parameters"],d);const u=l(n,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const p=l(n,["response"]);p!=null&&c(e,["response"],p);const h=l(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function lC(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function dC(n){const e={},a=l(n,["timeRangeFilter"]);if(a!=null&&c(e,["timeRangeFilter"],lC(a)),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function cC(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function uC(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],cC(a)),e}function mC(){return{}}function pC(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function hC(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>oC(f))),c(e,["functionDeclarations"],h)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=l(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],dC(s));const r=l(n,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],uC(r)),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(n,["urlContext"])!=null&&c(e,["urlContext"],mC());const u=l(n,["computerUse"]);u!=null&&c(e,["computerUse"],pC(u));const p=l(n,["codeExecution"]);return p!=null&&c(e,["codeExecution"],p),e}function fC(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function gC(n){const e={},a=l(n,["latitude"]);a!=null&&c(e,["latitude"],a);const s=l(n,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function xC(n){const e={},a=l(n,["latLng"]);a!=null&&c(e,["latLng"],gC(a));const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function yC(n){const e={},a=l(n,["functionCallingConfig"]);a!=null&&c(e,["functionCallingConfig"],fC(a));const s=l(n,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],xC(s)),e}function bC(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function jx(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],bC(a)),e}function vC(n){const e={},a=l(n,["speaker"]);a!=null&&c(e,["speaker"],a);const s=l(n,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],jx(s)),e}function NC(n){const e={},a=l(n,["speakerVoiceConfigs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>vC(r))),c(e,["speakerVoiceConfigs"],s)}return e}function kC(n){const e={},a=l(n,["voiceConfig"]);a!=null&&c(e,["voiceConfig"],jx(a));const s=l(n,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],NC(s));const r=l(n,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function jC(n){const e={},a=l(n,["includeThoughts"]);a!=null&&c(e,["includeThoughts"],a);const s=l(n,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function wC(n,e,a){const s={},r=l(e,["systemInstruction"]);a!==void 0&&r!=null&&c(a,["systemInstruction"],Tl(En(r)));const d=l(e,["temperature"]);d!=null&&c(s,["temperature"],d);const u=l(e,["topP"]);u!=null&&c(s,["topP"],u);const p=l(e,["topK"]);p!=null&&c(s,["topK"],p);const h=l(e,["candidateCount"]);h!=null&&c(s,["candidateCount"],h);const f=l(e,["maxOutputTokens"]);f!=null&&c(s,["maxOutputTokens"],f);const g=l(e,["stopSequences"]);g!=null&&c(s,["stopSequences"],g);const y=l(e,["responseLogprobs"]);y!=null&&c(s,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&c(s,["logprobs"],v);const k=l(e,["presencePenalty"]);k!=null&&c(s,["presencePenalty"],k);const j=l(e,["frequencyPenalty"]);j!=null&&c(s,["frequencyPenalty"],j);const S=l(e,["seed"]);S!=null&&c(s,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&c(s,["responseMimeType"],w);const P=l(e,["responseSchema"]);P!=null&&c(s,["responseSchema"],iC(Su(P)));const A=l(e,["responseJsonSchema"]);if(A!=null&&c(s,["responseJsonSchema"],A),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=l(e,["safetySettings"]);if(a!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map(ce=>rC(ce))),c(a,["safetySettings"],V)}const O=l(e,["tools"]);if(a!==void 0&&O!=null){let V=Ki(O);Array.isArray(V)&&(V=V.map(ce=>hC(Vi(ce)))),c(a,["tools"],V)}const H=l(e,["toolConfig"]);if(a!==void 0&&H!=null&&c(a,["toolConfig"],yC(H)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=l(e,["cachedContent"]);a!==void 0&&L!=null&&c(a,["cachedContent"],za(n,L));const U=l(e,["responseModalities"]);U!=null&&c(s,["responseModalities"],U);const ne=l(e,["mediaResolution"]);ne!=null&&c(s,["mediaResolution"],ne);const ie=l(e,["speechConfig"]);if(ie!=null&&c(s,["speechConfig"],kC(Iu(ie))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=l(e,["thinkingConfig"]);return q!=null&&c(s,["thinkingConfig"],jC(q)),s}function $f(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>Tl(p))),c(a,["contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["generationConfig"],wC(n,d,a)),a}function CC(n,e){const a={},s=l(n,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const r=l(n,["title"]);e!==void 0&&r!=null&&c(e,["requests[]","title"],r);const d=l(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&c(e,["requests[]","outputDimensionality"],d),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function TC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);r!=null&&c(a,["requests[]","content"],Tu(n,r));const d=l(e,["config"]);d!=null&&c(a,["config"],CC(d,a));const u=l(e,["model"]);return u!==void 0&&c(a,["requests[]","model"],Lt(n,u)),a}function SC(n,e){const a={};if(l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=l(n,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=l(n,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);const d=l(n,["guidanceScale"]);if(e!==void 0&&d!=null&&c(e,["parameters","guidanceScale"],d),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=l(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);const p=l(n,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const h=l(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&c(e,["parameters","includeSafetyAttributes"],h);const f=l(n,["includeRaiReason"]);e!==void 0&&f!=null&&c(e,["parameters","includeRaiReason"],f);const g=l(n,["language"]);e!==void 0&&g!=null&&c(e,["parameters","language"],g);const y=l(n,["outputMimeType"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","mimeType"],y);const v=l(n,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&c(e,["parameters","outputOptions","compressionQuality"],v),l(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const k=l(n,["imageSize"]);if(e!==void 0&&k!=null&&c(e,["parameters","sampleImageSize"],k),l(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function IC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["prompt"]);r!=null&&c(a,["instances[0]","prompt"],r);const d=l(e,["config"]);return d!=null&&c(a,["config"],SC(d,a)),a}function AC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","name"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function EC(n,e,a){const s={},r=l(e,["pageSize"]);a!==void 0&&r!=null&&c(a,["_query","pageSize"],r);const d=l(e,["pageToken"]);a!==void 0&&d!=null&&c(a,["_query","pageToken"],d);const u=l(e,["filter"]);a!==void 0&&u!=null&&c(a,["_query","filter"],u);const p=l(e,["queryBase"]);return a!==void 0&&p!=null&&c(a,["_url","models_url"],ox(n,p)),s}function _C(n,e){const a={},s=l(e,["config"]);return s!=null&&c(a,["config"],EC(n,s,a)),a}function PC(n,e){const a={},s=l(n,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=l(n,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const d=l(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&c(e,["defaultCheckpointId"],d),a}function DC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","name"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],PC(r,a)),a}function MC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","name"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function RC(n){const e={};if(l(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function LC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>Tl(p))),c(a,["contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["config"],RC(d)),a}function wx(n){const e={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=l(n,["imageBytes"]);a!=null&&c(e,["bytesBase64Encoded"],Ys(a));const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function FC(n,e){const a={},s=l(n,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const r=l(n,["image"]);if(e!==void 0&&r!=null&&c(e,["instances[0]","image"],wx(r)),l(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return a}function UC(n,e){const a={},s=l(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(n,["durationSeconds"]);if(e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=l(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const u=l(n,["resolution"]);e!==void 0&&u!=null&&c(e,["parameters","resolution"],u);const p=l(n,["personGeneration"]);if(e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p),l(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=l(n,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const f=l(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&c(e,["parameters","enhancePrompt"],f),l(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return a}function OC(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["prompt"]);r!=null&&c(a,["instances[0]","prompt"],r);const d=l(e,["image"]);if(d!=null&&c(a,["instances[0]","image"],wx(d)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=l(e,["source"]);u!=null&&c(a,["config"],FC(u,a));const p=l(e,["config"]);return p!=null&&c(a,["config"],UC(p,a)),a}function $C(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function BC(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["data"]);s!=null&&c(e,["data"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function VC(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function KC(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function HC(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],$C(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],BC(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],VC(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],KC(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function Gi(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>HC(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function GC(n){const e={},a=l(n,["anyOf"]);a!=null&&c(e,["anyOf"],a);const s=l(n,["default"]);s!=null&&c(e,["default"],s);const r=l(n,["description"]);r!=null&&c(e,["description"],r);const d=l(n,["enum"]);d!=null&&c(e,["enum"],d);const u=l(n,["example"]);u!=null&&c(e,["example"],u);const p=l(n,["format"]);p!=null&&c(e,["format"],p);const h=l(n,["items"]);h!=null&&c(e,["items"],h);const f=l(n,["maxItems"]);f!=null&&c(e,["maxItems"],f);const g=l(n,["maxLength"]);g!=null&&c(e,["maxLength"],g);const y=l(n,["maxProperties"]);y!=null&&c(e,["maxProperties"],y);const v=l(n,["maximum"]);v!=null&&c(e,["maximum"],v);const k=l(n,["minItems"]);k!=null&&c(e,["minItems"],k);const j=l(n,["minLength"]);j!=null&&c(e,["minLength"],j);const S=l(n,["minProperties"]);S!=null&&c(e,["minProperties"],S);const w=l(n,["minimum"]);w!=null&&c(e,["minimum"],w);const P=l(n,["nullable"]);P!=null&&c(e,["nullable"],P);const A=l(n,["pattern"]);A!=null&&c(e,["pattern"],A);const R=l(n,["properties"]);R!=null&&c(e,["properties"],R);const O=l(n,["propertyOrdering"]);O!=null&&c(e,["propertyOrdering"],O);const H=l(n,["required"]);H!=null&&c(e,["required"],H);const L=l(n,["title"]);L!=null&&c(e,["title"],L);const U=l(n,["type"]);return U!=null&&c(e,["type"],U),e}function qC(n){const e={},a=l(n,["featureSelectionPreference"]);return a!=null&&c(e,["featureSelectionPreference"],a),e}function JC(n){const e={},a=l(n,["method"]);a!=null&&c(e,["method"],a);const s=l(n,["category"]);s!=null&&c(e,["category"],s);const r=l(n,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function WC(n){const e={};if(l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=l(n,["description"]);a!=null&&c(e,["description"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["parameters"]);r!=null&&c(e,["parameters"],r);const d=l(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const u=l(n,["response"]);u!=null&&c(e,["response"],u);const p=l(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function zC(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function YC(n){const e={},a=l(n,["timeRangeFilter"]);a!=null&&c(e,["timeRangeFilter"],zC(a));const s=l(n,["excludeDomains"]);return s!=null&&c(e,["excludeDomains"],s),e}function QC(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function XC(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],QC(a)),e}function ZC(n){const e={},a=l(n,["excludeDomains"]);return a!=null&&c(e,["excludeDomains"],a),e}function eT(n){const e={},a=l(n,["apiKeyString"]);return a!=null&&c(e,["apiKeyString"],a),e}function tT(n){const e={},a=l(n,["apiKeyConfig"]);a!=null&&c(e,["apiKeyConfig"],eT(a));const s=l(n,["authType"]);s!=null&&c(e,["authType"],s);const r=l(n,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const d=l(n,["httpBasicAuthConfig"]);d!=null&&c(e,["httpBasicAuthConfig"],d);const u=l(n,["oauthConfig"]);u!=null&&c(e,["oauthConfig"],u);const p=l(n,["oidcConfig"]);return p!=null&&c(e,["oidcConfig"],p),e}function nT(n){const e={},a=l(n,["authConfig"]);return a!=null&&c(e,["authConfig"],tT(a)),e}function aT(){return{}}function sT(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function Cx(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(v=>WC(v))),c(e,["functionDeclarations"],y)}const s=l(n,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=l(n,["googleSearch"]);r!=null&&c(e,["googleSearch"],YC(r));const d=l(n,["googleSearchRetrieval"]);d!=null&&c(e,["googleSearchRetrieval"],XC(d));const u=l(n,["enterpriseWebSearch"]);u!=null&&c(e,["enterpriseWebSearch"],ZC(u));const p=l(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],nT(p)),l(n,["urlContext"])!=null&&c(e,["urlContext"],aT());const f=l(n,["computerUse"]);f!=null&&c(e,["computerUse"],sT(f));const g=l(n,["codeExecution"]);return g!=null&&c(e,["codeExecution"],g),e}function iT(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function rT(n){const e={},a=l(n,["latitude"]);a!=null&&c(e,["latitude"],a);const s=l(n,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function oT(n){const e={},a=l(n,["latLng"]);a!=null&&c(e,["latLng"],rT(a));const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function lT(n){const e={},a=l(n,["functionCallingConfig"]);a!=null&&c(e,["functionCallingConfig"],iT(a));const s=l(n,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],oT(s)),e}function dT(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function cT(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],dT(a)),e}function uT(n){const e={},a=l(n,["voiceConfig"]);if(a!=null&&c(e,["voiceConfig"],cT(a)),l(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=l(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function mT(n){const e={},a=l(n,["includeThoughts"]);a!=null&&c(e,["includeThoughts"],a);const s=l(n,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function pT(n,e,a){const s={},r=l(e,["systemInstruction"]);a!==void 0&&r!=null&&c(a,["systemInstruction"],Gi(En(r)));const d=l(e,["temperature"]);d!=null&&c(s,["temperature"],d);const u=l(e,["topP"]);u!=null&&c(s,["topP"],u);const p=l(e,["topK"]);p!=null&&c(s,["topK"],p);const h=l(e,["candidateCount"]);h!=null&&c(s,["candidateCount"],h);const f=l(e,["maxOutputTokens"]);f!=null&&c(s,["maxOutputTokens"],f);const g=l(e,["stopSequences"]);g!=null&&c(s,["stopSequences"],g);const y=l(e,["responseLogprobs"]);y!=null&&c(s,["responseLogprobs"],y);const v=l(e,["logprobs"]);v!=null&&c(s,["logprobs"],v);const k=l(e,["presencePenalty"]);k!=null&&c(s,["presencePenalty"],k);const j=l(e,["frequencyPenalty"]);j!=null&&c(s,["frequencyPenalty"],j);const S=l(e,["seed"]);S!=null&&c(s,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&c(s,["responseMimeType"],w);const P=l(e,["responseSchema"]);P!=null&&c(s,["responseSchema"],GC(Su(P)));const A=l(e,["responseJsonSchema"]);A!=null&&c(s,["responseJsonSchema"],A);const R=l(e,["routingConfig"]);R!=null&&c(s,["routingConfig"],R);const O=l(e,["modelSelectionConfig"]);O!=null&&c(s,["modelConfig"],qC(O));const H=l(e,["safetySettings"]);if(a!==void 0&&H!=null){let Ue=H;Array.isArray(Ue)&&(Ue=Ue.map(re=>JC(re))),c(a,["safetySettings"],Ue)}const L=l(e,["tools"]);if(a!==void 0&&L!=null){let Ue=Ki(L);Array.isArray(Ue)&&(Ue=Ue.map(re=>Cx(Vi(re)))),c(a,["tools"],Ue)}const U=l(e,["toolConfig"]);a!==void 0&&U!=null&&c(a,["toolConfig"],lT(U));const ne=l(e,["labels"]);a!==void 0&&ne!=null&&c(a,["labels"],ne);const ie=l(e,["cachedContent"]);a!==void 0&&ie!=null&&c(a,["cachedContent"],za(n,ie));const q=l(e,["responseModalities"]);q!=null&&c(s,["responseModalities"],q);const V=l(e,["mediaResolution"]);V!=null&&c(s,["mediaResolution"],V);const ce=l(e,["speechConfig"]);ce!=null&&c(s,["speechConfig"],uT(Iu(ce)));const Ce=l(e,["audioTimestamp"]);Ce!=null&&c(s,["audioTimestamp"],Ce);const Re=l(e,["thinkingConfig"]);return Re!=null&&c(s,["thinkingConfig"],mT(Re)),s}function Bf(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>Gi(p))),c(a,["contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["generationConfig"],pT(n,d,a)),a}function hT(n,e){const a={},s=l(n,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const r=l(n,["title"]);e!==void 0&&r!=null&&c(e,["instances[]","title"],r);const d=l(n,["outputDimensionality"]);e!==void 0&&d!=null&&c(e,["parameters","outputDimensionality"],d);const u=l(n,["mimeType"]);e!==void 0&&u!=null&&c(e,["instances[]","mimeType"],u);const p=l(n,["autoTruncate"]);return e!==void 0&&p!=null&&c(e,["parameters","autoTruncate"],p),a}function fT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);r!=null&&c(a,["instances[]","content"],Tu(n,r));const d=l(e,["config"]);return d!=null&&c(a,["config"],hT(d,a)),a}function gT(n,e){const a={},s=l(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=l(n,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const d=l(n,["numberOfImages"]);e!==void 0&&d!=null&&c(e,["parameters","sampleCount"],d);const u=l(n,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const p=l(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const h=l(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const f=l(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const g=l(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const y=l(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&c(e,["parameters","includeSafetyAttributes"],y);const v=l(n,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const k=l(n,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const j=l(n,["outputMimeType"]);e!==void 0&&j!=null&&c(e,["parameters","outputOptions","mimeType"],j);const S=l(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S);const w=l(n,["addWatermark"]);e!==void 0&&w!=null&&c(e,["parameters","addWatermark"],w);const P=l(n,["imageSize"]);e!==void 0&&P!=null&&c(e,["parameters","sampleImageSize"],P);const A=l(n,["enhancePrompt"]);return e!==void 0&&A!=null&&c(e,["parameters","enhancePrompt"],A),a}function xT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["prompt"]);r!=null&&c(a,["instances[0]","prompt"],r);const d=l(e,["config"]);return d!=null&&c(a,["config"],gT(d,a)),a}function ja(n){const e={},a=l(n,["gcsUri"]);a!=null&&c(e,["gcsUri"],a);const s=l(n,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Ys(s));const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function yT(n){const e={},a=l(n,["maskMode"]);a!=null&&c(e,["maskMode"],a);const s=l(n,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const r=l(n,["maskDilation"]);return r!=null&&c(e,["dilation"],r),e}function bT(n){const e={},a=l(n,["controlType"]);a!=null&&c(e,["controlType"],a);const s=l(n,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function vT(n){const e={},a=l(n,["styleDescription"]);return a!=null&&c(e,["styleDescription"],a),e}function NT(n){const e={},a=l(n,["subjectType"]);a!=null&&c(e,["subjectType"],a);const s=l(n,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function kT(n){const e={},a=l(n,["referenceImage"]);a!=null&&c(e,["referenceImage"],ja(a));const s=l(n,["referenceId"]);s!=null&&c(e,["referenceId"],s);const r=l(n,["referenceType"]);r!=null&&c(e,["referenceType"],r);const d=l(n,["maskImageConfig"]);d!=null&&c(e,["maskImageConfig"],yT(d));const u=l(n,["controlImageConfig"]);u!=null&&c(e,["controlImageConfig"],bT(u));const p=l(n,["styleImageConfig"]);p!=null&&c(e,["styleImageConfig"],vT(p));const h=l(n,["subjectImageConfig"]);return h!=null&&c(e,["subjectImageConfig"],NT(h)),e}function jT(n,e){const a={},s=l(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=l(n,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const d=l(n,["numberOfImages"]);e!==void 0&&d!=null&&c(e,["parameters","sampleCount"],d);const u=l(n,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const p=l(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const h=l(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const f=l(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const g=l(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const y=l(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&c(e,["parameters","includeSafetyAttributes"],y);const v=l(n,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const k=l(n,["language"]);e!==void 0&&k!=null&&c(e,["parameters","language"],k);const j=l(n,["outputMimeType"]);e!==void 0&&j!=null&&c(e,["parameters","outputOptions","mimeType"],j);const S=l(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S);const w=l(n,["addWatermark"]);e!==void 0&&w!=null&&c(e,["parameters","addWatermark"],w);const P=l(n,["editMode"]);e!==void 0&&P!=null&&c(e,["parameters","editMode"],P);const A=l(n,["baseSteps"]);return e!==void 0&&A!=null&&c(e,["parameters","editConfig","baseSteps"],A),a}function wT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["prompt"]);r!=null&&c(a,["instances[0]","prompt"],r);const d=l(e,["referenceImages"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>kT(h))),c(a,["instances[0]","referenceImages"],p)}const u=l(e,["config"]);return u!=null&&c(a,["config"],jT(u,a)),a}function CT(n,e){const a={},s=l(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=l(n,["includeRaiReason"]);e!==void 0&&r!=null&&c(e,["parameters","includeRaiReason"],r);const d=l(n,["outputMimeType"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","mimeType"],d);const u=l(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);const p=l(n,["enhanceInputImage"]);e!==void 0&&p!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],p);const h=l(n,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const f=l(n,["numberOfImages"]);e!==void 0&&f!=null&&c(e,["parameters","sampleCount"],f);const g=l(n,["mode"]);return e!==void 0&&g!=null&&c(e,["parameters","mode"],g),a}function TT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["image"]);r!=null&&c(a,["instances[0]","image"],ja(r));const d=l(e,["upscaleFactor"]);d!=null&&c(a,["parameters","upscaleConfig","upscaleFactor"],d);const u=l(e,["config"]);return u!=null&&c(a,["config"],CT(u,a)),a}function ST(n){const e={},a=l(n,["productImage"]);return a!=null&&c(e,["image"],ja(a)),e}function IT(n,e){const a={},s=l(n,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const r=l(n,["personImage"]);e!==void 0&&r!=null&&c(e,["instances[0]","personImage","image"],ja(r));const d=l(n,["productImages"]);if(e!==void 0&&d!=null){let u=d;Array.isArray(u)&&(u=u.map(p=>ST(p))),c(e,["instances[0]","productImages"],u)}return a}function AT(n,e){const a={},s=l(n,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=l(n,["baseSteps"]);e!==void 0&&r!=null&&c(e,["parameters","editConfig","baseSteps"],r);const d=l(n,["outputGcsUri"]);e!==void 0&&d!=null&&c(e,["parameters","storageUri"],d);const u=l(n,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const p=l(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const h=l(n,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const f=l(n,["addWatermark"]);e!==void 0&&f!=null&&c(e,["parameters","addWatermark"],f);const g=l(n,["outputMimeType"]);e!==void 0&&g!=null&&c(e,["parameters","outputOptions","mimeType"],g);const y=l(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const v=l(n,["enhancePrompt"]);return e!==void 0&&v!=null&&c(e,["parameters","enhancePrompt"],v),a}function ET(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["source"]);r!=null&&c(a,["config"],IT(r,a));const d=l(e,["config"]);return d!=null&&c(a,["config"],AT(d,a)),a}function _T(n){const e={},a=l(n,["image"]);return a!=null&&c(e,["image"],ja(a)),e}function PT(n,e){const a={},s=l(n,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const r=l(n,["image"]);e!==void 0&&r!=null&&c(e,["instances[0]","image"],ja(r));const d=l(n,["scribbleImage"]);return e!==void 0&&d!=null&&c(e,["instances[0]","scribble"],_T(d)),a}function DT(n,e){const a={},s=l(n,["mode"]);e!==void 0&&s!=null&&c(e,["parameters","mode"],s);const r=l(n,["maxPredictions"]);e!==void 0&&r!=null&&c(e,["parameters","maxPredictions"],r);const d=l(n,["confidenceThreshold"]);e!==void 0&&d!=null&&c(e,["parameters","confidenceThreshold"],d);const u=l(n,["maskDilation"]);e!==void 0&&u!=null&&c(e,["parameters","maskDilation"],u);const p=l(n,["binaryColorThreshold"]);return e!==void 0&&p!=null&&c(e,["parameters","binaryColorThreshold"],p),a}function MT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["source"]);r!=null&&c(a,["config"],PT(r,a));const d=l(e,["config"]);return d!=null&&c(a,["config"],DT(d,a)),a}function RT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","name"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function LT(n,e,a){const s={},r=l(e,["pageSize"]);a!==void 0&&r!=null&&c(a,["_query","pageSize"],r);const d=l(e,["pageToken"]);a!==void 0&&d!=null&&c(a,["_query","pageToken"],d);const u=l(e,["filter"]);a!==void 0&&u!=null&&c(a,["_query","filter"],u);const p=l(e,["queryBase"]);return a!==void 0&&p!=null&&c(a,["_url","models_url"],ox(n,p)),s}function FT(n,e){const a={},s=l(e,["config"]);return s!=null&&c(a,["config"],LT(n,s,a)),a}function UT(n,e){const a={},s=l(n,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=l(n,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const d=l(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&c(e,["defaultCheckpointId"],d),a}function OT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],UT(r,a)),a}function $T(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","name"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],r),a}function BT(n,e){const a={},s=l(n,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Gi(En(s)));const r=l(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Cx(p))),c(e,["tools"],u)}const d=l(n,["generationConfig"]);return e!==void 0&&d!=null&&c(e,["generationConfig"],d),a}function VT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>Gi(p))),c(a,["contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["config"],BT(d,a)),a}function KT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["contents"]);if(r!=null){let u=ra(r);Array.isArray(u)&&(u=u.map(p=>Gi(p))),c(a,["contents"],u)}const d=l(e,["config"]);return d!=null&&c(a,["config"],d),a}function Tx(n){const e={},a=l(n,["uri"]);a!=null&&c(e,["gcsUri"],a);const s=l(n,["videoBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Ys(s));const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function HT(n,e){const a={},s=l(n,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const r=l(n,["image"]);e!==void 0&&r!=null&&c(e,["instances[0]","image"],ja(r));const d=l(n,["video"]);return e!==void 0&&d!=null&&c(e,["instances[0]","video"],Tx(d)),a}function GT(n){const e={},a=l(n,["image"]);a!=null&&c(e,["image"],ja(a));const s=l(n,["referenceType"]);return s!=null&&c(e,["referenceType"],s),e}function qT(n){const e={},a=l(n,["image"]);a!=null&&c(e,["_self"],ja(a));const s=l(n,["maskMode"]);return s!=null&&c(e,["maskMode"],s),e}function JT(n,e){const a={},s=l(n,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=l(n,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const d=l(n,["fps"]);e!==void 0&&d!=null&&c(e,["parameters","fps"],d);const u=l(n,["durationSeconds"]);e!==void 0&&u!=null&&c(e,["parameters","durationSeconds"],u);const p=l(n,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const h=l(n,["aspectRatio"]);e!==void 0&&h!=null&&c(e,["parameters","aspectRatio"],h);const f=l(n,["resolution"]);e!==void 0&&f!=null&&c(e,["parameters","resolution"],f);const g=l(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const y=l(n,["pubsubTopic"]);e!==void 0&&y!=null&&c(e,["parameters","pubsubTopic"],y);const v=l(n,["negativePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","negativePrompt"],v);const k=l(n,["enhancePrompt"]);e!==void 0&&k!=null&&c(e,["parameters","enhancePrompt"],k);const j=l(n,["generateAudio"]);e!==void 0&&j!=null&&c(e,["parameters","generateAudio"],j);const S=l(n,["lastFrame"]);e!==void 0&&S!=null&&c(e,["instances[0]","lastFrame"],ja(S));const w=l(n,["referenceImages"]);if(e!==void 0&&w!=null){let R=w;Array.isArray(R)&&(R=R.map(O=>GT(O))),c(e,["instances[0]","referenceImages"],R)}const P=l(n,["mask"]);e!==void 0&&P!=null&&c(e,["instances[0]","mask"],qT(P));const A=l(n,["compressionQuality"]);return e!==void 0&&A!=null&&c(e,["parameters","compressionQuality"],A),a}function WT(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["_url","model"],Lt(n,s));const r=l(e,["prompt"]);r!=null&&c(a,["instances[0]","prompt"],r);const d=l(e,["image"]);d!=null&&c(a,["instances[0]","image"],ja(d));const u=l(e,["video"]);u!=null&&c(a,["instances[0]","video"],Tx(u));const p=l(e,["source"]);p!=null&&c(a,["config"],HT(p,a));const h=l(e,["config"]);return h!=null&&c(a,["config"],JT(h,a)),a}function zT(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function YT(n){const e={},a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function QT(n){const e={},a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function XT(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function ZT(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],zT(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],YT(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],QT(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],XT(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function eS(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>ZT(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function tS(n){const e={},a=l(n,["citationSources"]);return a!=null&&c(e,["citations"],a),e}function nS(n){const e={},a=l(n,["retrievedUrl"]);a!=null&&c(e,["retrievedUrl"],a);const s=l(n,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function aS(n){const e={},a=l(n,["urlMetadata"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>nS(r))),c(e,["urlMetadata"],s)}return e}function sS(n){const e={},a=l(n,["content"]);a!=null&&c(e,["content"],eS(a));const s=l(n,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],tS(s));const r=l(n,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const d=l(n,["finishReason"]);d!=null&&c(e,["finishReason"],d);const u=l(n,["urlContextMetadata"]);u!=null&&c(e,["urlContextMetadata"],aS(u));const p=l(n,["avgLogprobs"]);p!=null&&c(e,["avgLogprobs"],p);const h=l(n,["groundingMetadata"]);h!=null&&c(e,["groundingMetadata"],h);const f=l(n,["index"]);f!=null&&c(e,["index"],f);const g=l(n,["logprobsResult"]);g!=null&&c(e,["logprobsResult"],g);const y=l(n,["safetyRatings"]);return y!=null&&c(e,["safetyRatings"],y),e}function Vf(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(f=>sS(f))),c(e,["candidates"],h)}const r=l(n,["modelVersion"]);r!=null&&c(e,["modelVersion"],r);const d=l(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const u=l(n,["responseId"]);u!=null&&c(e,["responseId"],u);const p=l(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function iS(n){const e={},a=l(n,["values"]);return a!=null&&c(e,["values"],a),e}function rS(){return{}}function oS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(u=>iS(u))),c(e,["embeddings"],d)}return l(n,["metadata"])!=null&&c(e,["metadata"],rS()),e}function lS(n){const e={},a=l(n,["bytesBase64Encoded"]);a!=null&&c(e,["imageBytes"],Ys(a));const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Sx(n){const e={},a=l(n,["safetyAttributes","categories"]);a!=null&&c(e,["categories"],a);const s=l(n,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=l(n,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function dS(n){const e={},a=l(n,["_self"]);a!=null&&c(e,["image"],lS(a));const s=l(n,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=l(n,["_self"]);return r!=null&&c(e,["safetyAttributes"],Sx(r)),e}function cS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(u=>dS(u))),c(e,["generatedImages"],d)}const r=l(n,["positivePromptSafetyAttributes"]);return r!=null&&c(e,["positivePromptSafetyAttributes"],Sx(r)),e}function uS(n){const e={},a=l(n,["baseModel"]);a!=null&&c(e,["baseModel"],a);const s=l(n,["createTime"]);s!=null&&c(e,["createTime"],s);const r=l(n,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function tu(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["description"]);r!=null&&c(e,["description"],r);const d=l(n,["version"]);d!=null&&c(e,["version"],d);const u=l(n,["_self"]);u!=null&&c(e,["tunedModelInfo"],uS(u));const p=l(n,["inputTokenLimit"]);p!=null&&c(e,["inputTokenLimit"],p);const h=l(n,["outputTokenLimit"]);h!=null&&c(e,["outputTokenLimit"],h);const f=l(n,["supportedGenerationMethods"]);return f!=null&&c(e,["supportedActions"],f),e}function mS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["_self"]);if(r!=null){let d=lx(r);Array.isArray(d)&&(d=d.map(u=>tu(u))),c(e,["models"],d)}return e}function pS(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}function hS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["totalTokens"]);s!=null&&c(e,["totalTokens"],s);const r=l(n,["cachedContentTokenCount"]);return r!=null&&c(e,["cachedContentTokenCount"],r),e}function fS(n){const e={},a=l(n,["video","uri"]);a!=null&&c(e,["uri"],a);const s=l(n,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Ys(s));const r=l(n,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function gS(n){const e={},a=l(n,["_self"]);return a!=null&&c(e,["video"],fS(a)),e}function xS(n){const e={},a=l(n,["generatedSamples"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(u=>gS(u))),c(e,["generatedVideos"],d)}const s=l(n,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=l(n,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function yS(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["metadata"]);s!=null&&c(e,["metadata"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);d!=null&&c(e,["error"],d);const u=l(n,["response","generateVideoResponse"]);return u!=null&&c(e,["response"],xS(u)),e}function bS(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function vS(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["data"]);s!=null&&c(e,["data"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function NS(n){const e={},a=l(n,["displayName"]);a!=null&&c(e,["displayName"],a);const s=l(n,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function kS(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function jS(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],bS(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],vS(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],NS(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],kS(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function wS(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>jS(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function CS(n){const e={},a=l(n,["citations"]);return a!=null&&c(e,["citations"],a),e}function TS(n){const e={},a=l(n,["retrievedUrl"]);a!=null&&c(e,["retrievedUrl"],a);const s=l(n,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function SS(n){const e={},a=l(n,["urlMetadata"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>TS(r))),c(e,["urlMetadata"],s)}return e}function IS(n){const e={},a=l(n,["content"]);a!=null&&c(e,["content"],wS(a));const s=l(n,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],CS(s));const r=l(n,["finishMessage"]);r!=null&&c(e,["finishMessage"],r);const d=l(n,["finishReason"]);d!=null&&c(e,["finishReason"],d);const u=l(n,["urlContextMetadata"]);u!=null&&c(e,["urlContextMetadata"],SS(u));const p=l(n,["avgLogprobs"]);p!=null&&c(e,["avgLogprobs"],p);const h=l(n,["groundingMetadata"]);h!=null&&c(e,["groundingMetadata"],h);const f=l(n,["index"]);f!=null&&c(e,["index"],f);const g=l(n,["logprobsResult"]);g!=null&&c(e,["logprobsResult"],g);const y=l(n,["safetyRatings"]);return y!=null&&c(e,["safetyRatings"],y),e}function Kf(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(g=>IS(g))),c(e,["candidates"],f)}const r=l(n,["createTime"]);r!=null&&c(e,["createTime"],r);const d=l(n,["modelVersion"]);d!=null&&c(e,["modelVersion"],d);const u=l(n,["promptFeedback"]);u!=null&&c(e,["promptFeedback"],u);const p=l(n,["responseId"]);p!=null&&c(e,["responseId"],p);const h=l(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function AS(n){const e={},a=l(n,["truncated"]);a!=null&&c(e,["truncated"],a);const s=l(n,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function ES(n){const e={},a=l(n,["values"]);a!=null&&c(e,["values"],a);const s=l(n,["statistics"]);return s!=null&&c(e,["statistics"],AS(s)),e}function _S(n){const e={},a=l(n,["billableCharacterCount"]);return a!=null&&c(e,["billableCharacterCount"],a),e}function PS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(u=>ES(u))),c(e,["embeddings"],d)}const r=l(n,["metadata"]);return r!=null&&c(e,["metadata"],_S(r)),e}function Ix(n){const e={},a=l(n,["gcsUri"]);a!=null&&c(e,["gcsUri"],a);const s=l(n,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],Ys(s));const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Ax(n){const e={},a=l(n,["safetyAttributes","categories"]);a!=null&&c(e,["categories"],a);const s=l(n,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=l(n,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function Sl(n){const e={},a=l(n,["_self"]);a!=null&&c(e,["image"],Ix(a));const s=l(n,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=l(n,["_self"]);r!=null&&c(e,["safetyAttributes"],Ax(r));const d=l(n,["prompt"]);return d!=null&&c(e,["enhancedPrompt"],d),e}function DS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(u=>Sl(u))),c(e,["generatedImages"],d)}const r=l(n,["positivePromptSafetyAttributes"]);return r!=null&&c(e,["positivePromptSafetyAttributes"],Ax(r)),e}function MS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Sl(d))),c(e,["generatedImages"],r)}return e}function RS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Sl(d))),c(e,["generatedImages"],r)}return e}function LS(n){const e={},a=l(n,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>Sl(r))),c(e,["generatedImages"],s)}return e}function FS(n){const e={},a=l(n,["label"]);a!=null&&c(e,["label"],a);const s=l(n,["score"]);return s!=null&&c(e,["score"],s),e}function US(n){const e={},a=l(n,["_self"]);a!=null&&c(e,["mask"],Ix(a));const s=l(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>FS(d))),c(e,["labels"],r)}return e}function OS(n){const e={},a=l(n,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>US(r))),c(e,["generatedMasks"],s)}return e}function $S(n){const e={},a=l(n,["endpoint"]);a!=null&&c(e,["name"],a);const s=l(n,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function BS(n){const e={},a=l(n,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&c(e,["baseModel"],a);const s=l(n,["createTime"]);s!=null&&c(e,["createTime"],s);const r=l(n,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function VS(n){const e={},a=l(n,["checkpointId"]);a!=null&&c(e,["checkpointId"],a);const s=l(n,["epoch"]);s!=null&&c(e,["epoch"],s);const r=l(n,["step"]);return r!=null&&c(e,["step"],r),e}function nu(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["displayName"]);s!=null&&c(e,["displayName"],s);const r=l(n,["description"]);r!=null&&c(e,["description"],r);const d=l(n,["versionId"]);d!=null&&c(e,["version"],d);const u=l(n,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>$S(v))),c(e,["endpoints"],y)}const p=l(n,["labels"]);p!=null&&c(e,["labels"],p);const h=l(n,["_self"]);h!=null&&c(e,["tunedModelInfo"],BS(h));const f=l(n,["defaultCheckpointId"]);f!=null&&c(e,["defaultCheckpointId"],f);const g=l(n,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(v=>VS(v))),c(e,["checkpoints"],y)}return e}function KS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["_self"]);if(r!=null){let d=lx(r);Array.isArray(d)&&(d=d.map(u=>nu(u))),c(e,["models"],d)}return e}function HS(n){const e={},a=l(n,["sdkHttpResponse"]);return a!=null&&c(e,["sdkHttpResponse"],a),e}function GS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["totalTokens"]);return s!=null&&c(e,["totalTokens"],s),e}function qS(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["tokensInfo"]);return s!=null&&c(e,["tokensInfo"],s),e}function JS(n){const e={},a=l(n,["gcsUri"]);a!=null&&c(e,["uri"],a);const s=l(n,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Ys(s));const r=l(n,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function WS(n){const e={},a=l(n,["_self"]);return a!=null&&c(e,["video"],JS(a)),e}function zS(n){const e={},a=l(n,["videos"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(u=>WS(u))),c(e,["generatedVideos"],d)}const s=l(n,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=l(n,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function YS(n){const e={},a=l(n,["name"]);a!=null&&c(e,["name"],a);const s=l(n,["metadata"]);s!=null&&c(e,["metadata"],s);const r=l(n,["done"]);r!=null&&c(e,["done"],r);const d=l(n,["error"]);d!=null&&c(e,["error"],d);const u=l(n,["response"]);return u!=null&&c(e,["response"],zS(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QS="Content-Type",XS="X-Server-Timeout",ZS="User-Agent",au="x-goog-api-client",eI="1.19.0",tI=`google-genai-sdk/${eI}`,nI="v1beta1",aI="v1beta",Hf=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class sI{constructor(e){var a,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:nI,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:aI,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),a=new URL(e);return a.protocol=a.protocol=="http:"?"ws":"wss",a.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,a,s){const r=[this.getRequestUrlInternal(a)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let a=this.clientOptions.httpOptions;e.httpOptions&&(a=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,a,s);if(e.queryParams)for(const[u,p]of Object.entries(e.queryParams))r.searchParams.append(u,String(p));let d={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=e.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,a,e.abortSignal),this.unaryApiCall(r,d,e.httpMethod)}patchHttpOptions(e,a){const s=JSON.parse(JSON.stringify(e));for(const[r,d]of Object.entries(a))typeof d=="object"?s[r]=Object.assign(Object.assign({},s[r]),d):d!==void 0&&(s[r]=d);return s}async requestStream(e){let a=this.clientOptions.httpOptions;e.httpOptions&&(a=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,a,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=e.body,d=await this.includeExtraHttpOptionsToRequestInit(d,a,e.abortSignal),this.streamApiCall(r,d,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,a,s){if(a&&a.timeout||s){const r=new AbortController,d=r.signal;if(a.timeout&&(a==null?void 0:a.timeout)>0){const u=setTimeout(()=>r.abort(),a.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=d}return a&&a.extraBody!==null&&iI(e,a.extraBody),e.headers=await this.getHeadersInternal(a),e}async unaryApiCall(e,a,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},a),{method:s})).then(async r=>(await Gf(r),new Yc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,a,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},a),{method:s})).then(async r=>(await Gf(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var a;return Li(this,arguments,function*(){const r=(a=e==null?void 0:e.body)===null||a===void 0?void 0:a.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";for(;;){const{done:p,value:h}=yield Ht(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=d.decode(h,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),k=v.status,j=v.code,S=`got status: ${k}. ${JSON.stringify(y)}`;if(j>=400&&j<600)throw new Cl({message:S,status:j})}}catch(y){if(y.name==="ApiError")throw y}u+=f;let g=u.match(Hf);for(;g;){const y=g[1];try{const v=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ht(new Yc(v)),u=u.slice(g[0].length),g=u.match(Hf)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{r.releaseLock()}})}async apiCall(e,a){return fetch(e,a).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},a=tI+" "+this.clientOptions.userAgentExtra;return e[ZS]=a,e[au]=a,e[QS]="application/json",e}async getHeadersInternal(e){const a=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))a.append(s,r);e.timeout&&e.timeout>0&&a.append(XS,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a),a}async uploadFile(e,a){var s;const r={};a!=null&&(r.mimeType=a.mimeType,r.name=a.name,r.displayName=a.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,u=await d.stat(e);r.sizeBytes=String(u.size);const p=(s=a==null?void 0:a.mimeType)!==null&&s!==void 0?s:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const h=await this.fetchUploadUrl(r,a);return d.upload(e,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,a){var s;let r={};a!=null&&a.httpOptions?r=a.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const d={file:e},u=await this.request({path:tt("upload/v1beta/files",d._url),body:JSON.stringify(d),httpMethod:"POST",httpOptions:r});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Gf(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const a=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw a>=400&&a<600?new Cl({message:r,status:a}):new Error(r)}}function iI(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let a={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))a=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(d,u){const p=Object.assign({},d);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const f=u[h],g=p[h];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?p[h]=s(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),p[h]=f)}return p}const r=s(a,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rI="mcp_used/unknown";let oI=!1;function Ex(n){for(const e of n)if(lI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return oI}function _x(n){var e;const a=(e=n[au])!==null&&e!==void 0?e:"";n[au]=(a+` ${rI}`).trimStart()}function lI(n){return n!==null&&typeof n=="object"&&n instanceof _u}function dI(n,e=100){return Li(this,arguments,function*(){let s,r=0;for(;r<e;){const d=yield Ht(n.listTools({cursor:s}));for(const u of d.tools)yield yield Ht(u),r++;if(!d.nextCursor)break;s=d.nextCursor}})}class _u{constructor(e=[],a){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=a}static create(e,a){return new _u(e,a)}async initialize(){var e,a,s,r;if(this.mcpTools.length>0)return;const d={},u=[];for(const g of this.mcpClients)try{for(var p=!0,h=(a=void 0,Mr(dI(g))),f;f=await h.next(),e=f.done,!e;p=!0){r=f.value,p=!1;const y=r;u.push(y);const v=y.name;if(d[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);d[v]=g}}catch(y){a={error:y}}finally{try{!p&&!e&&(s=h.return)&&await s.call(h)}finally{if(a)throw a.error}}this.mcpTools=u,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),w0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const a=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,d);a.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cI(n,e,a){const s=new g0;let r;a.data instanceof Blob?r=JSON.parse(await a.data.text()):r=JSON.parse(a.data);const d=$w(r);Object.assign(s,d),e(s)}class uI{constructor(e,a,s){this.apiClient=e,this.auth=a,this.webSocketFactory=s}async connect(e){var a,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),u=hI(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${p}`;let f=()=>{};const g=new Promise(R=>{f=R}),y=e.callbacks,v=function(){f({})},k=this.apiClient,j={onopen:v,onmessage:R=>{cI(k,y.onmessage,R)},onerror:(a=y==null?void 0:y.onerror)!==null&&a!==void 0?a:function(R){},onclose:(s=y==null?void 0:y.onclose)!==null&&s!==void 0?s:function(R){}},S=this.webSocketFactory.create(h,pI(u),j);S.connect(),await g;const w=Lt(this.apiClient,e.model),P=bx({model:w}),A=eu({setup:P});return S.send(JSON.stringify(A)),new mI(S,this.apiClient)}}class mI{constructor(e,a){this.conn=e,this.apiClient=a}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const a=Fj(e),s=vx(a);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const a=Uj(e),s=eu(a);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const a=eu({playbackControl:e});this.conn.send(JSON.stringify(a))}play(){this.sendPlaybackControl(Mi.PLAY)}pause(){this.sendPlaybackControl(Mi.PAUSE)}stop(){this.sendPlaybackControl(Mi.STOP)}resetContext(){this.sendPlaybackControl(Mi.RESET_CONTEXT)}close(){this.conn.close()}}function pI(n){const e={};return n.forEach((a,s)=>{e[s]=a}),e}function hI(n){const e=new Headers;for(const[a,s]of Object.entries(n))e.append(a,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function gI(n,e,a){const s=new f0;let r;a.data instanceof Blob?r=await a.data.text():a.data instanceof ArrayBuffer?r=new TextDecoder().decode(a.data):r=a.data;const d=JSON.parse(r);if(n.isVertexAI()){const u=Zw(d);Object.assign(s,u)}else{const u=_w(d);Object.assign(s,u)}e(s)}class xI{constructor(e,a,s){this.apiClient=e,this.auth=a,this.webSocketFactory=s,this.music=new uI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var a,s,r,d,u,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&Ex(e.config.tools)&&_x(y);const v=NI(y);if(this.apiClient.isVertexAI())g=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const ie=this.apiClient.getApiKey();let q="BidiGenerateContent",V="key";ie!=null&&ie.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",V="access_token"),g=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${q}?${V}=${ie}`}let k=()=>{};const j=new Promise(ie=>{k=ie}),S=e.callbacks,w=function(){var ie;(ie=S==null?void 0:S.onopen)===null||ie===void 0||ie.call(S),k({})},P=this.apiClient,A={onopen:w,onmessage:ie=>{gI(P,S.onmessage,ie)},onerror:(a=S==null?void 0:S.onerror)!==null&&a!==void 0?a:function(ie){},onclose:(s=S==null?void 0:S.onclose)!==null&&s!==void 0?s:function(ie){}},R=this.webSocketFactory.create(g,vI(v),A);R.connect(),await j;let O=Lt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const ie=this.apiClient.getProject(),q=this.apiClient.getLocation();O=`projects/${ie}/locations/${q}/`+O}let H={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xl.AUDIO]}:e.config.responseModalities=[xl.AUDIO]),!((d=e.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(p=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&p!==void 0?p:[],U=[];for(const ie of L)if(this.isCallableTool(ie)){const q=ie;U.push(await q.tool())}else U.push(ie);U.length>0&&(e.config.tools=U);const ne={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=pw(this.apiClient,ne):H=Dj(this.apiClient,ne),delete H.config,R.send(JSON.stringify(H)),new bI(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yI={turnComplete:!0};class bI{constructor(e,a){this.conn=e,this.apiClient=a}tLiveClientContent(e,a){if(a.turns!==null&&a.turns!==void 0){let s=[];try{s=ra(a.turns),e.isVertexAI()?s=s.map(r=>Gi(r)):s=s.map(r=>Tl(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof a.turns}'`)}return{clientContent:{turns:s,turnComplete:a.turnComplete}}}return{clientContent:{turnComplete:a.turnComplete}}}tLiveClienttToolResponse(e,a){let s=[];if(a.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(a.functionResponses)?s=a.functionResponses:s=[a.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const d of s){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!e.isVertexAI()&&!("id"in d))throw new Error(fI)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},yI),e);const a=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(a))}sendRealtimeInput(e){let a={};this.apiClient.isVertexAI()?a={realtimeInput:gw(e)}:a={realtimeInput:Lj(e)},this.conn.send(JSON.stringify(a))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const a=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(a))}close(){this.conn.close()}}function vI(n){const e={};return n.forEach((a,s)=>{e[s]=a}),e}function NI(n){const e=new Headers;for(const[a,s]of Object.entries(n))e.append(a,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qf=10;function Jf(n){var e,a,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(a=n==null?void 0:n.tools)!==null&&a!==void 0?a:[])if(Fi(u)){r=!0;break}if(!r)return!0;const d=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function Fi(n){return"callTool"in n&&typeof n.callTool=="function"}function kI(n){var e,a,s;return(s=(a=(e=n.config)===null||e===void 0?void 0:e.tools)===null||a===void 0?void 0:a.some(r=>Fi(r)))!==null&&s!==void 0?s:!1}function jI(n){var e,a,s;return(s=(a=(e=n.config)===null||e===void 0?void 0:e.tools)===null||a===void 0?void 0:a.some(r=>!Fi(r)))!==null&&s!==void 0?s:!1}function Wf(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wI extends zs{constructor(e){super(),this.apiClient=e,this.generateContent=async a=>{var s,r,d,u,p;const h=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!kI(a)||Jf(a.config))return await this.generateContentInternal(h);if(jI(a))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,g;const y=ra(h.contents),v=(d=(r=(s=h.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:qf;let k=0;for(;k<v&&(f=await this.generateContentInternal(h),!(!f.functionCalls||f.functionCalls.length===0));){const j=f.candidates[0].content,S=[];for(const w of(p=(u=a.config)===null||u===void 0?void 0:u.tools)!==null&&p!==void 0?p:[])if(Fi(w)){const A=await w.callTool(f.functionCalls);S.push(...A)}k++,g={role:"user",parts:S},h.contents=ra(h.contents),h.contents.push(j),h.contents.push(g),Wf(h.config)&&(y.push(j),y.push(g))}return Wf(h.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async a=>{if(this.maybeMoveToResponseJsonSchem(a),Jf(a.config)){const s=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(s=>{var r;let d;const u=[];if(s!=null&&s.generatedImages)for(const h of s.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((r=h==null?void 0:h.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=h==null?void 0:h.safetyAttributes:u.push(h);let p;return d?p={generatedImages:u,positivePromptSafetyAttributes:d,sdkHttpResponse:s.sdkHttpResponse}:p={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},p}),this.list=async a=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),a==null?void 0:a.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Wr(Ws.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(u),u)},this.editImage=async a=>{const s={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(s.referenceImages=a.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async a=>{let s={numberOfImages:1,mode:"upscale"};a.config&&(s=Object.assign(Object.assign({},s),a.config));const r={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async a=>{if((a.prompt||a.image||a.video)&&a.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var a,s,r;const d=(a=e.config)===null||a===void 0?void 0:a.tools;if(!d)return e;const u=await Promise.all(d.map(async h=>Fi(h)?await h.tool():h)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(p.config.tools=u,e.config&&e.config.tools&&Ex(e.config.tools)){const h=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),_x(f),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return p}async initAfcToolsMap(e){var a,s,r;const d=new Map;for(const u of(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(Fi(u)){const p=u,h=await p.tool();for(const f of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(d.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);d.set(f.name,p)}}return d}async processAfcStream(e){var a,s,r;const d=(r=(s=(a=e.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:qf;let u=!1,p=0;const h=await this.initAfcToolsMap(e);return(function(f,g,y){var v,k;return Li(this,arguments,function*(){for(var j,S,w,P;p<d;){u&&(p++,u=!1);const H=yield Ht(f.processParamsMaybeAddMcpUsage(y)),L=yield Ht(f.generateContentStreamInternal(H)),U=[],ne=[];try{for(var A=!0,R=(S=void 0,Mr(L)),O;O=yield Ht(R.next()),j=O.done,!j;A=!0){P=O.value,A=!1;const ie=P;if(yield yield Ht(ie),ie.candidates&&(!((v=ie.candidates[0])===null||v===void 0)&&v.content)){ne.push(ie.candidates[0].content);for(const q of(k=ie.candidates[0].content.parts)!==null&&k!==void 0?k:[])if(p<d&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(q.functionCall.name)){const V=yield Ht(g.get(q.functionCall.name).callTool([q.functionCall]));U.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(ie){S={error:ie}}finally{try{!A&&!j&&(w=R.return)&&(yield Ht(w.call(R)))}finally{if(S)throw S.error}}if(U.length>0){u=!0;const ie=new _r;ie.candidates=[{content:{role:"user",parts:U}}],yield yield Ht(ie);const q=[];q.push(...ne),q.push({role:"user",parts:U});const V=ra(y.contents).concat(q);y.contents=V}else break}})})(this,h,e)}async generateContentInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Bf(this.apiClient,e);return p=tt("{model}:generateContent",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Kf(g),v=new _r;return Object.assign(v,y),v})}else{const f=$f(this.apiClient,e);return p=tt("{model}:generateContent",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=Vf(g),v=new _r;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Bf(this.apiClient,e);return p=tt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.requestStream({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(y){return Li(this,arguments,function*(){var v,k,j,S;try{for(var w=!0,P=Mr(y),A;A=yield Ht(P.next()),v=A.done,!v;w=!0){S=A.value,w=!1;const R=S,O=Kf(yield Ht(R.json()));O.sdkHttpResponse={headers:R.headers};const H=new _r;Object.assign(H,O),yield yield Ht(H)}}catch(R){k={error:R}}finally{try{!w&&!v&&(j=P.return)&&(yield Ht(j.call(P)))}finally{if(k)throw k.error}}})})}else{const f=$f(this.apiClient,e);return p=tt("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.requestStream({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}),u.then(function(y){return Li(this,arguments,function*(){var v,k,j,S;try{for(var w=!0,P=Mr(y),A;A=yield Ht(P.next()),v=A.done,!v;w=!0){S=A.value,w=!1;const R=S,O=Vf(yield Ht(R.json()));O.sdkHttpResponse={headers:R.headers};const H=new _r;Object.assign(H,O),yield yield Ht(H)}}catch(R){k={error:R}}finally{try{!w&&!v&&(j=P.return)&&(yield Ht(j.call(P)))}finally{if(k)throw k.error}}})})}}async embedContent(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=fT(this.apiClient,e);return p=tt("{model}:predict",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=PS(g),v=new vf;return Object.assign(v,y),v})}else{const f=TC(this.apiClient,e);return p=tt("{model}:batchEmbedContents",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=oS(g),v=new vf;return Object.assign(v,y),v})}}async generateImagesInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=xT(this.apiClient,e);return p=tt("{model}:predict",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=DS(g),v=new Nf;return Object.assign(v,y),v})}else{const f=IC(this.apiClient,e);return p=tt("{model}:predict",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=cS(g),v=new Nf;return Object.assign(v,y),v})}}async editImageInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=wT(this.apiClient,e);return d=tt("{model}:predict",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const f=MS(h),g=new o0;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=TT(this.apiClient,e);return d=tt("{model}:predict",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const f=RS(h),g=new l0;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=ET(this.apiClient,e);return d=tt("{model}:predict",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const f=LS(h),g=new d0;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=MT(this.apiClient,e);return d=tt("{model}:predict",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const f=OS(h),g=new c0;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=RT(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>nu(g))}else{const f=AC(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>tu(g))}}async listInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=FT(this.apiClient,e);return p=tt("{models_url}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=KS(g),v=new kf;return Object.assign(v,y),v})}else{const f=_C(this.apiClient,e);return p=tt("{models_url}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=mS(g),v=new kf;return Object.assign(v,y),v})}}async update(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=OT(this.apiClient,e);return p=tt("{model}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>nu(g))}else{const f=DC(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>tu(g))}}async delete(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=$T(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=HS(g),v=new jf;return Object.assign(v,y),v})}else{const f=MC(this.apiClient,e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=pS(g),v=new jf;return Object.assign(v,y),v})}}async countTokens(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=VT(this.apiClient,e);return p=tt("{model}:countTokens",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=GS(g),v=new wf;return Object.assign(v,y),v})}else{const f=LC(this.apiClient,e);return p=tt("{model}:countTokens",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=hS(g),v=new wf;return Object.assign(v,y),v})}}async computeTokens(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=KT(this.apiClient,e);return d=tt("{model}:computeTokens",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const f=qS(h),g=new u0;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=WT(this.apiClient,e);return p=tt("{model}:predictLongRunning",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u.then(g=>{const y=YS(g),v=new yl;return Object.assign(v,y),v})}else{const f=OC(this.apiClient,e);return p=tt("{model}:predictLongRunning",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u.then(g=>{const y=yS(g),v=new yl;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CI extends zs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const a=e.operation,s=e.config;if(a.name===void 0||a.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=a.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:a.name,resourceName:r,config:{httpOptions:d}});return a._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:a.name,config:s});return a._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const a=e.operation,s=e.config;if(a.name===void 0||a.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=a.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:a.name,resourceName:r,config:{httpOptions:d}});return a._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:a.name,config:s});return a._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=Xv(e);return p=tt("{operationName}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),u}else{const f=Yv(e);return p=tt("{operationName}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json()),u}}async fetchPredictVideosOperationInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=Qv(e);return d=tt("{resourceName}:fetchPredictOperation",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TI(n){const e={},a=l(n,["voiceName"]);return a!=null&&c(e,["voiceName"],a),e}function Px(n){const e={},a=l(n,["prebuiltVoiceConfig"]);return a!=null&&c(e,["prebuiltVoiceConfig"],TI(a)),e}function SI(n){const e={},a=l(n,["speaker"]);a!=null&&c(e,["speaker"],a);const s=l(n,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],Px(s)),e}function II(n){const e={},a=l(n,["speakerVoiceConfigs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>SI(r))),c(e,["speakerVoiceConfigs"],s)}return e}function AI(n){const e={},a=l(n,["voiceConfig"]);a!=null&&c(e,["voiceConfig"],Px(a));const s=l(n,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],II(s));const r=l(n,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function EI(n){const e={},a=l(n,["fps"]);a!=null&&c(e,["fps"],a);const s=l(n,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=l(n,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function _I(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["data"]);a!=null&&c(e,["data"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function PI(n){const e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=l(n,["fileUri"]);a!=null&&c(e,["fileUri"],a);const s=l(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function DI(n){const e={},a=l(n,["id"]);a!=null&&c(e,["id"],a);const s=l(n,["args"]);s!=null&&c(e,["args"],s);const r=l(n,["name"]);return r!=null&&c(e,["name"],r),e}function MI(n){const e={},a=l(n,["videoMetadata"]);a!=null&&c(e,["videoMetadata"],EI(a));const s=l(n,["thought"]);s!=null&&c(e,["thought"],s);const r=l(n,["inlineData"]);r!=null&&c(e,["inlineData"],_I(r));const d=l(n,["fileData"]);d!=null&&c(e,["fileData"],PI(d));const u=l(n,["thoughtSignature"]);u!=null&&c(e,["thoughtSignature"],u);const p=l(n,["functionCall"]);p!=null&&c(e,["functionCall"],DI(p));const h=l(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const f=l(n,["executableCode"]);f!=null&&c(e,["executableCode"],f);const g=l(n,["functionResponse"]);g!=null&&c(e,["functionResponse"],g);const y=l(n,["text"]);return y!=null&&c(e,["text"],y),e}function RI(n){const e={},a=l(n,["parts"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>MI(d))),c(e,["parts"],r)}const s=l(n,["role"]);return s!=null&&c(e,["role"],s),e}function LI(n){const e={},a=l(n,["behavior"]);a!=null&&c(e,["behavior"],a);const s=l(n,["description"]);s!=null&&c(e,["description"],s);const r=l(n,["name"]);r!=null&&c(e,["name"],r);const d=l(n,["parameters"]);d!=null&&c(e,["parameters"],d);const u=l(n,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const p=l(n,["response"]);p!=null&&c(e,["response"],p);const h=l(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function FI(n){const e={},a=l(n,["startTime"]);a!=null&&c(e,["startTime"],a);const s=l(n,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function UI(n){const e={},a=l(n,["timeRangeFilter"]);if(a!=null&&c(e,["timeRangeFilter"],FI(a)),l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function OI(n){const e={},a=l(n,["mode"]);a!=null&&c(e,["mode"],a);const s=l(n,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function $I(n){const e={},a=l(n,["dynamicRetrievalConfig"]);return a!=null&&c(e,["dynamicRetrievalConfig"],OI(a)),e}function BI(){return{}}function VI(n){const e={},a=l(n,["environment"]);return a!=null&&c(e,["environment"],a),e}function KI(n){const e={},a=l(n,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(f=>LI(f))),c(e,["functionDeclarations"],h)}if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=l(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],UI(s));const r=l(n,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],$I(r)),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(n,["urlContext"])!=null&&c(e,["urlContext"],BI());const u=l(n,["computerUse"]);u!=null&&c(e,["computerUse"],VI(u));const p=l(n,["codeExecution"]);return p!=null&&c(e,["codeExecution"],p),e}function HI(n){const e={},a=l(n,["handle"]);if(a!=null&&c(e,["handle"],a),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zf(){return{}}function GI(n){const e={},a=l(n,["disabled"]);a!=null&&c(e,["disabled"],a);const s=l(n,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=l(n,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const d=l(n,["prefixPaddingMs"]);d!=null&&c(e,["prefixPaddingMs"],d);const u=l(n,["silenceDurationMs"]);return u!=null&&c(e,["silenceDurationMs"],u),e}function qI(n){const e={},a=l(n,["automaticActivityDetection"]);a!=null&&c(e,["automaticActivityDetection"],GI(a));const s=l(n,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=l(n,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function JI(n){const e={},a=l(n,["targetTokens"]);return a!=null&&c(e,["targetTokens"],a),e}function WI(n){const e={},a=l(n,["triggerTokens"]);a!=null&&c(e,["triggerTokens"],a);const s=l(n,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],JI(s)),e}function zI(n){const e={},a=l(n,["proactiveAudio"]);return a!=null&&c(e,["proactiveAudio"],a),e}function YI(n,e){const a={},s=l(n,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=l(n,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const d=l(n,["temperature"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","temperature"],d);const u=l(n,["topP"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","topP"],u);const p=l(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const h=l(n,["maxOutputTokens"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","maxOutputTokens"],h);const f=l(n,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const g=l(n,["seed"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","seed"],g);const y=l(n,["speechConfig"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","speechConfig"],AI(Au(y)));const v=l(n,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=l(n,["systemInstruction"]);e!==void 0&&k!=null&&c(e,["setup","systemInstruction"],RI(En(k)));const j=l(n,["tools"]);if(e!==void 0&&j!=null){let H=Ki(j);Array.isArray(H)&&(H=H.map(L=>KI(Vi(L)))),c(e,["setup","tools"],H)}const S=l(n,["sessionResumption"]);e!==void 0&&S!=null&&c(e,["setup","sessionResumption"],HI(S));const w=l(n,["inputAudioTranscription"]);e!==void 0&&w!=null&&c(e,["setup","inputAudioTranscription"],zf());const P=l(n,["outputAudioTranscription"]);e!==void 0&&P!=null&&c(e,["setup","outputAudioTranscription"],zf());const A=l(n,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],qI(A));const R=l(n,["contextWindowCompression"]);e!==void 0&&R!=null&&c(e,["setup","contextWindowCompression"],WI(R));const O=l(n,["proactivity"]);return e!==void 0&&O!=null&&c(e,["setup","proactivity"],zI(O)),a}function QI(n,e){const a={},s=l(e,["model"]);s!=null&&c(a,["setup","model"],Lt(n,s));const r=l(e,["config"]);return r!=null&&c(a,["config"],YI(r,a)),a}function XI(n,e,a){const s={},r=l(e,["expireTime"]);a!==void 0&&r!=null&&c(a,["expireTime"],r);const d=l(e,["newSessionExpireTime"]);a!==void 0&&d!=null&&c(a,["newSessionExpireTime"],d);const u=l(e,["uses"]);a!==void 0&&u!=null&&c(a,["uses"],u);const p=l(e,["liveConnectConstraints"]);a!==void 0&&p!=null&&c(a,["bidiGenerateContentSetup"],QI(n,p));const h=l(e,["lockAdditionalFields"]);return a!==void 0&&h!=null&&c(a,["fieldMask"],h),s}function ZI(n,e){const a={},s=l(e,["config"]);return s!=null&&c(a,["config"],XI(n,s,a)),a}function e2(n){const e={},a=l(n,["name"]);return a!=null&&c(e,["name"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t2(n){const e=[];for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)){const s=n[a];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(d=>`${a}.${d}`);e.push(...r)}else e.push(a)}return e.join(",")}function n2(n,e){let a=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const d=s.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,a=d):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(a){const d=t2(a);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)d?n.fieldMask=d:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(f=>u.includes(f)?`generationConfig.${f}`:f));const h=[];d&&h.push(d),p.length>0&&h.push(...p),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class a2 extends zs{constructor(e){super(),this.apiClient=e}async create(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=ZI(this.apiClient,e);d=tt("auth_tokens",p._url),u=p._query,delete p.config,delete p._url,delete p._query;const h=n2(p,e.config);return r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>e2(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s2(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","name"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function i2(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const d=l(n,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),a}function r2(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],i2(a,e)),e}function o2(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","name"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function l2(n){const e={},a=l(n,["textInput"]);a!=null&&c(e,["textInput"],a);const s=l(n,["output"]);return s!=null&&c(e,["output"],s),e}function d2(n){const e={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=l(n,["examples"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(r=>l2(r))),c(e,["examples","examples"],s)}return e}function c2(n,e){const a={};if(l(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=l(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),l(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=l(n,["epochCount"]);e!==void 0&&r!=null&&c(e,["tuningTask","hyperparameters","epochCount"],r);const d=l(n,["learningRateMultiplier"]);if(d!=null&&c(a,["tuningTask","hyperparameters","learningRateMultiplier"],d),l(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(n,["batchSize"]);e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","batchSize"],u);const p=l(n,["learningRate"]);if(e!==void 0&&p!=null&&c(e,["tuningTask","hyperparameters","learningRate"],p),l(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return a}function u2(n){const e={},a=l(n,["baseModel"]);a!=null&&c(e,["baseModel"],a);const s=l(n,["preTunedModel"]);s!=null&&c(e,["preTunedModel"],s);const r=l(n,["trainingDataset"]);r!=null&&c(e,["tuningTask","trainingData"],d2(r));const d=l(n,["config"]);return d!=null&&c(e,["config"],c2(d,e)),e}function m2(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","name"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function p2(n,e){const a={},s=l(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=l(n,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const d=l(n,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),a}function h2(n){const e={},a=l(n,["config"]);return a!=null&&c(e,["config"],p2(a,e)),e}function f2(n){const e={},a=l(n,["name"]);a!=null&&c(e,["_url","name"],a);const s=l(n,["config"]);return s!=null&&c(e,["config"],s),e}function g2(n,e){const a={},s=l(n,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=l(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),l(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function x2(n,e){const a={},s=l(n,["gcsUri"]);s!=null&&c(a,["validationDatasetUri"],s);const r=l(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),a}function y2(n,e){const a={},s=l(n,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],x2(s,a));const r=l(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&c(e,["tunedModelDisplayName"],r);const d=l(n,["description"]);e!==void 0&&d!=null&&c(e,["description"],d);const u=l(n,["epochCount"]);e!==void 0&&u!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const p=l(n,["learningRateMultiplier"]);e!==void 0&&p!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const h=l(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const f=l(n,["preTunedModelCheckpointId"]);f!=null&&c(a,["preTunedModel","checkpointId"],f);const g=l(n,["adapterSize"]);if(e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g),l(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=l(n,["labels"]);return e!==void 0&&y!=null&&c(e,["labels"],y),a}function b2(n){const e={},a=l(n,["baseModel"]);a!=null&&c(e,["baseModel"],a);const s=l(n,["preTunedModel"]);s!=null&&c(e,["preTunedModel"],s);const r=l(n,["trainingDataset"]);r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],g2(r,e));const d=l(n,["config"]);return d!=null&&c(e,["config"],y2(d,e)),e}function v2(n){const e={},a=l(n,["name"]);a!=null&&c(e,["model"],a);const s=l(n,["name"]);return s!=null&&c(e,["endpoint"],s),e}function Dx(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["state"]);r!=null&&c(e,["state"],ix(r));const d=l(n,["createTime"]);d!=null&&c(e,["createTime"],d);const u=l(n,["tuningTask","startTime"]);u!=null&&c(e,["startTime"],u);const p=l(n,["tuningTask","completeTime"]);p!=null&&c(e,["endTime"],p);const h=l(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const f=l(n,["description"]);f!=null&&c(e,["description"],f);const g=l(n,["baseModel"]);g!=null&&c(e,["baseModel"],g);const y=l(n,["_self"]);y!=null&&c(e,["tunedModel"],v2(y));const v=l(n,["customBaseModel"]);v!=null&&c(e,["customBaseModel"],v);const k=l(n,["experiment"]);k!=null&&c(e,["experiment"],k);const j=l(n,["labels"]);j!=null&&c(e,["labels"],j);const S=l(n,["outputUri"]);S!=null&&c(e,["outputUri"],S);const w=l(n,["pipelineJob"]);w!=null&&c(e,["pipelineJob"],w);const P=l(n,["serviceAccount"]);P!=null&&c(e,["serviceAccount"],P);const A=l(n,["tunedModelDisplayName"]);return A!=null&&c(e,["tunedModelDisplayName"],A),e}function N2(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["tunedModels"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>Dx(u))),c(e,["tuningJobs"],d)}return e}function k2(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["metadata"]);r!=null&&c(e,["metadata"],r);const d=l(n,["done"]);d!=null&&c(e,["done"],d);const u=l(n,["error"]);return u!=null&&c(e,["error"],u),e}function j2(n){const e={},a=l(n,["checkpointId"]);a!=null&&c(e,["checkpointId"],a);const s=l(n,["epoch"]);s!=null&&c(e,["epoch"],s);const r=l(n,["step"]);r!=null&&c(e,["step"],r);const d=l(n,["endpoint"]);return d!=null&&c(e,["endpoint"],d),e}function w2(n){const e={},a=l(n,["model"]);a!=null&&c(e,["model"],a);const s=l(n,["endpoint"]);s!=null&&c(e,["endpoint"],s);const r=l(n,["checkpoints"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>j2(u))),c(e,["checkpoints"],d)}return e}function su(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["name"]);s!=null&&c(e,["name"],s);const r=l(n,["state"]);r!=null&&c(e,["state"],ix(r));const d=l(n,["createTime"]);d!=null&&c(e,["createTime"],d);const u=l(n,["startTime"]);u!=null&&c(e,["startTime"],u);const p=l(n,["endTime"]);p!=null&&c(e,["endTime"],p);const h=l(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const f=l(n,["error"]);f!=null&&c(e,["error"],f);const g=l(n,["description"]);g!=null&&c(e,["description"],g);const y=l(n,["baseModel"]);y!=null&&c(e,["baseModel"],y);const v=l(n,["tunedModel"]);v!=null&&c(e,["tunedModel"],w2(v));const k=l(n,["preTunedModel"]);k!=null&&c(e,["preTunedModel"],k);const j=l(n,["supervisedTuningSpec"]);j!=null&&c(e,["supervisedTuningSpec"],j);const S=l(n,["tuningDataStats"]);S!=null&&c(e,["tuningDataStats"],S);const w=l(n,["encryptionSpec"]);w!=null&&c(e,["encryptionSpec"],w);const P=l(n,["partnerModelTuningSpec"]);P!=null&&c(e,["partnerModelTuningSpec"],P);const A=l(n,["customBaseModel"]);A!=null&&c(e,["customBaseModel"],A);const R=l(n,["experiment"]);R!=null&&c(e,["experiment"],R);const O=l(n,["labels"]);O!=null&&c(e,["labels"],O);const H=l(n,["outputUri"]);H!=null&&c(e,["outputUri"],H);const L=l(n,["pipelineJob"]);L!=null&&c(e,["pipelineJob"],L);const U=l(n,["serviceAccount"]);U!=null&&c(e,["serviceAccount"],U);const ne=l(n,["tunedModelDisplayName"]);return ne!=null&&c(e,["tunedModelDisplayName"],ne),e}function C2(n){const e={},a=l(n,["sdkHttpResponse"]);a!=null&&c(e,["sdkHttpResponse"],a);const s=l(n,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=l(n,["tuningJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>su(u))),c(e,["tuningJobs"],d)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends zs{constructor(e){super(),this.apiClient=e,this.get=async a=>await this.getInternal(a),this.list=async(a={})=>new Wr(Ws.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(a),a),this.tune=async a=>{if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){const s={tunedModelName:a.baseModel},r=Object.assign(Object.assign({},a),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},a);return await this.tuneInternal(s)}else{const s=Object.assign({},a),r=await this.tuneMldevInternal(s);let d="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?d=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(d=r.name.split("/operations/")[0]),{name:d,state:zc.JOB_STATE_QUEUED}}}}async getInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=m2(e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>su(g))}else{const f=s2(e);return p=tt("{name}",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>Dx(g))}}async listInternal(e){var a,s,r,d;let u,p="",h={};if(this.apiClient.isVertexAI()){const f=h2(e);return p=tt("tuningJobs",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=C2(g),v=new Cf;return Object.assign(v,y),v})}else{const f=r2(e);return p=tt("tunedModels",f._url),h=f._query,delete f.config,delete f._url,delete f._query,u=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(g=>g.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const y=N2(g),v=new Cf;return Object.assign(v,y),v})}}async cancel(e){var a,s,r,d;let u="",p={};if(this.apiClient.isVertexAI()){const h=f2(e);u=tt("{name}:cancel",h._url),p=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=o2(e);u=tt("{name}:cancel",h._url),p=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal})}}async tuneInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI()){const p=b2(e);return d=tt("tuningJobs",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>su(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var a,s;let r,d="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=u2(e);return d=tt("tunedModels",p._url),u=p._query,delete p.config,delete p._url,delete p._query,r=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>k2(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2{async download(e,a){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const I2=1024*1024*8,A2=3,E2=1e3,_2=2,kc="x-goog-upload-status";async function P2(n,e,a){var s,r,d;let u=0,p=0,h=new Yc(new Response),f="upload";for(u=n.size;p<u;){const y=Math.min(I2,u-p),v=n.slice(p,p+y);p+y>=u&&(f+=", finalize");let k=0,j=E2;for(;k<A2&&(h=await a.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(p),"Content-Length":String(y)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[kc]));)k++,await M2(j),j=j*_2;if(p+=y,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[kc])!=="active")break;if(u<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=await(h==null?void 0:h.json());if(((d=h==null?void 0:h.headers)===null||d===void 0?void 0:d[kc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file}async function D2(n){return{size:n.size,type:n.type}}function M2(n){return new Promise(e=>setTimeout(e,n))}class R2{async upload(e,a,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await P2(e,a,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await D2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L2{create(e,a,s){return new F2(e,a,s)}}class F2{constructor(e,a,s){this.url=e,this.headers=a,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yf="x-goog-api-key";class U2{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Yf)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Yf,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O2="gl-node/";class Mx{constructor(e){var a;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(a=e.vertexai)!==null&&a!==void 0?a:!1,this.apiKey=e.apiKey;const s=zv(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new U2(this.apiKey);this.apiClient=new sI({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:O2+"web",uploader:new R2,downloader:new S2}),this.models=new wI(this.apiClient),this.live=new xI(this.apiClient,r,new L2),this.batches=new $N(this.apiClient),this.chats=new Wk(this.models,this.apiClient),this.caches=new Gk(this.apiClient),this.files=new oj(this.apiClient),this.operations=new CI(this.apiClient),this.authTokens=new a2(this.apiClient),this.tunings=new T2(this.apiClient)}}const aa=(n,e=0)=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:e}).format(n),$2=({currentUser:n})=>t.jsxs("div",{className:"col-span-1 xl:col-span-12 mb-2",children:[t.jsxs("h2",{className:"text-3xl font-bold text-brand-text-light",children:["Selamat Datang Kembali, ",n==null?void 0:n.fullName.split(" ")[0],"!"]}),t.jsx("p",{className:"text-brand-text-secondary mt-1",children:"Berikut adalah ringkasan bisnis Anda hari ini."})]}),B2=({handleNavigation:n,unpaidTeamPayments:e,contractsAwaitingSignature:a,newLeads:s})=>{const r=[{count:e.length,label:"Pembayaran tim belum lunas",icon:t.jsx(Kr,{className:"w-5 h-5 text-red-400"}),action:()=>n(Te.TEAM)},{count:a.length,label:"Kontrak menunggu TTD Anda",icon:t.jsx(oa,{className:"w-5 h-5 text-yellow-400"}),action:()=>n(Te.CONTRACTS)},{count:s.length,label:"Prospek baru minggu ini",icon:t.jsx(qs,{className:"w-5 h-5 text-blue-400"}),action:()=>n(Te.PROSPEK)}].filter(d=>d.count>0);return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-4",children:"Pusat Aksi & Tugas"}),r.length>0?t.jsx("div",{className:"space-y-3",children:r.map(d=>t.jsxs("button",{onClick:d.action,className:"w-full flex items-center justify-between p-3 bg-brand-bg rounded-lg hover:bg-brand-input transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[d.icon,t.jsx("span",{className:"font-semibold text-sm text-brand-text-light",children:d.label})]}),t.jsx("span",{className:"font-bold text-sm text-brand-text-light bg-brand-surface px-2.5 py-1 rounded-full",children:d.count})]},d.label))}):t.jsx("p",{className:"text-sm text-brand-text-secondary text-center py-8",children:"Tidak ada tugas mendesak. Kerja bagus!"})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-brand-border",children:[t.jsx("button",{onClick:()=>n(Te.PROJECTS),className:"button-secondary text-sm w-full",children:"Tambah Proyek"}),t.jsx("button",{onClick:()=>n(Te.FINANCE),className:"button-secondary text-sm w-full",children:"Tambah Transaksi"})]})]})},V2=({summary:n,unpaidTeamPayments:e,projects:a,packages:s})=>{const[r,d]=C.useState("Klik tombol untuk mendapatkan insight bisnis dari data Anda."),[u,p]=C.useState(!1),h=async()=>{p(!0),d("Menganalisis data Anda...");try{const f=new Mx({apiKey:"AIzaSyABhVXFTXJu0Y1bPHETLTxv_GSa_OuW064"}),g=(()=>{const k=a.reduce((j,S)=>(j[S.packageName]=(j[S.packageName]||0)+1,j),{});return Object.keys(k).sort((j,S)=>k[S]-k[j])[0]||"N/A"})(),y=`
            Anda adalah seorang analis bisnis ahli untuk vendor fotografi. Berdasarkan ringkasan data berikut, berikan satu insight atau saran bisnis yang singkat (maksimal 2 kalimat), tajam, dan dapat ditindaklanjuti dalam bahasa Indonesia. Fokus pada area yang paling butuh perhatian atau peluang terbesar.

            Ringkasan Data:
            - Total Saldo Saat Ini: ${aa(n.totalBalance)}
            - Proyek Aktif: ${n.activeProjects}
            - Klien Aktif: ${n.activeClients}
            - Pemasukan Bulan Ini: ${aa(n.totalIncomeThisMonth)}
            - Pengeluaran Bulan Ini: ${aa(n.totalExpenseThisMonth)}
            - Pembayaran Tim Belum Lunas: ${e.length} pembayaran dengan total ${aa(e.reduce((k,j)=>k+j.fee,0))}
            - Paket Terpopuler: ${g}

            Contoh output yang diinginkan: "Pemasukan bulan ini bagus, tapi ada ${e.length} pembayaran tim yang tertunda. Prioritaskan pelunasan ini untuk menjaga semangat tim."

            Berikan hanya teks saran Anda, tanpa pengantar atau penutup.
            `,v=await f.models.generateContent({model:"gemini-2.5-flash",contents:y});d(v.text)}catch(f){console.error("Error generating insight:",f),d("Gagal mendapatkan insight. Coba beberapa saat lagi.")}finally{p(!1)}};return t.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-blue-600 p-6 rounded-2xl shadow-lg h-full flex flex-col text-white",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(Wg,{className:"w-6 h-6"}),t.jsx("h3",{className:"font-bold text-lg",children:"Insight Cerdas"})]}),t.jsx("p",{className:"text-base font-medium flex-grow",children:r}),t.jsx("button",{onClick:h,disabled:u,className:"w-full mt-4 bg-white/20 hover:bg-white/30 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors disabled:opacity-50",children:u?"Menganalisis...":"Dapatkan Insight Baru"})]})},K2=({transactions:n})=>{const[e,a]=C.useState("monthly"),s=C.useMemo(()=>{if(e==="yearly"){const u={};return n.forEach(p=>{if(p.type===$e.INCOME){const h=new Date(p.date).getFullYear().toString();u[h]||(u[h]=0),u[h]+=p.amount}}),Object.entries(u).sort(([p],[h])=>parseInt(p)-parseInt(h)).map(([p,h])=>({name:p,value:h}))}else{const u=new Date().getFullYear(),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(f=>({name:f,value:0}));return n.forEach(f=>{const g=new Date(f.date);if(f.type===$e.INCOME&&g.getFullYear()===u){const y=g.getMonth();h[y].value+=f.amount}}),h}},[n,e]),r=Math.max(...s.map(u=>u.value),1),d=e==="monthly"?new Date().toLocaleString("default",{month:"short"}):new Date().getFullYear().toString();return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg h-full border border-brand-border",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient",children:"Grafik Pemasukan"}),t.jsxs("div",{className:"p-1 bg-brand-bg rounded-lg flex items-center h-fit",children:[t.jsx("button",{onClick:()=>a("monthly"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${e==="monthly"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:"Bulanan"}),t.jsx("button",{onClick:()=>a("yearly"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${e==="yearly"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:"Tahunan"})]})]}),t.jsx("div",{className:"h-48 flex justify-between items-end gap-2",children:s.length>0&&s.some(u=>u.value>0)?s.map(u=>{const p=Math.max(u.value/r*100,2),h=u.name===d;return t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full group relative",children:[t.jsx("div",{className:"absolute -top-8 text-xs bg-brand-accent text-white font-bold py-1 px-2 rounded-md mb-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:aa(u.value,0)}),t.jsx("div",{className:`${h?"bg-brand-accent":"bg-brand-text-primary/20"} w-full rounded-md transition-colors hover:bg-brand-accent/80`,style:{height:`${p}%`}}),t.jsx("span",{className:"text-xs text-brand-text-secondary mt-2",children:u.name})]},u.name)}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("p",{className:"text-brand-text-secondary",children:"Tidak ada data pemasukan untuk periode ini."})})})]})},H2=({transactions:n})=>t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient",children:"Transaksi Terbaru"}),t.jsx("button",{className:"text-brand-text-secondary hover:text-brand-text-light",children:t.jsx(Hr,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"space-y-4",children:n.slice(0,5).map(e=>t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-bg flex-shrink-0 flex items-center justify-center",children:t.jsx(on,{className:`w-5 h-5 ${e.type===$e.INCOME?"text-brand-success":"text-brand-danger"}`})}),t.jsxs("div",{className:"flex-grow overflow-hidden",children:[t.jsx("p",{className:"font-medium text-brand-text-light truncate text-sm",children:e.description}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:new Date(e.date).toLocaleDateString("en-US",{day:"numeric",month:"long"})})]}),t.jsxs("div",{className:`font-semibold text-sm ${e.type===$e.INCOME?"text-brand-success":"text-brand-text-light"}`,children:[e.type===$e.INCOME?"+":"-",aa(e.amount,0)]})]},e.id))})]}),G2=({card:n})=>{const a=n.colorGradient.includes("slate-100")?"text-slate-800":"text-white";return t.jsxs("div",{className:`p-4 rounded-xl ${a} shadow-md flex flex-col justify-between h-40 w-64 flex-shrink-0 bg-gradient-to-br ${n.colorGradient} transform transition-transform hover:scale-105 hover:-translate-y-1`,children:[t.jsx("div",{children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"font-bold text-sm",children:n.bankName}),t.jsx("p",{className:"text-xs",children:n.cardType})]})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xl font-mono tracking-wider",children:["**** ",n.lastFourDigits]}),t.jsx("p",{className:"text-2xl font-bold tracking-tight",children:aa(n.balance)})]})]})},q2=({cards:n,handleNavigation:e})=>t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-gradient flex items-center gap-2",children:[t.jsx(qa,{className:"w-5 h-5"})," Kartu Saya"]}),t.jsx("button",{onClick:()=>e(Te.FINANCE),className:"text-sm font-semibold text-brand-accent hover:underline",children:"Kelola Kartu "})]}),t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2 -m-2 p-2",children:[n.map(a=>t.jsx(G2,{card:a},a.id)),n.length===0&&t.jsx("p",{className:"text-sm text-center w-full py-12 text-brand-text-secondary",children:"Belum ada kartu. Tambahkan di halaman Keuangan."})]})]}),J2=({projects:n,handleNavigation:e})=>{const a=C.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),n.filter(r=>new Date(r.date)>=s).sort((r,d)=>new Date(r.date).getTime()-new Date(d.date).getTime()).slice(0,5)},[n]);return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-gradient flex items-center gap-2",children:[t.jsx(Gs,{className:"w-5 h-5"}),"Kalender Mendatang"]}),t.jsx("button",{onClick:()=>e(Te.CALENDAR),className:"text-sm font-semibold text-brand-accent hover:underline",children:"Lihat Semua "})]}),t.jsxs("div",{className:"space-y-3",children:[a.map(s=>t.jsxs("div",{className:"flex items-center gap-4 p-2 rounded-lg hover:bg-brand-bg cursor-pointer",onClick:()=>e(Te.PROJECTS,{type:"VIEW_PROJECT_DETAILS",id:s.id}),children:[t.jsxs("div",{className:"w-11 h-11 rounded-lg bg-brand-bg flex-shrink-0 flex flex-col items-center justify-center",children:[t.jsx("p",{className:"text-xs font-bold text-brand-text-secondary -mb-1",children:new Date(s.date).toLocaleString("default",{month:"short"})}),t.jsx("p",{className:"text-xl font-extrabold text-brand-text-light",children:new Date(s.date).getDate()})]}),t.jsxs("div",{className:"flex-grow overflow-hidden",children:[t.jsx("p",{className:"font-medium text-brand-text-light truncate text-sm",children:s.projectName}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:s.projectType})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("p",{className:"text-xs text-brand-text-secondary",children:s.location}),t.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 mt-1 inline-block",children:s.status})]})]},s.id)),a.length===0&&t.jsx("p",{className:"text-center text-sm text-brand-text-secondary py-8",children:"Tidak ada acara mendatang."})]})]})},W2=({projects:n,projectStatusConfig:e,handleNavigation:a})=>{const s=e.map(u=>u.name).filter(u=>u!=="Selesai"&&u!=="Dibatalkan"),r=C.useMemo(()=>s.map(u=>{const p=n.filter(f=>f.status===u).length,h=e.find(f=>f.name===u);return{name:u,count:p,color:h?h.color:"#64748b"}}),[n,s,e]),d=r.reduce((u,p)=>u+p.count,0);return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full flex flex-col",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-4",children:"Status Proyek Aktif"}),t.jsx("div",{className:"flex-grow flex flex-col justify-center",children:d>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full flex rounded-full h-4 overflow-hidden mb-4 bg-brand-bg",children:r.filter(u=>u.count>0).map(u=>t.jsx("div",{className:"h-full",style:{width:`${u.count/d*100}%`,backgroundColor:u.color},title:`${u.name}: ${u.count}`},u.name))}),t.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:r.map(u=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:u.color}}),t.jsx("span",{className:"text-brand-text-secondary",children:u.name})]}),t.jsx("span",{className:"font-semibold text-brand-text-light",children:u.count})]},u.name))})]}):t.jsx("p",{className:"text-center text-sm text-brand-text-secondary py-8",children:"Tidak ada proyek aktif."})}),t.jsx("button",{onClick:()=>a(Te.PROJECTS),className:"mt-4 text-sm font-semibold text-brand-accent hover:underline self-start",children:"Kelola Proyek "})]})},z2=({leads:n,handleNavigation:e})=>{const a=n.filter(u=>new Date(u.date).getMonth()===new Date().getMonth()&&new Date(u.date).getFullYear()===new Date().getFullYear()).length,s=n.filter(u=>u.status===Tt.CONVERTED).length,r=n.length>0?s/n.length*100:0,d=({icon:u,title:p,value:h})=>t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-bg flex items-center justify-center text-brand-accent",children:u}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary",children:p}),t.jsx("p",{className:"font-bold text-lg text-brand-text-light",children:h})]})]});return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full flex flex-col justify-between",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-4",children:"Ringkasan Prospek"}),t.jsxs("div",{className:"space-y-4 flex-grow",children:[t.jsx(d,{icon:t.jsx(Gr,{className:"w-5 h-5"}),title:"Prospek Baru Bulan Ini",value:a.toString()}),t.jsx(d,{icon:t.jsx(qs,{className:"w-5 h-5"}),title:"Tingkat Konversi",value:`${r.toFixed(1)}%`})]}),t.jsx("button",{onClick:()=>e(Te.PROSPEK),className:"mt-4 text-sm font-semibold text-brand-accent hover:underline self-start",children:"Kelola Prospek "})]})},Y2=({projects:n,clients:e,transactions:a,teamMembers:s,cards:r,pockets:d,handleNavigation:u,leads:p,teamProjectPayments:h,packages:f,assets:g,clientFeedback:y,contracts:v,currentUser:k,projectStatusConfig:j})=>{const[S,w]=C.useState(null),P=U=>{var ne;return(ne=U.activeSubStatuses)!=null&&ne.length?`${U.status}: ${U.activeSubStatuses.join(", ")}`:U.status==="Dikirim"&&U.shippingDetails?`Dikirim: ${U.shippingDetails}`:U.status},A=C.useMemo(()=>{const U=new Date,ne=new Date(U.getFullYear(),U.getMonth(),1),ie=a.filter(q=>new Date(q.date)>=ne);return{totalBalance:r.reduce((q,V)=>q+V.balance,0),activeProjects:n.filter(q=>q.status!=="Selesai"&&q.status!=="Dibatalkan").length,activeClients:e.filter(q=>q.status===Ot.ACTIVE).length,totalFreelancers:s.length,totalIncomeThisMonth:ie.filter(q=>q.type===$e.INCOME).reduce((q,V)=>q+V.amount,0),totalExpenseThisMonth:ie.filter(q=>q.type===$e.EXPENSE).reduce((q,V)=>q+V.amount,0)}},[r,n,e,s,a]),R=C.useMemo(()=>h.filter(U=>U.status==="Unpaid"),[h]),O=C.useMemo(()=>v.filter(U=>!U.vendorSignature),[v]),H=C.useMemo(()=>{const U=new Date;return U.setDate(U.getDate()-7),p.filter(ne=>new Date(ne.date)>=U)},[p]),L={balance:"Rincian Saldo",projects:"Daftar Proyek Aktif",clients:"Daftar Klien Aktif",freelancers:"Daftar Semua Freelancer",payments:"Rincian Sisa Pembayaran Tim",contracts:"Daftar Semua Kontrak"};return t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-6",children:[t.jsx($2,{currentUser:k}),t.jsxs("div",{className:"col-span-1 xl:col-span-12 grid grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"100ms"},onClick:()=>w("balance"),children:t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400",title:"Total Saldo",value:aa(A.totalBalance)})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"200ms"},onClick:()=>w("projects"),children:t.jsx(qe,{icon:t.jsx(ka,{className:"w-6 h-6"}),iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400",title:"Proyek Aktif",value:A.activeProjects.toString()})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"300ms"},onClick:()=>w("clients"),children:t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),iconBgColor:"bg-brand-success/20",iconColor:"text-brand-success",title:"Klien Aktif",value:A.activeClients.toString()})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"400ms"},onClick:()=>w("freelancers"),children:t.jsx(qe,{icon:t.jsx(Kr,{className:"w-6 h-6"}),iconBgColor:"bg-orange-500/20",iconColor:"text-orange-400",title:"Total Freelancer",value:A.totalFreelancers.toString()})})]}),t.jsx("div",{className:"col-span-1 xl:col-span-7 widget-animate",style:{animationDelay:"500ms"},children:t.jsx(B2,{handleNavigation:u,unpaidTeamPayments:R,contractsAwaitingSignature:O,newLeads:H})}),t.jsx("div",{className:"col-span-1 xl:col-span-5 widget-animate",style:{animationDelay:"600ms"},children:t.jsx(V2,{summary:A,unpaidTeamPayments:R,projects:n,packages:f})}),t.jsx("div",{className:"col-span-1 xl:col-span-8 widget-animate",style:{animationDelay:"700ms"},children:t.jsx(K2,{transactions:a})}),t.jsx("div",{className:"col-span-1 xl:col-span-4 widget-animate",style:{animationDelay:"800ms"},children:t.jsx(J2,{projects:n,handleNavigation:u})}),t.jsx("div",{className:"col-span-1 xl:col-span-4 widget-animate",style:{animationDelay:"900ms"},children:t.jsx(W2,{projects:n,projectStatusConfig:j,handleNavigation:u})}),t.jsx("div",{className:"col-span-1 xl:col-span-4 widget-animate",style:{animationDelay:"1000ms"},children:t.jsx(H2,{transactions:a})}),t.jsx("div",{className:"col-span-1 xl:col-span-4 widget-animate",style:{animationDelay:"1100ms"},children:t.jsx(z2,{leads:p,handleNavigation:u})}),t.jsx("div",{className:"col-span-1 xl:col-span-12 widget-animate",style:{animationDelay:"1200ms"},children:t.jsx(q2,{cards:r,handleNavigation:u})}),t.jsx(nt,{isOpen:!!S,onClose:()=>w(null),title:S?L[S]:"",size:"2xl",children:t.jsxs("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:[S==="balance"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold text-gradient border-b border-brand-border pb-2",children:"Kartu & Tunai"}),t.jsx("div",{className:"space-y-3",children:r.map(U=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-brand-text-light",children:[U.bankName," ",U.id.startsWith("CARD_CASH")?"(Tunai)":`**** ${U.lastFourDigits}`]}),t.jsx("p",{className:"font-semibold text-brand-text-light",children:aa(U.balance)})]},U.id))}),t.jsx("h4",{className:"font-semibold text-gradient border-b border-brand-border pb-2 mt-6",children:"Kantong"}),t.jsx("div",{className:"space-y-3",children:d.map(U=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.name}),t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.type===tn.REWARD_POOL?aa(s.reduce((ne,ie)=>ne+ie.rewardBalance,0)):aa(U.amount)})]},U.id))})]}),S==="projects"&&t.jsx("div",{className:"space-y-3",children:n.filter(U=>U.status!=="Selesai"&&U.status!=="Dibatalkan").length>0?n.filter(U=>U.status!=="Selesai"&&U.status!=="Dibatalkan").map(U=>{var ne,ie;return t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.projectName}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:U.clientName})]}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${((ne=j.find(q=>q.name===U.status))==null?void 0:ne.color)||"#64748b"}33`,color:((ie=j.find(q=>q.name===U.status))==null?void 0:ie.color)||"#64748b"},children:P(U)})]},U.id)}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada proyek aktif."})}),S==="clients"&&t.jsx("div",{className:"space-y-3",children:e.filter(U=>U.status===Ot.ACTIVE).map(U=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:U.email})]},U.id))}),S==="freelancers"&&t.jsx("div",{className:"space-y-3",children:s.map(U=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:U.role})]},U.id))}),S==="payments"&&t.jsx("div",{className:"space-y-3",children:R.length>0?R.map(U=>{var ne;return t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.teamMemberName}),t.jsxs("p",{className:"text-sm text-brand-text-secondary",children:["Proyek: ",((ne=n.find(ie=>ie.id===U.projectId))==null?void 0:ne.projectName)||"N/A"]})]}),t.jsx("p",{className:"font-semibold text-brand-danger",children:aa(U.fee)})]},U.id)}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada pembayaran yang tertunda."})}),S==="contracts"&&t.jsx("div",{className:"space-y-3",children:v.length>0?v.map(U=>{var ne;return t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.contractNumber}),t.jsxs("p",{className:"text-sm text-brand-text-secondary",children:["Klien: ",((ne=e.find(ie=>ie.id===U.clientId))==null?void 0:ne.name)||U.clientName1]})]},U.id)}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada kontrak."})})]})})]})},Hn=({title:n,subtitle:e,children:a})=>t.jsxs("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-bold leading-tight text-gradient sm:truncate",children:n}),e&&t.jsx("p",{className:"mt-2 text-base text-brand-text-secondary",children:e})]}),a&&t.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:a})]}),Ja=({data:n,className:e=""})=>{const a=n.reduce((r,d)=>r+d.value,0);if(a===0)return t.jsx("div",{className:"text-center text-brand-text-secondary py-8 text-sm",children:"Tidak ada data untuk ditampilkan."});let s=0;return t.jsxs("div",{className:`flex flex-col md:flex-row items-center gap-4 ${e}`,children:[t.jsx("div",{className:"relative w-28 h-28 md:w-36 md:h-36 flex-shrink-0",children:t.jsx("svg",{className:"w-full h-full",viewBox:"0 0 36 36",transform:"rotate(-90)",children:n.map((r,d)=>{const u=r.value/a*100,p=t.jsx("circle",{cx:"18",cy:"18",r:"15.9154943092",fill:"transparent",stroke:r.color,strokeWidth:"6",strokeDasharray:`${u} ${100-u}`,strokeDashoffset:-s},d);return s+=u,p})})}),t.jsx("div",{className:"text-xs md:text-sm space-y-2.5 w-full",children:n.map(r=>t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:r.color}}),t.jsx("span",{className:"text-brand-text-secondary truncate",children:r.label})]}),t.jsxs("span",{className:"font-semibold text-brand-text-light",children:[(r.value/a*100).toFixed(0),"%"]})]},r.label))})]})},Q2="modulepreload",X2=function(n){return"/"+n},Qf={},js=function(e,a,s){let r=Promise.resolve();if(a&&a.length>0){let u=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),h=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));r=u(a.map(f=>{if(f=X2(f),f in Qf)return;Qf[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":Q2,g||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),g)return new Promise((k,j)=>{v.addEventListener("load",k),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function d(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return r.then(u=>{for(const p of u||[])p.status==="rejected"&&d(p.reason);return e().catch(d)})},Z2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...a)=>js(async()=>{const{default:s}=await Promise.resolve().then(()=>qi);return{default:s}},void 0).then(({default:s})=>s(...a)):e=fetch,(...a)=>e(...a)};class Pu extends Error{constructor(e,a="FunctionsError",s){super(e),this.name=a,this.context=s}}class eA extends Pu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xf extends Pu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zf extends Pu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(iu||(iu={}));var tA=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};class nA{constructor(e,{headers:a={},customFetch:s,region:r=iu.Any}={}){this.url=e,this.headers=a,this.region=r,this.fetch=Z2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,a={}){var s;return tA(this,void 0,void 0,function*(){try{const{headers:r,method:d,body:u}=a;let p={},{region:h}=a;h||(h=this.region);const f=new URL(`${this.url}/${e}`);h&&h!=="any"&&(p["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let g;u&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(p["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(p["Content-Type"]="application/json",g=JSON.stringify(u)));const y=yield this.fetch(f.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),r),body:g}).catch(S=>{throw new eA(S)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Xf(y);if(!y.ok)throw new Zf(y);let k=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return k==="application/json"?j=yield y.json():k==="application/octet-stream"?j=yield y.blob():k==="text/event-stream"?j=y:k==="multipart/form-data"?j=yield y.formData():j=yield y.text(),{data:j,error:null,response:y}}catch(r){return{data:null,error:r,response:r instanceof Zf||r instanceof Xf?r.context:void 0}}})}}var bn={},vi={},Ni={},ki={},ji={},wi={},aA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bi=aA();const sA=Bi.fetch,Rx=Bi.fetch.bind(Bi),Lx=Bi.Headers,iA=Bi.Request,rA=Bi.Response,qi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lx,Request:iA,Response:rA,default:Rx,fetch:sA},Symbol.toStringTag,{value:"Module"})),oA=Yb(qi);var ol={},eg;function Fx(){if(eg)return ol;eg=1,Object.defineProperty(ol,"__esModule",{value:!0});class n extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return ol.default=n,ol}var tg;function Ux(){if(tg)return wi;tg=1;var n=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});const e=n(oA),a=n(Fx());class s{constructor(d){var u,p;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(u=d.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=d.signal,this.isMaybeSingle=(p=d.isMaybeSingle)!==null&&p!==void 0?p:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,u){return this.headers=new Headers(this.headers),this.headers.set(d,u),this}then(d,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let h=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,y,v,k;let j=null,S=null,w=null,P=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const L=await f.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=L:S=JSON.parse(L))}const O=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),H=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");O&&H&&H.length>1&&(w=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(j={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,w=null,P=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const O=await f.text();try{j=JSON.parse(O),Array.isArray(j)&&f.status===404&&(S=[],j=null,P=200,A="OK")}catch{f.status===404&&O===""?(P=204,A="No Content"):j={message:O}}if(j&&this.isMaybeSingle&&(!((k=j==null?void 0:j.details)===null||k===void 0)&&k.includes("0 rows"))&&(j=null,P=200,A="OK"),j&&this.shouldThrowOnError)throw new a.default(j)}return{error:j,data:S,count:w,status:P,statusText:A}});return this.shouldThrowOnError||(h=h.catch(f=>{var g,y,v;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(d,u)}returns(){return this}overrideTypes(){return this}}return wi.default=s,wi}var ng;function Ox(){if(ng)return ji;ng=1;var n=ji&&ji.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ji,"__esModule",{value:!0});const e=n(Ux());class a extends e.default{select(r){let d=!1;const u=(r??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:d=!0,nullsFirst:u,foreignTable:p,referencedTable:h=p}={}){const f=h?`${h}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${r}.${d?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:d,referencedTable:u=d}={}){const p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(p,`${r}`),this}range(r,d,{foreignTable:u,referencedTable:p=u}={}){const h=typeof p>"u"?"offset":`${p}.offset`,f=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(h,`${r}`),this.url.searchParams.set(f,`${d-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:d=!1,settings:u=!1,buffers:p=!1,wal:h=!1,format:f="text"}={}){var g;const y=[r?"analyze":null,d?"verbose":null,u?"settings":null,p?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return ji.default=a,ji}var ag;function Du(){if(ag)return ki;ag=1;var n=ki&&ki.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ki,"__esModule",{value:!0});const e=n(Ox());class a extends e.default{eq(r,d){return this.url.searchParams.append(r,`eq.${d}`),this}neq(r,d){return this.url.searchParams.append(r,`neq.${d}`),this}gt(r,d){return this.url.searchParams.append(r,`gt.${d}`),this}gte(r,d){return this.url.searchParams.append(r,`gte.${d}`),this}lt(r,d){return this.url.searchParams.append(r,`lt.${d}`),this}lte(r,d){return this.url.searchParams.append(r,`lte.${d}`),this}like(r,d){return this.url.searchParams.append(r,`like.${d}`),this}likeAllOf(r,d){return this.url.searchParams.append(r,`like(all).{${d.join(",")}}`),this}likeAnyOf(r,d){return this.url.searchParams.append(r,`like(any).{${d.join(",")}}`),this}ilike(r,d){return this.url.searchParams.append(r,`ilike.${d}`),this}ilikeAllOf(r,d){return this.url.searchParams.append(r,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(r,d){return this.url.searchParams.append(r,`ilike(any).{${d.join(",")}}`),this}is(r,d){return this.url.searchParams.append(r,`is.${d}`),this}in(r,d){const u=Array.from(new Set(d)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(r,`in.(${u})`),this}contains(r,d){return typeof d=="string"?this.url.searchParams.append(r,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(r,`cs.{${d.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(d)}`),this}containedBy(r,d){return typeof d=="string"?this.url.searchParams.append(r,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(r,`cd.{${d.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(d)}`),this}rangeGt(r,d){return this.url.searchParams.append(r,`sr.${d}`),this}rangeGte(r,d){return this.url.searchParams.append(r,`nxl.${d}`),this}rangeLt(r,d){return this.url.searchParams.append(r,`sl.${d}`),this}rangeLte(r,d){return this.url.searchParams.append(r,`nxr.${d}`),this}rangeAdjacent(r,d){return this.url.searchParams.append(r,`adj.${d}`),this}overlaps(r,d){return typeof d=="string"?this.url.searchParams.append(r,`ov.${d}`):this.url.searchParams.append(r,`ov.{${d.join(",")}}`),this}textSearch(r,d,{config:u,type:p}={}){let h="";p==="plain"?h="pl":p==="phrase"?h="ph":p==="websearch"&&(h="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(r,`${h}fts${f}.${d}`),this}match(r){return Object.entries(r).forEach(([d,u])=>{this.url.searchParams.append(d,`eq.${u}`)}),this}not(r,d,u){return this.url.searchParams.append(r,`not.${d}.${u}`),this}or(r,{foreignTable:d,referencedTable:u=d}={}){const p=u?`${u}.or`:"or";return this.url.searchParams.append(p,`(${r})`),this}filter(r,d,u){return this.url.searchParams.append(r,`${d}.${u}`),this}}return ki.default=a,ki}var sg;function $x(){if(sg)return Ni;sg=1;var n=Ni&&Ni.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ni,"__esModule",{value:!0});const e=n(Du());class a{constructor(r,{headers:d={},schema:u,fetch:p}){this.url=r,this.headers=new Headers(d),this.schema=u,this.fetch=p}select(r,{head:d=!1,count:u}={}){const p=d?"HEAD":"GET";let h=!1;const f=(r??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:d,defaultToNull:u=!0}={}){var p;const h="POST";if(d&&this.headers.append("Prefer",`count=${d}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(r,{onConflict:d,ignoreDuplicates:u=!1,count:p,defaultToNull:h=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),p&&this.headers.append("Prefer",`count=${p}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const y=r.reduce((v,k)=>v.concat(Object.keys(k)),[]);if(y.length>0){const v=[...new Set(y)].map(k=>`"${k}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(r,{count:d}={}){var u;const p="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:r}={}){var d;const u="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Ni.default=a,Ni}var ig;function lA(){if(ig)return vi;ig=1;var n=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});const e=n($x()),a=n(Du());class s{constructor(d,{headers:u={},schema:p,fetch:h}={}){this.url=d,this.headers=new Headers(u),this.schemaName=p,this.fetch=h}from(d){const u=new URL(`${this.url}/${d}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new s(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,u={},{head:p=!1,get:h=!1,count:f}={}){var g;let y;const v=new URL(`${this.url}/rpc/${d}`);let k;p||h?(y=p?"HEAD":"GET",Object.entries(u).filter(([S,w])=>w!==void 0).map(([S,w])=>[S,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([S,w])=>{v.searchParams.append(S,w)})):(y="POST",k=u);const j=new Headers(this.headers);return f&&j.set("Prefer",`count=${f}`),new a.default({method:y,url:v,headers:j,schema:this.schemaName,body:k,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return vi.default=s,vi}var rg;function dA(){if(rg)return bn;rg=1;var n=bn&&bn.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(bn,"__esModule",{value:!0}),bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const e=n(lA());bn.PostgrestClient=e.default;const a=n($x());bn.PostgrestQueryBuilder=a.default;const s=n(Du());bn.PostgrestFilterBuilder=s.default;const r=n(Ox());bn.PostgrestTransformBuilder=r.default;const d=n(Ux());bn.PostgrestBuilder=d.default;const u=n(Fx());return bn.PostgrestError=u.default,bn.default={PostgrestClient:e.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:d.default,PostgrestError:u.default},bn}var cA=dA();const uA=Nu(cA),{PostgrestClient:mA,PostgrestQueryBuilder:pP,PostgrestFilterBuilder:hP,PostgrestTransformBuilder:fP,PostgrestBuilder:gP,PostgrestError:xP}=uA;class pA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const s=a.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let a=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(a+=`

Suggested solution: ${e.workaround}`),new Error(a)}static createWebSocket(e,a){const s=this.getWebSocketConstructor();return new s(e,a)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hA="2.15.5",fA=`realtime-js/${hA}`,gA="1.0.0",ru=1e4,xA=1e3,yA=100;var Rr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Rr||(Rr={}));var mn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(mn||(mn={}));var ga;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ga||(ga={}));var ou;(function(n){n.websocket="websocket"})(ou||(ou={}));var Ks;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ks||(Ks={}));class bA{constructor(){this.HEADER_LENGTH=1}decode(e,a){return e.constructor===ArrayBuffer?a(this._binaryDecode(e)):a(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const a=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,a,s)}_decodeBroadcast(e,a,s){const r=a.getUint8(1),d=a.getUint8(2);let u=this.HEADER_LENGTH+2;const p=s.decode(e.slice(u,u+r));u=u+r;const h=s.decode(e.slice(u,u+d));u=u+d;const f=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:p,event:h,payload:f}}}class Bx{constructor(e,a){this.callback=e,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Bt||(Bt={}));const og=(n,e,a={})=>{var s;const r=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((d,u)=>(d[u]=vA(u,n,e,r),d),{})},vA=(n,e,a,s)=>{const r=e.find(p=>p.name===n),d=r==null?void 0:r.type,u=a[n];return d&&!s.includes(d)?Vx(d,u):lu(u)},Vx=(n,e)=>{if(n.charAt(0)==="_"){const a=n.slice(1,n.length);return wA(e,a)}switch(n){case Bt.bool:return NA(e);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return kA(e);case Bt.json:case Bt.jsonb:return jA(e);case Bt.timestamp:return CA(e);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return lu(e);default:return lu(e)}},lu=n=>n,NA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},kA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},jA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},wA=(n,e)=>{if(typeof n!="string")return n;const a=n.length-1,s=n[a];if(n[0]==="{"&&s==="}"){let d;const u=n.slice(1,a);try{d=JSON.parse("["+u+"]")}catch{d=u?u.split(","):[]}return d.map(p=>Vx(e,p))}return n},CA=n=>typeof n=="string"?n.replace(" ","T"):n,Kx=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class jc{constructor(e,a,s={},r=ru){this.channel=e,this.event=a,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,a){var s;return this._hasReceived(e)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:a}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(a))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(lg||(lg={}));class Lr{constructor(e,a){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:d,onLeave:u,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lr.syncState(this.state,r,d,u),this.pendingDiffs.forEach(h=>{this.state=Lr.syncDiff(this.state,h,d,u)}),this.pendingDiffs=[],p()}),this.channel._on(s.diff,{},r=>{const{onJoin:d,onLeave:u,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Lr.syncDiff(this.state,r,d,u),p())}),this.onJoin((r,d,u)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:d,newPresences:u})}),this.onLeave((r,d,u)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:d,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,a,s,r){const d=this.cloneDeep(e),u=this.transformState(a),p={},h={};return this.map(d,(f,g)=>{u[f]||(h[f]=g)}),this.map(u,(f,g)=>{const y=d[f];if(y){const v=g.map(w=>w.presence_ref),k=y.map(w=>w.presence_ref),j=g.filter(w=>k.indexOf(w.presence_ref)<0),S=y.filter(w=>v.indexOf(w.presence_ref)<0);j.length>0&&(p[f]=j),S.length>0&&(h[f]=S)}else p[f]=g}),this.syncDiff(d,{joins:p,leaves:h},s,r)}static syncDiff(e,a,s,r){const{joins:d,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(d,(p,h)=>{var f;const g=(f=e[p])!==null&&f!==void 0?f:[];if(e[p]=this.cloneDeep(h),g.length>0){const y=e[p].map(k=>k.presence_ref),v=g.filter(k=>y.indexOf(k.presence_ref)<0);e[p].unshift(...v)}s(p,g,h)}),this.map(u,(p,h)=>{let f=e[p];if(!f)return;const g=h.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),e[p]=f,r(p,f,h),f.length===0&&delete e[p]}),e}static map(e,a){return Object.getOwnPropertyNames(e).map(s=>a(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((a,s)=>{const r=e[s];return"metas"in r?a[s]=r.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):a[s]=r,a},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dg||(dg={}));var Fr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Fr||(Fr={}));var Ga;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ga||(Ga={}));class Mu{constructor(e,a={config:{}},s){this.topic=e,this.params=a,this.socket=s,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new jc(this,ga.join,this.params,this.timeout),this.rejoinTimer=new Bx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ga.reply,{},(r,d)=>{this._trigger(this._replyEventName(d),r)}),this.presence=new Lr(this),this.broadcastEndpointURL=Kx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,a=this.timeout){var s,r,d;if(this.socket.isConnected()||this.socket.connect(),this.state==mn.closed){const{config:{broadcast:u,presence:p,private:h}}=this.params,f=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(k=>k.filter))!==null&&r!==void 0?r:[],g=!!this.bindings[Fr.PRESENCE]&&this.bindings[Fr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,y={},v={broadcast:u,presence:Object.assign(Object.assign({},p),{enabled:g}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(k=>e==null?void 0:e(Ga.CHANNEL_ERROR,k)),this._onClose(()=>e==null?void 0:e(Ga.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:k})=>{var j;if(this.socket.setAuth(),k===void 0){e==null||e(Ga.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,w=(j=S==null?void 0:S.length)!==null&&j!==void 0?j:0,P=[];for(let A=0;A<w;A++){const R=S[A],{filter:{event:O,schema:H,table:L,filter:U}}=R,ne=k&&k[A];if(ne&&ne.event===O&&ne.schema===H&&ne.table===L&&ne.filter===U)P.push(Object.assign(Object.assign({},R),{id:ne.id}));else{this.unsubscribe(),this.state=mn.errored,e==null||e(Ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Ga.SUBSCRIBED);return}}).receive("error",k=>{this.state=mn.errored,e==null||e(Ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,a={}){return await this.send({type:"presence",event:"track",payload:e},a.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,a,s){return this.state===mn.joined&&e===Fr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,a,s)}async send(e,a={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:d,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=f.body)===null||r===void 0?void 0:r.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var u,p,h;const f=this._push(e.type,e,a.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(p=(u=this.params)===null||u===void 0?void 0:u.config)===null||p===void 0?void 0:p.broadcast)===null||h===void 0)&&h.ack)&&d("ok"),f.receive("ok",()=>d("ok")),f.receive("error",()=>d("error")),f.receive("timeout",()=>d("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mn.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ga.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new jc(this,ga.leave,{},e),s.receive("ok",()=>{a(),r("ok")}).receive("timeout",()=>{a(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mn.closed,this.bindings={}}async _fetchWithTimeout(e,a,s){const r=new AbortController,d=setTimeout(()=>r.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},a),{signal:r.signal}));return clearTimeout(d),u}_push(e,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new jc(this,e,a,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yA){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(e,a,s){return a}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,a,s){var r,d;const u=e.toLocaleLowerCase(),{close:p,error:h,leave:f,join:g}=ga;if(s&&[p,h,f,g].indexOf(u)>=0&&s!==this._joinRef())return;let v=this._onMessage(u,a,s);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(k=>{var j,S,w;return((j=k.filter)===null||j===void 0?void 0:j.event)==="*"||((w=(S=k.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===u}).map(k=>k.callback(v,s)):(d=this.bindings[u])===null||d===void 0||d.filter(k=>{var j,S,w,P,A,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in k){const O=k.id,H=(j=k.filter)===null||j===void 0?void 0:j.event;return O&&((S=a.ids)===null||S===void 0?void 0:S.includes(O))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((w=a.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const O=(A=(P=k==null?void 0:k.filter)===null||P===void 0?void 0:P.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return O==="*"||O===((R=a==null?void 0:a.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===u}).map(k=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:S,table:w,commit_timestamp:P,type:A,errors:R}=j;v=Object.assign(Object.assign({},{schema:S,table:w,commit_timestamp:P,eventType:A,new:{},old:{},errors:R}),this._getPayloadRecords(j))}k.callback(v,s)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,a,s){const r=e.toLocaleLowerCase(),d={type:r,filter:a,callback:s};return this.bindings[r]?this.bindings[r].push(d):this.bindings[r]=[d],this}_off(e,a){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var d;return!(((d=r.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===s&&Mu.isEqual(r.filter,a))})),this}static isEqual(e,a){if(Object.keys(e).length!==Object.keys(a).length)return!1;for(const s in e)if(e[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ga.close,{},e)}_onError(e){this._on(ga.error,{},a=>e(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const a={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(a.new=og(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(a.old=og(e.columns,e.old_record)),a}}const wc=()=>{},ll={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TA=[1e3,2e3,5e3,1e4],SA=1e4,IA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AA{constructor(e,a){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ru,this.transport=null,this.heartbeatIntervalMs=ll.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wc,this.ref=0,this.reconnectTimer=null,this.logger=wc,this.conn=null,this.sendBuffer=[],this.serializer=new bA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let d;return r?d=r:typeof fetch>"u"?d=(...u)=>js(async()=>{const{default:p}=await Promise.resolve().then(()=>qi);return{default:p}},void 0).then(({default:p})=>p(...u)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...u)=>d(...u)},!(!((s=a==null?void 0:a.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${e}/${ou.websocket}`,this.httpEndpoint=Kx(e),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const a=e.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gA}))}disconnect(e,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const a=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const e=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,a,s){this.logger(e,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Rr.connecting:return Ks.Connecting;case Rr.open:return Ks.Open;case Rr.closing:return Ks.Closing;default:return Ks.Closed}}isConnected(){return this.connectionState()===Ks.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,a={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(d=>d.topic===s);if(r)return r;{const d=new Mu(`realtime:${e}`,a,this);return this.channels.push(d),d}}push(e){const{topic:a,event:s,payload:r,ref:d}=e,u=()=>{this.encode(e,p=>{var h;(h=this.conn)===null||h===void 0||h.send(p)})};this.log("push",`${a} ${s} (${d})`,r),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(xA,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},ll.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let a=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${e}"`),a.unsubscribe())}_remove(e){this.channels=this.channels.filter(a=>a.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:d,ref:u}=a,p=u?`(${u})`:"",h=d.status||"";this.log("receive",`${h} ${s} ${r} ${p}`.trim(),d),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(r,d,u)),this._triggerStateCallbacks("message",a)})}_clearTimer(e){var a;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var a;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ga.error))}_appendParams(e,a){if(Object.keys(a).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(a);return`${e}${s}${r}`}_workerObjectUrl(e){let a;if(e)a=e;else{const s=new Blob([IA],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}_setConnectionState(e,a=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(e=null){let a;e?a=e:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const r={access_token:a,version:fA};a&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(ga.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${e}`,a)})}_triggerStateCallbacks(e,a){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(a)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Bx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ll.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var a,s,r,d,u,p,h,f,g;if(this.transport=(a=e==null?void 0:e.transport)!==null&&a!==void 0?a:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:ru,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:ll.HEARTBEAT_INTERVAL,this.worker=(d=e==null?void 0:e.worker)!==null&&d!==void 0?d:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(p=e==null?void 0:e.heartbeatCallback)!==null&&p!==void 0?p:wc,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(y=>TA[y-1]||SA),this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((y,v)=>v(JSON.stringify(y))),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ru extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function hn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class EA extends Ru{constructor(e,a,s){super(e),this.name="StorageApiError",this.status=a,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class du extends Ru{constructor(e,a){super(e),this.name="StorageUnknownError",this.originalError=a}}var _A=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};const Hx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...a)=>js(async()=>{const{default:s}=await Promise.resolve().then(()=>qi);return{default:s}},void 0).then(({default:s})=>s(...a)):e=fetch,(...a)=>e(...a)},PA=()=>_A(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield js(()=>Promise.resolve().then(()=>qi),void 0)).Response:Response}),cu=n=>{if(Array.isArray(n))return n.map(a=>cu(a));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([a,s])=>{const r=a.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));e[r]=cu(s)}),e},DA=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Qs=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};const Cc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),MA=(n,e,a)=>Qs(void 0,void 0,void 0,function*(){const s=yield PA();n instanceof s&&!(a!=null&&a.noResolveJson)?n.json().then(r=>{const d=n.status||500,u=(r==null?void 0:r.statusCode)||d+"";e(new EA(Cc(r),d,u))}).catch(r=>{e(new du(Cc(r),r))}):e(new du(Cc(n),n))}),RA=(n,e,a,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(DA(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),a))};function zr(n,e,a,s,r,d){return Qs(this,void 0,void 0,function*(){return new Promise((u,p)=>{n(a,RA(e,s,r,d)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>MA(h,p,s))})})}function vl(n,e,a,s){return Qs(this,void 0,void 0,function*(){return zr(n,"GET",e,a,s)})}function Ea(n,e,a,s,r){return Qs(this,void 0,void 0,function*(){return zr(n,"POST",e,s,r,a)})}function uu(n,e,a,s,r){return Qs(this,void 0,void 0,function*(){return zr(n,"PUT",e,s,r,a)})}function LA(n,e,a,s){return Qs(this,void 0,void 0,function*(){return zr(n,"HEAD",e,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function Gx(n,e,a,s,r){return Qs(this,void 0,void 0,function*(){return zr(n,"DELETE",e,s,r,a)})}var Rn=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};const FA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UA{constructor(e,a={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=a,this.bucketId=s,this.fetch=Hx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,a,s,r){return Rn(this,void 0,void 0,function*(){try{let d;const u=Object.assign(Object.assign({},cg),r);let p=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),h&&d.append("metadata",this.encodeMetadata(h)),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",u.cacheControl),h&&d.append("metadata",this.encodeMetadata(h))):(d=s,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType,h&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),r!=null&&r.headers&&(p=Object.assign(Object.assign({},p),r.headers));const f=this._removeEmptyFolders(a),g=this._getFinalPath(f),y=yield(e=="PUT"?uu:Ea)(this.fetch,`${this.url}/object/${g}`,d,Object.assign({headers:p},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(hn(d))return{data:null,error:d};throw d}})}upload(e,a,s){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,a,s)})}uploadToSignedUrl(e,a,s,r){return Rn(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(e),u=this._getFinalPath(d),p=new URL(this.url+`/object/upload/sign/${u}`);p.searchParams.set("token",a);try{let h;const f=Object.assign({upsert:cg.upsert},r),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const y=yield uu(this.fetch,p.toString(),h,{headers:g});return{data:{path:d,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(hn(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,a){return Rn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);a!=null&&a.upsert&&(r["x-upsert"]="true");const d=yield Ea(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),u=new URL(this.url+d.url),p=u.searchParams.get("token");if(!p)throw new Ru("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:p},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}update(e,a,s){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,a,s)})}move(e,a,s){return Rn(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}copy(e,a,s){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ea(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,a,s){return Rn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),d=yield Ea(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:a},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${u}`)},{data:d,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,a,s){return Rn(this,void 0,void 0,function*(){try{const r=yield Ea(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:e},{headers:this.headers}),d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${d}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}download(e,a){return Rn(this,void 0,void 0,function*(){const r=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),u=d?`?${d}`:"";try{const p=this._getFinalPath(e);return{data:yield(yield vl(this.fetch,`${this.url}/${r}/${p}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(hn(p))return{data:null,error:p};throw p}})}info(e){return Rn(this,void 0,void 0,function*(){const a=this._getFinalPath(e);try{const s=yield vl(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:cu(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}exists(e){return Rn(this,void 0,void 0,function*(){const a=this._getFinalPath(e);try{return yield LA(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s)&&s instanceof du){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,a){const s=this._getFinalPath(e),r=[],d=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";d!==""&&r.push(d);const p=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});h!==""&&r.push(h);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${s}${f}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}list(e,a,s){return Rn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},FA),a),{prefix:e||""});return{data:yield Ea(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}listV2(e,a){return Rn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ea(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},a),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const a=[];return e.width&&a.push(`width=${e.width}`),e.height&&a.push(`height=${e.height}`),e.resize&&a.push(`resize=${e.resize}`),e.format&&a.push(`format=${e.format}`),e.quality&&a.push(`quality=${e.quality}`),a.join("&")}}const OA="2.12.1",$A={"X-Client-Info":`storage-js/${OA}`};var Ci=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};class BA{constructor(e,a={},s,r){this.shouldThrowOnError=!1;const d=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href,this.headers=Object.assign(Object.assign({},$A),a),this.fetch=Hx(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ci(this,void 0,void 0,function*(){try{return{data:yield vl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(hn(e))return{data:null,error:e};throw e}})}getBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield vl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}createBucket(e,a={public:!1}){return Ci(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}updateBucket(e,a){return Ci(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}deleteBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}}class VA extends BA{constructor(e,a={},s,r){super(e,a,s,r)}from(e){return new UA(this.url,this.headers,e,this.fetch)}}const KA="2.57.4";let Dr="";typeof Deno<"u"?Dr="deno":typeof document<"u"?Dr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dr="react-native":Dr="node";const HA={"X-Client-Info":`supabase-js-${Dr}/${KA}`},GA={headers:HA},qA={schema:"public"},JA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WA={};var zA=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};const YA=n=>{let e;return n?e=n:typeof fetch>"u"?e=Rx:e=fetch,(...a)=>e(...a)},QA=()=>typeof Headers>"u"?Lx:Headers,XA=(n,e,a)=>{const s=YA(a),r=QA();return(d,u)=>zA(void 0,void 0,void 0,function*(){var p;const h=(p=yield e())!==null&&p!==void 0?p:n;let f=new r(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),s(d,Object.assign(Object.assign({},u),{headers:f}))})};var ZA=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};function e1(n){return n.endsWith("/")?n:n+"/"}function t1(n,e){var a,s;const{db:r,auth:d,realtime:u,global:p}=n,{db:h,auth:f,realtime:g,global:y}=e,v={db:Object.assign(Object.assign({},h),r),auth:Object.assign(Object.assign({},f),d),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),p),{headers:Object.assign(Object.assign({},(a=y==null?void 0:y.headers)!==null&&a!==void 0?a:{}),(s=p==null?void 0:p.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>ZA(this,void 0,void 0,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function n1(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e1(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qx="2.71.1",Pi=30*1e3,mu=3,Tc=mu*Pi,a1="http://localhost:9999",s1="supabase.auth.token",i1={"X-Client-Info":`gotrue-js/${qx}`},pu="X-Supabase-Api-Version",Jx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,o1=600*1e3;class Lu extends Error{constructor(e,a,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function vt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class l1 extends Lu{constructor(e,a,s){super(e,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function d1(n){return vt(n)&&n.name==="AuthApiError"}class Wx extends Lu{constructor(e,a){super(e),this.name="AuthUnknownError",this.originalError=a}}class ws extends Lu{constructor(e,a,s,r){super(e,s,r),this.name=a,this.status=s}}class xs extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c1(n){return vt(n)&&n.name==="AuthSessionMissingError"}class dl extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cl extends ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ul extends ws{constructor(e,a=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u1(n){return vt(n)&&n.name==="AuthImplicitGrantRedirectError"}class ug extends ws{constructor(e,a=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hu extends ws{constructor(e,a){super(e,"AuthRetryableFetchError",a,void 0)}}function Sc(n){return vt(n)&&n.name==="AuthRetryableFetchError"}class mg extends ws{constructor(e,a,s){super(e,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class fu extends ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pg=` 	
\r=`.split(""),m1=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<pg.length;e+=1)n[pg[e].charCodeAt(0)]=-2;for(let e=0;e<Nl.length;e+=1)n[Nl[e].charCodeAt(0)]=e;return n})();function hg(n,e,a){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;a(Nl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;a(Nl[s]),e.queuedBits-=6}}function zx(n,e,a){const s=m1[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)a(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function fg(n){const e=[],a=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},d=u=>{f1(u,s,a)};for(let u=0;u<n.length;u+=1)zx(n.charCodeAt(u),r,d);return e.join("")}function p1(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function h1(n,e){for(let a=0;a<n.length;a+=1){let s=n.charCodeAt(a);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(a+1)-56320&65535|r)+65536,a+=1}p1(s,e)}}function f1(n,e,a){if(e.utf8seq===0){if(n<=127){a(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&a(e.codepoint)}}function g1(n){const e=[],a={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)zx(n.charCodeAt(r),a,s);return new Uint8Array(e)}function x1(n){const e=[];return h1(n,a=>e.push(a)),new Uint8Array(e)}function y1(n){const e=[],a={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>hg(r,a,s)),hg(null,a,s),e.join("")}function b1(n){return Math.round(Date.now()/1e3)+n}function v1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const fa=()=>typeof window<"u"&&typeof document<"u",Os={tested:!1,writable:!1},Yx=()=>{if(!fa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Os.tested)return Os.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Os.tested=!0,Os.writable=!0}catch{Os.tested=!0,Os.writable=!1}return Os.writable};function N1(n){const e={},a=new URL(n);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((r,d)=>{e[d]=r})}catch{}return a.searchParams.forEach((s,r)=>{e[r]=s}),e}const Qx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...a)=>js(async()=>{const{default:s}=await Promise.resolve().then(()=>qi);return{default:s}},void 0).then(({default:s})=>s(...a)):e=fetch,(...a)=>e(...a)},k1=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Di=async(n,e,a)=>{await n.setItem(e,JSON.stringify(a))},$s=async(n,e)=>{const a=await n.getItem(e);if(!a)return null;try{return JSON.parse(a)}catch{return a}},fs=async(n,e)=>{await n.removeItem(e)};class Il{constructor(){this.promise=new Il.promiseConstructor((e,a)=>{this.resolve=e,this.reject=a})}}Il.promiseConstructor=Promise;function Ic(n){const e=n.split(".");if(e.length!==3)throw new fu("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!r1.test(e[s]))throw new fu("JWT not in base64url format");return{header:JSON.parse(fg(e[0])),payload:JSON.parse(fg(e[1])),signature:g1(e[2]),raw:{header:e[0],payload:e[1]}}}async function j1(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function w1(n,e){return new Promise((s,r)=>{(async()=>{for(let d=0;d<1/0;d++)try{const u=await n(d);if(!e(d,null,u)){s(u);return}}catch(u){if(!e(d,u)){r(u);return}}})()})}function C1(n){return("0"+n.toString(16)).substr(-2)}function T1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let r="";for(let d=0;d<56;d++)r+=a.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,C1).join("")}async function S1(n){const a=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",a),r=new Uint8Array(s);return Array.from(r).map(d=>String.fromCharCode(d)).join("")}async function I1(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const a=await S1(n);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ti(n,e,a=!1){const s=T1();let r=s;a&&(r+="/PASSWORD_RECOVERY"),await Di(n,`${e}-code-verifier`,r);const d=await I1(s);return[d,s===d?"plain":"s256"]}const A1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E1(n){const e=n.headers.get(pu);if(!e||!e.match(A1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _1(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function P1(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const D1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Si(n){if(!D1.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ac(){const n={};return new Proxy(n,{get:(e,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gg(n){return JSON.parse(JSON.stringify(n))}var M1=function(n,e){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(a[s[r]]=n[s[r]]);return a};const Vs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),R1=[502,503,504];async function xg(n){var e;if(!k1(n))throw new hu(Vs(n),0);if(R1.includes(n.status))throw new hu(Vs(n),n.status);let a;try{a=await n.json()}catch(d){throw new Wx(Vs(d),d)}let s;const r=E1(n);if(r&&r.getTime()>=Jx["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new mg(Vs(a),n.status,((e=a.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new xs}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((d,u)=>d&&typeof u=="string",!0))throw new mg(Vs(a),n.status,a.weak_password.reasons);throw new l1(Vs(a),n.status||500,s)}const L1=(n,e,a,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),a))};async function It(n,e,a,s){var r;const d=Object.assign({},s==null?void 0:s.headers);d[pu]||(d[pu]=Jx["2024-01-01"].name),s!=null&&s.jwt&&(d.Authorization=`Bearer ${s.jwt}`);const u=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const p=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await F1(n,e,a+p,{headers:d,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function F1(n,e,a,s,r,d){const u=L1(e,s,r,d);let p;try{p=await n(a,Object.assign({},u))}catch(h){throw console.error(h),new hu(Vs(h),0)}if(p.ok||await xg(p),s!=null&&s.noResolveJson)return p;try{return await p.json()}catch(h){await xg(h)}}function Ha(n){var e;let a=null;B1(n)&&(a=Object.assign({},n),n.expires_at||(a.expires_at=b1(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:a,user:s},error:null}}function yg(n){const e=Ha(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function bs(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function U1(n){return{data:n,error:null}}function O1(n){const{action_link:e,email_otp:a,hashed_token:s,redirect_to:r,verification_type:d}=n,u=M1(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:e,email_otp:a,hashed_token:s,redirect_to:r,verification_type:d},h=Object.assign({},u);return{data:{properties:p,user:h},error:null}}function $1(n){return n}function B1(n){return n.access_token&&n.refresh_token&&n.expires_in}const Ec=["global","local","others"];var V1=function(n,e){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(a[s[r]]=n[s[r]]);return a};class K1{constructor({url:e="",headers:a={},fetch:s}){this.url=e,this.headers=a,this.fetch=Qx(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,a=Ec[0]){if(Ec.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ec.join(", ")}`);try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,a={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:bs})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:a}=e,s=V1(e,["options"]),r=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:O1,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(vt(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bs})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async listUsers(e){var a,s,r,d,u,p,h;try{const f={nextPage:null,lastPage:0,total:0},g=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=e==null?void 0:e.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(d=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&d!==void 0?d:""},xform:$1});if(g.error)throw g.error;const y=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(h=(p=g.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&h!==void 0?h:[];return k.length>0&&(k.forEach(j=>{const S=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(j.split(";")[1].split("=")[1]);f[`${w}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(vt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Si(e);try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bs})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async updateUserById(e,a){Si(e);try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:a,headers:this.headers,xform:bs})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,a=!1){Si(e);try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:a},xform:bs})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Si(e.userId);try{const{data:a,error:s}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:a,error:s}}catch(a){if(vt(a))return{data:null,error:a};throw a}}async _deleteFactor(e){Si(e.userId),Si(e.id);try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(a){if(vt(a))return{data:null,error:a};throw a}}}function bg(n={}){return{getItem:e=>n[e]||null,setItem:(e,a)=>{n[e]=a},removeItem:e=>{delete n[e]}}}function H1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ii={debug:!!(globalThis&&Yx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class G1 extends Xx{}async function q1(n,e,a){Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await a()}finally{Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new G1(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ii.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}H1();const J1={url:a1,storageKey:s1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vg(n,e,a){return await a()}const Ai={};class Br{constructor(e){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Br.nextInstanceID,Br.nextInstanceID+=1,this.instanceID>0&&fa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},J1),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new K1({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Qx(r.fetch),this.lock=r.lock||vg,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:fa()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=q1:this.lock=vg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Yx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bg(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=bg(this.memoryStorage)),fa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}get jwks(){var e,a;return(a=(e=Ai[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(e){Ai[this.storageKey]=Object.assign(Object.assign({},Ai[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,a;return(a=(e=Ai[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ai[this.storageKey]=Object.assign(Object.assign({},Ai[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const a=N1(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),fa()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:d}=await this._getSessionFromURL(a,s);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),u1(d)){const h=(e=d.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:u,redirectType:p}=r;return this._debug("#_initialize()","detected session in URL",u,"redirect type",p),await this._saveSession(u),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return vt(a)?{error:a}:{error:new Wx("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var a,s,r;try{const d=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ha}),{data:u,error:p}=d;if(p||!u)return{data:{user:null,session:null},error:p};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(d){if(vt(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(e){var a,s,r;try{let d;if("email"in e){const{email:g,password:y,options:v}=e;let k=null,j=null;this.flowType==="pkce"&&([k,j]=await Ti(this.storage,this.storageKey)),d=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:y,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:k,code_challenge_method:j},xform:Ha})}else if("phone"in e){const{phone:g,password:y,options:v}=e;d=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},channel:(r=v==null?void 0:v.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ha})}else throw new cl("You must provide either an email or phone number and a password");const{data:u,error:p}=d;if(p||!u)return{data:{user:null,session:null},error:p};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(d){if(vt(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(e){try{let a;if("email"in e){const{email:d,password:u,options:p}=e;a=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:u,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yg})}else if("phone"in e){const{phone:d,password:u,options:p}=e;a=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:u,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yg})}else throw new cl("You must provide either an email or phone number and a password");const{data:s,error:r}=a;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new dl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(a){if(vt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(e){var a,s,r,d;return await this._handleProviderSignIn(e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(d=e.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:a}=e;if(a==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(e){var a,s,r,d,u,p,h,f,g,y,v,k;let j,S;if("message"in e)j=e.message,S=e.signature;else{const{chain:w,wallet:P,statement:A,options:R}=e;let O;if(fa())if(typeof P=="object")O=P;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))O=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=P}const H=new URL((a=R==null?void 0:R.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in O&&O.signIn){const L=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),A?{statement:A}:null));let U;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")U=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)U=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)j=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${H.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(r=(s=R==null?void 0:R.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((d=R==null?void 0:R.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((f=R==null?void 0:R.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((y=(g=R==null?void 0:R.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...R.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const L=await O.signMessage(new TextEncoder().encode(j),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=L}}try{const{data:w,error:P}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:y1(S)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Ha});if(P)throw P;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new dl}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:P})}catch(w){if(vt(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const a=await $s(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(a??"").split("/");try{const{data:d,error:u}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ha});if(await fs(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new dl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:r??null}),error:u})}catch(d){if(vt(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(e){try{const{options:a,provider:s,token:r,access_token:d,nonce:u}=e,p=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:d,nonce:u,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ha}),{data:h,error:f}=p;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new dl}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(a){if(vt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(e){var a,s,r,d,u;try{if("email"in e){const{email:p,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Ti(this.storage,this.storageKey));const{error:y}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:p,options:h}=e,{data:f,error:g}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(d=h==null?void 0:h.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new cl("You must provide either an email or phone number.")}catch(p){if(vt(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(e){var a,s;try{let r,d;"options"in e&&(r=(a=e.options)===null||a===void 0?void 0:a.redirectTo,d=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:p}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:d}}),redirectTo:r,xform:Ha});if(p)throw p;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,f=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(r){if(vt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var a,s,r;try{let d=null,u=null;return this.flowType==="pkce"&&([d,u]=await Ti(this.storage,this.storageKey)),await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(a=e.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:u}),headers:this.headers,xform:U1})}catch(d){if(vt(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:a},error:s}=e;if(s)throw s;if(!a)throw new xs;const{error:r}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(vt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const a=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:d}=e,{error:u}=await It(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:r,options:d}=e,{data:u,error:p}=await It(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new cl("You must provide either an email or phone number and a type")}catch(a){if(vt(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(e,a){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await e(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const a=await $s(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?e=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Tc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await $s(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Ac()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,f,g)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,g))})}return{data:{session:e},error:null}}const{session:r,error:d}=await this._callRefreshToken(e.refresh_token);return d?{data:{session:null},error:d}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bs}):await this._useSession(async a=>{var s,r,d;const{data:u,error:p}=a;if(p)throw p;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xs}:await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&d!==void 0?d:void 0,xform:bs})})}catch(a){if(vt(a))return c1(a)&&(await this._removeSession(),await fs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(e,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,a))}async _updateUser(e,a={}){try{return await this._useSession(async s=>{const{data:r,error:d}=s;if(d)throw d;if(!r.session)throw new xs;const u=r.session;let p=null,h=null;this.flowType==="pkce"&&e.email!=null&&([p,h]=await Ti(this.storage,this.storageKey));const{data:f,error:g}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:p,code_challenge_method:h}),jwt:u.access_token,xform:bs});if(g)throw g;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xs;const a=Date.now()/1e3;let s=a,r=!0,d=null;const{payload:u}=Ic(e.access_token);if(u.exp&&(s=u.exp,r=s<=a),r){const{session:p,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:h}=await this._getUser(e.access_token);if(h)throw h;d={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(a){if(vt(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async a=>{var s;if(!e){const{data:u,error:p}=a;if(p)throw p;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new xs;const{session:r,error:d}=await this._callRefreshToken(e.refresh_token);return d?{data:{user:null,session:null},error:d}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(vt(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(e,a){try{if(!fa())throw new ul("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ul(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ul("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ug("No code detected.");const{data:A,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:d,refresh_token:u,expires_in:p,expires_at:h,token_type:f}=e;if(!d||!p||!u||!f)throw new ul("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(p);let v=g+y;h&&(v=parseInt(h));const k=v-g;k*1e3<=Pi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${y}s`);const j=v-y;g-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,g):g-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,g);const{data:S,error:w}=await this._getUser(d);if(w)throw w;const P={provider_token:s,provider_refresh_token:r,access_token:d,expires_in:y,expires_at:v,refresh_token:u,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:e.type},error:null}}catch(s){if(vt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const a=await $s(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&a)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:r,error:d}=a;if(d)return{error:d};const u=(s=r.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:p}=await this.admin.signOut(u,e);if(p&&!(d1(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return e!=="others"&&(await this._removeSession(),await fs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const a=v1(),s={id:a,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async a=>{var s,r;try{const{data:{session:d},error:u}=a;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",e,"session",d)}catch(d){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",d),console.error(d)}})}async resetPasswordForEmail(e,a={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Ti(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(d){if(vt(d))return{data:null,error:d};throw d}}async getUserIdentities(){var e;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=a.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(a){if(vt(a))return{data:null,error:a};throw a}}async linkIdentity(e){var a;try{const{data:s,error:r}=await this._useSession(async d=>{var u,p,h,f,g;const{data:y,error:v}=d;if(v)throw v;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",k,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(r)throw r;return fa()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(vt(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async a=>{var s,r;const{data:d,error:u}=a;if(u)throw u;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=d.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(a){if(vt(a))return{data:null,error:a};throw a}}async _refreshAccessToken(e){const a=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await w1(async r=>(r>0&&await j1(200*Math.pow(2,r-1)),this._debug(a,"refreshing attempt",r),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ha})),(r,d)=>{const u=200*Math.pow(2,r);return d&&Sc(d)&&Date.now()+u-s<Pi})}catch(s){if(this._debug(a,"error",s),vt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",a,"url",s),fa()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await $s(this.storage,this.storageKey);if(r&&this.userStorage){let u=await $s(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:r.user},await Di(this.userStorage,this.storageKey+"-user",u)),r.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Ac()}else if(r&&!r.user&&!r.user){const u=await $s(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(r.user=u.user,await fs(this.storage,this.storageKey+"-user"),await Di(this.storage,this.storageKey,r)):r.user=Ac()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const d=((a=r.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Tc;if(this._debug(s,`session has${d?"":" not"} expired with margin of ${Tc}s`),d){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),Sc(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:p}=await this._getUser(r.access_token);!p&&(u!=null&&u.user)?(r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var a,s;if(!e)throw new xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Il;const{data:d,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!d.session)throw new xs;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={session:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(r,"error",d),vt(d)){const u={session:null,error:d};return Sc(d)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(d),d}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,a,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:a});const d=[],u=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(e,a)}catch(h){d.push(h)}});if(await Promise.all(u),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const a=Object.assign({},e),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await Di(this.userStorage,this.storageKey+"-user",{user:a.user});const r=Object.assign({},a);delete r.user;const d=gg(r);await Di(this.storage,this.storageKey,d)}else{const r=gg(a);await Di(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await fs(this.storage,this.storageKey),await fs(this.storage,this.storageKey+"-code-verifier"),await fs(this.storage,this.storageKey+"-user"),this.userStorage&&await fs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Pi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Pi}ms, refresh threshold is ${mu} ticks`),r<=mu&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Xx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const a=`#_onVisibilityChanged(${e})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,a,s){const r=[`provider=${encodeURIComponent(a)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[d,u]=await Ti(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(u)}`});r.push(p.toString())}if(s!=null&&s.queryParams){const d=new URLSearchParams(s.queryParams);r.push(d.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async a=>{var s;const{data:r,error:d}=a;return d?{data:null,error:d}:await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(vt(a))return{data:null,error:a};throw a}}async _enroll(e){try{return await this._useSession(async a=>{var s,r;const{data:d,error:u}=a;if(u)return{data:null,error:u};const p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:f}=await It(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(s=d==null?void 0:d.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((r=h==null?void 0:h.totp)===null||r===void 0)&&r.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(vt(a))return{data:null,error:a};throw a}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:r,error:d}=a;if(d)return{data:null,error:d};const{data:u,error:p}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:p})})}catch(a){if(vt(a))return{data:null,error:a};throw a}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:r,error:d}=a;return d?{data:null,error:d}:await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(vt(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(e){const{data:a,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:a.id,code:e.code})}async _listFactors(){const{data:{user:e},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=(e==null?void 0:e.factors)||[],r=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),d=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:r,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var a,s;const{data:{session:r},error:d}=e;if(d)return{data:null,error:d};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Ic(r.access_token);let p=null;u.aal&&(p=u.aal);let h=p;((s=(a=r.user.factors)===null||a===void 0?void 0:a.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const g=u.amr||[];return{data:{currentLevel:p,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,a={keys:[]}){let s=a.keys.find(p=>p.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(p=>p.kid===e),s&&this.jwks_cached_at+o1>r)return s;const{data:d,error:u}=await It(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=r,s=d.keys.find(p=>p.kid===e),!s)?null:s}async getClaims(e,a={}){try{let s=e;if(!s){const{data:k,error:j}=await this.getSession();if(j||!k.session)return{data:null,error:j};s=k.session.access_token}const{header:r,payload:d,signature:u,raw:{header:p,payload:h}}=Ic(s);a!=null&&a.allowExpired||_1(d.exp);const f=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!f){const{error:k}=await this.getUser(s);if(k)throw k;return{data:{claims:d,header:r,signature:u},error:null}}const g=P1(r.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,x1(`${p}.${h}`)))throw new fu("Invalid JWT signature");return{data:{claims:d,header:r,signature:u},error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}}}Br.nextInstanceID=0;const W1=Br;class z1 extends W1{constructor(e){super(e)}}var Y1=function(n,e,a,s){function r(d){return d instanceof a?d:new a(function(u){u(d)})}return new(a||(a=Promise))(function(d,u){function p(g){try{f(s.next(g))}catch(y){u(y)}}function h(g){try{f(s.throw(g))}catch(y){u(y)}}function f(g){g.done?d(g.value):r(g.value).then(p,h)}f((s=s.apply(n,e||[])).next())})};class Q1{constructor(e,a,s){var r,d,u;this.supabaseUrl=e,this.supabaseKey=a;const p=n1(e);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const h=`sb-${p.hostname.split(".")[0]}-auth-token`,f={db:qA,realtime:WA,auth:Object.assign(Object.assign({},JA),{storageKey:h}),global:GA},g=t1(s??{},f);this.storageKey=(r=g.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(d=g.global.headers)!==null&&d!==void 0?d:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=XA(a,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new mA(new URL("rest/v1",p).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new VA(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new nA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,a={},s={}){return this.rest.rpc(e,a,s)}channel(e,a={config:{}}){return this.realtime.channel(e,a)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,a;return Y1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:a,detectSessionInUrl:s,storage:r,userStorage:d,storageKey:u,flowType:p,lock:h,debug:f},g,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z1({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:u,autoRefreshToken:e,persistSession:a,detectSessionInUrl:s,storage:r,userStorage:d,flowType:p,lock:h,debug:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new AA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,a,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zx=(n,e,a)=>new Q1(n,e,a);function X1(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}X1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Ui={};const Z1=typeof import.meta<"u"&&"https://cgscmkxxrsveyydtimah.supabase.co"||typeof process<"u"&&(Ui==null?void 0:Ui.NEXT_PUBLIC_SUPABASE_URL)||typeof window<"u"&&window.SUPABASE_URL||"",eE=typeof import.meta<"u"&&"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnc2Nta3h4cnN2ZXl5ZHRpbWFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3MTc2OTYsImV4cCI6MjA3MzI5MzY5Nn0.ZGqT6YV3ukUiFtAgZUSWQRIlFJE8j1inrc-YTcII9pU"||typeof process<"u"&&(Ui==null?void 0:Ui.NEXT_PUBLIC_SUPABASE_ANON_KEY)||typeof window<"u"&&window.SUPABASE_ANON_KEY||"",Ma=Zx(Z1,eE),ey=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ma},Symbol.toStringTag,{value:"Module"}));async function gu(n){const{error:e}=await Ma.from("clients").insert(n);if(e)throw e}async function xu(n){const{error:e}=await Ma.from("projects").insert(n);if(e)throw e}async function yu(n){const{error:e}=await Ma.from("transactions").insert(n);if(e)throw e}async function bu(n){try{const{error:e}=await Ma.rpc("increment_promo_usage",{pid:n});if(e)throw e}catch{const{data:a,error:s}=await Ma.from("promo_codes").select("usage_count").eq("id",n).single();if(s)throw s;const r=(a==null?void 0:a.usage_count)??0,{error:d}=await Ma.from("promo_codes").update({usage_count:r+1}).eq("id",n);if(d)throw d}}async function Ng(n){const{error:e}=await Ma.from("leads").insert(n);if(e)throw e}async function tE(n,e){const{error:a}=await Ma.from("leads").update(e).eq("id",n);if(a)throw a}const Bs=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),nE=n=>{const e={className:"w-4 h-4"};switch(n){case Ft.WHATSAPP:return t.jsx(Js,{...e});case Ft.INSTAGRAM:return t.jsx(qr,{...e});case Ft.WEBSITE:return t.jsx(oa,{...e});case Ft.PHONE:return t.jsx(pv,{...e});case Ft.REFERRAL:return t.jsx(Fn,{...e});case Ft.SUGGESTION_FORM:return t.jsx(Js,{...e});default:return t.jsx(Gr,{...e})}},aE=n=>{const e=new Date(n),s=Math.abs(new Date().getTime()-e.getTime()),r=Math.ceil(s/(1e3*60*60*24));return r===1?"Hari ini":r===2?"Kemarin":`${r} hari lalu`},sE={[Ft.INSTAGRAM]:"#c13584",[Ft.WHATSAPP]:"#25D366",[Ft.WEBSITE]:"#3b82f6",[Ft.REFERRAL]:"#f59e0b",[Ft.PHONE]:"#8b5cf6",[Ft.SUGGESTION_FORM]:"#14b8a6",[Ft.OTHER]:"#64748b"},ty={[Tt.DISCUSSION]:{color:"#3b82f6",title:"Sedang Diskusi"},[Tt.FOLLOW_UP]:{color:"#8b5cf6",title:"Menunggu Follow Up"},[Tt.CONVERTED]:{color:"#10b981",title:"Dikonversi"},[Tt.REJECTED]:{color:"#ef4444",title:"Ditolak"}},iE=({formData:n,handleFormChange:e,handleSubmit:a,handleCloseModal:s,modalMode:r})=>t.jsxs("form",{onSubmit:a,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Prospek"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"contactChannel",name:"contactChannel",value:n.contactChannel,onChange:e,className:"input-field",children:Object.values(Ft).map(d=>t.jsx("option",{value:d,children:d},d))}),t.jsx("label",{htmlFor:"contactChannel",className:"input-label",children:"Sumber Prospek"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:n.location,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Lokasi (Kota)"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"whatsapp",name:"whatsapp",value:n.whatsapp,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"whatsapp",className:"input-label",children:"No. WhatsApp"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"notes",name:"notes",value:n.notes,onChange:e,className:"input-field",placeholder:" ",rows:4}),t.jsx("label",{htmlFor:"notes",className:"input-label",children:"Catatan"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:s,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:r==="add"?"Simpan":"Update"})]})]}),rE=({formData:n,handleFormChange:e,handleSubmit:a,handleCloseModal:s,packages:r,addOns:d,userProfile:u,cards:p,promoCodes:h})=>{const f=C.useMemo(()=>{const g=r.find(R=>R.id===n.packageId),y=(g==null?void 0:g.price)||0,v=d.filter(R=>n.selectedAddOnIds.includes(R.id)).reduce((R,O)=>R+O.price,0);let k=y+v,j=0,S="N/A";const w=h.find(R=>R.id===n.promoCodeId);w&&(w.discountType==="percentage"?(j=k*w.discountValue/100,S=`${w.discountValue}%`):(j=w.discountValue,S=Bs(w.discountValue)));const P=k-j,A=P-Number(n.dp);return{packagePrice:y,addOnsPrice:v,totalProject:P,remainingPayment:A,discountAmount:j,discountApplied:S}},[n.packageId,n.selectedAddOnIds,n.dp,n.promoCodeId,r,d,h]);return t.jsxs("form",{onSubmit:a,children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2",children:"Informasi Klien"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:n.clientName,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Klien"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"clientType",name:"clientType",value:n.clientType,onChange:e,className:"input-field",required:!0,children:Object.values(An).map(g=>t.jsx("option",{value:g,children:g},g))}),t.jsx("label",{htmlFor:"clientType",className:"input-label",children:"Jenis Klien"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"phone",className:"input-label",children:"Nomor Telepon"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"whatsapp",name:"whatsapp",value:n.whatsapp||"",onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"whatsapp",className:"input-label",children:"No. WhatsApp"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"instagram",name:"instagram",value:n.instagram,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"instagram",className:"input-label",children:"Instagram (@username)"})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Informasi Proyek"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"projectName",name:"projectName",value:n.projectName,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"projectName",className:"input-label",children:"Nama Proyek"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"projectType",name:"projectType",value:n.projectType,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Pilih Jenis..."}),u.projectTypes.map(g=>t.jsx("option",{value:g,children:g},g))]}),t.jsx("label",{htmlFor:"projectType",className:"input-label",children:"Jenis Proyek"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"date",name:"date",value:n.date,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"date",className:"input-label",children:"Tanggal Acara"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:n.location,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Lokasi"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2",children:"Detail Paket & Pembayaran"}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"packageId",name:"packageId",value:n.packageId,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih paket..."}),r.map(g=>t.jsx("option",{value:g.id,children:g.name},g.id))]}),t.jsx("label",{htmlFor:"packageId",className:"input-label",children:"Paket"}),t.jsxs("p",{className:"text-right text-xs text-brand-text-secondary mt-1",children:["Harga Paket: ",Bs(f.packagePrice)]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 !text-brand-accent",children:"Add-On"}),t.jsx("div",{className:"p-3 border border-brand-border bg-brand-bg rounded-lg max-h-32 overflow-y-auto space-y-2 mt-2",children:d.map(g=>t.jsxs("label",{className:"flex items-center justify-between p-2 rounded-md hover:bg-brand-input cursor-pointer",children:[t.jsx("span",{className:"text-sm text-brand-text-primary",children:g.name}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-brand-text-secondary",children:Bs(g.price)}),t.jsx("input",{type:"checkbox",id:g.id,name:"addOns",checked:n.selectedAddOnIds.includes(g.id),onChange:e})]})]},g.id))}),t.jsxs("p",{className:"text-right text-xs text-brand-text-secondary mt-1",children:["Total Harga Add-On: ",Bs(f.addOnsPrice)]})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"promoCodeId",name:"promoCodeId",value:n.promoCodeId,onChange:e,className:"input-field",children:[t.jsx("option",{value:"",children:"Tanpa Kode Promo"}),h.filter(g=>g.isActive).map(g=>t.jsxs("option",{value:g.id,children:[g.code," - (",g.discountType==="percentage"?`${g.discountValue}%`:Bs(g.discountValue),")"]},g.id))]}),t.jsx("label",{htmlFor:"promoCodeId",className:"input-label",children:"Kode Promo"}),n.promoCodeId&&t.jsxs("p",{className:"text-right text-xs text-brand-success mt-1",children:["Diskon Diterapkan: ",f.discountApplied]})]}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Total Proyek"}),t.jsx("span",{className:"text-brand-text-light",children:Bs(f.totalProject)})]}),t.jsxs("div",{className:"input-group !mt-2",children:[t.jsx("input",{type:"number",name:"dp",id:"dp",value:n.dp,onChange:e,className:"input-field text-right",placeholder:" "}),t.jsx("label",{htmlFor:"dp",className:"input-label",children:"Uang DP"})]}),Number(n.dp)>0&&t.jsxs("div",{className:"input-group !mt-2",children:[t.jsxs("select",{name:"dpDestinationCardId",value:n.dpDestinationCardId,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Setor DP ke..."}),p.map(g=>t.jsxs("option",{value:g.id,children:[g.bankName," ",g.lastFourDigits!=="CASH"?`**** ${g.lastFourDigits}`:"(Tunai)"]},g.id))]}),t.jsx("label",{htmlFor:"dpDestinationCardId",className:"input-label",children:"Kartu Tujuan"})]}),t.jsx("hr",{className:"border-brand-border"}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Sisa Pembayaran"}),t.jsx("span",{className:"text-blue-500",children:Bs(f.remainingPayment)})]})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Lainnya (Opsional)"}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"notes",name:"notes",value:n.notes,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"notes",className:"input-label",children:"Catatan Tambahan"})]})]})]}),t.jsxs("div",{className:"flex justify-end items-center gap-3 pt-8 mt-8 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:s,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:"Konversi Prospek"})]})]})},oE=({leads:n,onStatCardClick:e})=>{const a=C.useMemo(()=>{const r=n.filter(g=>g.status===Tt.DISCUSSION||g.status===Tt.FOLLOW_UP),d=new Date,u=new Date(d.getFullYear(),d.getMonth(),1),p=n.filter(g=>new Date(g.date)>=u).length,h=n.filter(g=>g.status===Tt.CONVERTED).length,f=n.length>0?h/n.length*100:0;return{activeLeads:r.length,newLeadsThisMonth:p,conversionRate:f.toFixed(1)+"%"}},[n]),s=C.useMemo(()=>{const r=n.reduce((d,u)=>(d[u.contactChannel]=(d[u.contactChannel]||0)+1,d),{});return Object.entries(r).sort(([,d],[,u])=>Number(u)-Number(d)).map(([d,u])=>({label:d,value:u,color:sE[d]||"#64748b"}))},[n]);return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.jsx("div",{onClick:()=>e("active"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(qs,{className:"w-6 h-6"}),title:"Prospek Aktif",value:a.activeLeads.toString()})}),t.jsx("div",{onClick:()=>e("new"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(Gs,{className:"w-6 h-6"}),title:"Prospek Baru (Bulan Ini)",value:a.newLeadsThisMonth.toString()})}),t.jsx("div",{className:"transition-transform duration-200 hover:scale-105 sm:col-span-2",children:t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Tingkat Konversi Keseluruhan",value:a.conversionRate})})]}),t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Distribusi Sumber Prospek"}),t.jsx(Ja,{data:s})]})]})},lE=({lead:n,onDragStart:e,onClick:a,onNextStatus:s,onShare:r})=>{const d=C.useMemo(()=>new Date(n.date)>new Date(Date.now()-864e5),[n.date]),u=C.useMemo(()=>n.status===Tt.DISCUSSION&&new Date(n.date)<new Date(Date.now()-4320*60*1e3),[n.date,n.status]),p=()=>n.status===Tt.DISCUSSION?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:h=>{h.stopPropagation(),r("package")},className:"button-secondary !p-2.5",title:"Bagikan Paket",children:t.jsx(Fn,{className:"w-4 h-4"})}),t.jsxs("button",{onClick:h=>{h.stopPropagation(),s()},className:"button-primary !text-xs !px-4 !py-2.5 inline-flex items-center gap-1.5",children:["Follow Up ",t.jsx(Hr,{className:"w-4 h-4"})]})]}):n.status===Tt.FOLLOW_UP?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:h=>{h.stopPropagation(),r("booking")},className:"button-secondary !p-2.5",title:"Kirim Form Booking",children:t.jsx(Jr,{className:"w-4 h-4"})}),t.jsxs("button",{onClick:h=>{h.stopPropagation(),s()},className:"button-primary !text-xs !px-4 !py-2.5 inline-flex items-center gap-1.5",children:["Konversi ",t.jsx(Da,{className:"w-4 h-4"})]})]}):null;return t.jsxs("div",{draggable:!0,onDragStart:h=>e(h,n.id),onClick:a,className:"p-4 bg-brand-surface rounded-xl cursor-grab border-l-4 shadow-md hover:shadow-lg transition-shadow",style:{borderLeftColor:ty[n.status].color},children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"font-semibold text-sm text-brand-text-light",children:n.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[d&&t.jsx("span",{className:"text-xs font-bold",title:"Prospek baru (24 jam terakhir)",children:""}),u&&t.jsx("span",{className:"text-xs font-bold text-yellow-400",title:"Perlu Follow Up",children:""})]})]}),n.notes&&t.jsx("p",{className:"text-xs text-brand-text-primary mt-2 pt-2 border-t border-brand-border/50 whitespace-pre-wrap truncate",children:n.notes}),t.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-brand-text-secondary",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[nE(n.contactChannel)," ",aE(n.date)]}),n.location&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ju,{className:"w-3 h-3"}),n.location]})]}),t.jsx("div",{className:"mt-3 pt-3 border-t border-brand-border/50 flex justify-end",children:p()})]})},dE=({leads:n,setLeads:e,clients:a,setClients:s,projects:r,setProjects:d,packages:u,addOns:p,transactions:h,setTransactions:f,userProfile:g,setProfile:y,showNotification:v,cards:k,setCards:j,pockets:S,setPockets:w,promoCodes:P,setPromoCodes:A})=>{const[R,O]=C.useState(null),[H,L]=C.useState(!1),[U,ne]=C.useState("add"),[ie,q]=C.useState(null),[V,ce]=C.useState({}),[Ce,Re]=C.useState(!1),[Ue,re]=C.useState(null),[De,J]=C.useState(!1),[E,T]=C.useState(new Set),[B,ue]=C.useState(""),[ke,G]=C.useState("all"),[he,Q]=C.useState(""),[le,W]=C.useState(""),[we,Be]=C.useState(null),Ze=C.useMemo(()=>`${window.location.origin}${window.location.pathname}#/public-lead-form/VEN001`,[]),Ke=C.useMemo(()=>`${window.location.origin}${window.location.pathname}#/public-booking/VEN001`,[]),Qe=C.useMemo(()=>`${window.location.origin}${window.location.pathname}#/public-packages/VEN001`,[]);C.useEffect(()=>{if(Ce&&typeof window.QRCode<"u"){const Ie=document.getElementById("lead-form-qrcode");Ie&&(Ie.innerHTML="",new window.QRCode(Ie,{text:Ze,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))}},[Ce,Ze]);const gt=Ie=>re(Ie),At=()=>{T(Ie=>{const M=new Set(Ie),de=[Tt.CONVERTED,Tt.REJECTED];return M.has(Tt.CONVERTED)?de.forEach(z=>M.delete(z)):de.forEach(z=>M.add(z)),M})},wt=C.useMemo(()=>n.filter(Ie=>{const M=B===""||Ie.name.toLowerCase().includes(B.toLowerCase())||Ie.notes&&Ie.notes.toLowerCase().includes(B.toLowerCase()),de=ke==="all"||Ie.contactChannel===ke,z=he?new Date(he):null,F=le?new Date(le):null;z&&z.setHours(0,0,0,0),F&&F.setHours(23,59,59,999);const K=new Date(Ie.date),te=(!z||K>=z)&&(!F||K<=F);return M&&de&&te}),[n,B,ke,he,le]),ft=(Ie,M)=>{Ie.dataTransfer.setData("leadId",M),O(M)},Ne=Ie=>Ie.preventDefault(),Ve=(Ie,M)=>{Ie.preventDefault();const de=Ie.dataTransfer.getData("leadId"),z=n.find(F=>F.id===de);z&&z.status!==M&&(M===Tt.CONVERTED?Je("convert",z):e(F=>F.map(K=>K.id===de?{...K,status:M,date:new Date().toISOString()}:K))),O(null)},_e=(Ie,M)=>{let de=null;if(M===Tt.DISCUSSION&&(de=Tt.FOLLOW_UP),M===Tt.FOLLOW_UP&&(de=Tt.CONVERTED),de){const z=n.find(F=>F.id===Ie);if(!z)return;de===Tt.CONVERTED?Je("convert",z):(e(F=>F.map(K=>K.id===Ie?{...K,status:de,date:new Date().toISOString()}:K)),v(`Prospek "${z.name}" dipindahkan ke "${de}".`))}},Je=(Ie,M)=>{ne(Ie),q(M||null),ce(Ie==="edit"&&M?M:Ie==="convert"&&M?{clientName:M.name,email:"",phone:"",whatsapp:M.whatsapp||"",instagram:"",clientType:An.DIRECT,projectName:`Acara ${M.name}`,projectType:g.projectTypes[0]||"",location:M.location,date:new Date().toISOString().split("T")[0],packageId:"",selectedAddOnIds:[],dp:"",dpDestinationCardId:"",notes:M.notes||"",promoCodeId:""}:{name:"",contactChannel:Ft.OTHER,location:"",whatsapp:"",notes:"",date:new Date().toISOString(),status:Tt.DISCUSSION}),L(!0)},st=()=>L(!1),dt=Ie=>{const{name:M,value:de,type:z}=Ie.target;if(z==="checkbox"){const{id:F,checked:K}=Ie.target;ce(te=>({...te,selectedAddOnIds:K?[...te.selectedAddOnIds,F]:te.selectedAddOnIds.filter(X=>X!==F)}))}else ce(F=>({...F,[M]:de}))},yt=async Ie=>{if(Ie.preventDefault(),U==="add"||U==="edit"){const M={...V,id:U==="add"?`LEAD-${Date.now()}`:ie.id};e(U==="add"?de=>[M,...de]:de=>de.map(z=>z.id===ie.id?M:z)),v(U==="add"?"Prospek baru berhasil ditambahkan.":"Prospek berhasil diperbarui.")}else if(U==="convert"&&ie){const M=u.find(D=>D.id===V.packageId);if(!M){alert("Harap pilih paket.");return}const de=p.filter(D=>V.selectedAddOnIds.includes(D.id)),z=M.price+de.reduce((D,ae)=>D+ae.price,0);let F=0;const K=P.find(D=>D.id===V.promoCodeId);K&&(K.discountType==="percentage"?F=z*K.discountValue/100:F=K.discountValue);const te=z-F,X=Number(V.dp)||0,fe=`CLI${Date.now()}`,ye={id:fe,name:V.clientName,email:V.email,phone:V.phone,whatsapp:V.whatsapp,instagram:"",clientType:An.DIRECT,since:new Date().toISOString(),status:Ot.ACTIVE,lastContact:new Date().toISOString(),portalAccessId:crypto.randomUUID()};s(D=>[ye,...D]);const _={id:`PRJ${Date.now()}`,projectName:`Acara ${V.clientName}`,clientName:V.clientName,clientId:fe,projectType:V.projectType,packageName:M.name,packageId:M.id,addOns:de,date:V.date,location:V.location,progress:10,status:"Dikonfirmasi",totalCost:te,amountPaid:X,paymentStatus:X>=te?_t.LUNAS:X>0?_t.DP_TERBAYAR:_t.BELUM_BAYAR,team:[],notes:V.notes,promoCodeId:V.promoCodeId||void 0,discountAmount:F>0?F:void 0};if(d(D=>[_,...D]),X>0){const D={id:`TRN-DP-${_.id}`,date:new Date().toISOString(),description:`DP Proyek ${_.projectName}`,amount:X,type:$e.INCOME,projectId:_.id,category:"DP Proyek",method:"Transfer Bank",cardId:V.dpDestinationCardId};f(ae=>[...ae,D].sort((se,Ae)=>new Date(Ae.date).getTime()-new Date(se.date).getTime())),j(ae=>ae.map(se=>se.id===V.dpDestinationCardId?{...se,balance:se.balance+X}:se))}K&&A(D=>D.map(ae=>ae.id===K.id?{...ae,usageCount:ae.usageCount+1}:ae)),e(D=>D.map(ae=>ae.id===ie.id?{...ae,status:Tt.CONVERTED,notes:`Dikonversi menjadi Klien ID: ${fe}`}:ae));try{await gu({id:ye.id,name:ye.name,email:ye.email,phone:ye.phone,whatsapp:ye.whatsapp,instagram:ye.instagram,client_type:ye.clientType,since:new Date().toISOString().split("T")[0],status:"ACTIVE",last_contact:new Date().toISOString(),portal_access_id:ye.portalAccessId}),await xu({id:_.id,project_name:_.projectName,client_id:ye.id,client_name:ye.name,project_type:_.projectType,package_id:M.id,package_name:M.name,date:V.date||null,location:_.location||null,progress:_.progress,status:_.status,booking_status:"DIKONFIRMASI",total_cost:_.totalCost,amount_paid:_.amountPaid,payment_status:X>=te?"LUNAS":X>0?"DP_TERBAYAR":"BELUM_BAYAR",notes:_.notes||null,dp_proof_url:null,promo_code_id:_.promoCodeId,discount_amount:_.discountAmount||null,transport_cost:null,completed_digital_items:[]}),X>0&&V.dpDestinationCardId&&await yu({id:`TRN-DP-${_.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${_.projectName}`,category:"DP Proyek",amount:X,type:"INCOME",method:"Transfer Bank",card_id:V.dpDestinationCardId,pocket_id:null,project_id:_.id}),K&&await bu(K.id),await tE(ie.id,{status:"Dikonversi",date:new Date().toISOString()})}catch(D){console.error("Supabase persistence failed:",D)}v(`Prospek ${ie.name} berhasil dikonversi menjadi klien!`)}st()},Dt=C.useMemo(()=>{const Ie={[Tt.DISCUSSION]:[],[Tt.FOLLOW_UP]:[],[Tt.CONVERTED]:[],[Tt.REJECTED]:[]};return wt.forEach(M=>{var de;(de=Ie[M.status])==null||de.push(M)}),Ie},[wt]),ze=C.useMemo(()=>Object.entries(Dt).filter(([Ie])=>!E.has(Ie)),[Dt,E]),ot=C.useMemo(()=>{if(!Ue)return{title:"",items:[],groupedItems:null};switch(Ue){case"active":return{title:"Daftar Prospek Aktif",items:n.filter(F=>F.status===Tt.DISCUSSION||F.status===Tt.FOLLOW_UP),groupedItems:null};case"new":const Ie=new Date,M=new Date(Ie.getFullYear(),Ie.getMonth(),1);return{title:"Daftar Prospek Baru Bulan Ini",items:n.filter(F=>new Date(F.date)>=M),groupedItems:null};case"source":const de=n.reduce((F,K)=>{const te=K.contactChannel;return F[te]||(F[te]=[]),F[te].push(K),F},{});return{title:"Rincian Prospek Berdasarkan Sumber",items:[],groupedItems:de};case"location":const z=n.reduce((F,K)=>{const te=K.location.trim()||"Tidak Diketahui";return F[te]||(F[te]=[]),F[te].push(K),F},{});return{title:"Rincian Prospek Berdasarkan Lokasi",items:[],groupedItems:z};default:return{title:"",items:[],groupedItems:null}}},[Ue,n]);return t.jsxs(t.Fragment,{children:[n.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx(Gr,{className:"mx-auto h-16 w-16 text-brand-accent"}),t.jsx("h2",{className:"mt-4 text-2xl font-bold text-brand-text-light",children:"Selamat Datang di Halaman Prospek!"}),t.jsx("p",{className:"mt-2 text-brand-text-secondary max-w-lg mx-auto",children:"Halaman ini adalah tempat Anda mengelola semua calon klien (prospek) sebelum mereka resmi menjadi proyek."}),t.jsxs("button",{onClick:()=>Je("add"),className:"mt-8 button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah Prospek Pertama Anda"]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Prospek",subtitle:"Kelola calon klien Anda dari kontak pertama hingga menjadi proyek.",children:t.jsx("button",{onClick:()=>J(!0),className:"button-secondary",children:"Pelajari Halaman Ini"})}),t.jsx(oE,{leads:n,onStatCardClick:gt}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"input-group flex-grow !mt-0 w-full md:w-auto",children:[t.jsx("input",{type:"search",value:B,onChange:Ie=>ue(Ie.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Cari prospek..."})]}),t.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[t.jsx("input",{type:"date",value:he,onChange:Ie=>Q(Ie.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsx("span",{className:"text-brand-text-secondary",children:"-"}),t.jsx("input",{type:"date",value:le,onChange:Ie=>W(Ie.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsxs("select",{value:ke,onChange:Ie=>G(Ie.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full",children:[t.jsx("option",{value:"all",children:"Semua Sumber"}),Object.values(Ft).map(Ie=>t.jsx("option",{value:Ie,children:Ie},Ie))]}),t.jsx("button",{onClick:At,className:"button-secondary text-sm px-3 py-2.5 inline-flex items-center gap-2 flex-shrink-0",title:E.has(Tt.CONVERTED)?"Tampilkan Kolom Selesai":"Sembunyikan Kolom Selesai",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Re(!0),className:"button-secondary p-2.5",title:"Bagikan Form Prospek",children:t.jsx(Fn,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Je("add"),className:"button-primary p-2.5",title:"Tambah Prospek Manual",children:t.jsx(nn,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4",children:ze.map(([Ie,M])=>{const de=ty[Ie];return t.jsxs("div",{onDragOver:Ne,onDrop:z=>Ve(z,Ie),className:"w-80 flex-shrink-0 bg-brand-bg rounded-2xl border border-brand-border flex flex-col",children:[t.jsxs("div",{className:"p-4 font-semibold text-brand-text-light border-b-2 flex justify-between items-center sticky top-0 bg-brand-bg/80 backdrop-blur-sm rounded-t-2xl z-10",style:{borderColor:de.color},children:[t.jsx("span",{children:de.title}),t.jsx("span",{className:"text-sm font-normal bg-brand-surface text-brand-text-secondary px-2.5 py-1 rounded-full",children:M.length})]}),t.jsx("div",{className:"p-3 space-y-3 h-[calc(100vh-550px)] overflow-y-auto",children:M.map(z=>t.jsx(lE,{lead:z,onDragStart:ft,onClick:()=>Je("edit",z),onNextStatus:()=>_e(z.id,z.status),onShare:F=>Be({type:F,lead:z})},z.id))})]},Ie)})})]}),t.jsx(nt,{isOpen:H,onClose:st,title:U==="add"?"Tambah Prospek Baru":U==="edit"?"Edit Prospek":"Konversi Prospek Menjadi Klien",size:U==="convert"?"4xl":"lg",children:U==="convert"?t.jsx(rE,{formData:V,handleFormChange:dt,handleSubmit:yt,handleCloseModal:st,packages:u,addOns:p,userProfile:g,cards:k,promoCodes:P}):t.jsx(iE,{formData:V,handleFormChange:dt,handleSubmit:yt,handleCloseModal:st,modalMode:U})}),t.jsx(nt,{isOpen:Ce,onClose:()=>Re(!1),title:"Bagikan Formulir Prospek Publik",size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"lead-form-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:Ze}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ze),v("Tautan berhasil disalin!")},className:"button-secondary w-full",children:"Salin Tautan"}),t.jsx("a",{href:`https://wa.me/?text=Silakan%20isi%20formulir%20berikut%20untuk%20memulai%3A%20${encodeURIComponent(Ze)}`,target:"_blank",rel:"noopener noreferrer",className:"button-primary w-full",children:"Bagikan ke WA"})]})]})}),we&&t.jsx(cE,{type:we.type,lead:we.lead,userProfile:g,publicBookingFormUrl:Ke,publicPackagesUrl:Qe,onClose:()=>Be(null),showNotification:v,setProfile:y}),t.jsx(nt,{isOpen:!!Ue,onClose:()=>re(null),title:ot.title,size:"2xl",children:t.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:ot.items.length>0?t.jsx("div",{className:"space-y-3",children:ot.items.map(Ie=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:Ie.name}),t.jsxs("p",{className:"text-sm text-brand-text-secondary",children:[Ie.location," - ",Ie.contactChannel]})]}),t.jsx("span",{className:"text-xs text-brand-text-secondary",children:new Date(Ie.date).toLocaleDateString("id-ID")})]},Ie.id))}):ot.groupedItems?t.jsx("div",{className:"space-y-4",children:Object.entries(ot.groupedItems).map(([Ie,M])=>t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gradient border-b border-brand-border pb-2 mb-2",children:[Ie," (",M.length,")"]}),t.jsx("div",{className:"space-y-2",children:M.map(de=>t.jsx("div",{className:"p-2 bg-brand-bg rounded-md",children:t.jsx("p",{className:"font-medium text-sm text-brand-text-light",children:de.name})},de.id))})]},Ie))}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada data untuk ditampilkan."})})})]})},cE=({type:n,lead:e,userProfile:a,publicPackagesUrl:s,publicBookingFormUrl:r,onClose:d,showNotification:u,setProfile:p})=>{const[h,f]=C.useState("");C.useEffect(()=>{let k="";if(n==="package")k=(a.packageShareTemplate||"").replace("{leadName}",e.name).replace("{companyName}",a.companyName).replace("{packageLink}",s);else{const j=`${r}?leadId=${e.id}`;k=(a.bookingFormTemplate||"").replace("{leadName}",e.name).replace("{companyName}",a.companyName).replace("{bookingFormLink}",j)}f(k)},[n,e,a,s,r]);const g=()=>{if(!e.whatsapp){u("Nomor WhatsApp untuk prospek ini tidak tersedia.");return}const k=`https://wa.me/${Wa(e.whatsapp)}?text=${encodeURIComponent(h)}`;window.open(k,"_blank")},y=()=>{let k=h;if(n==="package")k=h.replace(e.name,"{leadName}").replace(a.companyName,"{companyName}").replace(s,"{packageLink}"),p(j=>({...j,packageShareTemplate:k}));else{const j=`${r}?leadId=${e.id}`;k=h.replace(e.name,"{leadName}").replace(a.companyName,"{companyName}").replace(j,"{bookingFormLink}"),p(S=>({...S,bookingFormTemplate:k}))}u("Template berhasil disimpan!")},v=n==="package"?`Bagikan Paket ke ${e.name}`:`Kirim Form Booking ke ${e.name}`;return t.jsx(nt,{isOpen:!0,onClose:d,title:v,children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("textarea",{value:h,onChange:k=>f(k.target.value),rows:8,className:"input-field w-full"}),t.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-brand-border",children:[t.jsx("button",{onClick:y,className:"button-secondary",children:"Simpan Template Ini"}),t.jsxs("button",{onClick:g,className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan ke WhatsApp"]})]})]})})},ys=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),kg=n=>{if(!n)return"";const e=new Date(n);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`};sa.BARU+"",sa.TERKONFIRMASI+"",sa.DITOLAK+"";const uE=({bookings:n})=>{const[e,a]=C.useState(null),s=C.useMemo(()=>{const u=new Date().getFullYear(),h=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"].map(f=>({name:f,count:0,value:0}));return n.forEach(f=>{const g=new Date(f.lead.date);if(g.getFullYear()===u){const y=g.getMonth();h[y].count+=1,h[y].value+=f.project.totalCost}}),h},[n]),r=Math.max(...s.map(u=>u.count),1),d=Math.max(...s.map(u=>u.value),1);return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border h-full",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-6",children:"Grafik Booking Tahun Ini"}),t.jsxs("div",{className:"h-48 flex justify-between items-end gap-2 relative",children:[s.map((u,p)=>{const h=Math.max(u.count/r*100,2),f=Math.max(u.value/d*100,2);return t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full group relative",onMouseEnter:()=>a({x:p/s.length*100,y:0,data:u}),onMouseLeave:()=>a(null),children:[t.jsxs("div",{className:"flex-1 flex items-end w-full justify-center gap-1",children:[t.jsx("div",{className:"bg-blue-500/30 w-1/2 rounded-md transition-colors hover:bg-blue-500",style:{height:`${h}%`},title:`Jumlah: ${u.count}`}),t.jsx("div",{className:"bg-green-500/30 w-1/2 rounded-md transition-colors hover:bg-green-500",style:{height:`${f}%`},title:`Nilai: ${ys(u.value)}`})]}),t.jsx("span",{className:"text-xs text-brand-text-secondary mt-2",children:u.name})]},u.name)}),e&&t.jsxs("div",{className:"absolute -top-12 bg-brand-bg p-2 rounded-lg shadow-xl text-xs",style:{left:`${e.x}%`},children:[t.jsx("p",{className:"font-bold",children:e.data.name}),t.jsxs("p",{children:["Jumlah: ",e.data.count]}),t.jsxs("p",{children:["Nilai: ",ys(e.data.value)]})]})]}),t.jsxs("div",{className:"flex justify-center items-center gap-4 text-xs mt-4",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500/30 rounded-sm"})," Jumlah Booking"]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500/30 rounded-sm"})," Nilai Booking"]})]})]})},mE=({project:n,client:e,onClose:a,showNotification:s,userProfile:r,setProfile:d})=>{var j;const u=r.chatTemplates||Gc,[p,h]=C.useState(((j=u[0])==null?void 0:j.id)||""),[f,g]=C.useState("");C.useEffect(()=>{var P;const w=(((P=u.find(A=>A.id===p))==null?void 0:P.template)||"").replace("{clientName}",e.name).replace("{projectName}",n.projectName);g(w)},[p,e,n,u]);const y=S=>{h(S)},v=()=>{if(!e.phone){s("Nomor telepon klien tidak tersedia.");return}const S=Wa(e.phone),w=encodeURIComponent(f),P=`https://wa.me/${S}?text=${w}`;window.open(P,"_blank"),a()},k=()=>{const S=f.replace(new RegExp(e.name,"g"),"{clientName}").replace(new RegExp(n.projectName,"g"),"{projectName}");d(w=>{const P=(w.chatTemplates||Gc).map(A=>A.id===p?{...A,template:S}:A);return{...w,chatTemplates:P}}),s("Template berhasil disimpan!")};return t.jsx(nt,{isOpen:!0,onClose:a,title:`Kirim Pesan ke ${e.name}`,size:"2xl",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-brand-text-secondary",children:"Gunakan Template Pesan:"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:u.map(S=>t.jsx("button",{type:"button",onClick:()=>y(S.id),className:`button-secondary !text-xs !px-3 !py-1.5 ${p===S.id?"!bg-brand-accent !text-white !border-brand-accent":""}`,children:S.title},S.id))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{value:f,onChange:S=>g(S.target.value),rows:8,className:"input-field"}),t.jsx("label",{className:"input-label",children:"Isi Pesan"})]}),t.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-brand-border",children:[t.jsx("button",{onClick:k,className:"button-secondary",children:"Simpan Template Ini"}),t.jsxs("button",{onClick:v,className:"button-primary inline-flex items-center gap-2",children:[t.jsx($r,{className:"w-5 h-5"})," Kirim via WhatsApp"]})]})]})})},pE=({leads:n,clients:e,projects:a,setProjects:s,packages:r,userProfile:d,setProfile:u,handleNavigation:p,showNotification:h})=>{const[f,g]=C.useState(""),[y,v]=C.useState(""),[k,j]=C.useState(null),[S,w]=C.useState(null),[P,A]=C.useState(null),[R,O]=C.useState(!1),[H,L]=C.useState(!1),U=C.useMemo(()=>a.filter(J=>J.bookingStatus).map(J=>({lead:n.find(T=>{var B;return(B=T.notes)==null?void 0:B.includes(J.clientId)})||{id:`lead-fallback-${J.id}`,name:J.clientName,date:J.date},project:J})).sort((J,E)=>new Date(E.lead.date).getTime()-new Date(J.lead.date).getTime()),[a,n]),ne=C.useMemo(()=>U.filter(J=>J.project.bookingStatus===sa.BARU),[U]),ie=C.useMemo(()=>U.filter(J=>J.project.bookingStatus===sa.TERKONFIRMASI),[U]),q=C.useMemo(()=>ne.filter(J=>{const E=f?new Date(f):null,T=y?new Date(y):null;E&&E.setHours(0,0,0,0),T&&T.setHours(23,59,59,999);const B=new Date(J.lead.date);return(!E||B>=E)&&(!T||B<=T)}),[ne,f,y]),V=C.useMemo(()=>`${window.location.origin}${window.location.pathname}#/public-booking/VEN001`,[]),ce=C.useMemo(()=>{const J=U.reduce((T,B)=>{const ue=B.project.packageName||"Unknown";return T[ue]=(T[ue]||0)+1,T},{}),E=["#3b82f6","#10b981","#f97316","#8b5cf6","#ef4444"];return Object.entries(J).map(([T,B],ue)=>({label:T,value:B,color:E[ue%E.length]}))},[U]);C.useEffect(()=>{H&&setTimeout(()=>{const J=document.getElementById("booking-form-qrcode");J&&typeof window.QRCode<"u"&&(J.innerHTML="",new window.QRCode(J,{text:V,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))},100)},[H,V]);const Ce=()=>{navigator.clipboard.writeText(V).then(()=>{h("Tautan formulir booking berhasil disalin!")})},Re=()=>{const J=document.querySelector("#booking-form-qrcode canvas");if(J){const E=document.createElement("a");E.download="form-booking-qr.png",E.href=J.toDataURL(),E.click()}},Ue=C.useMemo(()=>{const J=U.reduce((E,T)=>(E[T.project.packageName]=(E[T.project.packageName]||0)+1,E),{});return Object.keys(J).sort((E,T)=>J[T]-J[E])[0]||"N/A"},[U]),re=C.useMemo(()=>{if(!P)return{title:"",bookings:[]};switch(P){case"total":return{title:"Semua Booking",bookings:U};case"value":return{title:"Semua Booking (berdasarkan Nilai)",bookings:U};case"popular":return{title:`Booking untuk Paket: ${Ue}`,bookings:U.filter(J=>J.project.packageName===Ue)};case"new":return{title:"Booking Baru",bookings:ne};default:return{title:"",bookings:[]}}},[P,U,ne,Ue]),De=(J,E)=>{s(T=>T.map(B=>B.id===J?{...B,bookingStatus:E}:B)),h(`Booking berhasil ${E===sa.TERKONFIRMASI?"dikonfirmasi":"ditolak"}.`)};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Daftar Booking",subtitle:"Konfirmasi booking baru dan lihat riwayat booking yang sudah dikonfirmasi.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>O(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>L(!0),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Form Booking"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{onClick:()=>A("total"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Total Booking",value:U.length.toString()})}),t.jsx("div",{onClick:()=>A("value"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Nilai Booking",value:ys(U.reduce((J,E)=>J+E.project.totalCost,0))})}),t.jsx("div",{onClick:()=>A("popular"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(Vg,{className:"w-6 h-6"}),title:"Paket Terpopuler",value:Ue})}),t.jsx("div",{onClick:()=>A("new"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(Js,{className:"w-6 h-6"}),title:"Booking Baru",value:ne.length.toString()})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[t.jsx("div",{className:"lg:col-span-3",children:t.jsx(uE,{bookings:U})}),t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-4",children:"Distribusi Paket"}),t.jsx(Ja,{data:ce})]})]}),t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Booking Baru Menunggu Konfirmasi (",ne.length,")"]})}),t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx("input",{type:"date",value:f,onChange:J=>g(J.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full",placeholder:"Dari Tanggal"}),t.jsx("input",{type:"date",value:y,onChange:J=>v(J.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full",placeholder:"Sampai Tanggal"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Tanggal Booking"}),t.jsx("th",{className:"px-4 py-3",children:"Nama Klien"}),t.jsx("th",{className:"px-4 py-3",children:"Nama Proyek"}),t.jsx("th",{className:"px-4 py-3",children:"Jenis Acara"}),t.jsx("th",{className:"px-4 py-3",children:"Lokasi"}),t.jsx("th",{className:"px-4 py-3",children:"Paket"}),t.jsx("th",{className:"px-4 py-3 text-right",children:"Total Biaya"}),t.jsx("th",{className:"px-4 py-3 text-right",children:"DP Dibayar"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Bukti Bayar"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[q.map(J=>t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:kg(J.lead.date)}),t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:J.project.clientName}),t.jsx("td",{className:"px-4 py-3",children:J.project.projectName}),t.jsx("td",{className:"px-4 py-3",children:J.project.projectType}),t.jsx("td",{className:"px-4 py-3",children:J.project.location}),t.jsx("td",{className:"px-4 py-3",children:J.project.packageName}),t.jsx("td",{className:"px-4 py-3 text-right",children:ys(J.project.totalCost)}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold text-green-400",children:ys(J.project.amountPaid)}),t.jsx("td",{className:"px-4 py-3 text-center",children:J.project.dpProofUrl?t.jsx("button",{onClick:()=>j(J.project.dpProofUrl),className:"button-secondary !text-xs !px-3 !py-1.5",children:"Lihat Bukti"}):t.jsx("span",{className:"text-brand-text-secondary",children:"-"})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>De(J.project.id,sa.TERKONFIRMASI),className:"button-primary !text-xs !px-3 !py-1.5",children:"Konfirmasi"})})]},J.project.id)),q.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:10,className:"text-center py-8 text-brand-text-secondary",children:"Tidak ada booking baru yang cocok dengan filter."})})]})]})})]}),t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Riwayat Booking Dikonfirmasi (",ie.length,")"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Tanggal Booking"}),t.jsx("th",{className:"px-4 py-3",children:"Nama Klien"}),t.jsx("th",{className:"px-4 py-3",children:"Nama Proyek"}),t.jsx("th",{className:"px-4 py-3",children:"Jenis Acara"}),t.jsx("th",{className:"px-4 py-3",children:"Lokasi"}),t.jsx("th",{className:"px-4 py-3",children:"Paket"}),t.jsx("th",{className:"px-4 py-3 text-right",children:"Total Biaya"}),t.jsx("th",{className:"px-4 py-3 text-right",children:"DP Dibayar"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Bukti Bayar"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[ie.map(J=>{const E=e.find(T=>T.id===J.project.clientId);return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:kg(J.lead.date)}),t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:J.project.clientName}),t.jsx("td",{className:"px-4 py-3",children:J.project.projectName}),t.jsx("td",{className:"px-4 py-3",children:J.project.projectType}),t.jsx("td",{className:"px-4 py-3",children:J.project.location}),t.jsx("td",{className:"px-4 py-3",children:J.project.packageName}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:ys(J.project.totalCost)}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold text-green-400",children:ys(J.project.amountPaid)}),t.jsx("td",{className:"px-4 py-3 text-center",children:J.project.dpProofUrl?t.jsx("button",{onClick:()=>j(J.project.dpProofUrl),className:"button-secondary !text-xs !px-3 !py-1.5",children:"Lihat Bukti"}):t.jsx("span",{className:"text-brand-text-secondary",children:"-"})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E&&t.jsxs("button",{onClick:()=>w({project:J.project,client:E}),className:"button-secondary text-xs px-3 py-1.5 inline-flex items-center gap-1.5",title:"Kirim Pesan WhatsApp",children:[t.jsx($r,{className:"w-4 h-4"})," Chat & WA"]}),t.jsx("button",{onClick:()=>p(Te.CLIENTS,{type:"VIEW_CLIENT_DETAILS",id:J.project.clientId}),className:"button-secondary text-xs px-3 py-1.5",children:"Lihat Detail"})]})})]},J.project.id)}),ie.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:10,className:"text-center py-8 text-brand-text-secondary",children:"Belum ada booking yang dikonfirmasi."})})]})]})})]}),t.jsx(nt,{isOpen:R,onClose:()=>O(!1),title:"Panduan Halaman Booking",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat kendali untuk semua booking yang masuk dari formulir publik."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Statistik:"})," Kartu di atas memberikan ringkasan cepat. Klik kartu untuk melihat detailnya."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Grafik:"})," Visualisasikan tren booking per bulan dan popularitas paket."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Booking Baru:"})," Tabel teratas berisi semua booking yang menunggu tindakan Anda. Verifikasi bukti bayar dan konfirmasi booking untuk memindahkannya ke riwayat."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Riwayat Booking:"})," Tabel bawah berisi semua booking yang sudah Anda konfirmasi. Dari sini, Anda bisa memulai komunikasi dengan klien atau melihat detail proyek lebih lanjut."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Aksi Cepat:"}),' Gunakan tombol "Konfirmasi", "Chat & WA", dan "Lihat Detail" untuk alur kerja yang lebih cepat.']})]})]})}),t.jsx(nt,{isOpen:H,onClose:()=>L(!1),title:"Bagikan Formulir Booking Publik",size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"booking-form-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:V}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:Ce,className:"button-secondary w-full",children:"Salin Tautan"}),t.jsxs("button",{onClick:Re,className:"button-primary w-full inline-flex items-center justify-center gap-2",children:[t.jsx($i,{className:"w-4 h-4"})," Unduh QR"]})]})]})}),t.jsx(nt,{isOpen:!!P,onClose:()=>A(null),title:re.title,size:"2xl",children:t.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:t.jsx("div",{className:"space-y-3",children:re.bookings.length>0?re.bookings.map(J=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:J.project.projectName}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:J.project.clientName})]}),t.jsx("span",{className:"font-semibold text-brand-text-primary",children:ys(J.project.totalCost)})]},J.project.id)):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada booking dalam kategori ini."})})})}),S&&t.jsx(mE,{project:S.project,client:S.client,onClose:()=>w(null),showNotification:h,userProfile:d,setProfile:u}),t.jsx(nt,{isOpen:!!k,onClose:()=>j(null),title:"Bukti Pembayaran",children:k&&t.jsx("img",{src:k,alt:"Bukti Pembayaran Penuh",className:"w-full h-auto rounded-lg"})})]})},Al=({onSave:n,onClose:e})=>{const a=C.useRef(null),s=C.useRef(null),[r,d]=C.useState(!1),[u,p]=C.useState(!1),h=()=>{const S=a.current;if(!S)return;const w=Math.max(window.devicePixelRatio||1,1),P=S.getBoundingClientRect();S.width=P.width*w,S.height=P.height*w;const A=S.getContext("2d");if(!A)return;A.scale(w,w);const R=document.documentElement.classList.contains("dark");A.strokeStyle=R?"var(--color-text-light)":"var(--color-text-primary)",A.lineWidth=2.5,A.lineCap="round",A.lineJoin="round"};C.useEffect(()=>(h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[]);const f=S=>{const w=a.current;if(!w)return{offsetX:0,offsetY:0};const P=w.getBoundingClientRect();return S.nativeEvent instanceof MouseEvent?{offsetX:S.nativeEvent.clientX-P.left,offsetY:S.nativeEvent.clientY-P.top}:S.nativeEvent instanceof TouchEvent&&S.nativeEvent.touches.length>0?{offsetX:S.nativeEvent.touches[0].clientX-P.left,offsetY:S.nativeEvent.touches[0].clientY-P.top}:{offsetX:0,offsetY:0}},g=S=>{S.preventDefault();const w=a.current,P=w==null?void 0:w.getContext("2d");if(!w||!P)return;const{offsetX:A,offsetY:R}=f(S);d(!0),u||p(!0),s.current={x:A,y:R},P.beginPath(),P.moveTo(A,R)},y=S=>{if(!r)return;S.preventDefault();const w=a.current,P=w==null?void 0:w.getContext("2d");if(!w||!P||!s.current)return;const{offsetX:A,offsetY:R}=f(S),O=(s.current.x+A)/2,H=(s.current.y+R)/2;P.quadraticCurveTo(s.current.x,s.current.y,O,H),P.stroke(),s.current={x:A,y:R}},v=()=>{if(!r)return;const S=a.current,w=S==null?void 0:S.getContext("2d");!S||!w||!s.current||(w.lineTo(s.current.x,s.current.y),w.stroke(),w.closePath(),d(!1),s.current=null)},k=()=>{const S=a.current;if(!S)return;const w=S.getContext("2d");if(!w)return;const P=Math.max(window.devicePixelRatio||1,1);w.clearRect(0,0,S.width/P,S.height/P),p(!1)},j=()=>{const S=a.current;S&&u?n(S.toDataURL("image/png")):alert("Mohon bubuhkan tanda tangan terlebih dahulu.")};return t.jsxs("div",{className:"flex flex-col items-center w-full",children:[t.jsx("p",{className:"text-sm text-brand-text-secondary mb-3 text-center",children:"Gunakan mouse atau jari Anda untuk menandatangani di area di bawah ini."}),t.jsxs("div",{className:"relative w-full aspect-square md:aspect-[4/3] lg:aspect-[2/1] rounded-lg border-2 border-dashed border-brand-border overflow-hidden",children:[t.jsx("canvas",{ref:a,className:"w-full h-full bg-brand-bg cursor-crosshair",onMouseDown:g,onMouseMove:y,onMouseUp:v,onMouseLeave:v,onTouchStart:g,onTouchMove:y,onTouchEnd:v}),!u&&t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none text-brand-text-secondary/60",children:[t.jsx("p",{className:"font-semibold text-lg",children:"Tanda Tangan di Sini"}),t.jsx("div",{className:"w-3/4 h-px bg-brand-border mt-10"})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full justify-between items-center mt-4 gap-3",children:[t.jsxs("button",{onClick:k,disabled:!u,className:"w-full sm:w-auto button-secondary text-sm inline-flex items-center justify-center gap-2",children:[t.jsx(fn,{className:"w-4 h-4"})," Ulangi"]}),t.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-3",children:[t.jsx("button",{onClick:e,className:"w-full sm:w-auto button-secondary text-sm",children:"Batal"}),t.jsx("button",{onClick:j,disabled:!u,className:"w-full sm:w-auto button-primary text-sm",children:"Simpan Tanda Tangan"})]})]})]})},Et=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),hE=n=>{if(!n)return"bg-gray-500/20 text-gray-400";switch(n){case _t.LUNAS:return"bg-green-500/20 text-green-400";case _t.DP_TERBAYAR:return"bg-blue-500/20 text-blue-400";case _t.BELUM_BAYAR:return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},_c={clientId:"",clientName:"",email:"",phone:"",whatsapp:"",instagram:"",clientType:An.DIRECT,projectId:"",projectName:"",projectType:"",location:"",date:new Date().toISOString().split("T")[0],packageId:"",selectedAddOnIds:[],dp:"",dpDestinationCardId:"",notes:"",accommodation:"",driveLink:"",promoCodeId:""},fE=(n,e,a)=>{const r=[n.join(","),...e.map(h=>h.map(f=>{const g=String(f);return g.includes(",")||g.includes('"')||g.includes(`
`)?`"${g.replace(/"/g,'""')}"`:g}).join(","))].join(`
`),d=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(d),p=document.createElement("a");p.setAttribute("href",u),p.setAttribute("download",a),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},gE=({isOpen:n,onClose:e,client:a,projects:s,userProfile:r,showNotification:d})=>{const[u,p]=C.useState(""),[h,f]=C.useState("friendly_reminder"),g=[{id:"friendly_reminder",title:"Pengingat Ramah",template:`Halo {clientName},

Semoga sehat selalu. Kami ingin mengingatkan perihal sisa pembayaran untuk proyek Anda.

Berikut rinciannya:
{projectDetails}

Total Sisa Tagihan: *{totalDue}*

Anda dapat melihat rincian invoice dan riwayat pembayaran melalui Portal Klien Anda di sini:
{portalLink}

Pembayaran dapat dilakukan ke rekening berikut:
{bankAccount}

Mohon konfirmasinya jika pembayaran telah dilakukan. Terima kasih!

Salam,
Tim {companyName}`},{id:"due_date_reminder",title:"Pengingat Jatuh Tempo",template:`Yth. Bapak/Ibu {clientName},

Menurut catatan kami, sisa pembayaran proyek Anda akan jatuh tempo. Berikut adalah rincian tagihan Anda:

{projectDetails}

Total Sisa Tagihan: *{totalDue}*

Untuk melihat detail invoice, silakan akses Portal Klien Anda di tautan berikut:
{portalLink}

Kami mohon kesediaan Anda untuk menyelesaikan pembayaran sebelum tanggal jatuh tempo untuk menghindari kendala. Pembayaran dapat ditransfer ke:
{bankAccount}

Terima kasih atas kerja samanya.

Hormat kami,
Tim {companyName}`}];C.useEffect(()=>{var R;if(!a)return;const v=s.filter(O=>O.clientId===a.id&&O.totalCost-O.amountPaid>0);if(v.length===0)return;const k=v.reduce((O,H)=>O+(H.totalCost-H.amountPaid),0),j=v.map(O=>`- Proyek: *${O.projectName}*
  Sisa Tagihan: ${Et(O.totalCost-O.amountPaid)}`).join(`
`),S=window.location.pathname.replace(/index\.html$/,""),w=`${window.location.origin}${S}#/portal/${a.portalAccessId}`,A=(((R=g.find(O=>O.id===h))==null?void 0:R.template)||g[0].template).replace("{clientName}",a.name).replace("{projectDetails}",j).replace("{totalDue}",Et(k)).replace("{portalLink}",w).replace("{bankAccount}",r.bankAccount||"N/A").replace(/{companyName}/g,r.companyName||"Tim Kami");p(A)},[a,s,r,h]);const y=()=>{if(!a||!a.phone&&!a.whatsapp){d("Nomor telepon klien tidak tersedia.");return}if(!u.trim()){d("Pesan tidak boleh kosong.");return}const v=Wa(a.whatsapp||a.phone),k=encodeURIComponent(u),j=`https://wa.me/${v}?text=${k}`;window.open(j,"_blank"),e()};return!n||!a?null:t.jsx(nt,{isOpen:n,onClose:e,title:`Kirim Tagihan ke ${a.name}`,size:"2xl",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-brand-text-secondary",children:"Gunakan Template Pesan:"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:g.map(v=>t.jsx("button",{type:"button",onClick:()=>f(v.id),className:`button-secondary !text-xs !px-3 !py-1.5 ${h===v.id?"!bg-brand-accent !text-white !border-brand-accent":""}`,children:v.title},v.id))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{value:u,onChange:v=>p(v.target.value),rows:12,className:"input-field"}),t.jsx("label",{className:"input-label",children:"Isi Pesan"})]}),t.jsx("div",{className:"flex justify-end items-center pt-4 border-t border-brand-border",children:t.jsxs("button",{onClick:y,className:"button-primary inline-flex items-center gap-2",children:[t.jsx($r,{className:"w-5 h-5"})," Kirim via WhatsApp"]})})]})})},xE=({formData:n,handleFormChange:e,handleFormSubmit:a,handleCloseModal:s,packages:r,addOns:d,userProfile:u,modalMode:p,cards:h,promoCodes:f})=>{const g=C.useMemo(()=>{const y=r.find(O=>O.id===n.packageId),v=(y==null?void 0:y.price)||0,k=d.filter(O=>n.selectedAddOnIds.includes(O.id)).reduce((O,H)=>O+H.price,0);let j=v+k,S=0,w="N/A";const P=f.find(O=>O.id===n.promoCodeId);P&&(P.discountType==="percentage"?(S=j*P.discountValue/100,w=`${P.discountValue}%`):(S=P.discountValue,w=Et(P.discountValue)));const A=j-S,R=A-Number(n.dp);return{packagePrice:v,addOnsPrice:k,totalProject:A,remainingPayment:R,discountAmount:S,discountApplied:w}},[n.packageId,n.selectedAddOnIds,n.dp,n.promoCodeId,r,d,f]);return t.jsxs("form",{onSubmit:a,children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2",children:"Informasi Klien"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:n.clientName,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Klien"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"clientType",name:"clientType",value:n.clientType,onChange:e,className:"input-field",required:!0,children:Object.values(An).map(y=>t.jsx("option",{value:y,children:y},y))}),t.jsx("label",{htmlFor:"clientType",className:"input-label",children:"Jenis Klien"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"phone",className:"input-label",children:"Nomor Telepon"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"whatsapp",name:"whatsapp",value:n.whatsapp||"",onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"whatsapp",className:"input-label",children:"No. WhatsApp"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"instagram",name:"instagram",value:n.instagram,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"instagram",className:"input-label",children:"Instagram (@username)"})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Informasi Proyek"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"projectName",name:"projectName",value:n.projectName,onChange:e,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"projectName",className:"input-label",children:"Nama Proyek"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"projectType",name:"projectType",value:n.projectType,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Pilih Jenis..."}),u.projectTypes.map(y=>t.jsx("option",{value:y,children:y},y))]}),t.jsx("label",{htmlFor:"projectType",className:"input-label",children:"Jenis Proyek"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"date",name:"date",value:n.date,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"date",className:"input-label",children:"Tanggal Acara"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:n.location,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Lokasi"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2",children:"Detail Paket & Pembayaran"}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"packageId",name:"packageId",value:n.packageId,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih paket..."}),r.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]}),t.jsx("label",{htmlFor:"packageId",className:"input-label",children:"Paket"}),t.jsxs("p",{className:"text-right text-xs text-brand-text-secondary mt-1",children:["Harga Paket: ",Et(g.packagePrice)]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 !text-brand-accent",children:"Add-On"}),t.jsx("div",{className:"p-3 border border-brand-border bg-brand-bg rounded-lg max-h-32 overflow-y-auto space-y-2 mt-2",children:d.map(y=>t.jsxs("label",{className:"flex items-center justify-between p-2 rounded-md hover:bg-brand-input cursor-pointer",children:[t.jsx("span",{className:"text-sm text-brand-text-primary",children:y.name}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-brand-text-secondary",children:Et(y.price)}),t.jsx("input",{type:"checkbox",id:y.id,name:"addOns",checked:n.selectedAddOnIds.includes(y.id),onChange:e})]})]},y.id))}),t.jsxs("p",{className:"text-right text-xs text-brand-text-secondary mt-1",children:["Total Harga Add-On: ",Et(g.addOnsPrice)]})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"promoCodeId",name:"promoCodeId",value:n.promoCodeId,onChange:e,className:"input-field",children:[t.jsx("option",{value:"",children:"Tanpa Kode Promo"}),f.filter(y=>y.isActive).map(y=>t.jsxs("option",{value:y.id,children:[y.code," - (",y.discountType==="percentage"?`${y.discountValue}%`:Et(y.discountValue),")"]},y.id))]}),t.jsx("label",{htmlFor:"promoCodeId",className:"input-label",children:"Kode Promo"}),n.promoCodeId&&t.jsxs("p",{className:"text-right text-xs text-brand-success mt-1",children:["Diskon Diterapkan: ",g.discountApplied]})]}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Total Proyek"}),t.jsx("span",{className:"text-brand-text-light",children:Et(g.totalProject)})]}),t.jsxs("div",{className:"input-group !mt-2",children:[t.jsx("input",{type:"number",name:"dp",id:"dp",value:n.dp,onChange:e,className:"input-field text-right",placeholder:" "}),t.jsx("label",{htmlFor:"dp",className:"input-label",children:"Uang DP"})]}),Number(n.dp)>0&&t.jsxs("div",{className:"input-group !mt-2",children:[t.jsxs("select",{name:"dpDestinationCardId",value:n.dpDestinationCardId,onChange:e,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Setor DP ke..."}),h.map(y=>t.jsxs("option",{value:y.id,children:[y.bankName," ",y.lastFourDigits!=="CASH"?`**** ${y.lastFourDigits}`:"(Tunai)"]},y.id))]}),t.jsx("label",{htmlFor:"dpDestinationCardId",className:"input-label",children:"Kartu Tujuan"})]}),t.jsx("hr",{className:"border-brand-border"}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Sisa Pembayaran"}),t.jsx("span",{className:"text-blue-500",children:Et(g.remainingPayment)})]})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Lainnya (Opsional)"}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"notes",name:"notes",value:n.notes,onChange:e,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"notes",className:"input-label",children:"Catatan Tambahan"})]})]})]}),t.jsxs("div",{className:"flex justify-end items-center gap-3 pt-8 mt-8 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:s,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:p==="add"?"Simpan Klien & Proyek":"Update Klien & Proyek"})]})]})},yE=({client:n,projects:e,transactions:a,contracts:s,onClose:r,onEditProject:d,onDeleteClient:u,onViewReceipt:p,onViewInvoice:h,handleNavigation:f,onRecordPayment:g,cards:y,onSharePortal:v})=>{const[k,j]=C.useState("info"),[S,w]=C.useState({});if(!n)return null;const P=(V,ce,Ce)=>{const Re=S[V]||{amount:"",destinationCardId:""};w(Ue=>({...Ue,[V]:{...Re,[ce]:Ce}}))},A=V=>{const ce=S[V],Ce=R.find(Re=>Re.id===V);if(ce&&Number(ce.amount)>0&&ce.destinationCardId&&Ce){const Re=Number(ce.amount);if(Re>Ce.totalCost-Ce.amountPaid){alert("Jumlah pembayaran melebihi sisa tagihan.");return}g(V,Re,ce.destinationCardId),w(Ue=>({...Ue,[V]:{amount:"",destinationCardId:""}}))}else alert("Harap isi jumlah dan tujuan pembayaran dengan benar.")},R=e.filter(V=>V.clientId===n.id).sort((V,ce)=>new Date(ce.date).getTime()-new Date(V.date).getTime()),O=a.filter(V=>R.some(ce=>ce.id===V.projectId)).sort((V,ce)=>new Date(ce.date).getTime()-new Date(V.date).getTime()),H=R.length,L=R.reduce((V,ce)=>V+ce.totalCost,0),U=R.reduce((V,ce)=>V+ce.amountPaid,0),ne=L-U,ie=({icon:V,title:ce,value:Ce})=>t.jsxs("div",{className:"bg-brand-bg p-4 rounded-xl flex items-center gap-4 border border-brand-border shadow-sm",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-brand-surface",children:V}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary",children:ce}),t.jsx("p",{className:"text-lg font-bold text-brand-text-light",children:Ce})]})]}),q=({label:V,children:ce})=>t.jsxs("div",{className:"py-2.5 grid grid-cols-1 sm:grid-cols-[1fr_2fr] gap-1 sm:gap-4 border-b border-brand-border",children:[t.jsx("dt",{className:"text-sm text-brand-text-secondary",children:V}),t.jsx("dd",{className:"text-sm text-brand-text-light font-semibold",children:ce})]});return t.jsxs("div",{children:[t.jsx("div",{className:"border-b border-brand-border",children:t.jsxs("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>j("info"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${k==="info"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(_n,{className:"w-5 h-5"})," Informasi Klien"]}),t.jsxs("button",{onClick:()=>j("payments"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${k==="payments"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(Hg,{className:"w-5 h-5"})," Riwayat Pembayaran"]}),t.jsxs("button",{onClick:()=>j("documents"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${k==="documents"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(oa,{className:"w-5 h-5"})," Kontrak Kerja"]})]})}),t.jsxs("div",{className:"pt-5 max-h-[65vh] overflow-y-auto pr-2",children:[k==="info"&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("dl",{children:[t.jsx(q,{label:"Nama Lengkap",children:n.name}),t.jsx(q,{label:"Jenis Klien",children:n.clientType}),t.jsx(q,{label:"Email",children:n.email}),t.jsx(q,{label:"Telepon",children:t.jsx("a",{href:`https://wa.me/${Wa(n.phone)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:n.phone})}),t.jsx(q,{label:"No. WhatsApp",children:n.whatsapp?t.jsx("a",{href:`https://wa.me/${Wa(n.whatsapp)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:n.whatsapp}):"-"}),t.jsx(q,{label:"Instagram",children:n.instagram||"-"}),t.jsx(q,{label:"Klien Sejak",children:new Date(n.since).toLocaleDateString("id-ID")})]}),t.jsxs("button",{onClick:()=>v(n),className:"mt-5 button-secondary inline-flex items-center gap-2 text-sm",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Portal Klien"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-4",children:"Ringkasan Keuangan Klien"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx(ie,{icon:t.jsx(ka,{className:"w-6 h-6 text-indigo-400"}),title:"Jumlah Proyek",value:H.toString()}),t.jsx(ie,{icon:t.jsx(on,{className:"w-6 h-6 text-blue-400"}),title:"Total Nilai Proyek",value:Et(L)}),t.jsx(ie,{icon:t.jsx(vs,{className:"w-6 h-6 text-green-400"}),title:"Total Telah Dibayar",value:Et(U)}),t.jsx(ie,{icon:t.jsx(Gg,{className:"w-6 h-6 text-red-400"}),title:"Total Sisa Tagihan",value:Et(ne)})]})]})]}),k==="payments"&&t.jsx("div",{className:"space-y-8",children:R.map(V=>{var Re,Ue;const ce=O.filter(re=>re.projectId===V.id),Ce=V.totalCost-V.amountPaid;return t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-2",children:"Ringkasan Proyek & Invoice"}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:V.projectName}),t.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-1 text-xs mt-1",children:[t.jsxs("span",{children:["Total: ",t.jsx("span",{className:"font-medium text-brand-text-primary",children:Et(V.totalCost)})]}),t.jsxs("span",{children:["Terbayar: ",t.jsx("span",{className:"font-medium text-green-400",children:Et(V.amountPaid)})]}),t.jsxs("span",{children:["Sisa: ",t.jsx("span",{className:"font-medium text-red-400",children:Et(Ce)})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 self-start sm:self-center",children:[V.dpProofUrl&&t.jsxs("a",{href:V.dpProofUrl,target:"_blank",rel:"noopener noreferrer",className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(qa,{className:"w-4 h-4"})," Lihat Bukti DP"]}),t.jsxs("button",{onClick:()=>h(V),className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(oa,{className:"w-4 h-4"})," Lihat Invoice"]}),t.jsxs("button",{onClick:()=>d(V),className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(ln,{className:"w-4 h-4"})," Edit"]})]})]}),t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mt-4 mb-2",children:"Detail Transaksi Pembayaran"}),t.jsx("div",{className:"border border-brand-border rounded-lg overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-brand-bg",children:t.jsxs("tr",{className:"bg-brand-bg",children:[t.jsx("th",{className:"p-3 text-left font-medium text-brand-text-secondary",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left font-medium text-brand-text-secondary",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-right font-medium text-brand-text-secondary",children:"Jumlah"}),t.jsx("th",{className:"p-3 text-center font-medium text-brand-text-secondary",children:"Aksi"})]})}),t.jsx("tbody",{children:ce.length>0?ce.map(re=>t.jsxs("tr",{className:"border-t border-brand-border",children:[t.jsx("td",{className:"p-3",children:new Date(re.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3",children:re.description}),t.jsx("td",{className:"p-3 text-right font-semibold text-green-400",children:Et(re.amount)}),t.jsx("td",{className:"p-3 text-center",children:t.jsx("button",{onClick:()=>p(re),className:"p-1 text-brand-text-secondary hover:text-brand-accent",children:t.jsx(Na,{className:"w-5 h-5"})})})]},re.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center p-4 text-brand-text-secondary",children:"Belum ada pembayaran untuk proyek ini."})})})]})}),Ce>0&&t.jsxs(t.Fragment,{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mt-4 mb-2",children:"Catat Pembayaran Baru"}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg flex flex-col sm:flex-row items-center gap-4",children:[t.jsxs("div",{className:"input-group flex-grow w-full !mt-0",children:[t.jsx("input",{type:"number",id:`amount-${V.id}`,value:((Re=S[V.id])==null?void 0:Re.amount)||"",onChange:re=>P(V.id,"amount",re.target.value),max:Ce,className:"input-field",placeholder:" "}),t.jsxs("label",{htmlFor:`amount-${V.id}`,className:"input-label",children:["Jumlah Pembayaran (Maks: ",Et(Ce),")"]})]}),t.jsxs("div",{className:"input-group w-full sm:w-64 !mt-0",children:[t.jsxs("select",{id:`dest-${V.id}`,value:((Ue=S[V.id])==null?void 0:Ue.destinationCardId)||"",onChange:re=>P(V.id,"destinationCardId",re.target.value),className:"input-field",children:[t.jsx("option",{value:"",children:"Pilih Tujuan..."}),y.map(re=>t.jsxs("option",{value:re.id,children:[re.bankName," ",re.lastFourDigits!=="CASH"?`**** ${re.lastFourDigits}`:"(Tunai)"]},re.id))]}),t.jsx("label",{htmlFor:`dest-${V.id}`,className:"input-label",children:"Tujuan Pembayaran"})]}),t.jsx("button",{onClick:()=>A(V.id),className:"button-primary h-fit w-full sm:w-auto flex-shrink-0",children:"CATAT"})]})]})]},V.id)})}),k==="documents"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light",children:"Daftar Kontrak Kerja"}),t.jsxs("button",{onClick:()=>f(Te.CONTRACTS,{type:"CREATE_CONTRACT_FOR_CLIENT",id:n.id}),className:"button-primary inline-flex items-center gap-2 text-sm",children:[t.jsx(nn,{className:"w-4 h-4"})," BUAT KONTRAK BARU"]})]}),t.jsx("div",{className:"space-y-3",children:s.filter(V=>V.clientId===n.id).length>0?s.filter(V=>V.clientId===n.id).map(V=>{const ce=e.find(Ce=>Ce.id===V.projectId);return t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:V.contractNumber}),t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1",children:["Proyek: ",(ce==null?void 0:ce.projectName)||"N/A"]})]}),t.jsx("button",{onClick:()=>f(Te.CONTRACTS,{type:"VIEW_CONTRACT",id:V.id}),className:"button-secondary text-sm",children:"Lihat Detail"})]},V.id)}):t.jsx("p",{className:"text-center text-sm text-brand-text-secondary py-8",children:"Belum ada kontrak untuk klien ini."})})]})]})]})},bE=({data:n})=>{const e=Math.max(...n.map(a=>a.count),1);return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg h-full border border-brand-border",children:[t.jsxs("h3",{className:"font-bold text-lg text-gradient mb-6",children:["Akusisi Klien Baru (",new Date().getFullYear(),")"]}),t.jsx("div",{className:"h-48 flex justify-between items-end gap-2",children:n.map(a=>{const s=Math.max(a.count/e*100,2);return t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full group relative",children:[t.jsxs("div",{className:"absolute -top-6 text-xs bg-brand-accent text-white font-bold py-1 px-2 rounded-md mb-1 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[a.count," Klien"]}),t.jsx("div",{className:"bg-brand-accent/50 w-full rounded-md transition-colors hover:bg-brand-accent",style:{height:`${s}%`}}),t.jsx("span",{className:"text-xs text-brand-text-secondary mt-2",children:a.name})]},a.name)})})]})},vE=({clients:n,setClients:e,projects:a,setProjects:s,packages:r,addOns:d,transactions:u,setTransactions:p,userProfile:h,showNotification:f,initialAction:g,setInitialAction:y,cards:v,setCards:k,pockets:j,setPockets:S,contracts:w,handleNavigation:P,clientFeedback:A,promoCodes:R,setPromoCodes:O,onSignInvoice:H,onSignTransaction:L,addNotification:U})=>{const[ne,ie]=C.useState(!1),[q,V]=C.useState("add"),[ce,Ce]=C.useState(null),[Re,Ue]=C.useState(null),[re,De]=C.useState(_c),[J,E]=C.useState(!1),[T,B]=C.useState(null),[ue,ke]=C.useState(null),[G,he]=C.useState(null),[Q,le]=C.useState(!1),[W,we]=C.useState(null),[Be,Ze]=C.useState(""),[Ke,Qe]=C.useState("Semua Status"),[gt,At]=C.useState(""),[wt,ft]=C.useState(""),[Ne,Ve]=C.useState(!0),[_e,Je]=C.useState(!0),[st,dt]=C.useState(!1),[yt,Dt]=C.useState(null),[ze,ot]=C.useState(!1);C.useEffect(()=>{if(g&&g.type==="VIEW_CLIENT_DETAILS"&&g.id){const ge=n.find(Se=>Se.id===g.id);ge&&(B(ge),E(!0)),y(null)}},[g,n,y]);const Ie=C.useMemo(()=>{const ge=window.location.pathname.replace(/index\.html$/,"");return`${window.location.origin}${ge}#/public-booking`},[]);C.useEffect(()=>{if(W){const ge=document.getElementById("client-portal-qrcode");ge&&typeof window.QRCode<"u"&&(ge.innerHTML="",new window.QRCode(ge,{text:W.url,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))}if(st){const ge=document.getElementById("clients-booking-form-qrcode");ge&&typeof window.QRCode<"u"&&(ge.innerHTML="",new window.QRCode(ge,{text:Ie,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))}},[W,st,Ie]);const M=ge=>{const Se=window.location.pathname.replace(/index\.html$/,""),Me=`${window.location.origin}${Se}#/portal/${ge.portalAccessId}`;we({title:`Portal QR Code untuk ${ge.name}`,url:Me})},de=()=>{navigator.clipboard.writeText(Ie).then(()=>{f("Tautan formulir booking berhasil disalin!"),dt(!1)})},z=()=>{const ge=document.querySelector("#clients-booking-form-qrcode canvas");if(ge){const Se=document.createElement("a");Se.download="form-booking-qr.png",Se.href=ge.toDataURL(),Se.click()}},F=(ge,Se,Me)=>{V(ge),ge==="edit"&&Se&&Me?(Ce(Se),Ue(Me),De({clientId:Se.id,clientName:Se.name,email:Se.email,phone:Se.phone,whatsapp:Se.whatsapp||"",instagram:Se.instagram||"",clientType:Se.clientType,projectId:Me.id,projectName:Me.projectName,projectType:Me.projectType,location:Me.location,date:Me.date,packageId:Me.packageId,selectedAddOnIds:Me.addOns.map(et=>et.id),dp:"",dpDestinationCardId:"",notes:Me.notes||"",accommodation:Me.accommodation||"",driveLink:Me.driveLink||"",promoCodeId:Me.promoCodeId||""})):ge==="add"&&Se?(Ce(Se),De({..._c,clientId:Se.id,clientName:Se.name,email:Se.email,phone:Se.phone,whatsapp:Se.whatsapp||"",instagram:Se.instagram||"",clientType:Se.clientType})):(Ce(null),Ue(null),De({..._c,projectType:h.projectTypes[0]||""})),ie(!0)},K=()=>{ie(!1),he(null),le(!1)},te=ge=>{const{name:Se,value:Me,type:et}=ge.target;if(et==="checkbox"){const{id:mt,checked:xt}=ge.target;De(Z=>({...Z,selectedAddOnIds:xt?[...Z.selectedAddOnIds,mt]:Z.selectedAddOnIds.filter(be=>be!==mt)}))}else De(mt=>({...mt,[Se]:Me}))},X=C.useMemo(()=>n.map(ge=>{const Se=a.filter(xt=>xt.clientId===ge.id),Me=Se.reduce((xt,Z)=>xt+Z.totalCost,0),et=Se.reduce((xt,Z)=>xt+Z.amountPaid,0),mt=Se.length>0?[...Se].sort((xt,Z)=>new Date(Z.date).getTime()-new Date(xt.date).getTime())[0]:null;return{...ge,projects:Se,totalProyekValue:Me,balanceDue:Me-et,paketTerbaru:mt?`${mt.packageName}${mt.addOns.length>0?` + ${mt.addOns.length} Add-on`:""}`:"Belum ada proyek",overallPaymentStatus:mt?mt.paymentStatus:null,mostRecentProject:mt}}),[n,a]),fe=C.useMemo(()=>X.filter(ge=>ge.balanceDue>0).sort((ge,Se)=>Se.balanceDue-ge.balanceDue),[X]),ye=C.useMemo(()=>{const ge=a.reduce((et,mt)=>{if(mt.location){const xt=mt.location.split(",")[0].trim();et[xt]=(et[xt]||0)+1}return et},{}),Se=Object.keys(ge).length>0?Object.keys(ge).reduce((et,mt)=>ge[et]>ge[mt]?et:mt):"N/A",Me=X.reduce((et,mt)=>et+mt.balanceDue,0);return{activeClients:n.filter(et=>et.status===Ot.ACTIVE).length,mostFrequentLocation:Se,totalReceivables:Et(Me),totalClients:n.length}},[n,a,X]),_=C.useMemo(()=>X.filter(ge=>{const Se=Be===""||ge.name.toLowerCase().includes(Be.toLowerCase())||ge.email.toLowerCase().includes(Be.toLowerCase())||ge.phone.toLowerCase().includes(Be.toLowerCase()),Me=Ke==="Semua Status"||ge.overallPaymentStatus===Ke,et=gt?new Date(gt):null,mt=wt?new Date(wt):null;et&&et.setHours(0,0,0,0),mt&&mt.setHours(23,59,59,999);const xt=!et&&!mt||ge.projects.some(Z=>{const be=new Date(Z.date);return(!et||be>=et)&&(!mt||be<=mt)});return Se&&Me&&xt}),[X,Be,Ke,gt,wt]),D=C.useMemo(()=>{const ge=n.reduce((Me,et)=>(Me[et.status]=(Me[et.status]||0)+1,Me),{}),Se={[Ot.ACTIVE]:"#10b981",[Ot.INACTIVE]:"#64748b",[Ot.LEAD]:"#3b82f6",[Ot.LOST]:"#ef4444"};return Object.entries(ge).map(([Me,et])=>({label:Me,value:et,color:Se[Me]||"#9ca3af"}))},[n]),ae=C.useMemo(()=>{const ge=new Date().getFullYear(),Me=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"].map(et=>({name:et,count:0}));return n.forEach(et=>{const mt=new Date(et.since);if(mt.getFullYear()===ge){const xt=mt.getMonth();Me[xt].count+=1}}),Me},[n]),se=ge=>{ge.preventDefault();const Se=r.find(be=>be.id===re.packageId);if(!Se){alert("Harap pilih paket layanan.");return}const Me=d.filter(be=>re.selectedAddOnIds.includes(be.id)),et=Se.price+Me.reduce((be,xe)=>be+xe.price,0);let mt=0;const xt=R.find(be=>be.id===re.promoCodeId);xt&&(xt.discountType==="percentage"?mt=et*xt.discountValue/100:mt=xt.discountValue);const Z=et-mt;if(q==="add"){let be=ce==null?void 0:ce.id;if(!ce){be=crypto.randomUUID();const He={id:be,name:re.clientName,email:re.email,phone:re.phone,whatsapp:re.whatsapp,instagram:re.instagram,clientType:re.clientType,since:new Date().toISOString().split("T")[0],status:Ot.ACTIVE,lastContact:new Date().toISOString(),portalAccessId:crypto.randomUUID()};e(Ge=>[He,...Ge])}const xe=Number(re.dp)||0,Fe=Z-xe,an=Se.physicalItems.map((He,Ge)=>({id:`pi-${crypto.randomUUID()}-${Ge}`,type:"Custom",customName:He.name,details:He.name,cost:He.price})),ve=an.reduce((He,Ge)=>He+Ge.cost,0),je={id:crypto.randomUUID(),projectName:re.projectName,clientName:re.clientName,clientId:be,projectType:re.projectType,packageName:Se.name,packageId:Se.id,addOns:Me,date:re.date,location:re.location,progress:0,status:"Dikonfirmasi",totalCost:Z,amountPaid:xe,paymentStatus:xe>0?Fe<=0?_t.LUNAS:_t.DP_TERBAYAR:_t.BELUM_BAYAR,team:[],notes:re.notes,accommodation:re.accommodation,driveLink:re.driveLink,promoCodeId:re.promoCodeId||void 0,discountAmount:mt>0?mt:void 0,printingDetails:an,printingCost:ve,completedDigitalItems:[],bookingStatus:sa.TERKONFIRMASI};if(s(He=>[je,...He]),je.amountPaid>0){const He={id:`TRN-DP-${je.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${je.projectName}`,amount:je.amountPaid,type:$e.INCOME,projectId:je.id,category:"DP Proyek",method:"Transfer Bank",cardId:re.dpDestinationCardId};p(Ge=>[...Ge,He].sort((Ye,lt)=>new Date(lt.date).getTime()-new Date(Ye.date).getTime())),k(Ge=>Ge.map(Ye=>Ye.id===re.dpDestinationCardId?{...Ye,balance:Ye.balance+je.amountPaid}:Ye))}xt&&O(He=>He.map(Ge=>Ge.id===xt.id?{...Ge,usageCount:Ge.usageCount+1}:Ge)),f(`Klien ${re.clientName} dan proyek baru berhasil ditambahkan.`),U({title:"Booking Baru Dibuat",message:`Booking untuk proyek "${je.projectName}" dari klien ${re.clientName} telah dibuat.`,icon:"booking",link:{view:Te.BOOKING}})}else q==="edit"&&ce&&Re&&(re.clientName!==ce.name&&s(be=>be.map(xe=>xe.clientId===ce.id?{...xe,clientName:re.clientName}:xe)),e(be=>be.map(xe=>xe.id===ce.id?{...xe,name:re.clientName,email:re.email,phone:re.phone,whatsapp:re.whatsapp,instagram:re.instagram,clientType:re.clientType}:xe)),s(be=>be.map(xe=>{if(xe.id===Re.id){const Fe=xe.amountPaid,an=Z-Fe;return{...xe,projectName:re.projectName,projectType:re.projectType,location:re.location,date:re.date,packageName:Se.name,packageId:Se.id,addOns:Me,totalCost:Z,paymentStatus:Fe>0?an<=0?_t.LUNAS:_t.DP_TERBAYAR:_t.BELUM_BAYAR,notes:re.notes,promoCodeId:re.promoCodeId||void 0,discountAmount:mt>0?mt:void 0}}return xe})),f("Data klien & proyek berhasil diperbarui."));K()},Ae=ge=>{if(window.confirm("Menghapus klien akan menghapus semua proyek dan transaksi terkait. Apakah Anda yakin?")){e(Me=>Me.filter(et=>et.id!==ge));const Se=a.filter(Me=>Me.clientId===ge).map(Me=>Me.id);s(Me=>Me.filter(et=>et.clientId!==ge)),p(Me=>Me.filter(et=>!Se.includes(et.projectId||""))),E(!1),f("Klien berhasil dihapus.")}},ut=(ge,Se,Me)=>{const et=a.find(xt=>xt.id===ge);if(!et)return;const mt={id:`TRN-PAY-${crypto.randomUUID()}`,date:new Date().toISOString().split("T")[0],description:`Pembayaran Proyek ${et.projectName}`,amount:Se,type:$e.INCOME,projectId:et.id,category:"Pelunasan Proyek",method:"Transfer Bank",cardId:Me};p(xt=>[...xt,mt].sort((Z,be)=>new Date(be.date).getTime()-new Date(Z.date).getTime())),k(xt=>xt.map(Z=>Z.id===Me?{...Z,balance:Z.balance+Se}:Z)),s(xt=>xt.map(Z=>{if(Z.id===et.id){const be=Z.amountPaid+Se,xe=Z.totalCost-be;return{...Z,amountPaid:be,paymentStatus:xe<=0?_t.LUNAS:_t.DP_TERBAYAR}}return Z})),f("Pembayaran berhasil dicatat."),U({title:"Pembayaran Diterima",message:`Pembayaran sebesar ${Et(Se)} untuk proyek "${et.projectName}" telah diterima.`,icon:"payment",link:{view:Te.CLIENTS,action:{type:"VIEW_CLIENT_DETAILS",id:et.clientId}}})},Nt=()=>{const ge=["Nama","Email","Telepon","Status","Total Nilai Proyek","Sisa Tagihan","Paket Terbaru"],Se=_.map(Me=>[`"${Me.name.replace(/"/g,'""')}"`,Me.email,Me.phone,Me.status,Me.totalProyekValue,Me.balanceDue,Me.paketTerbaru]);fE(ge,Se,`data-klien-${new Date().toISOString().split("T")[0]}.csv`)},jt=ge=>{(G==null?void 0:G.type)==="invoice"&&G.project?H(G.project.id,ge):(G==null?void 0:G.type)==="receipt"&&G.transaction&&L(G.transaction.id,ge),le(!1)},wn=()=>{if(!G||!T)return null;const ge=Se=>new Date(Se).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});if(G.type==="invoice"){const Se=G.project,Me=r.find(xt=>xt.id===Se.packageId),et=Se.totalCost+(Se.discountAmount||0),mt=Se.totalCost-Se.amountPaid;return t.jsx("div",{id:"invoice-content",className:"p-1",children:t.jsx("div",{className:"printable-content bg-slate-50 font-sans text-slate-800 printable-area",children:t.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 sm:p-12 shadow-lg",children:[t.jsxs("header",{className:"flex justify-between items-start mb-12",children:[t.jsxs("div",{children:[h.logoBase64?t.jsx("img",{src:h.logoBase64,alt:"Company Logo",className:"h-20 max-w-[200px] object-contain mb-4"}):t.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:h.companyName}),t.jsx("p",{className:"text-sm text-slate-500",children:h.address}),t.jsxs("p",{className:"text-sm text-slate-500",children:[h.phone," | ",h.email]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("h2",{className:"text-2xl font-bold uppercase text-slate-400 tracking-widest",children:"Invoice"}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["No: ",t.jsxs("span",{className:"font-semibold text-slate-700",children:["INV-",Se.id.slice(-6)]})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:["Tanggal: ",t.jsx("span",{className:"font-semibold text-slate-700",children:new Date().toLocaleDateString("id-ID")})]})]})]}),t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 doc-header-grid",children:[t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Ditagihkan Kepada"}),t.jsx("p",{className:"font-bold text-slate-800 break-words",children:T.name}),t.jsx("p",{className:"text-sm text-slate-600 break-words",children:T.email}),t.jsx("p",{className:"text-sm text-slate-600 break-words",children:T.phone})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Diterbitkan Oleh"}),t.jsx("p",{className:"font-bold text-slate-800 break-words",children:h.companyName}),t.jsx("p",{className:"text-sm text-slate-600 break-words",children:h.email}),t.jsx("p",{className:"text-sm text-slate-600 break-words",children:h.phone})]})]}),t.jsx("section",{className:"mb-12",children:t.jsxs("div",{className:"bg-blue-600 text-white p-6 rounded-xl printable-bg-blue printable-text-white",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-blue-200 mb-2",children:"Sisa Tagihan"}),t.jsx("p",{className:"font-extrabold text-2xl lg:text-3xl tracking-tight break-all",children:Et(mt)}),t.jsxs("p",{className:"text-sm text-blue-200 mt-1",children:["Jatuh Tempo: ",ge(Se.date)]})]})}),t.jsx("section",{children:t.jsxs("table",{className:"w-full text-left responsive-table",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b-2 border-slate-200",children:[t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-center",children:"Jml"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-right",children:"Harga"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-right",children:"Total"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsxs("td",{"data-label":"Deskripsi",className:"p-3 align-top",children:[t.jsx("p",{className:"font-semibold text-slate-800",children:Se.packageName}),t.jsx("p",{className:"text-xs text-slate-500",children:Me==null?void 0:Me.digitalItems.join(", ")})]}),t.jsx("td",{"data-label":"Jml",className:"p-3 text-center align-top",children:"1"}),t.jsx("td",{"data-label":"Harga",className:"p-3 text-right align-top",children:Et((Me==null?void 0:Me.price)||0)}),t.jsx("td",{"data-label":"Total",className:"p-3 text-right align-top",children:Et((Me==null?void 0:Me.price)||0)})]}),Se.addOns.map(xt=>t.jsxs("tr",{children:[t.jsxs("td",{"data-label":"Deskripsi",className:"p-3 text-slate-600 align-top",children:["- ",xt.name]}),t.jsx("td",{"data-label":"Jml",className:"p-3 text-center align-top",children:"1"}),t.jsx("td",{"data-label":"Harga",className:"p-3 text-right align-top",children:Et(xt.price)}),t.jsx("td",{"data-label":"Total",className:"p-3 text-right align-top",children:Et(xt.price)})]},xt.id))]})]})}),t.jsx("section",{className:"mt-12 avoid-break totals-section",children:t.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-between gap-8 doc-footer-flex",children:[t.jsxs("div",{className:"w-full sm:w-2/5",children:[t.jsx("h4",{className:"font-semibold text-slate-600",children:"Tanda Tangan"}),Se.invoiceSignature?t.jsx("img",{src:Se.invoiceSignature,alt:"Tanda Tangan",className:"h-20 mt-2 object-contain"}):t.jsx("div",{className:"h-20 mt-2 flex items-center justify-center text-xs text-slate-400 italic border border-dashed rounded-lg",children:"Belum Ditandatangani"})]}),t.jsxs("div",{className:"w-full sm:w-2/5 space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Subtotal"}),t.jsx("span",{className:"font-semibold text-slate-800",children:Et(et)})]}),Se.discountAmount&&Se.discountAmount>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Diskon"}),t.jsxs("span",{className:"font-semibold text-green-600 print-text-green",children:["-",Et(Se.discountAmount)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Telah Dibayar"}),t.jsxs("span",{className:"font-semibold text-slate-800",children:["-",Et(Se.amountPaid)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-900 border-t-2 border-slate-300 pt-2 mt-2",children:[t.jsx("span",{children:"Sisa Tagihan"}),t.jsx("span",{children:Et(mt)})]})]})]})}),t.jsxs("footer",{className:"mt-12 pt-8 border-t-2 border-slate-200 avoid-break signature-section",children:[h.termsAndConditions&&t.jsxs("div",{className:"mb-8",children:[t.jsx("h4",{className:"font-semibold text-slate-600 mb-2",children:"Syarat & Ketentuan"}),t.jsx("p",{className:"text-xs text-slate-500 whitespace-pre-wrap",children:h.termsAndConditions.replace(/|||/g,"").replace(/\s*\*\*(.*?)\*\*\s*/g,`
<strong>$1</strong>
`)})]}),t.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Jika Anda memiliki pertanyaan, silakan hubungi kami di ",h.phone]}),t.jsx("div",{className:"w-full h-2 bg-blue-600 mt-6 rounded"})]})]})})})}else if(G.type==="receipt"){const Se=G.transaction,Me=Se.projectId?a.find(et=>et.id===Se.projectId):null;return t.jsx("div",{id:"receipt-content",className:"p-1",children:t.jsx("div",{className:"printable-content bg-slate-50 font-sans text-slate-800 printable-area avoid-break",children:t.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-xl",children:[t.jsxs("header",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"KWITANSI PEMBAYARAN"}),t.jsx("p",{className:"text-sm text-slate-500",children:h.companyName})]}),t.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-200 rounded-lg text-center mb-8 printable-bg-green-light",children:[t.jsx("p",{className:"text-sm font-semibold text-green-700 print-text-green",children:"PEMBAYARAN DITERIMA"}),t.jsx("p",{className:"text-3xl font-bold text-green-800 print-text-green mt-1",children:Et(Se.amount)})]}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"No. Kwitansi"}),t.jsx("span",{className:"font-semibold text-slate-700 font-mono",children:Se.id.slice(0,12)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Tanggal Bayar"}),t.jsx("span",{className:"font-semibold text-slate-700",children:ge(Se.date)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Diterima dari"}),t.jsx("span",{className:"font-semibold text-slate-700",children:T.name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Metode"}),t.jsx("span",{className:"font-semibold text-slate-700",children:Se.method})]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Untuk pembayaran:"}),t.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:Se.description}),Me&&t.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[t.jsxs("p",{children:["Proyek: ",Me.projectName]}),t.jsxs("p",{children:["Total Tagihan: ",Et(Me.totalCost)," | Sisa: ",Et(Me.totalCost-Me.amountPaid)]})]})]}),t.jsxs("footer",{className:"mt-12 flex justify-between items-end avoid-break signature-section",children:[t.jsx("p",{className:"text-xs text-slate-400",children:"Terima kasih."}),t.jsxs("div",{className:"text-center",children:[Se.vendorSignature?t.jsx("img",{src:Se.vendorSignature,alt:"Tanda Tangan",className:"h-16 object-contain"}):t.jsx("div",{className:"h-16 flex items-center justify-center text-xs text-slate-400 italic border-b border-dashed",children:"Belum Ditandatangani"}),t.jsxs("p",{className:"text-xs font-semibold text-slate-600 mt-1",children:["(",h.authorizedSigner||h.companyName,")"]})]})]})]})})})}return null};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Klien",subtitle:"Kelola semua klien, proyek, dan pembayaran mereka.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>ot(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>dt(!0),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Form Booking"]}),t.jsxs("button",{onClick:()=>F("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Tambah Klien & Proyek"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{onClick:()=>Dt("total"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Total Klien",value:ye.totalClients.toString()})}),t.jsx("div",{onClick:()=>Dt("active"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Klien Aktif",value:ye.activeClients.toString()})}),t.jsx("div",{onClick:()=>Dt("receivables"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(wl,{className:"w-6 h-6"}),title:"Total Piutang",value:ye.totalReceivables})}),t.jsx("div",{onClick:()=>Dt("location"),className:"cursor-pointer transition-transform duration-200 hover:scale-105",children:t.jsx(qe,{icon:t.jsx(ju,{className:"w-6 h-6"}),title:"Lokasi Teratas",value:ye.mostFrequentLocation})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h3",{className:"font-bold text-lg text-gradient mb-4",children:"Distribusi Status Klien"}),t.jsx(Ja,{data:D})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsx(bE,{data:ae})})]}),t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Rekap Klien Belum Lunas (",fe.length,")"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Klien"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Bergabung Sejak"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-right",children:"Total Nilai Proyek"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-right",children:"Sisa Tagihan"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-center",children:"Aksi"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[fe.map(ge=>t.jsxs("tr",{className:"hover:bg-brand-bg transition-colors",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:ge.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:ge.email})]}),t.jsx("td",{className:"px-6 py-4",children:new Date(ge.since).toLocaleDateString("id-ID")}),t.jsx("td",{className:"px-6 py-4 text-right",children:Et(ge.totalProyekValue)}),t.jsx("td",{className:"px-6 py-4 text-right font-bold text-brand-danger",children:Et(ge.balanceDue)}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("button",{onClick:()=>ke(ge),className:"p-2 text-brand-text-secondary hover:text-brand-accent rounded-full hover:bg-brand-input",title:"Tagih via WhatsApp",children:t.jsx(Js,{className:"w-5 h-5"})})})]},ge.id)),fe.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-8 text-brand-text-secondary",children:"Luar biasa! Semua klien sudah lunas."})})]})]})})]}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"input-group flex-grow !mt-0 w-full md:w-auto",children:[t.jsx("input",{type:"search",value:Be,onChange:ge=>Ze(ge.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Cari klien (nama, email, telepon)..."})]}),t.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[t.jsx("input",{type:"date",value:gt,onChange:ge=>At(ge.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsx("input",{type:"date",value:wt,onChange:ge=>ft(ge.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsxs("select",{value:Ke,onChange:ge=>Qe(ge.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full",children:[t.jsx("option",{value:"Semua Status",children:"Semua Status"}),Object.values(_t).map(ge=>t.jsx("option",{value:ge,children:ge},ge))]}),t.jsx("button",{onClick:Nt,className:"button-secondary p-2.5",title:"Unduh data klien",children:t.jsx($i,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsxs("button",{onClick:()=>Ve(ge=>!ge),className:"w-full flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Klien Aktif (",_.filter(ge=>ge.status===Ot.ACTIVE).length,")"]}),Ne?t.jsx(ya,{className:"w-5 h-5 text-brand-text-secondary"}):t.jsx(_a,{className:"w-5 h-5 text-brand-text-secondary"})]})}),Ne&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Klien"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Total Nilai Proyek"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Sisa Tagihan"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Proyek Terbaru"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:_.filter(ge=>ge.status===Ot.ACTIVE).map(ge=>{var Se;return t.jsxs("tr",{className:"hover:bg-brand-bg transition-colors",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:ge.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:ge.email})]}),t.jsx("td",{className:"px-6 py-4 font-semibold",children:Et(ge.totalProyekValue)}),t.jsx("td",{className:"px-6 py-4 font-semibold text-red-400",children:Et(ge.balanceDue)}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{children:((Se=ge.mostRecentProject)==null?void 0:Se.projectName)||"-"}),ge.overallPaymentStatus&&t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${hE(ge.overallPaymentStatus)}`,children:ge.overallPaymentStatus})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>{B(ge),E(!0)},className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Detail Klien",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>F("add",ge),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Tambah Proyek Baru",children:t.jsx(nn,{className:"w-5 h-5"})})]})})]},ge.id)})})]})}),t.jsx("div",{className:"p-4 border-t border-brand-border",children:t.jsxs("button",{onClick:()=>Je(ge=>!ge),className:"w-full flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Klien Tidak Aktif / Prospek Hilang (",_.filter(ge=>ge.status!==Ot.ACTIVE).length,")"]}),_e?t.jsx(ya,{className:"w-5 h-5 text-brand-text-secondary"}):t.jsx(_a,{className:"w-5 h-5 text-brand-text-secondary"})]})}),_e&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Klien"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Kontak Terakhir"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:_.filter(ge=>ge.status!==Ot.ACTIVE).map(ge=>t.jsxs("tr",{className:"hover:bg-brand-bg transition-colors opacity-70",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:ge.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:ge.email})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-700 text-gray-300",children:ge.status})}),t.jsx("td",{className:"px-6 py-4",children:new Date(ge.lastContact).toLocaleDateString("id-ID")}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center justify-center space-x-1",children:t.jsx("button",{onClick:()=>{B(ge),E(!0)},className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Detail Klien",children:t.jsx(Pa,{className:"w-5 h-5"})})})})]},ge.id))})]})})]}),t.jsx(nt,{isOpen:ne,onClose:K,title:q==="add"?ce?"Tambah Proyek Baru":"Tambah Klien & Proyek Baru":"Edit Klien & Proyek",size:"4xl",children:t.jsx(xE,{formData:re,handleFormChange:te,handleFormSubmit:se,handleCloseModal:K,packages:r,addOns:d,userProfile:h,modalMode:q,cards:v,promoCodes:R})}),t.jsx(nt,{isOpen:J,onClose:()=>E(!1),title:`Detail Klien: ${T==null?void 0:T.name}`,size:"4xl",children:t.jsx(yE,{client:T,projects:a,transactions:u,contracts:w,onClose:()=>E(!1),onEditProject:ge=>{T&&F("edit",T,ge)},onDeleteClient:Ae,onViewReceipt:ge=>he({type:"receipt",transaction:ge}),onViewInvoice:ge=>he({type:"invoice",project:ge}),handleNavigation:P,onRecordPayment:ut,cards:v,onSharePortal:M})}),t.jsxs(nt,{isOpen:!!G,onClose:()=>he(null),title:G?G.type==="invoice"?"Invoice":"Tanda Terima":"",size:"3xl",children:[t.jsx("div",{className:"printable-area max-h-[70vh] overflow-y-auto",children:wn()}),t.jsxs("div",{className:"mt-6 text-right non-printable space-x-2 border-t border-brand-border pt-4",children:[G&&!G[G.type==="invoice"?"project":"transaction"].vendorSignature&&t.jsx("button",{type:"button",onClick:()=>le(!0),className:"button-secondary",children:"Tanda Tangani"}),t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak"]})]})]}),t.jsx(nt,{isOpen:Q,onClose:()=>le(!1),title:"Bubuhkan Tanda Tangan Anda",children:t.jsx(Al,{onClose:()=>le(!1),onSave:jt})}),t.jsx(nt,{isOpen:st,onClose:()=>dt(!1),title:"Bagikan Formulir Booking Publik",size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"clients-booking-form-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:Ie}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:de,className:"button-secondary w-full",children:"Salin Tautan"}),t.jsx("button",{onClick:z,className:"button-primary w-full",children:"Unduh QR"})]})]})}),W&&t.jsx(nt,{isOpen:!!W,onClose:()=>we(null),title:W.title,size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"client-portal-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:W.url}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(W.url),f("Tautan berhasil disalin!")},className:"button-secondary w-full",children:"Salin Tautan"}),t.jsx("button",{onClick:()=>{const ge=document.querySelector("#client-portal-qrcode canvas");if(ge){const Se=document.createElement("a");Se.download="portal-qr-code.png",Se.href=ge.toDataURL(),Se.click()}},className:"button-primary w-full",children:"Unduh QR"})]})]})}),t.jsx(nt,{isOpen:ze,onClose:()=>ot(!1),title:"Panduan Halaman Klien",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat untuk semua hal yang berkaitan dengan klien Anda."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Statistik Kunci:"})," Di bagian atas, Anda akan menemukan ringkasan cepat tentang jumlah klien, total piutang, dan lokasi teratas."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Visualisasi Data:"})," Grafik donat menunjukkan distribusi status klien Anda, sementara grafik batang melacak akuisisi klien baru dari waktu ke waktu."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Daftar Klien:"})," Tabel utama menampilkan semua klien Anda. Anda dapat mencari, memfilter berdasarkan tanggal proyek atau status pembayaran."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Aksi Cepat:"}),t.jsxs("ul",{className:"list-['-_'] list-inside ml-4",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["Lihat Detail (",t.jsx(Pa,{className:"w-4 h-4 inline-block"}),"):"]})," Buka panel detail untuk melihat semua proyek, pembayaran, dan kontrak yang terkait dengan klien."]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["Tambah Proyek (",t.jsx(nn,{className:"w-4 h-4 inline-block"}),"):"]})," Tambahkan proyek baru untuk klien yang sudah ada dengan cepat."]})]})]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Tambah Klien & Proyek:"})," Gunakan tombol di kanan atas untuk membuat klien baru beserta proyek pertamanya secara bersamaan."]})]})]})}),ue&&t.jsx(gE,{isOpen:!!ue,onClose:()=>ke(null),client:ue,projects:a,userProfile:h,showNotification:f})]})},Fu=n=>{switch(n){case _t.LUNAS:return"bg-brand-success/20 text-brand-success";case _t.DP_TERBAYAR:return"bg-blue-500/20 text-blue-400";case _t.BELUM_BAYAR:return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},NE=n=>{switch(n){case qt.COMPLETED:return"bg-green-500/20 text-green-400";case qt.IN_PROGRESS:return"bg-blue-500/20 text-blue-400";case qt.PENDING:return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},Ln=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),ny=n=>n.activeSubStatuses&&n.activeSubStatuses.length>0?n.activeSubStatuses.join(", "):n.status==="Dikirim"&&n.shippingDetails?`Dikirim: ${n.shippingDetails}`:n.status,Oi=(n,e)=>{const a=e.find(s=>s.name===n);return a?a.color:"#64748b"},ay=(n,e)=>{const a=Oi(n,e);return{"#10b981":"bg-green-500/20 text-green-400","#3b82f6":"bg-blue-500/20 text-blue-400","#8b5cf6":"bg-purple-500/20 text-purple-400","#f97316":"bg-orange-500/20 text-orange-400","#06b6d4":"bg-cyan-500/20 text-cyan-400","#eab308":"bg-yellow-500/20 text-yellow-400","#6366f1":"bg-indigo-500/20 text-indigo-400","#ef4444":"bg-red-500/20 text-red-400","#14b8a6":"bg-teal-500/20 text-teal-400"}[a]||"bg-gray-500/20 text-gray-400"},sy=({project:n})=>t.jsxs("div",{className:"flex items-center gap-1.5",children:[n.isEditingConfirmedByClient&&t.jsx("span",{title:"Editing dikonfirmasi klien",children:t.jsx(Da,{className:"w-4 h-4 text-green-500"})}),n.isPrintingConfirmedByClient&&t.jsx("span",{title:"Cetak dikonfirmasi klien",children:t.jsx(Da,{className:"w-4 h-4 text-green-500"})}),n.isDeliveryConfirmedByClient&&t.jsx("span",{title:"Pengiriman dikonfirmasi klien",children:t.jsx(Da,{className:"w-4 h-4 text-green-500"})})]}),kE=({projects:n,teamProjectPayments:e,projectStatusConfig:a,onStatCardClick:s})=>{const r=C.useMemo(()=>n.filter(p=>p.status!=="Selesai"&&p.status!=="Dibatalkan"),[n]),d=C.useMemo(()=>{const p=r.reduce((v,k)=>v+k.totalCost,0),h=r.reduce((v,k)=>v+(k.totalCost-k.amountPaid),0),f=e.filter(v=>v.status==="Unpaid"&&r.some(k=>k.id===v.projectId)).reduce((v,k)=>v+k.fee,0),g=n.reduce((v,k)=>(v[k.projectType]=(v[k.projectType]||0)+1,v),{}),y=Object.keys(g).length>0?Object.entries(g).sort(([,v],[,k])=>Number(k)-Number(v))[0][0]:"N/A";return{totalActiveValue:p,totalReceivables:h,unpaidTeamCosts:f,topProjectType:y}},[r,e,n]),u=C.useMemo(()=>{const p=r.reduce((h,f)=>(h[f.status]=(h[f.status]||0)+1,h),{});return Object.entries(p).map(([h,f])=>{const g=a.find(y=>y.name===h);return{label:h,value:Number(f),color:g?g.color:"#64748b"}}).sort((h,f)=>f.value-h.value)},[r,a]);return t.jsxs("div",{className:"mb-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{onClick:()=>s("value"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"100ms"},children:t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Nilai Proyek Aktif",value:Ln(d.totalActiveValue),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"})}),t.jsx("div",{onClick:()=>s("receivables"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"200ms"},children:t.jsx(qe,{icon:t.jsx(wl,{className:"w-6 h-6"}),title:"Total Piutang",value:Ln(d.totalReceivables),iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"})}),t.jsx("div",{onClick:()=>s("team_costs"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"300ms"},children:t.jsx(qe,{icon:t.jsx(Kr,{className:"w-6 h-6"}),title:"Biaya Tim Belum Lunas",value:Ln(d.unpaidTeamCosts),iconBgColor:"bg-red-500/20",iconColor:"text-red-400"})}),t.jsx("div",{onClick:()=>s("top_type"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"400ms"},children:t.jsx(qe,{icon:t.jsx(ka,{className:"w-6 h-6"}),title:"Jenis Proyek Teratas",value:d.topProjectType,iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400"})})]}),t.jsx("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border widget-animate",style:{animationDelay:"500ms"},children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-center",children:[t.jsxs("div",{className:"md:col-span-1",children:[t.jsx("h3",{className:"text-xl font-bold text-gradient mb-4",children:"Distribusi Status Proyek"}),t.jsx(Ja,{data:u})]}),t.jsx("div",{className:"md:col-span-2 text-center text-brand-text-secondary h-full flex items-center justify-center bg-brand-bg rounded-lg p-8",children:t.jsx("p",{children:"Grafik analitik lainnya akan segera hadir."})})]})})]})},jE=({projects:n,teamProjectPayments:e,handleOpenDetailModal:a,config:s})=>{const r=u=>{if(u.team.length===0)return{text:"N/A",className:"bg-gray-500/20 text-gray-400"};const p=e.filter(h=>h.projectId===u.id);return p.length<u.team.length||p.some(h=>h.status==="Unpaid")?p.filter(f=>f.status==="Paid").length===0?{text:"Belum Lunas",className:"bg-red-500/20 text-red-400"}:{text:"Sebagian",className:"bg-yellow-500/20 text-yellow-400"}:{text:"Lunas",className:"bg-green-500/20 text-green-400"}},d=u=>{const p=(u.revisions||[]).filter(f=>f.status!==qt.COMPLETED).length;if(p>0)return{text:`${p} Revisi Aktif`,className:"bg-purple-500/20 text-purple-400",icon:t.jsx(ln,{className:"w-4 h-4"})};const h=Object.keys(u.subStatusConfirmationSentAt||{}).filter(f=>!(u.confirmedSubStatuses||[]).includes(f)).length;return h>0?{text:`Menunggu ${h} Konfirmasi`,className:"bg-yellow-500/20 text-yellow-400",icon:t.jsx(ks,{className:"w-4 h-4"})}:{text:"Aman",className:"bg-green-500/20 text-green-400",icon:t.jsx(Da,{className:"w-4 h-4"})}};return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border mb-6 widget-animate",style:{animationDelay:"500ms"},children:[t.jsx("h3",{className:"text-xl font-bold text-gradient mb-4",children:"Ringkasan Proyek Aktif"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Proyek / Klien"}),t.jsx("th",{className:"px-4 py-3",children:"Status & Progres"}),t.jsx("th",{className:"px-4 py-3",children:"Pembayaran Klien"}),t.jsx("th",{className:"px-4 py-3",children:"Pembayaran Tim"}),t.jsx("th",{className:"px-4 py-3",children:"Tugas Mendesak"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[n.map(u=>{const p=r(u),h=d(u);return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:u.projectName}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:u.clientName})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full inline-block ${ay(u.status,s)}`,children:u.status}),t.jsx("div",{className:"w-full bg-brand-bg rounded-full h-1.5 mt-2",children:t.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${u.progress}%`,backgroundColor:Oi(u.status,s)}})})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Fu(u.paymentStatus)}`,children:u.paymentStatus})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.className}`,children:p.text})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1.5 ${h.className}`,children:[h.icon,h.text]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>a(u),className:"button-secondary text-xs !px-3 !py-1.5",children:"Lihat Detail"})})]},u.id)}),n.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-8 text-brand-text-secondary",children:"Tidak ada proyek aktif."})})]})]})})]})},jg=({projects:n,handleOpenDetailModal:e,handleOpenForm:a,handleProjectDelete:s,config:r})=>{const d=({progress:u,status:p,config:h})=>t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-300",style:{width:`${u}%`,backgroundColor:Oi(p,h)}})});return t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Nama Proyek"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Klien"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Tanggal"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider min-w-[200px]",children:"Progress"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider",children:"Tim"}),t.jsx("th",{className:"px-6 py-4 font-medium tracking-wider text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(u=>t.jsxs("tr",{className:"hover:bg-brand-bg transition-colors",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:u.projectName}),t.jsx(sy,{project:u})]}),t.jsx("p",{className:`text-xs font-medium px-2 py-0.5 rounded-full inline-block mt-1 ${ay(u.status,r)}`,children:ny(u)})]}),t.jsx("td",{className:"px-6 py-4 text-brand-text-primary",children:u.clientName}),t.jsx("td",{className:"px-6 py-4 text-brand-text-primary",children:new Date(u.date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(d,{progress:u.progress,status:u.status,config:r}),t.jsxs("span",{className:"text-xs font-semibold text-brand-text-secondary",children:[u.progress,"%"]})]})}),t.jsx("td",{className:"px-6 py-4 text-brand-text-primary",children:u.team.map(p=>p.name.split(" ")[0]).join(", ")||"-"}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>e(u),className:"p-2 text-brand-text-secondary hover:bg-gray-700/50 rounded-full",title:"Detail Proyek",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>a("edit",u),className:"p-2 text-brand-text-secondary hover:bg-gray-700/50 rounded-full",title:"Edit Proyek",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>s(u.id),className:"p-2 text-brand-text-secondary hover:bg-gray-700/50 rounded-full",title:"Hapus Proyek",children:t.jsx(fn,{className:"w-5 h-5"})})]})})]},u.id))})]}),n.length===0&&t.jsx("p",{className:"text-center py-8 text-sm text-brand-text-secondary",children:"Tidak ada proyek dalam kategori ini."})]})},wE=({projects:n,handleOpenDetailModal:e,draggedProjectId:a,handleDragStart:s,handleDragOver:r,handleDrop:d,config:u})=>{const p=({progress:h,status:f,config:g})=>t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-300",style:{width:`${h}%`,backgroundColor:Oi(f,g)}})});return t.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4",children:u.filter(h=>h.name!=="Dibatalkan").map(h=>{const f=h.name;return t.jsxs("div",{className:"w-80 flex-shrink-0 bg-brand-bg rounded-2xl border border-brand-border",onDragOver:r,onDrop:g=>d(g,f),children:[t.jsxs("div",{className:"p-4 font-semibold text-brand-text-light border-b-2 flex justify-between items-center sticky top-0 bg-brand-bg/80 backdrop-blur-sm rounded-t-2xl z-10",style:{borderBottomColor:Oi(f,u)},children:[t.jsx("span",{children:f}),t.jsx("span",{className:"text-sm font-normal bg-brand-surface text-brand-text-secondary px-2.5 py-1 rounded-full",children:n.filter(g=>g.status===f).length})]}),t.jsx("div",{className:"p-3 space-y-3 h-[calc(100vh-420px)] overflow-y-auto",children:n.filter(g=>g.status===f).map(g=>t.jsxs("div",{draggable:!0,onDragStart:y=>s(y,g.id),onClick:()=>e(g),className:`p-4 bg-brand-surface rounded-xl cursor-grab border-l-4 shadow-lg ${a===g.id?"opacity-50 ring-2 ring-brand-accent":"opacity-100"}`,style:{borderLeftColor:Oi(g.status,u)},children:[t.jsx("p",{className:"font-semibold text-sm text-brand-text-light",children:g.projectName}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-1",children:g.clientName}),t.jsx("p",{className:"text-xs font-bold text-brand-text-primary mt-1",children:ny(g)}),t.jsx(p,{progress:g.progress,status:g.status,config:u}),t.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs",children:[t.jsx("span",{className:"text-brand-text-secondary",children:new Date(g.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})}),t.jsx(sy,{project:g}),t.jsx("span",{className:`px-2 py-0.5 rounded-full ${Fu(g.paymentStatus)}`,children:g.paymentStatus})]})]},g.id))})]},f)})})},CE=({selectedProject:n,setSelectedProject:e,teamMembers:a,clients:s,profile:r,showNotification:d,setProjects:u,onClose:p,handleOpenForm:h,handleProjectDelete:f,handleOpenBriefingModal:g,handleOpenConfirmationModal:y,packages:v,transactions:k,teamProjectPayments:j})=>{var ie;const[S,w]=C.useState("details"),[P,A]=C.useState({adminNotes:"",deadline:"",freelancerId:""}),R=C.useMemo(()=>n!=null&&n.team?n.team.reduce((q,V)=>{const{role:ce}=V;return q[ce]||(q[ce]=[]),q[ce].push(V),q},{}):{},[n==null?void 0:n.team]),O=q=>{if(q.preventDefault(),!n||!P.freelancerId||!P.adminNotes||!P.deadline){d("Harap lengkapi semua field revisi.");return}const V={id:`REV-${Date.now()}`,date:new Date().toISOString(),adminNotes:P.adminNotes,deadline:P.deadline,freelancerId:P.freelancerId,status:qt.PENDING},ce={...n,revisions:[...n.revisions||[],V]};u(Ce=>Ce.map(Re=>Re.id===n.id?ce:Re)),e(ce),d("Revisi baru berhasil ditambahkan."),A({adminNotes:"",deadline:"",freelancerId:""})},H=q=>{if(!n)return;const V=`${window.location.origin}${window.location.pathname}#/revision-form?projectId=${n.id}&freelancerId=${q.freelancerId}&revisionId=${q.id}`;navigator.clipboard.writeText(V).then(()=>{d("Tautan revisi berhasil disalin!")},ce=>{d("Gagal menyalin tautan."),console.error("Could not copy text: ",ce)})},L=q=>q?new Date(q).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A",U=q=>{if(!n)return;const V=n.completedDigitalItems||[],Ce=V.includes(q)?V.filter(Ue=>Ue!==q):[...V,q],Re={...n,completedDigitalItems:Ce};u(Ue=>Ue.map(re=>re.id===n.id?Re:re)),e(Re)};if(!n)return null;const ne=n.customSubStatuses||((ie=r.projectStatusConfig.find(q=>q.name===n.status))==null?void 0:ie.subStatuses)||[];return t.jsxs("div",{children:[t.jsx("div",{className:"border-b border-brand-border",children:t.jsxs("nav",{className:"-mb-px flex space-x-6",children:[t.jsxs("button",{onClick:()=>w("details"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${S==="details"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(Hs,{className:"w-5 h-5"})," Detail"]}),t.jsxs("button",{onClick:()=>w("laba-rugi"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${S==="laba-rugi"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(on,{className:"w-5 h-5"})," Laba/Rugi"]}),t.jsxs("button",{onClick:()=>w("files"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${S==="files"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(oa,{className:"w-5 h-5"})," File & Tautan"]}),t.jsxs("button",{onClick:()=>w("revisions"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${S==="revisions"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(ln,{className:"w-5 h-5"})," Revisi"]})]})}),t.jsxs("div",{className:"pt-6 max-h-[65vh] overflow-y-auto pr-2",children:[S==="details"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-sm space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{className:"font-semibold text-brand-text-secondary w-32 inline-block",children:"Klien:"})," ",n.clientName]}),t.jsxs("p",{children:[t.jsx("strong",{className:"font-semibold text-brand-text-secondary w-32 inline-block",children:"Tanggal Acara:"})," ",L(n.date)]}),t.jsxs("p",{children:[t.jsx("strong",{className:"font-semibold text-brand-text-secondary w-32 inline-block",children:"Lokasi:"})," ",n.location]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Paket & Biaya"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm p-4 bg-brand-bg rounded-lg",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Paket:"})," ",t.jsx("span",{className:"font-medium text-brand-text-light",children:n.packageName}),t.jsx("span",{className:"text-brand-text-secondary",children:"Add-ons:"})," ",t.jsx("span",{className:"font-medium text-brand-text-light",children:n.addOns.map(q=>q.name).join(", ")||"-"}),t.jsx("span",{className:"text-brand-text-secondary",children:"Total Biaya Proyek:"})," ",t.jsx("span",{className:"font-bold text-brand-text-light",children:Ln(n.totalCost)}),t.jsx("span",{className:"text-brand-text-secondary",children:"Status Pembayaran:"})," ",t.jsx("span",{children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Fu(n.paymentStatus)}`,children:n.paymentStatus})}),t.jsx("span",{className:"text-brand-text-secondary",children:"Biaya Cetak:"})," ",t.jsx("span",{className:"font-medium text-brand-text-light",children:Ln(n.printingCost||0)}),t.jsx("span",{className:"text-brand-text-secondary",children:"Biaya Transportasi:"})," ",t.jsx("span",{className:"font-medium text-brand-text-light",children:Ln(n.transportCost||0)})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Progres Sub-Status"}),ne.length>0?t.jsx("div",{className:"space-y-3 p-4 bg-brand-bg rounded-lg",children:ne.map(q=>{var re,De,J,E;const V=(re=n.activeSubStatuses)==null?void 0:re.includes(q.name),ce=(De=n.subStatusConfirmationSentAt)==null?void 0:De[q.name],Ce=(J=n.confirmedSubStatuses)==null?void 0:J.includes(q.name),Re=(E=n.clientSubStatusNotes)==null?void 0:E[q.name],Ue=ce&&!Ce&&(new Date().getTime()-new Date(ce).getTime())/(1e3*60*60)>24;return t.jsxs("div",{className:"py-2 border-b border-brand-border last:border-b-0",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[Ce&&t.jsx(Da,{className:"w-5 h-5 text-green-400"}),t.jsx("p",{className:`font-medium ${V?"text-brand-text-light":"text-brand-text-secondary"}`,children:q.name}),Ue&&t.jsx("span",{className:"text-xs font-semibold bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full",children:"Perlu Follow-up"})]}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:q.note})]}),t.jsx("button",{onClick:()=>y(n,q,Ue||!1),className:"button-secondary text-xs px-3 py-1.5 inline-flex items-center gap-1.5",disabled:Ce,children:Ce?"Terkonfirmasi":t.jsxs(t.Fragment,{children:[t.jsx(Jr,{className:"w-3 h-3"})," Minta Konfirmasi"]})})]}),Re&&t.jsxs("div",{className:"mt-3 ml-4 p-2 bg-brand-input rounded-md border-l-2 border-brand-accent",children:[t.jsx("p",{className:"text-xs font-semibold text-brand-accent",children:"Catatan Klien:"}),t.jsxs("p",{className:"text-sm text-brand-text-primary italic",children:['"',Re,'"']})]})]},q.name)})}):t.jsx("p",{className:"text-sm text-brand-text-secondary p-4 bg-brand-bg rounded-lg",children:"Tidak ada sub-status untuk status proyek saat ini."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Deliverables"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-sm mb-2",children:"Output Fisik (Cetak)"}),(n.printingDetails||[]).length>0?t.jsx("ul",{className:"space-y-2 text-sm",children:(n.printingDetails||[]).map(q=>t.jsxs("li",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-brand-text-light",children:q.customName||q.type}),t.jsx("span",{className:"text-brand-text-secondary font-medium",children:Ln(q.cost)})]},q.id))}):t.jsx("p",{className:"text-sm text-brand-text-secondary italic",children:"Tidak ada item fisik."})]}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-sm mb-2",children:"Output Digital"}),(()=>{const q=v.find(V=>V.id===n.packageId);return!q||q.digitalItems.length===0?t.jsx("p",{className:"text-sm text-brand-text-secondary italic",children:"Tidak ada item digital."}):t.jsx("div",{className:"space-y-2 text-sm",children:q.digitalItems.map((V,ce)=>{var Re;const Ce=(Re=n.completedDigitalItems)==null?void 0:Re.includes(V);return t.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded-md hover:bg-brand-input cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Ce,onChange:()=>U(V)}),t.jsx("span",{className:`text-brand-text-primary ${Ce?"line-through text-brand-text-secondary":""}`,children:V})]},ce)})})})()]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Tim"}),t.jsx("div",{className:"space-y-4",children:Object.entries(R).length>0?Object.entries(R).map(([q,V])=>t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-sm uppercase tracking-wider",children:q}),t.jsx("div",{className:"mt-2 space-y-2",children:V.map(ce=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-light font-medium",children:ce.name}),ce.subJob&&t.jsx("p",{className:"text-xs text-brand-text-secondary",children:ce.subJob})]}),t.jsxs("div",{className:"text-xs flex items-center gap-4 mt-2 sm:mt-0 self-start sm:self-center",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-brand-text-secondary",children:"Fee"}),t.jsx("p",{className:"font-semibold text-brand-text-primary",children:Ln(ce.fee)})]}),ce.reward&&ce.reward>0&&t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-brand-text-secondary",children:"Hadiah"}),t.jsx("p",{className:"font-semibold text-yellow-400",children:Ln(ce.reward)})]})]})]},ce.memberId))})]},q)):t.jsx("p",{className:"text-sm text-brand-text-secondary p-4 bg-brand-bg rounded-lg",children:"Belum ada tim yang ditugaskan."})})]}),n.notes&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Catatan"}),t.jsx("div",{className:"p-4 bg-brand-bg rounded-lg",children:t.jsx("p",{className:"text-sm text-brand-text-primary whitespace-pre-wrap",children:n.notes})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Aksi Cepat"}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>h("edit",n),className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(ln,{className:"w-4 h-4"})," Edit Proyek"]}),t.jsxs("button",{type:"button",onClick:()=>g(n),className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Briefing Tim"]})]})]})]}),S==="laba-rugi"&&(()=>{const q=k.filter(De=>De.projectId===n.id),V=q.filter(De=>De.type===$e.INCOME),ce=q.filter(De=>De.type===$e.EXPENSE),Ce=V.reduce((De,J)=>De+J.amount,0),Re=ce.reduce((De,J)=>De+J.amount,0),Ue=Ce-Re,re=({transaction:De})=>t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-brand-border/50 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-brand-text-light",children:De.description}),t.jsxs("p",{className:"text-xs text-brand-text-secondary",children:[new Date(De.date).toLocaleDateString("id-ID")," - ",De.category]})]}),t.jsx("p",{className:`font-semibold ${De.type===$e.INCOME?"text-brand-success":"text-brand-danger"}`,children:Ln(De.amount)})]});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Ringkasan Keuangan Proyek (Aktual)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(qe,{icon:t.jsx(ya,{}),title:"Total Pemasukan Aktual",value:Ln(Ce),iconBgColor:"bg-green-500/20",iconColor:"text-green-400"}),t.jsx(qe,{icon:t.jsx(_a,{}),title:"Total Pengeluaran Aktual",value:Ln(Re),iconBgColor:"bg-red-500/20",iconColor:"text-red-400"}),t.jsx(qe,{icon:t.jsx(on,{}),title:"Laba Aktual",value:Ln(Ue),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary mb-2",children:"Rincian Pemasukan Aktual"}),t.jsx("div",{className:"space-y-1",children:V.length>0?V.map(De=>t.jsx(re,{transaction:De},De.id)):t.jsx("p",{className:"text-sm text-brand-text-secondary text-center py-4",children:"Belum ada pemasukan."})})]}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary mb-2",children:"Rincian Pengeluaran Aktual"}),t.jsx("div",{className:"space-y-1",children:ce.length>0?ce.map(De=>t.jsx(re,{transaction:De},De.id)):t.jsx("p",{className:"text-sm text-brand-text-secondary text-center py-4",children:"Belum ada pengeluaran."})})]})]})]})})(),S==="files"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold text-gradient mb-2",children:"File & Tautan Penting"}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-brand-border",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Link Moodboard/Brief (Internal)"}),n.driveLink?t.jsx("a",{href:n.driveLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline font-semibold",children:"Buka Tautan"}):t.jsx("span",{className:"text-brand-text-secondary",children:"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-brand-border",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Link File dari Klien"}),n.clientDriveLink?t.jsx("a",{href:n.clientDriveLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline font-semibold",children:"Buka Tautan"}):t.jsx("span",{className:"text-brand-text-secondary",children:"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2",children:[t.jsx("span",{className:"text-brand-text-secondary",children:"Link File Jadi (untuk Klien)"}),n.finalDriveLink?t.jsx("a",{href:n.finalDriveLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline font-semibold",children:"Buka Tautan"}):t.jsx("span",{className:"text-brand-text-secondary",children:"Belum tersedia"})]})]})]}),S==="revisions"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Daftar Revisi"}),t.jsx("div",{className:"space-y-3",children:(n.revisions||[]).length>0?(n.revisions||[]).map(q=>{var V;return t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium ${NE(q.status)}`,children:q.status}),t.jsxs("span",{children:["Deadline: ",new Date(q.deadline).toLocaleDateString("id-ID")]})]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{className:"text-brand-text-secondary",children:"Admin:"})," ",q.adminNotes]}),t.jsxs("p",{className:"text-sm mt-1",children:[t.jsxs("strong",{className:"text-brand-text-secondary",children:["Freelancer (",((V=a.find(ce=>ce.id===q.freelancerId))==null?void 0:V.name)||"N/A","):"]})," ",q.freelancerNotes||"-"]}),q.driveLink&&t.jsxs("p",{className:"text-sm mt-1",children:[t.jsx("strong",{className:"text-brand-text-secondary",children:"Link Hasil:"})," ",t.jsx("a",{href:q.driveLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Buka Tautan"})]}),t.jsx("button",{onClick:()=>H(q),className:"text-xs font-semibold text-brand-accent hover:underline mt-2",children:"Bagikan Tautan Revisi"})]},q.id)}):t.jsx("p",{className:"text-center text-sm text-brand-text-secondary py-4",children:"Belum ada revisi."})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3",children:"Tambah Tugas Revisi Baru"}),t.jsxs("form",{onSubmit:O,className:"p-4 bg-brand-bg rounded-lg space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"adminNotes",value:P.adminNotes,onChange:q=>A(V=>({...V,adminNotes:q.target.value})),className:"input-field",rows:3,placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"adminNotes",className:"input-label",children:"Catatan Revisi untuk Freelancer"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"freelancerId",value:P.freelancerId,onChange:q=>A(V=>({...V,freelancerId:q.target.value})),className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Freelancer..."}),n.team.map(q=>t.jsx("option",{value:q.memberId,children:q.name},q.memberId))]}),t.jsx("label",{htmlFor:"freelancerId",className:"input-label",children:"Tugaskan ke"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"deadline",value:P.deadline,onChange:q=>A(V=>({...V,deadline:q.target.value})),className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"deadline",className:"input-label",children:"Deadline"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("button",{type:"submit",className:"button-primary",children:"Tambah Revisi"})})]})]})]})]})]})},TE=({project:n,subStatus:e,isFollowUp:a,clients:s,teamMembers:r,setProjects:d,onClose:u})=>{const[p,h]=C.useState(""),[f,g]=C.useState(""),y=C.useMemo(()=>s.find(k=>k.id===n.clientId),[s,n.clientId]);C.useEffect(()=>{y?h(`client-${y.id}`):n.team.length>0&&h(`freelancer-${n.team[0].memberId}`)},[y,n.team]),C.useEffect(()=>{var w;let k="[Penerima]";if(p.startsWith("client-")&&y)k=y.name;else if(p.startsWith("freelancer-")){const P=p.split("-")[1];k=((w=n.team.find(A=>A.memberId===P))==null?void 0:w.name)||"[Freelancer]"}const j=` *Konfirmasi Tugas Proyek* 

Halo *${k}*,

Kami dari *Vena Pictures* ingin meminta konfirmasi Anda untuk sub-tugas pada proyek *"${n.projectName}"*.

*Tugas yang perlu dikonfirmasi:*
 *${e.name}*

*Detail/Catatan Tambahan:*
 ${e.note||"_Tidak ada catatan tambahan._"}

Mohon untuk meninjau detail di atas dan balas pesan ini dengan *"SETUJU"* atau *"CONFIRM"* jika Anda sudah memahami dan menyetujui tugas tersebut.

Jika ada pertanyaan, jangan ragu untuk menghubungi kami kembali.

Terima kasih atas perhatian dan kerja samanya!

Salam hangat,
*Tim Vena Pictures*`,S=` *Follow-Up Konfirmasi Tugas* 

Halo *${k}*,

Kami dari *Vena Pictures* ingin menindaklanjuti dengan hormat permintaan konfirmasi kami sebelumnya untuk sub-tugas pada proyek *"${n.projectName}"*.

*Tugas yang perlu dikonfirmasi:*
 *${e.name}*

*Detail/Catatan Tambahan:*
 ${e.note||"_Tidak ada catatan tambahan._"}

Kami mohon kesediaan Anda untuk memberikan konfirmasi agar kami dapat melanjutkan ke tahap berikutnya.

Jika ada pertanyaan atau kendala, jangan ragu untuk menghubungi kami.

Terima kasih atas perhatian dan kerja samanya!

Salam hangat,
*Tim Vena Pictures*`;g(a?S:j)},[p,n,e,y,a]);const v=()=>{var j;let k="";if(p.startsWith("client-")&&y)k=y.phone;else if(p.startsWith("freelancer-")){const S=p.split("-")[1];k=((j=r.find(w=>w.id===S))==null?void 0:j.phone)||""}if(k){d(P=>P.map(A=>{if(A.id===n.id){const R={...A.subStatusConfirmationSentAt||{},[e.name]:new Date().toISOString()};return{...A,subStatusConfirmationSentAt:R}}return A}));const w=`https://wa.me/${k.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(f)}`;window.open(w,"_blank"),u()}else alert("Nomor telepon untuk penerima ini tidak ditemukan.")};return t.jsx(nt,{isOpen:!0,onClose:u,title:`${a?"Follow-Up":"Minta"} Konfirmasi Tugas: ${e.name}`,children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"recipient",value:p,onChange:k=>h(k.target.value),className:"input-field",children:[y&&t.jsxs("option",{value:`client-${y.id}`,children:["Klien: ",y.name]}),n.team.map(k=>t.jsxs("option",{value:`freelancer-${k.memberId}`,children:["Freelancer: ",k.name]},k.memberId))]}),t.jsx("label",{className:"input-label",children:"Kirim ke"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-brand-text-secondary mb-2 block",children:"Pesan Kustom"}),t.jsx("div",{className:"p-3 bg-brand-bg rounded-lg border border-brand-border",children:t.jsx("textarea",{id:"message",value:f,onChange:k=>g(k.target.value),rows:15,className:"w-full bg-transparent text-sm text-brand-text-primary focus:outline-none resize-none"})})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t border-brand-border",children:t.jsxs("button",{onClick:v,className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Jr,{className:"w-4 h-4"})," Bagikan ke WhatsApp"]})})]})})},SE=({projects:n,setProjects:e,clients:a,packages:s,teamMembers:r,teamProjectPayments:d,setTeamProjectPayments:u,transactions:p,setTransactions:h,initialAction:f,setInitialAction:g,profile:y,showNotification:v,cards:k,setCards:j,handleNavigation:S})=>{const[w,P]=C.useState(""),[A,R]=C.useState("all"),[O,H]=C.useState(!1),[L,U]=C.useState(null),[ne,ie]=C.useState(!1),[q,V]=C.useState(!1),[ce,Ce]=C.useState("add"),[Re,Ue]=C.useState({}),[re,De]=C.useState("list"),[J,E]=C.useState(null),[T,B]=C.useState(!1),[ue,ke]=C.useState(""),[G,he]=C.useState(""),[Q,le]=C.useState(""),[W,we]=C.useState(""),[Be,Ze]=C.useState(null),[Ke,Qe]=C.useState(!0),[gt,At]=C.useState(!1),[wt,ft]=C.useState(null),Ne=F=>{U(F),H(!0)};C.useEffect(()=>{if(f&&f.type==="VIEW_PROJECT_DETAILS"&&f.id){const F=n.find(K=>K.id===f.id);F&&Ne(F),g(null)}},[f,n,g]);const Ve=C.useMemo(()=>n.filter(F=>re==="kanban"||A==="all"||F.status===A).filter(F=>F.projectName.toLowerCase().includes(w.toLowerCase())||F.clientName.toLowerCase().includes(w.toLowerCase())),[n,w,A,re]),_e=C.useMemo(()=>n.filter(F=>F.status!=="Selesai"&&F.status!=="Dibatalkan"),[n]),Je=C.useMemo(()=>Ve.filter(F=>F.status!=="Selesai"&&F.status!=="Dibatalkan"),[Ve]),st=C.useMemo(()=>Ve.filter(F=>F.status==="Selesai"||F.status==="Dibatalkan"),[Ve]),dt=C.useMemo(()=>{if(!Be)return null;const F=n.filter(K=>K.status!=="Selesai"&&K.status!=="Dibatalkan");switch(Be){case"value":return{title:"Rincian Nilai Proyek Aktif",items:F.map(_=>({id:_.id,primary:_.projectName,secondary:_.clientName,value:_.totalCost})),total:F.reduce((_,D)=>_+D.totalCost,0)};case"receivables":const K=F.filter(_=>_.totalCost>_.amountPaid);return{title:"Rincian Total Piutang",items:K.map(_=>({id:_.id,primary:_.projectName,secondary:_.clientName,value:_.totalCost-_.amountPaid})),total:K.reduce((_,D)=>_+(D.totalCost-D.amountPaid),0)};case"team_costs":const te=d.filter(_=>_.status==="Unpaid"&&F.some(D=>D.id===_.projectId));return{title:"Rincian Biaya Tim Belum Lunas",items:te.map(_=>{var D;return{id:_.id,primary:_.teamMemberName,secondary:`Proyek: ${((D=n.find(ae=>ae.id===_.projectId))==null?void 0:D.projectName)||"N/A"}`,value:_.fee}}),total:te.reduce((_,D)=>_+D.fee,0)};case"top_type":const X=n.reduce((_,D)=>(_[D.projectType]=(_[D.projectType]||0)+1,_),{}),fe=Object.keys(X).length>0?Object.entries(X).sort(([,_],[,D])=>Number(D)-Number(_))[0][0]:"N/A",ye=n.filter(_=>_.projectType===fe);return{title:`Daftar Proyek Jenis: ${fe}`,items:ye.map(_=>({id:_.id,primary:_.projectName,secondary:_.clientName,value:_.status})),total:null};default:return null}},[Be,n,d]),yt=(F,K)=>{Ce(F),U(K),Ue(K),V(!0)},Dt=F=>{if(window.confirm("Apakah Anda yakin ingin menghapus proyek ini? Semua data terkait (termasuk tugas tim dan transaksi) akan dihapus, dan saldo akan dikembalikan.")){const K=p.filter(te=>te.projectId===F);K.length>0&&h(te=>{const X=te.filter(ye=>ye.projectId!==F);let fe=[...k];return K.forEach(ye=>{ye.type===$e.INCOME&&ye.cardId?fe=fe.map(_=>_.id===ye.cardId?{..._,balance:_.balance-ye.amount}:_):ye.type===$e.EXPENSE&&ye.cardId&&(fe=fe.map(_=>_.id===ye.cardId?{..._,balance:_.balance+ye.amount}:_))}),j(fe),X}),e(te=>te.filter(X=>X.id!==F)),u(te=>te.filter(X=>X.projectId!==F)),v("Proyek dan semua data terkait berhasil dihapus.")}},ze=F=>{var ut,Nt;U(F);const K=new Date(F.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),te=F.team.length>0?F.team.map(jt=>`- ${jt.name}`).join(`
`):"Tim belum ditugaskan.",X=[];if(X.push(`${K}`),X.push(`*${F.projectName}*`),X.push(`
*Tim Bertugas:*
${te}`),(F.startTime||F.endTime||F.location)&&X.push(""),F.startTime&&X.push(`*Waktu Mulai:* ${F.startTime}`),F.endTime&&X.push(`*Waktu Selesai:* ${F.endTime}`),F.location&&X.push(`*Lokasi :* ${F.location}`),F.notes&&(X.push(""),X.push(`*Catatan:*
${F.notes}`)),(F.location||F.driveLink)&&X.push(""),F.location){const wn=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.location)}`;X.push(`*Link Lokasi:*
${wn}`)}F.driveLink&&(F.location&&X.push(""),X.push(`*Link Moodboard:*
${F.driveLink}`)),y.briefingTemplate&&(X.push(`
---
`),X.push(y.briefingTemplate));const fe=X.join(`
`).replace(/\n\n\n+/g,`

`).trim();ke(fe),he(`whatsapp://send?text=${encodeURIComponent(fe)}`);const ye=jt=>jt.toISOString().replace(/-|:|\.\d{3}/g,""),_=/(\d{2}:\d{2})/,D=(ut=F.startTime)==null?void 0:ut.match(_),ae=(Nt=F.endTime)==null?void 0:Nt.match(_);let se="",Ae="";if(D){const jt=new Date(`${F.date}T${D[1]}:00`),ge=y.eventTypes.includes(F.projectType)?2:8,Se=ae?new Date(`${F.date}T${ae[1]}:00`):new Date(jt.getTime()+ge*60*60*1e3),Me=`${ye(jt)}/${ye(Se)}`,et=`Briefing untuk ${F.projectName}:

${fe}`;se=`https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(F.projectName)}&dates=${Me}&details=${encodeURIComponent(et)}&location=${encodeURIComponent(F.location||"")}`;const mt=et.replace(/\n/g,"\\n");Ae=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",`UID:${F.id}@venapictures.com`,`DTSTAMP:${ye(new Date)}`,`DTSTART:${ye(jt)}`,`DTEND:${ye(Se)}`,`SUMMARY:${F.projectName}`,`DESCRIPTION:${mt}`,`LOCATION:${F.location||""}`,"END:VEVENT","END:VCALENDAR"].join(`
`)}le(se),we(Ae?`data:text/calendar;charset=utf8,${encodeURIComponent(Ae)}`:""),B(!0)},ot=(F,K)=>({Tertunda:0,Persiapan:10,Dikonfirmasi:25,Editing:70,Revisi:80,Cetak:90,Dikirim:95,Selesai:100,Dibatalkan:0})[F]??0,Ie=(F,K)=>{F.dataTransfer.setData("projectId",K),E(K)},M=F=>{F.preventDefault()},de=(F,K)=>{F.preventDefault();const te=F.dataTransfer.getData("projectId"),X=n.find(fe=>fe.id===te);X&&X.status!==K&&(e(fe=>fe.map(ye=>ye.id===te?{...ye,status:K,progress:ot(K,y.projectStatusConfig),activeSubStatuses:[]}:ye)),v(`Status "${X.projectName}" diubah ke "${K}"`)),E(null)},z=(F,K,te)=>{ft({project:F,subStatus:K,isFollowUp:te})};return t.jsxs("div",{className:"space-y-8",children:[t.jsx(Hn,{title:"Manajemen Proyek",subtitle:"Lacak semua proyek dari awal hingga selesai.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>ie(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>S(Te.CLIENTS),className:"button-primary inline-flex items-center gap-2",title:"Tambah proyek baru melalui halaman Klien",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah Proyek"]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(kE,{projects:n,teamProjectPayments:d,projectStatusConfig:y.projectStatusConfig,onStatCardClick:Ze}),t.jsx(jE,{projects:_e,teamProjectPayments:d,handleOpenDetailModal:Ne,config:y.projectStatusConfig}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"input-group flex-grow !mt-0 w-full md:w-auto",children:[t.jsx("input",{type:"search",value:w,onChange:F=>P(F.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Cari proyek atau klien..."})]}),t.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[t.jsxs("select",{value:A,onChange:F=>R(F.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full md:w-48",children:[t.jsx("option",{value:"all",children:"Semua Status"}),y.projectStatusConfig.map(F=>t.jsx("option",{value:F.name,children:F.name},F.id))]}),t.jsxs("div",{className:"p-1 bg-brand-bg rounded-lg flex items-center h-fit",children:[t.jsx("button",{onClick:()=>De("list"),className:`p-2 rounded-md transition-colors ${re==="list"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:t.jsx(Bc,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>De("kanban"),className:`p-2 rounded-md transition-colors ${re==="kanban"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:t.jsx(Vc,{className:"w-5 h-5"})})]})]})]}),re==="list"?t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsxs("button",{onClick:()=>Qe(F=>!F),className:"w-full flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Proyek Aktif (",Je.length,")"]}),Ke?t.jsx(ya,{className:"w-5 h-5 text-brand-text-secondary"}):t.jsx(_a,{className:"w-5 h-5 text-brand-text-secondary"})]})}),Ke&&t.jsx(jg,{projects:Je,handleOpenDetailModal:Ne,handleOpenForm:yt,handleProjectDelete:Dt,config:y.projectStatusConfig}),t.jsx("div",{className:"p-4 border-t border-brand-border",children:t.jsxs("button",{onClick:()=>At(F=>!F),className:"w-full flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold text-brand-text-light",children:["Proyek Selesai & Dibatalkan (",st.length,")"]}),gt?t.jsx(ya,{className:"w-5 h-5 text-brand-text-secondary"}):t.jsx(_a,{className:"w-5 h-5 text-brand-text-secondary"})]})}),gt&&t.jsx(jg,{projects:st,handleOpenDetailModal:Ne,handleOpenForm:yt,handleProjectDelete:Dt,config:y.projectStatusConfig})]}):t.jsx(wE,{projects:Ve,handleOpenDetailModal:Ne,draggedProjectId:J,handleDragStart:Ie,handleDragOver:M,handleDrop:de,config:y.projectStatusConfig})]}),t.jsx(nt,{isOpen:q,onClose:()=>V(!1),title:`Edit Proyek: ${L==null?void 0:L.projectName}`,children:t.jsx("p",{children:"Fitur edit detail operasional proyek akan segera hadir."})}),t.jsx(nt,{isOpen:O,onClose:()=>H(!1),title:`Detail Proyek: ${L==null?void 0:L.projectName}`,size:"3xl",children:t.jsx(CE,{selectedProject:L,setSelectedProject:U,teamMembers:r,clients:a,profile:y,showNotification:v,setProjects:e,onClose:()=>H(!1),handleOpenForm:yt,handleProjectDelete:Dt,handleOpenBriefingModal:ze,handleOpenConfirmationModal:z,packages:s,transactions:p,teamProjectPayments:d})}),t.jsx(nt,{isOpen:T,onClose:()=>B(!1),title:"Bagikan Briefing Proyek",size:"2xl",children:L&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("textarea",{value:ue,readOnly:!0,rows:15,className:"input-field w-full text-sm"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-3 pt-4 border-t border-brand-border",children:[W&&t.jsx("a",{href:W,download:`${L.projectName}.ics`,className:"button-secondary text-sm",children:"Download .ICS"}),Q&&t.jsx("a",{href:Q,target:"_blank",rel:"noopener noreferrer",className:"button-secondary text-sm",children:"Tambah ke Google Calendar"}),t.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Jr,{className:"w-4 h-4"})," Bagikan ke WhatsApp"]})]})]})}),t.jsx(nt,{isOpen:!!Be,onClose:()=>Ze(null),title:(dt==null?void 0:dt.title)||"",size:"2xl",children:t.jsxs("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:[dt&&dt.items.length>0?t.jsx("div",{className:"space-y-3",children:dt.items.map(F=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:F.primary}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:F.secondary})]}),t.jsx("p",{className:`font-semibold ${typeof F.value=="number"?"text-brand-text-light":"text-brand-accent"}`,children:typeof F.value=="number"?Ln(F.value):F.value})]},F.id))}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada data untuk ditampilkan."}),(dt==null?void 0:dt.total)!==null&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border font-bold flex justify-between text-lg",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{children:Ln((dt==null?void 0:dt.total)||0)})]})]})}),wt&&t.jsx(TE,{project:wt.project,subStatus:wt.subStatus,isFollowUp:wt.isFollowUp,clients:a,teamMembers:r,setProjects:e,onClose:()=>ft(null)}),t.jsx(nt,{isOpen:ne,onClose:()=>ie(!1),title:"Panduan Halaman Proyek",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat kendali operasional untuk semua proyek Anda. Fokusnya adalah melacak progres dan mengelola detail harian."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Statistik Kunci:"})," Di bagian atas, Anda akan melihat ringkasan finansial dan operasional dari proyek-proyek yang sedang aktif."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Ringkasan Proyek Aktif:"})," Tabel ini memberikan gambaran cepat tentang semua proyek yang belum selesai, termasuk status pembayaran klien, pembayaran tim, dan tugas mendesak seperti revisi yang menunggu."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Tampilan Papan Kanban vs. Daftar:"}),t.jsxs("ul",{className:"list-['-_'] list-inside ml-4",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["Papan Kanban (",t.jsx(Vc,{className:"w-4 h-4 inline-block"}),"):"]})," Visualisasikan alur kerja Anda. Anda dapat menyeret (drag-and-drop) kartu proyek dari satu status ke status lainnya untuk memperbarui progresnya dengan cepat."]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["Daftar (",t.jsx(Bc,{className:"w-4 h-4 inline-block"}),"):"]})," Tampilan tabel tradisional yang bagus untuk melihat detail lebih banyak sekaligus dan menyortir data."]})]})]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Edit Detail Operasional:"}),' Tombol "Edit Proyek" membuka formulir untuk mengelola detail operasional seperti status, sub-status, jadwal, tim yang ditugaskan, tautan file, dan catatan internal.']}),t.jsxs("li",{children:[t.jsxs("strong",{children:["Detail Proyek Lengkap (",t.jsx(Pa,{className:"w-4 h-4 inline-block"}),"):"]})," Klik ikon mata untuk membuka detail lengkap proyek, termasuk manajemen revisi, progres checklist, dan rincian laba/rugi."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Catatan Penting:"})," Penambahan proyek baru dan pengelolaan data klien/pembayaran utama dilakukan di halaman ",t.jsx("strong",{children:"Manajemen Klien"}),". Halaman ini fokus pada pengelolaan progres proyek yang sudah ada."]})]})]})})]})},wg=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),IE=({unpaidProjects:n,projectsToPay:e,onToggleProject:a,onProceedToPayment:s,projects:r})=>{if(n.length===0)return t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada item yang belum dibayar untuk freelancer ini."});const d=n.filter(u=>e.includes(u.id)).reduce((u,p)=>u+p.fee,0);return t.jsxs("div",{className:"overflow-x-auto",children:[t.jsx("p",{className:"text-sm text-brand-text-secondary mb-4",children:"Pilih proyek yang akan dibayarkan. Anda dapat memilih beberapa proyek sekaligus."}),t.jsx("div",{className:"border border-brand-border rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase bg-brand-bg",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 w-12 text-center",children:t.jsx("input",{type:"checkbox",checked:e.length===n.length&&n.length>0,onChange:()=>{e.length===n.length?n.forEach(u=>a(u.id)):n.filter(u=>!e.includes(u.id)).forEach(u=>a(u.id))}})}),t.jsx("th",{className:"px-4 py-3 font-medium tracking-wider",children:"Proyek"}),t.jsx("th",{className:"px-4 py-3 font-medium tracking-wider",children:"Tanggal"}),t.jsx("th",{className:"px-4 py-3 font-medium tracking-wider text-right",children:"Fee/Gaji"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(u=>{var f;const p=((f=r.find(g=>g.id===u.projectId))==null?void 0:f.projectName)||"Proyek Tidak Ditemukan",h=e.includes(u.id);return t.jsxs("tr",{className:`transition-colors cursor-pointer ${h?"bg-brand-accent/10":"hover:bg-brand-bg"}`,onClick:()=>a(u.id),children:[t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("input",{type:"checkbox",checked:h,readOnly:!0,className:"pointer-events-none"})}),t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:p}),t.jsx("td",{className:"px-4 py-3 text-brand-text-primary",children:new Date(u.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold text-brand-text-light",children:wg(u.fee)})]},u.id)})})]})}),e.length>0&&t.jsxs("div",{className:"mt-4 p-4 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-sm font-semibold mr-4",children:[e.length," proyek dipilih"]}),t.jsxs("span",{className:"text-sm text-brand-text-secondary",children:["Total: ",t.jsx("span",{className:"font-bold text-brand-text-light",children:wg(d)})]})]}),t.jsx("button",{type:"button",onClick:s,className:"button-primary",children:"Lanjut ke Pembayaran "})]})]})},jn=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Pc=n=>n?new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"",Cg={name:"",role:"",email:"",phone:"",standardFee:0,noRek:""},AE=(n,e,a)=>{const r=[n.join(","),...e.map(h=>h.map(f=>{const g=String(f);return g.includes(",")||g.includes('"')||g.includes(`
`)?`"${g.replace(/"/g,'""')}"`:g}).join(","))].join(`
`),d=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(d),p=document.createElement("a");p.setAttribute("href",u),p.setAttribute("download",a),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},EE=({rating:n,onSetRating:e})=>t.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(a=>t.jsx("button",{type:"button",onClick:e?()=>e(a):void 0,className:`p-1 ${e?"cursor-pointer":""}`,disabled:!e,"aria-label":`Set rating to ${a}`,children:t.jsx(ia,{className:`w-5 h-5 ${a<=n?"text-yellow-400 fill-current":"text-gray-600"}`})},a))}),_E=n=>{switch(n){case xa.PRAISE:return"bg-green-500/20 text-green-400";case xa.CONCERN:return"bg-yellow-500/20 text-yellow-400";case xa.LATE_DEADLINE:return"bg-red-500/20 text-red-400";case xa.GENERAL:default:return"bg-gray-500/20 text-gray-400"}},PE=({member:n,onSetRating:e,newNote:a,setNewNote:s,newNoteType:r,setNewNoteType:d,onAddNote:u,onDeleteNote:p})=>t.jsxs("div",{children:[t.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg mb-6",children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-2",children:"Peringkat Kinerja Keseluruhan"}),t.jsx("p",{className:"text-sm text-brand-text-secondary mb-3",children:"Beri peringkat pada freelancer ini berdasarkan kinerja mereka secara umum."}),t.jsx("div",{className:"flex justify-center",children:t.jsx(EE,{rating:n.rating,onSetRating:e})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-3",children:"Tambah Catatan Kinerja Baru"}),t.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{value:a,onChange:h=>s(h.target.value),className:"input-field",rows:3,placeholder:" ",id:"newPerformanceNote"}),t.jsx("label",{htmlFor:"newPerformanceNote",className:"input-label",children:"Tulis catatan..."})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"input-group !mb-0 flex-grow",children:[t.jsx("select",{id:"newNoteType",value:r,onChange:h=>d(h.target.value),className:"input-field",children:Object.values(xa).map(h=>t.jsx("option",{value:h,children:h},h))}),t.jsx("label",{htmlFor:"newNoteType",className:"input-label",children:"Jenis Catatan"})]}),t.jsx("button",{onClick:u,className:"button-primary ml-4",children:"Tambah Catatan"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-3",children:"Riwayat Catatan Kinerja"}),t.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:n.performanceNotes.length>0?n.performanceNotes.map(h=>t.jsxs("div",{className:"bg-brand-bg p-3 rounded-lg flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${_E(h.type)}`,children:h.type}),t.jsx("span",{className:"text-xs text-brand-text-secondary",children:new Date(h.date).toLocaleDateString("id-ID")})]}),t.jsx("p",{className:"text-sm text-brand-text-primary",children:h.note})]}),t.jsx("button",{onClick:()=>p(h.id),className:"p-1.5 text-brand-text-secondary hover:text-red-400",children:t.jsx(fn,{className:"w-4 h-4"})})]},h.id)):t.jsx("p",{className:"text-center text-sm text-brand-text-secondary py-8",children:"Belum ada catatan kinerja."})})]})]}),DE=({member:n,suggestions:e,rewardLedger:a,onWithdraw:s})=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[t.jsxs("div",{className:"p-8 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 text-white shadow-lg w-full max-w-sm",children:[t.jsx("p",{className:"text-sm uppercase tracking-wider opacity-80",children:"Saldo Hadiah Saat Ini"}),t.jsx("p",{className:"text-5xl font-bold mt-2 tracking-tight",children:jn(n.rewardBalance)})]}),t.jsx("p",{className:"text-sm text-brand-text-secondary mt-6 max-w-md",children:"Saldo ini terakumulasi dari hadiah yang Anda berikan pada setiap proyek yang telah lunas. Anda dapat mencairkan seluruh saldo ini untuk freelancer."}),t.jsx("button",{onClick:s,disabled:n.rewardBalance<=0,className:"mt-6 button-primary",children:"Tarik Seluruh Saldo Hadiah"})]}),t.jsxs("div",{className:"my-8 px-1",children:[t.jsx("h4",{className:"text-lg font-semibold text-gradient mb-4 text-center",children:"Saran Strategis"}),e.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(r=>t.jsxs("div",{className:"bg-brand-bg p-4 rounded-xl flex items-start gap-4 border border-brand-border",children:[t.jsx("div",{className:"flex-shrink-0 mt-1 text-blue-400",children:r.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:r.title}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:r.text})]})]},r.id))}):t.jsx("p",{className:"text-center text-brand-text-secondary text-sm",children:"Tidak ada saran khusus saat ini."})]}),t.jsxs("div",{className:"mt-4 px-1",children:[t.jsx("h4",{className:"text-lg font-semibold text-gradient mb-4",children:"Riwayat Saldo Hadiah"}),a.length>0?t.jsx("div",{className:"border border-brand-border rounded-lg overflow-hidden max-h-80 overflow-y-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-brand-bg",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left font-medium text-brand-text-secondary tracking-wider",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left font-medium text-brand-text-secondary tracking-wider",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-right font-medium text-brand-text-secondary tracking-wider",children:"Jumlah"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:a.map(r=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 whitespace-nowrap text-brand-text-primary",children:new Date(r.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3 text-brand-text-light",children:r.description}),t.jsxs("td",{className:`p-3 text-right font-semibold whitespace-nowrap ${r.amount>=0?"text-brand-success":"text-brand-danger"}`,children:[r.amount>=0?"+":"",jn(r.amount)]})]},r.id))})]})}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Belum ada riwayat hadiah untuk freelancer ini."})]})]}),ME=({member:n,paymentDetails:e,paymentAmount:a,setPaymentAmount:s,onPay:r,onSetTab:d,renderPaymentDetailsContent:u,cards:p,monthlyBudgetPocket:h,paymentSourceId:f,setPaymentSourceId:g,onSign:y})=>{const v=()=>{r()};return t.jsxs("div",{children:[u(),t.jsxs("div",{className:"mt-6 pt-6 border-t border-brand-border non-printable space-y-4",children:[t.jsx("h5",{className:"font-semibold text-gradient text-base",children:"Buat Pembayaran"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"paymentAmount",value:a,onChange:k=>s(k.target.value===""?"":Number(k.target.value)),className:"input-field",placeholder:" ",max:e.total}),t.jsxs("label",{htmlFor:"paymentAmount",className:"input-label",children:["Jumlah Bayar (Total: ",jn(e.total),")"]})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"paymentSource",className:"input-field",value:f,onChange:k=>g(k.target.value),children:[t.jsx("option",{value:"",disabled:!0,children:"Pilih Sumber Pembayaran..."}),h&&t.jsxs("option",{value:`pocket-${h.id}`,children:[h.name," (Sisa: ",jn(h.amount),")"]}),p.map(k=>t.jsxs("option",{value:`card-${k.id}`,children:[k.bankName," ",k.lastFourDigits!=="CASH"?`**** ${k.lastFourDigits}`:""," (Saldo: ",jn(k.balance),")"]},k.id))]}),t.jsx("label",{htmlFor:"paymentSource",className:"input-label",children:"Sumber Dana"})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{type:"button",onClick:y,className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(ln,{className:"w-4 h-4"}),"Tanda Tangani Slip"]}),t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-secondary text-sm inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak"]})]}),t.jsx("button",{type:"button",onClick:v,className:"button-primary w-full sm:w-auto",children:"Bayar Sekarang & Buat Catatan"})]})]})]})},RE=({teamMembers:n,setTeamMembers:e,teamProjectPayments:a,setTeamProjectPayments:s,teamPaymentRecords:r,setTeamPaymentRecords:d,transactions:u,setTransactions:p,userProfile:h,showNotification:f,initialAction:g,setInitialAction:y,projects:v,setProjects:k,rewardLedgerEntries:j,setRewardLedgerEntries:S,pockets:w,setPockets:P,cards:A,setCards:R,onSignPaymentRecord:O})=>{var _;const[H,L]=C.useState(!1),[U,ne]=C.useState(!1),[ie,q]=C.useState("add"),[V,ce]=C.useState(null),[Ce,Re]=C.useState(Cg),[Ue,re]=C.useState("projects"),[De,J]=C.useState([]),[E,T]=C.useState(""),[B,ue]=C.useState(""),[ke,G]=C.useState(null),[he,Q]=C.useState(null),[le,W]=C.useState(null),[we,Be]=C.useState(!1),[Ze,Ke]=C.useState(!1),[Qe,gt]=C.useState(""),[At,wt]=C.useState(xa.GENERAL),[ft,Ne]=C.useState(null);C.useEffect(()=>{if(g&&g.type==="VIEW_FREELANCER_DETAILS"&&g.id){const D=n.find(ae=>ae.id===g.id);D&&Dt(D),y(null)}if(ft){const D=document.getElementById("freelancer-portal-qrcode");D&&typeof window.QRCode<"u"&&(D.innerHTML="",new window.QRCode(D,{text:ft.url,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))}},[g,n,y,ft]);const Ve=D=>{const ae=window.location.pathname.replace(/index\.html$/,""),se=`${window.location.origin}${ae}#/freelancer-portal/${D.portalAccessId}`;Ne({title:`Portal Tautan untuk ${D.name}`,url:se})},_e=C.useMemo(()=>{const D=a.filter(se=>se.status==="Unpaid").reduce((se,Ae)=>se+Ae.fee,0),ae=[...n].sort((se,Ae)=>Ae.rating-se.rating)[0];return{totalMembers:n.length,totalUnpaid:jn(D),topRatedName:ae?ae.name:"N/A",topRatedRating:ae?ae.rating.toFixed(1):"N/A"}},[n,a]),Je=(D,ae)=>{q(D),D==="edit"&&ae?(ce(ae),Re(ae)):(ce(null),Re(Cg)),L(!0)},st=D=>{const{name:ae,value:se}=D.target;Re(Ae=>({...Ae,[ae]:ae==="standardFee"?Number(se):se}))},dt=D=>{if(D.preventDefault(),ie==="add"){const ae={...Ce,id:crypto.randomUUID(),rewardBalance:0,rating:0,performanceNotes:[],portalAccessId:crypto.randomUUID()};e(se=>[...se,ae]),f(`Freelancer ${ae.name} berhasil ditambahkan.`)}else if(V){const ae={...V,...Ce};e(se=>se.map(Ae=>Ae.id===V.id?ae:Ae)),Ce.name!==V.name&&(k(se=>se.map(Ae=>({...Ae,team:Ae.team.map(ut=>ut.memberId===V.id?{...ut,name:Ce.name}:ut)}))),s(se=>se.map(Ae=>Ae.teamMemberId===V.id?{...Ae,teamMemberName:Ce.name}:Ae))),f(`Data ${Ce.name} berhasil diperbarui.`)}L(!1)},yt=D=>{if(a.some(ae=>ae.teamMemberId===D&&ae.status==="Unpaid")){alert("Freelancer ini memiliki pembayaran yang belum lunas dan tidak dapat dihapus.");return}window.confirm("Apakah Anda yakin ingin menghapus freelancer ini? Semua data terkait (proyek, pembayaran, riwayat hadiah) juga akan dihapus.")&&(k(ae=>ae.map(se=>({...se,team:se.team.filter(Ae=>Ae.memberId!==D)}))),s(ae=>ae.filter(se=>se.teamMemberId!==D)),d(ae=>ae.filter(se=>se.teamMemberId!==D)),S(ae=>ae.filter(se=>se.teamMemberId!==D)),e(ae=>ae.filter(se=>se.id!==D)),f("Freelancer dan semua data terkait berhasil dihapus."))},Dt=D=>{ce(D),re("projects"),ne(!0)},ze=()=>{if(!V||De.length===0)return;const D=M.filter(se=>De.includes(se.id)).reduce((se,Ae)=>se+Ae.fee,0);T(D);const ae=w.find(se=>se.type===tn.EXPENSE);ae&&ae.amount>=D?ue(`pocket-${ae.id}`):ue(""),re("create-payment")},ot=()=>{if(!V||!E||E<=0||!B){alert("Harap isi jumlah dan pilih sumber dana.");return}const D={id:`TRN-PAY-FR-${crypto.randomUUID()}`,date:new Date().toISOString().split("T")[0],description:`Pembayaran Gaji Freelancer: ${V.name} (${De.length} proyek)`,amount:E,type:$e.EXPENSE,category:"Gaji Freelancer",method:"Transfer Bank"};if(B.startsWith("card-")){const se=B.replace("card-",""),Ae=A.find(ut=>ut.id===se);if(!Ae||Ae.balance<E){alert(`Saldo di kartu ${Ae==null?void 0:Ae.bankName} tidak mencukupi.`);return}D.cardId=se,D.method=Ae.cardType===Rt.TUNAI?"Tunai":"Kartu",R(ut=>ut.map(Nt=>Nt.id===se?{...Nt,balance:Nt.balance-E}:Nt))}else{const se=B.replace("pocket-",""),Ae=w.find(ut=>ut.id===se);if(!Ae||Ae.amount<E){alert(`Saldo di kantong ${Ae==null?void 0:Ae.name} tidak mencukupi.`);return}D.pocketId=se,D.method="Sistem",P(ut=>ut.map(Nt=>Nt.id===se?{...Nt,amount:Nt.amount-E}:Nt))}const ae={id:crypto.randomUUID(),recordNumber:`PAY-FR-${V.id.slice(-4)}-${Date.now()}`,teamMemberId:V.id,date:new Date().toISOString().split("T")[0],projectPaymentIds:De,totalAmount:E};s(se=>se.map(Ae=>De.includes(Ae.id)?{...Ae,status:"Paid"}:Ae)),p(se=>[...se,D].sort((Ae,ut)=>new Date(ut.date).getTime()-new Date(Ae.date).getTime())),d(se=>[...se,ae]),f(`Pembayaran untuk ${V.name} sebesar ${jn(E)} berhasil dicatat.`),J([]),T(""),ne(!1)},Ie=()=>{if(!(!V||V.rewardBalance<=0)&&window.confirm(`Anda akan menarik saldo hadiah sebesar ${jn(V.rewardBalance)} untuk ${V.name}. Lanjutkan?`)){const D=V.rewardBalance,ae=A.find(Nt=>Nt.id!=="CARD_CASH")||A[0];if(!ae||ae.balance<D){alert(`Saldo di kartu sumber (${ae.bankName}) tidak mencukupi untuk penarikan hadiah.`);return}const se={id:`TRN-RWD-WTH-${crypto.randomUUID()}`,date:new Date().toISOString().split("T")[0],description:`Penarikan saldo hadiah oleh ${V.name}`,amount:D,type:$e.EXPENSE,category:"Penarikan Hadiah Freelancer",method:"Transfer Bank",cardId:ae.id},Ae={id:`RLE-${se.id}`,teamMemberId:V.id,date:se.date,description:se.description,amount:-D};p(Nt=>[...Nt,se].sort((jt,wn)=>new Date(wn.date).getTime()-new Date(jt.date).getTime())),S(Nt=>[...Nt,Ae].sort((jt,wn)=>new Date(wn.date).getTime()-new Date(jt.date).getTime())),R(Nt=>Nt.map(jt=>jt.id===ae.id?{...jt,balance:jt.balance-D}:jt)),e(Nt=>Nt.map(jt=>jt.id===V.id?{...jt,rewardBalance:0}:jt));const ut=w.find(Nt=>Nt.type===tn.REWARD_POOL);ut&&P(Nt=>Nt.map(jt=>jt.id===ut.id?{...jt,amount:jt.amount-D}:jt)),f(`Penarikan hadiah untuk ${V.name} berhasil.`),ne(!1)}},M=C.useMemo(()=>V?a.filter(D=>D.teamMemberId===V.id&&D.status==="Unpaid"):[],[a,V]),de=D=>{V&&(e(ae=>ae.map(se=>se.id===V.id?{...se,rating:D}:se)),ce(ae=>ae?{...ae,rating:D}:null))},z=()=>{if(!V||!Qe.trim())return;const D={id:`PN-${Date.now()}`,date:new Date().toISOString().split("T")[0],note:Qe,type:At},ae=[...V.performanceNotes,D];e(se=>se.map(Ae=>Ae.id===V.id?{...Ae,performanceNotes:ae}:Ae)),ce(se=>se?{...se,performanceNotes:ae}:null),gt(""),wt(xa.GENERAL)},F=D=>{if(!V)return;const ae=V.performanceNotes.filter(se=>se.id!==D);e(se=>se.map(Ae=>Ae.id===V.id?{...Ae,performanceNotes:ae}:Ae)),ce(se=>se?{...se,performanceNotes:ae}:null)},K=C.useMemo(()=>w.find(D=>D.type===tn.EXPENSE),[w]),te=D=>{le&&(O(le.id,D),W(ae=>ae?{...ae,vendorSignature:D}:null)),Be(!1)},X=D=>{const ae=n.find(Ae=>Ae.id===D.teamMemberId);if(!ae)return null;const se=a.filter(Ae=>D.projectPaymentIds.includes(Ae.id));return t.jsx("div",{id:`payment-slip-content-${D.id}`,className:"printable-content bg-slate-50 font-sans text-slate-800 printable-area avoid-break",children:t.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 sm:p-12 shadow-lg",children:[t.jsxs("header",{className:"flex justify-between items-start mb-12",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:h.companyName}),t.jsx("p",{className:"text-sm text-slate-500",children:h.address})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("h2",{className:"text-2xl font-bold uppercase text-slate-400 tracking-widest",children:"Slip Pembayaran"}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["No: ",t.jsx("span",{className:"font-semibold text-slate-700",children:D.recordNumber})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:["Tanggal: ",t.jsx("span",{className:"font-semibold text-slate-700",children:Pc(D.date)})]})]})]}),t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 doc-header-grid",children:[t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Dibayarkan Kepada"}),t.jsx("p",{className:"font-bold text-slate-800",children:ae.name}),t.jsx("p",{className:"text-sm text-slate-600",children:ae.role}),t.jsxs("p",{className:"text-sm text-slate-600",children:["No. Rek: ",ae.noRek]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Dibayarkan Oleh"}),t.jsx("p",{className:"font-bold text-slate-800",children:h.companyName}),t.jsx("p",{className:"text-sm text-slate-600",children:h.bankAccount})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-3",children:"Rincian Pembayaran"}),t.jsxs("table",{className:"w-full text-left responsive-table",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b-2 border-slate-200",children:[t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500",children:"Proyek"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500",children:"Peran"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-right",children:"Fee"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-200",children:se.map(Ae=>{var Nt;const ut=v.find(jt=>jt.id===Ae.projectId);return t.jsxs("tr",{children:[t.jsx("td",{"data-label":"Proyek",className:"p-3 font-semibold text-slate-800",children:(ut==null?void 0:ut.projectName)||"N/A"}),t.jsx("td",{"data-label":"Peran",className:"p-3 text-slate-600",children:((Nt=ut==null?void 0:ut.team.find(jt=>jt.memberId===ae.id))==null?void 0:Nt.role)||ae.role}),t.jsx("td",{"data-label":"Fee",className:"p-3 text-right text-slate-800",children:jn(Ae.fee)})]},Ae.id)})})]})]}),t.jsx("section",{className:"mt-12 avoid-break totals-section",children:t.jsx("div",{className:"flex flex-col sm:flex-row justify-end",children:t.jsx("div",{className:"w-full sm:w-2/5 space-y-2 text-sm",children:t.jsxs("div",{className:"flex justify-between font-bold text-xl text-slate-900 bg-slate-100 p-4 rounded-lg",children:[t.jsx("span",{children:"TOTAL DIBAYAR"}),t.jsx("span",{children:jn(D.totalAmount)})]})})})}),t.jsx("footer",{className:"mt-12 pt-8 border-t-2 border-slate-200 avoid-break signature-section",children:t.jsxs("div",{className:"flex justify-between items-end",children:[t.jsx("div",{}),t.jsxs("div",{className:"text-center w-full sm:w-2/5",children:[t.jsx("p",{className:"text-sm text-slate-600",children:"Diverifikasi oleh,"}),t.jsx("div",{className:"h-20 mt-2 flex items-center justify-center",children:D.vendorSignature?t.jsx("img",{src:D.vendorSignature,alt:"Tanda Tangan",className:"h-20 object-contain"}):t.jsx("div",{className:"h-20 flex items-center justify-center text-xs text-slate-400 italic border-b border-dashed w-full",children:"Belum Ditandatangani"})}),t.jsxs("p",{className:"text-sm font-semibold text-slate-800 mt-1 border-t-2 border-slate-300 pt-1",children:["(",h.authorizedSigner||h.companyName,")"]})]})]})})]})})},fe=()=>{const D=["Nama","Role","Email","Telepon","No. Rekening","Fee Belum Dibayar","Saldo Hadiah","Rating"],ae=n.map(se=>{const Ae=a.filter(ut=>ut.teamMemberId===se.id&&ut.status==="Unpaid").reduce((ut,Nt)=>ut+Nt.fee,0);return[`"${se.name.replace(/"/g,'""')}"`,se.role,se.email,se.phone,se.noRek||"-",Ae,se.rewardBalance,se.rating.toFixed(1)]});AE(D,ae,`data-freelancer-${new Date().toISOString().split("T")[0]}.csv`)},ye={total:"Daftar Semua Freelancer",unpaid:"Rincian Fee Belum Dibayar",topRated:"Peringkat Freelancer",rewards:"Riwayat Saldo Hadiah"};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Freelancer",subtitle:"Kelola semua data freelancer, proyek, dan pembayaran.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Ke(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:fe,className:"button-secondary inline-flex items-center gap-2",children:[t.jsx($i,{className:"w-4 h-4"})," Unduh Data"]}),t.jsxs("button",{onClick:()=>Je("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah Freelancer"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{onClick:()=>G("total"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"100ms"},children:t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Total Freelancer",value:_e.totalMembers.toString(),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"})}),t.jsx("div",{onClick:()=>G("unpaid"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"200ms"},children:t.jsx(qe,{icon:t.jsx(wl,{className:"w-6 h-6"}),title:"Total Fee Belum Dibayar",value:_e.totalUnpaid,iconBgColor:"bg-red-500/20",iconColor:"text-red-400"})}),t.jsx("div",{onClick:()=>G("topRated"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"300ms"},children:t.jsx(qe,{icon:t.jsx(hv,{className:"w-6 h-6"}),title:"Rating Tertinggi",value:_e.topRatedName,subtitle:`Rating: ${_e.topRatedRating}`,iconBgColor:"bg-green-500/20",iconColor:"text-green-400"})}),t.jsx("div",{onClick:()=>G("rewards"),className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"400ms"},children:t.jsx(qe,{icon:t.jsx(Kc,{className:"w-6 h-6"}),title:"Total Saldo Hadiah",value:jn(((_=w.find(D=>D.type===tn.REWARD_POOL))==null?void 0:_.amount)||0),iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"})})]}),t.jsx("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Nama"}),t.jsx("th",{className:"px-4 py-3",children:"Role"}),t.jsx("th",{className:"px-4 py-3",children:"Fee Belum Dibayar"}),t.jsx("th",{className:"px-4 py-3",children:"Saldo Hadiah"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Rating"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(D=>{const ae=a.filter(se=>se.teamMemberId===D.id&&se.status==="Unpaid").reduce((se,Ae)=>se+Ae.fee,0);return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:D.name}),t.jsx("td",{className:"px-4 py-3 text-brand-text-primary",children:D.role}),t.jsx("td",{className:"px-4 py-3 font-semibold text-red-400",children:jn(ae)}),t.jsx("td",{className:"px-4 py-3 font-semibold text-yellow-400",children:jn(D.rewardBalance)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex justify-center items-center gap-1",children:[t.jsx(ia,{className:"w-4 h-4 text-yellow-400 fill-current"}),D.rating.toFixed(1)]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>Dt(D),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Detail",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Je("edit",D),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Edit",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>yt(D.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Hapus",children:t.jsx(fn,{className:"w-5 h-5"})})]})})]},D.id)})})]})})}),t.jsx(nt,{isOpen:Ze,onClose:()=>Ke(!1),title:"Panduan Halaman Freelancer",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat untuk semua hal yang berkaitan dengan tim freelancer Anda."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Tambah & Edit:"})," Gunakan tombol di kanan atas untuk menambahkan freelancer baru atau klik ikon pensil di tabel untuk mengedit data yang ada."]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["Lihat Detail (",t.jsx(Pa,{className:"w-4 h-4 inline-block"}),"):"]})," Buka panel detail untuk melihat semua proyek yang dikerjakan, riwayat pembayaran, dan catatan kinerja."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Kelola Pembayaran:"})," Di panel detail, Anda dapat memilih proyek yang belum dibayar, membuat slip pembayaran, dan mencatat transaksi pembayaran."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Kinerja & Hadiah:"})," Berikan peringkat, tambahkan catatan kinerja, dan kelola saldo hadiah untuk setiap freelancer di tab masing-masing pada panel detail."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Bagikan Portal:"})," Setiap freelancer memiliki portal pribadi. Bagikan tautan unik melalui panel detail agar mereka dapat melihat jadwal dan tugas revisi mereka."]})]})]})}),t.jsx(nt,{isOpen:H,onClose:()=>L(!1),title:ie==="add"?"Tambah Freelancer":"Edit Freelancer",children:t.jsxs("form",{onSubmit:dt,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:Ce.name,onChange:st,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Nama"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"role",name:"role",value:Ce.role,onChange:st,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Role (e.g., Fotografer)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",id:"email",name:"email",value:Ce.email,onChange:st,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"phone",name:"phone",value:Ce.phone,onChange:st,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Telepon"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"standardFee",name:"standardFee",value:Ce.standardFee,onChange:st,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Fee Standar (IDR)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"noRek",name:"noRek",value:Ce.noRek,onChange:st,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"No. Rekening"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:()=>L(!1),className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:ie==="add"?"Simpan":"Update"})]})]})}),V&&t.jsx(nt,{isOpen:U,onClose:()=>ne(!1),title:`Detail Freelancer: ${V.name}`,size:"4xl",children:t.jsxs("div",{children:[t.jsx("div",{className:"border-b border-brand-border",children:t.jsxs("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>re("projects"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${Ue==="projects"||Ue==="create-payment"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(oa,{className:"w-5 h-5"}),"Proyek Belum Dibayar"]}),t.jsxs("button",{onClick:()=>re("payments"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${Ue==="payments"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(Hg,{className:"w-5 h-5"}),"Riwayat Pembayaran"]}),t.jsxs("button",{onClick:()=>re("performance"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${Ue==="performance"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(ia,{className:"w-5 h-5"}),"Kinerja"]}),t.jsxs("button",{onClick:()=>re("rewards"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${Ue==="rewards"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(Kc,{className:"w-5 h-5"}),"Tabungan Hadiah"]}),t.jsxs("button",{onClick:()=>Ve(V),className:"shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm border-transparent text-brand-text-secondary hover:text-brand-text-light",children:[t.jsx(Fn,{className:"w-5 h-5"}),"Bagikan Portal"]})]})}),t.jsxs("div",{className:"pt-5 max-h-[65vh] overflow-y-auto pr-2",children:[Ue==="projects"&&t.jsx(IE,{unpaidProjects:M,projectsToPay:De,onToggleProject:D=>J(ae=>ae.includes(D)?ae.filter(se=>se!==D):[...ae,D]),onProceedToPayment:ze,projects:v}),Ue==="payments"&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-4",children:"Riwayat Pembayaran"}),r.filter(D=>D.teamMemberId===V.id).length>0?t.jsx("div",{className:"overflow-x-auto border border-brand-border rounded-lg",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-brand-bg text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left",children:"No. Pembayaran"}),t.jsx("th",{className:"px-4 py-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"px-4 py-3 text-right",children:"Jumlah"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:r.filter(D=>D.teamMemberId===V.id).map(D=>t.jsxs(Bg.Fragment,{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3 font-mono text-brand-text-secondary",children:D.recordNumber}),t.jsx("td",{className:"px-4 py-3 text-brand-text-primary",children:Pc(D.date)}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold text-brand-success",children:jn(D.totalAmount)}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("button",{onClick:()=>Q(he===D.id?null:D.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:he===D.id?"Tutup Rincian":"Lihat Rincian",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>W(D),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Lihat Slip Pembayaran",children:t.jsx(oa,{className:"w-5 h-5"})})]})})]}),he===D.id&&t.jsx("tr",{className:"bg-brand-bg",children:t.jsxs("td",{colSpan:4,className:"p-4",children:[t.jsx("p",{className:"text-sm font-medium mb-2 text-brand-text-light",children:"Proyek yang dibayar:"}),t.jsx("ul",{className:"list-disc list-inside text-sm space-y-1 pl-4",children:D.projectPaymentIds.map(ae=>{const se=a.find(ut=>ut.id===ae),Ae=v.find(ut=>ut.id===(se==null?void 0:se.projectId));return t.jsxs("li",{className:"text-brand-text-primary",children:[(Ae==null?void 0:Ae.projectName)||"Proyek tidak ditemukan"," - ",t.jsx("span",{className:"font-semibold",children:jn((se==null?void 0:se.fee)||0)})]},ae)})})]})})]},D.id))})]})}):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada riwayat pembayaran untuk freelancer ini."})]}),Ue==="performance"&&t.jsx(PE,{member:V,onSetRating:de,newNote:Qe,setNewNote:gt,newNoteType:At,setNewNoteType:wt,onAddNote:z,onDeleteNote:F}),Ue==="rewards"&&t.jsx(DE,{member:V,suggestions:[],rewardLedger:j.filter(D=>D.teamMemberId===V.id),onWithdraw:Ie}),Ue==="create-payment"&&V&&t.jsx(ME,{member:V,paymentDetails:{projects:M.filter(D=>De.includes(D.id)),total:typeof E=="number"?E:0},paymentAmount:E,setPaymentAmount:T,onPay:ot,onSetTab:()=>re("projects"),renderPaymentDetailsContent:()=>X({id:`TEMP-${Date.now()}`,recordNumber:`PAY-FR-${V.id.slice(-4)}-${Date.now()}`,teamMemberId:V.id,date:new Date().toISOString(),projectPaymentIds:De,totalAmount:typeof E=="number"?E:0}),cards:A,monthlyBudgetPocket:K,paymentSourceId:B,setPaymentSourceId:ue,onSign:()=>{Be(!0)}})]})]})}),le&&t.jsxs(nt,{isOpen:!!le,onClose:()=>W(null),title:`Slip Pembayaran: ${le.recordNumber}`,size:"3xl",children:[t.jsx("div",{className:"printable-area",children:X(le)}),t.jsxs("div",{className:"mt-6 text-right non-printable space-x-2",children:[t.jsxs("button",{type:"button",onClick:()=>Be(!0),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(ln,{className:"w-4 h-4"}),"Tanda Tangani Slip"]}),t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak"]})]})]}),we&&t.jsx(nt,{isOpen:we,onClose:()=>Be(!1),title:"Bubuhkan Tanda Tangan Anda",children:t.jsx(Al,{onClose:()=>Be(!1),onSave:te})}),t.jsx(nt,{isOpen:!!ke,onClose:()=>G(null),title:ke?ye[ke]:"",size:"3xl",children:t.jsxs("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:[ke==="total"&&t.jsx("div",{className:"space-y-3",children:n.map(D=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:D.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:D.role})]},D.id))}),ke==="unpaid"&&t.jsx("div",{className:"space-y-3",children:a.filter(D=>D.status==="Unpaid").length>0?a.filter(D=>D.status==="Unpaid").map(D=>{var ae;return t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:D.teamMemberName}),t.jsxs("p",{className:"text-sm text-brand-text-secondary",children:["Proyek: ",((ae=v.find(se=>se.id===D.projectId))==null?void 0:ae.projectName)||"N/A"]})]}),t.jsx("p",{className:"font-semibold text-brand-danger",children:jn(D.fee)})]},D.id)}):t.jsx("p",{className:"text-center py-8 text-brand-text-secondary",children:"Tidak ada fee yang belum dibayar."})}),ke==="topRated"&&t.jsx("div",{className:"space-y-3",children:[...n].sort((D,ae)=>ae.rating-D.rating).map(D=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:D.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:D.role})]}),t.jsxs("div",{className:"flex items-center gap-1 font-semibold text-brand-text-light",children:[t.jsx(ia,{className:"w-4 h-4 text-yellow-400 fill-current"}),D.rating.toFixed(1)]})]},D.id))}),ke==="rewards"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-brand-input",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left",children:"Freelancer"}),t.jsx("th",{className:"p-3 text-left",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-right",children:"Jumlah"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:j.map(D=>{var ae;return t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 whitespace-nowrap",children:Pc(D.date)}),t.jsx("td",{className:"p-3 font-semibold",children:((ae=n.find(se=>se.id===D.teamMemberId))==null?void 0:ae.name)||"N/A"}),t.jsx("td",{className:"p-3",children:D.description}),t.jsxs("td",{className:`p-3 text-right font-semibold ${D.amount>=0?"text-brand-success":"text-brand-danger"}`,children:[D.amount>=0?"+":"",jn(D.amount)]})]},D.id)})})]})})]})}),ft&&t.jsx(nt,{isOpen:!!ft,onClose:()=>Ne(null),title:ft.title,size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"freelancer-portal-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:ft.url}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ft.url),f("Tautan berhasil disalin!")},className:"button-secondary w-full",children:"Salin Tautan"}),t.jsx("button",{onClick:()=>{const D=document.querySelector("#freelancer-portal-qrcode canvas");if(D){const ae=document.createElement("a");ae.download="freelancer-portal-qr.png",ae.href=D.toDataURL(),ae.click()}},className:"button-primary w-full",children:"Unduh QR"})]})]})})]})},Dc=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),LE=({data:n})=>{const[e,a]=C.useState(null),s=800,r=300,d={top:20,right:20,bottom:40,left:70},u=s-d.left-d.right,p=r-d.top-d.bottom;if(!n||n.length===0)return t.jsx("div",{className:"text-center text-brand-text-secondary py-16",children:"Tidak ada data untuk ditampilkan."});const h=Math.max(...n.flatMap(O=>[O.income,O.expense]),1),f=Math.min(...n.map(O=>O.balance),0),g=Math.max(...n.map(O=>O.balance),1),y=u/n.length,v=Math.max(2,y*.4),k=O=>d.left+O*y+y/2,j=O=>p-O/h*p,S=O=>{const H=g-f;return H===0?p/2:p-(O-f)/H*p},w=n.map((O,H)=>`${H===0?"M":"L"} ${k(H)} ${d.top+S(O.balance)}`).join(" "),P=(O,H)=>{var U;const L=O.currentTarget.ownerSVGElement;if(L){const ne=L.createSVGPoint();ne.x=O.clientX,ne.y=O.clientY;const{x:ie,y:q}=ne.matrixTransform((U=L.getScreenCTM())==null?void 0:U.inverse());a({x:ie,y:q-10,data:n[H]})}},A=()=>a(null),R=Array.from({length:5},(O,H)=>{const L=h*(H/4);return{value:(L/1e6).toFixed(1),y:d.top+j(L)}});return t.jsx("div",{className:"relative",children:t.jsxs("svg",{viewBox:`0 0 ${s} ${r}`,className:"w-full h-auto",children:[t.jsx("defs",{children:t.jsx("clipPath",{id:"chartArea",children:t.jsx("rect",{x:d.left,y:d.top,width:u,height:p})})}),R.map(({value:O,y:H},L)=>t.jsxs("g",{className:"text-xs text-brand-text-secondary",children:[t.jsx("line",{x1:d.left,y1:H,x2:s-d.right,y2:H,stroke:"currentColor",strokeDasharray:"2,3",opacity:"0.2"}),t.jsxs("text",{x:d.left-8,y:H+4,textAnchor:"end",fill:"currentColor",children:[O,"jt"]})]},L)),n.map((O,H)=>n.length<=12||H%Math.ceil(n.length/10)===0?t.jsx("text",{x:k(H),y:r-d.bottom+15,textAnchor:"middle",fontSize:"10",className:"fill-current text-brand-text-secondary",children:O.label},H):null),t.jsxs("g",{clipPath:"url(#chartArea)",children:[n.map((O,H)=>t.jsxs("g",{children:[t.jsx("rect",{x:k(H)-v/2,y:d.top+j(O.expense),width:v,height:p-j(O.expense),fill:"#FB5D5D",className:"transition-opacity",opacity:e&&e.data.label===O.label?1:.7,rx:"4"}),t.jsx("rect",{x:k(H)-v/2,y:d.top+j(O.income),width:v,height:p-j(O.income),fill:"#34D399",className:"transition-opacity",opacity:e&&e.data.label===O.label?1:.8,rx:"4"})]},`bar-${H}`)),t.jsx("path",{d:w,fill:"none",stroke:"#FFF27A",strokeWidth:"2.5"}),n.map((O,H)=>t.jsx("circle",{cx:k(H),cy:d.top+S(O.balance),r:e&&e.data.label===O.label?5:3,fill:"#FFF27A",stroke:"#2E3137",strokeWidth:"1.5",className:"transition-all"},`point-${H}`))]}),n.map((O,H)=>t.jsx("rect",{x:d.left+H*y,y:d.top,width:y,height:p,fill:"transparent",onMouseMove:L=>P(L,H),onMouseLeave:A},`interaction-${H}`)),e&&t.jsx("g",{className:"pointer-events-none transition-opacity",transform:`translate(${e.x}, ${e.y})`,children:t.jsx("foreignObject",{x:"-85",y:"-125",width:"170",height:"110",children:t.jsxs("div",{className:"p-3 bg-brand-bg border border-gray-700/50 text-white rounded-lg shadow-xl text-xs z-10",children:[t.jsx("p",{className:"font-bold mb-2 text-center border-b border-gray-600 pb-1.5",children:e.data.label}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{children:[t.jsx("span",{className:"inline-block w-2.5 h-2.5 bg-brand-success rounded-sm mr-2 align-middle"}),"Pemasukan: ",Dc(e.data.income)]}),t.jsxs("p",{children:[t.jsx("span",{className:"inline-block w-2.5 h-2.5 bg-brand-danger rounded-sm mr-2 align-middle"}),"Pengeluaran: ",Dc(e.data.expense)]}),t.jsxs("p",{children:[t.jsx("span",{className:"inline-block w-2.5 h-2.5 bg-brand-accent rounded-sm mr-2 align-middle"}),"Saldo: ",Dc(e.data.balance)]})]})]})})})]})})},ct=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Tg=(n,e,a)=>{const r=[n.join(","),...e.map(h=>h.map(f=>{const g=String(f);return g.includes(",")||g.includes('"')||g.includes(`
`)?`"${g.replace(/"/g,'""')}"`:g}).join(","))].join(`
`),d=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(d),p=document.createElement("a");p.setAttribute("href",u),p.setAttribute("download",a),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},Sg=["Gaji Freelancer","Transportasi","Konsumsi","Sewa Tempat","Sewa Alat","Cetak Album"],FE=n=>t.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),UE={date:new Date().toISOString().split("T")[0],description:"",amount:0,type:$e.EXPENSE,category:"",method:"Kartu",cardId:"",sourceId:""},OE={name:"",description:"",type:tn.SAVING,icon:"piggy-bank"},$E={cardHolderName:"Nama Pengguna",bankName:"WBank",cardType:Rt.DEBIT,lastFourDigits:"",expiryDate:"",colorGradient:"from-blue-500 to-cyan-500"},BE=({card:n,onEdit:e,onDelete:a,onClick:s,connectedPockets:r})=>{const d=n.colorGradient.includes("slate-100"),u=d?"text-gray-800":"text-white",p=()=>t.jsxs("svg",{className:"w-10 h-8",viewBox:"0 0 40 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("rect",{width:"40",height:"28",rx:"4",fill:"#D1D5DB"}),t.jsx("rect",{x:"4",y:"4",width:"32",height:"20",rx:"2",fill:"#FBBF24"}),t.jsx("path",{d:"M4 14H18",stroke:"#92400E",strokeWidth:"2"}),t.jsx("path",{d:"M22 14H36",stroke:"#92400E",strokeWidth:"2"}),t.jsx("path",{d:"M20 4V12",stroke:"#92400E",strokeWidth:"2"}),t.jsx("path",{d:"M20 16V24",stroke:"#92400E",strokeWidth:"2"})]}),h=()=>t.jsx("svg",{height:"20px",viewBox:"0 0 1000 310",className:`${d?"fill-black/70":"fill-white"}`,children:t.jsx("path",{d:"M783 310h101l-123-310H643l-89 220-22-220H414L291 310h103l23-60h100l15 60zM520 125l31 82 31-82h-62zM389 125l-63 158-20-44-41-114h-100l170 310h124L741 0H638l-49 125z"})});return t.jsxs("div",{className:"group relative w-full aspect-[1.586] cursor-pointer",style:{transformStyle:"preserve-3d",perspective:"1000px"},onClick:s,children:[t.jsxs("div",{className:`
                relative w-full h-full p-5 rounded-2xl ${u} shadow-lg flex flex-col justify-between 
                bg-gradient-to-br ${n.colorGradient} 
                transition-transform duration-500 group-hover:transform group-hover:rotate-y-3 group-hover:scale-105
            `,children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/az-subtle.png')] opacity-10 rounded-2xl"}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-lg",children:n.bankName}),t.jsx("p",{className:"text-xs opacity-80",children:n.cardType})]}),n.bankName.toUpperCase()==="VISA"?t.jsx(h,{}):t.jsx(p,{})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-2xl lg:text-3xl font-mono tracking-wider mb-2",children:["**** **** **** ",n.lastFourDigits]}),t.jsx("p",{className:"text-sm opacity-80",children:"Saldo Tersedia"}),t.jsx("p",{className:"text-xl lg:text-2xl font-bold tracking-tight",children:ct(n.balance)})]}),t.jsxs("div",{className:"flex justify-between items-end text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs opacity-70",children:"Pemegang Kartu"}),t.jsx("p",{className:"font-medium",children:n.cardHolderName})]}),n.expiryDate&&t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs opacity-70",children:"Kadaluwarsa"}),t.jsx("p",{className:"font-medium",children:n.expiryDate})]})]}),t.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 non-printable",children:[t.jsx("button",{onClick:f=>{f.stopPropagation(),e()},className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 backdrop-blur-sm",children:t.jsx(ln,{className:"w-4 h-4"})}),t.jsx("button",{onClick:f=>{f.stopPropagation(),a()},className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 backdrop-blur-sm",children:t.jsx(fn,{className:"w-4 h-4"})})]})]}),r.length>0&&t.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-[90%] bg-brand-input p-2 rounded-lg text-xs shadow-md opacity-0 group-hover:opacity-100 group-hover:-bottom-5 transition-all duration-300",children:t.jsxs("p",{className:"font-semibold text-brand-text-secondary text-center",children:["Terhubung ke: ",r.map(f=>f.name).join(", ")]})})]})},VE=({card:n,onTopUp:e,onEdit:a,onClick:s,connectedPockets:r})=>t.jsxs("div",{className:"group relative w-full aspect-[1.586] cursor-pointer",style:{transformStyle:"preserve-3d",perspective:"1000px"},onClick:s,children:[t.jsxs("div",{className:`
                relative w-full h-full p-5 rounded-2xl text-slate-800 shadow-lg flex flex-col justify-between 
                bg-gradient-to-br from-slate-50 to-slate-200
                transition-transform duration-500 group-hover:transform group-hover:rotate-y-3 group-hover:scale-105
            `,children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/checkered-pattern.png')] opacity-5 rounded-2xl"}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"font-bold text-lg text-slate-700",children:n.bankName}),t.jsx(qg,{className:"w-8 h-8 text-slate-500"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Saldo Tunai"}),t.jsx("p",{className:"text-3xl font-bold tracking-tight text-slate-900",children:ct(n.balance)})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Akun Kas"}),t.jsx("p",{className:"font-medium text-slate-700",children:n.cardHolderName})]}),t.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 non-printable",children:[t.jsx("button",{onClick:d=>{d.stopPropagation(),e()},className:"bg-slate-900/10 hover:bg-slate-900/20 text-slate-800 rounded-full p-2 backdrop-blur-sm",title:"Top-up Tunai",children:t.jsx(ya,{className:"w-4 h-4"})}),t.jsx("button",{onClick:d=>{d.stopPropagation(),a()},className:"bg-slate-900/10 hover:bg-slate-900/20 text-slate-800 rounded-full p-2 backdrop-blur-sm",title:"Edit",children:t.jsx(ln,{className:"w-4 h-4"})})]})]}),r.length>0&&t.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-[90%] bg-brand-input p-2 rounded-lg text-xs shadow-md opacity-0 group-hover:opacity-100 group-hover:-bottom-5 transition-all duration-300",children:t.jsxs("p",{className:"font-semibold text-brand-text-secondary text-center",children:["Terhubung ke: ",r.map(d=>d.name).join(", ")]})})]}),Ig={"piggy-bank":t.jsx(Kc,{className:"w-8 h-8"}),lock:t.jsx(fv,{className:"w-8 h-8"}),users:t.jsx(_n,{className:"w-8 h-8"}),"clipboard-list":t.jsx(Hs,{className:"w-8 h-8"}),star:t.jsx(ia,{className:"w-8 h-8"})},KE=n=>{const e=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0);return{from:e.toISOString().split("T")[0],to:a.toISOString().split("T")[0]}},ml=({transactions:n})=>n.length===0?t.jsx("p",{className:"text-center py-10 text-brand-text-secondary",children:"Tidak ada transaksi pada periode ini."}):t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs uppercase print-bg-slate bg-brand-input",children:t.jsxs("tr",{className:"print-text-black",children:[t.jsx("th",{className:"p-3 text-left",children:"ID Transaksi"}),t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-left",children:"Kategori"}),t.jsx("th",{className:"p-3 text-right",children:"Jumlah"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 font-mono text-xs",children:e.id}),t.jsx("td",{className:"p-3",children:new Date(e.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3 font-semibold",children:e.description}),t.jsx("td",{className:"p-3",children:e.category}),t.jsx("td",{className:`p-3 text-right font-semibold ${e.type===$e.INCOME?"print-text-green text-brand-success":"print-text-red text-brand-danger"}`,children:ct(e.amount)})]},e.id))})]}),HE=({transactions:n,setTransactions:e,pockets:a,setPockets:s,projects:r,profile:d,cards:u,setCards:p,teamMembers:h,rewardLedgerEntries:f})=>{var ot,Ie;const[g,y]=C.useState("transactions"),[v,k]=C.useState({type:null,mode:"add"}),[j,S]=C.useState(null),[w,P]=C.useState({}),[A,R]=C.useState(null),[O,H]=C.useState(!1),[L,U]=C.useState({searchTerm:"",dateFrom:"",dateTo:""}),[ne,ie]=C.useState({type:"all",category:"Semua"}),[q,V]=C.useState({client:"all",dateFrom:"",dateTo:""}),[ce,Ce]=C.useState({year:new Date().getFullYear(),month:new Date().getMonth()}),Re=M=>{console.log(`Notification: ${M}`)},Ue=(M,de=!1)=>{if(!M)return;const z=new Date,F=M.name,K=`Anggaran Operasional ${z.toLocaleString("id-ID",{month:"long",year:"numeric"})}`;if(M.amount>0){const te={id:`POC-SISA-${z.getTime()}`,name:`Sisa ${F}`,description:"Hasil penutupan anggaran bulanan.",icon:"piggy-bank",type:tn.SAVING,amount:M.amount,sourceCardId:M.sourceCardId},X={id:`TRN-CLOSE-${z.getTime()}`,date:z.toISOString().split("T")[0],description:`Transfer sisa anggaran: ${F}`,amount:M.amount,type:$e.EXPENSE,category:"Transfer Internal",method:"Sistem",pocketId:M.id};s(fe=>[...fe,te].map(_=>_.id===M.id?{..._,amount:0,name:K}:_)),e(fe=>[X,...fe].sort((ye,_)=>new Date(_.date).getTime()-new Date(ye.date).getTime())),Re(`Anggaran "${F}" ditutup. Sisa ${ct(M.amount)} disimpan.`)}else s(te=>te.map(X=>X.id===M.id?{...X,name:K}:X)),de&&Re(`Anggaran bulanan telah diperbarui untuk ${z.toLocaleString("id-ID",{month:"long",year:"numeric"})}.`)};C.useEffect(()=>{(()=>{const de=a.find(D=>D.type===tn.EXPENSE);if(!de)return;const z=de.name.replace("Anggaran Operasional ","").split(" ");if(z.length<2)return;const F=z[0],K=parseInt(z[1],10);if(isNaN(K))return;const X={Januari:0,Februari:1,Maret:2,April:3,Mei:4,Juni:5,Juli:6,Agustus:7,September:8,Oktober:9,November:10,Desember:11}[F];if(X===void 0)return;const fe=new Date,ye=fe.getFullYear(),_=fe.getMonth();(K<ye||K===ye&&X<_)&&Ue(de,!0)})()},[]);const re=C.useMemo(()=>{const M={};[...n].reverse().forEach(z=>{const F=new Date(z.date).toLocaleString("default",{month:"short",year:"2-digit"});M[F]||(M[F]={income:0,expense:0}),z.type===$e.INCOME?M[F].income+=z.amount:z.type===$e.EXPENSE&&(M[F].expense+=z.amount)});let de=0;return Object.entries(M).map(([z,F])=>(de+=F.income-F.expense,{label:z,...F,balance:de}))},[n]),De=C.useMemo(()=>{const M=re;if(M.length===0)return{avgIncome:0,avgExpense:0,runway:"N/A",burnRate:0};const de=M.reduce((_,D)=>_+D.income,0),z=M.reduce((_,D)=>_+D.expense,0),F=M.length,K=new Date;K.setMonth(K.getMonth()-6);const te=n.filter(_=>new Date(_.date)>=K),X=te.filter(_=>_.type===$e.EXPENSE).reduce((_,D)=>_+D.amount,0)-te.filter(_=>_.type===$e.INCOME).reduce((_,D)=>_+D.amount,0),fe=X>0?X/Math.min(6,F):0;let ye="Tak Terbatas";return fe>0&&(ye=`${(u.reduce((ae,se)=>ae+se.balance,0)/fe).toFixed(1)} bulan`),{avgIncome:de/F,avgExpense:z/F,runway:ye,burnRate:fe}},[n,u,re]),{summary:J,thisMonthIncome:E,thisMonthExpense:T}=C.useMemo(()=>{const M=u.reduce((ae,se)=>ae+se.balance,0),de=a.filter(ae=>ae.type!==tn.REWARD_POOL).reduce((ae,se)=>ae+se.amount,0),z=h.reduce((ae,se)=>ae+se.rewardBalance,0),F=new Date,{from:K,to:te}=KE(F),X=new Date(K);X.setHours(0,0,0,0);const fe=new Date(te);fe.setHours(23,59,59,999);const ye=n.filter(ae=>{const se=new Date(ae.date);return se>=X&&se<=fe}),_=ye.filter(ae=>ae.type===$e.INCOME).reduce((ae,se)=>ae+se.amount,0),D=ye.filter(ae=>ae.type===$e.EXPENSE).reduce((ae,se)=>ae+se.amount,0);return{summary:{totalAssets:M,pocketsTotal:de,totalIncomeThisMonth:_,totalExpenseThisMonth:D,totalRewards:z},thisMonthIncome:ye.filter(ae=>ae.type===$e.INCOME).sort((ae,se)=>new Date(se.date).getTime()-new Date(ae.date).getTime()),thisMonthExpense:ye.filter(ae=>ae.type===$e.EXPENSE).sort((ae,se)=>new Date(se.date).getTime()-new Date(ae.date).getTime())}},[u,a,n,h]),B=C.useMemo(()=>a.find(M=>M.type===tn.EXPENSE),[a]),ue=C.useMemo(()=>{const M={},de={};return n.forEach(z=>{z.type===$e.INCOME?M[z.category]=(M[z.category]||0)+z.amount:de[z.category]=(de[z.category]||0)+z.amount}),{income:M,expense:de}},[n]),ke=C.useMemo(()=>n.filter(M=>{const de=new Date(M.date),z=L.dateFrom?new Date(L.dateFrom):null,F=L.dateTo?new Date(L.dateTo):null;z&&z.setHours(0,0,0,0),F&&F.setHours(23,59,59,999);const K=M.description.toLowerCase().includes(L.searchTerm.toLowerCase())||M.category.toLowerCase().includes(L.searchTerm.toLowerCase()),te=(!z||de>=z)&&(!F||de<=F);let X=!0;return ne.type!=="all"&&(M.type!==ne.type||ne.category!=="Semua"&&M.category!==ne.category)&&(X=!1),K&&te&&X}),[n,L,ne]),G=C.useMemo(()=>{const M=ke.filter(z=>z.type===$e.INCOME).reduce((z,F)=>z+F.amount,0),de=ke.filter(z=>z.type===$e.EXPENSE).reduce((z,F)=>z+F.amount,0);return{income:M,expense:de,net:M-de}},[ke]),he=C.useMemo(()=>{const M=r.reduce((de,z)=>(de[z.clientId]||(de[z.clientId]=z.clientName),de),{});return Object.entries(M).map(([de,z])=>({id:de,name:z}))},[r]),Q=C.useMemo(()=>n.filter(M=>{const de=new Date(M.date),z=q.dateFrom?new Date(q.dateFrom):null,F=q.dateTo?new Date(q.dateTo):null;z&&z.setHours(0,0,0,0),F&&F.setHours(23,59,59,999);const K=(!z||de>=z)&&(!F||de<=F),te=r.filter(fe=>fe.clientId===q.client).map(fe=>fe.id),X=q.client==="all"||M.projectId&&te.includes(M.projectId);return K&&X}),[n,r,q]),le=C.useMemo(()=>{const{year:M,month:de}=ce,z=r.filter(K=>{const te=new Date(K.date);return te.getFullYear()===M&&te.getMonth()===de});return[...new Set(z.map(K=>K.clientId))].map(K=>{const te=he.find(se=>se.id===K);if(!te)return null;const fe=z.filter(se=>se.clientId===K).map(se=>se.id),ye=n.filter(se=>se.projectId&&fe.includes(se.projectId)),_=ye.filter(se=>se.type===$e.INCOME).reduce((se,Ae)=>se+Ae.amount,0),D=ye.filter(se=>se.type===$e.EXPENSE&&Sg.includes(se.category)).reduce((se,Ae)=>se+Ae.amount,0),ae=_-D;return{clientId:K,clientName:te.name,totalIncome:_,totalCost:D,profit:ae}}).filter(Boolean)},[ce,r,n,he]),W=C.useMemo(()=>{var K;if(le.length===0)return{totalProfit:0,mostProfitableClient:"N/A",profitableProjectsCount:0,avgProfit:0};const M=le.reduce((te,X)=>te+((X==null?void 0:X.profit)||0),0),de=((K=[...le].sort((te,X)=>((X==null?void 0:X.profit)||0)-((te==null?void 0:te.profit)||0))[0])==null?void 0:K.clientName)||"N/A",z=le.filter(te=>((te==null?void 0:te.profit)||0)>0).length,F=M/le.length;return{totalProfit:M,mostProfitableClient:de,profitableProjectsCount:z,avgProfit:F}},[le]),we=C.useMemo(()=>{if(q.client!=="all")return null;const M=Q.filter(K=>K.type===$e.INCOME).reduce((K,te)=>K+te.amount,0),de=Q.filter(K=>K.type===$e.EXPENSE).reduce((K,te)=>K+te.amount,0),z=Object.entries(Q.filter(K=>K.type===$e.INCOME).reduce((K,te)=>({...K,[te.category]:(K[te.category]||0)+te.amount}),{})).map(([K,te],X)=>({label:K,value:te,color:["#34d399","#60a5fa","#38bdf8","#a3e635","#4ade80"][X%5]})),F=Object.entries(Q.filter(K=>K.type===$e.EXPENSE).reduce((K,te)=>({...K,[te.category]:(K[te.category]||0)+te.amount}),{})).map(([K,te],X)=>({label:K,value:te,color:["#f87171","#fb923c","#facc15","#ef4444","#f472b6"][X%5]}));return{reportIncome:M,reportExpense:de,incomeDonut:z,expenseDonut:F}},[Q,q.client]),Be=C.useMemo(()=>{var ye;const M=u.filter(_=>_.cardType===Rt.KREDIT).reduce((_,D)=>_+D.balance,0),de=u.filter(_=>_.cardType!==Rt.KREDIT).reduce((_,D)=>_+D.balance,0),z=((ye=u.find(_=>_.cardType===Rt.TUNAI&&_.bankName==="Tunai"))==null?void 0:ye.balance)||0,F=n.reduce((_,D)=>(D.cardId&&(_[D.cardId]=(_[D.cardId]||0)+1),_),{}),K=Object.keys(F).length>0?Object.keys(F).sort((_,D)=>(F[D]??0)-(F[_]??0))[0]:null,te=K?u.find(_=>_.id===K):null,X=te?`${te.bankName} (...${te.lastFourDigits})`:"N/A",fe=K?F[K]:0;return{creditDebt:M,debitAndCashAssets:de,cashBalance:z,mostUsedCardName:X,mostUsedCardTxCount:fe}},[u,n]),Ze=(M,de,z)=>{var F,K,te,X,fe,ye;if(k({type:M,mode:de,data:z}),de==="add"){if(M==="transaction"&&P({...UE,cardId:((F=u.find(_=>_.cardType!==Rt.TUNAI))==null?void 0:F.id)||"",sourceId:(K=u.find(_=>_.cardType!==Rt.TUNAI))!=null&&K.id?`card-${(te=u.find(_=>_.cardType!==Rt.TUNAI))==null?void 0:te.id}`:""}),M==="pocket"&&P(OE),M==="card"&&P({...$E,initialBalance:""}),M==="transfer"){const _=(z==null?void 0:z.transferType)||"deposit";P({amount:"",fromCardId:((X=u.find(D=>D.cardType!==Rt.TUNAI))==null?void 0:X.id)||((fe=u[0])==null?void 0:fe.id)||"",toPocketId:z==null?void 0:z.id,type:_})}M==="topup-cash"&&P({amount:"",fromCardId:((ye=u.find(_=>_.cardType!==Rt.TUNAI))==null?void 0:ye.id)||"",targetCardId:z.id})}else P({...z,adjustmentAmount:"",adjustmentReason:""})},Ke=()=>k({type:null,mode:"add"}),Qe=M=>P(de=>({...de,[M.target.name]:M.target.value})),gt=M=>U(de=>({...de,[M.target.name]:M.target.value})),At=M=>{M.preventDefault();const{type:de,mode:z,data:F}=v;if(de==="transaction"){const K={...w,amount:Number(w.amount)};if(z==="add"){if(K.type===$e.EXPENSE){const te=K.sourceId;if(te.startsWith("pocket-")){const X=te.replace("pocket-",""),fe=a.find(ye=>ye.id===X);if(!fe||fe.amount<K.amount){alert(`Saldo di kantong ${fe==null?void 0:fe.name} tidak mencukupi.`);return}if(fe.sourceCardId){const ye=u.find(_=>_.id===fe.sourceCardId);if(!ye||ye.balance<K.amount){alert(`Saldo di kartu sumber (${ye==null?void 0:ye.bankName}) tidak mencukupi.`);return}p(_=>_.map(D=>D.id===fe.sourceCardId?{...D,balance:D.balance-K.amount}:D))}s(ye=>ye.map(_=>_.id===X?{..._,amount:_.amount-K.amount}:_)),K.pocketId=X,K.cardId=fe.sourceCardId,K.method="Sistem"}else if(te.startsWith("card-")){const X=te.replace("card-",""),fe=u.find(ye=>ye.id===X);if(!fe||fe.balance<K.amount){alert(`Saldo di ${(fe==null?void 0:fe.bankName)||"sumber"} tidak mencukupi.`);return}p(ye=>ye.map(_=>_.id===X?{..._,balance:_.balance-K.amount}:_)),K.cardId=X,K.method=fe.cardType===Rt.TUNAI?"Tunai":"Kartu"}}else{const te=K.cardId,X=u.find(fe=>fe.id===te);if(!X){alert("Kartu tujuan tidak valid.");return}p(fe=>fe.map(ye=>ye.id===te?{...ye,balance:ye.balance+K.amount}:ye)),K.method=X.cardType===Rt.TUNAI?"Tunai":"Kartu"}e(te=>[...te,{...K,id:`TRN${Date.now()}`}].sort((X,fe)=>new Date(fe.date).getTime()-new Date(X.date).getTime()))}else e(te=>te.map(X=>X.id===F.id?{...X,...K}:X))}if(de==="card")if(z==="add"){const K=Number(w.initialBalance)||0;let te;w.cardType===Rt.TUNAI?te={id:`CARD_CASH_${Date.now()}`,cardHolderName:w.cardHolderName,bankName:"Tunai",cardType:Rt.TUNAI,lastFourDigits:"CASH",expiryDate:"",colorGradient:"from-slate-100 to-slate-300",balance:K}:te={id:`CARD${Date.now()}`,cardHolderName:w.cardHolderName,bankName:w.bankName,cardType:w.cardType,lastFourDigits:w.lastFourDigits,expiryDate:w.expiryDate,colorGradient:w.colorGradient||"from-blue-500 to-cyan-500",balance:K};let X=[...n];if(K>0){const fe={id:`TRN-INIT-${te.id}`,date:new Date().toISOString().split("T")[0],description:`Saldo Awal - ${te.bankName} ${te.cardType!==Rt.TUNAI?te.lastFourDigits:""}`.trim(),amount:K,type:$e.INCOME,category:"Modal",method:"Sistem",cardId:te.id};X.push(fe)}p(fe=>[...fe,te]),e(X.sort((fe,ye)=>new Date(ye.date).getTime()-new Date(fe.date).getTime())),Re(`Akun baru "${te.cardHolderName}" ditambahkan.`)}else{const K=Number(w.adjustmentAmount)||0,{adjustmentAmount:te,adjustmentReason:X,...fe}=w;let ye=[...n];const _=u.map(D=>D.id===F.id?{...D,...fe,balance:D.balance+K}:D);if(K!==0){const D={id:`TRN-ADJ-${F.id}-${Date.now()}`,date:new Date().toISOString().split("T")[0],description:`Penyesuaian Saldo: ${w.adjustmentReason||(K>0?"Penambahan":"Pengurangan")}`,amount:Math.abs(K),type:K>0?$e.INCOME:$e.EXPENSE,category:K>0?"Modal":"Operasional Kantor",method:"Sistem",cardId:F.id};ye.push(D),Re(`Saldo akun "${w.cardHolderName}" disesuaikan.`)}else Re(`Detail akun "${w.cardHolderName}" diperbarui.`);p(_),e(ye.sort((D,ae)=>new Date(ae.date).getTime()-new Date(D.date).getTime()))}if(de==="pocket"&&s(z==="add"?K=>[...K,{...w,id:`POC${Date.now()}`,amount:0}]:K=>K.map(te=>te.id===F.id?{...te,...w}:te)),de==="transfer"){const K=Number(w.amount);if(!K||K<=0){alert("Jumlah tidak valid.");return}const te=w.type==="deposit",X=a.find(_=>_.id===w.toPocketId),fe=u.find(_=>_.id===w.fromCardId);if(!X||!fe){alert("Kantong atau kartu tidak valid.");return}if(te){if(fe.balance<K){alert(`Saldo kartu ${fe.bankName} tidak mencukupi.`);return}p(_=>_.map(D=>D.id===fe.id?{...D,balance:D.balance-K}:D)),s(_=>_.map(D=>D.id===X.id?{...D,amount:D.amount+K,sourceCardId:fe.id}:D))}else{if(X.amount<K){alert(`Saldo kantong ${X.name} tidak mencukupi.`);return}s(_=>_.map(D=>D.id===X.id?{...D,amount:D.amount-K}:D)),p(_=>_.map(D=>D.id===fe.id?{...D,balance:D.balance+K}:D))}const ye={id:`TRN-TFR-${Date.now()}`,date:new Date().toISOString().split("T")[0],amount:K,description:`${te?"Setor ke":"Tarik dari"} ${X.name} dari/ke ${fe.bankName}`,type:$e.EXPENSE,category:"Transfer Internal",method:"Sistem",cardId:fe.id,pocketId:X.id};e(_=>[ye,..._].sort((D,ae)=>new Date(ae.date).getTime()-new Date(D.date).getTime()))}if(de==="topup-cash"){const K=Number(w.amount);if(!K||K<=0){alert("Jumlah tidak valid.");return}const te=u.find(fe=>fe.id===w.fromCardId);if(!te){alert("Kartu sumber tidak valid.");return}if(te.balance<K){alert(`Saldo kartu ${te.bankName} tidak mencukupi.`);return}p(fe=>fe.map(ye=>ye.id===w.fromCardId?{...ye,balance:ye.balance-K}:ye.id===w.targetCardId?{...ye,balance:ye.balance+K}:ye));const X={id:`TRN-TUC-${Date.now()}`,date:new Date().toISOString().split("T")[0],description:`Top-up saldo tunai dari ${te.bankName}`,amount:K,type:$e.EXPENSE,category:"Transfer Internal",method:"Sistem",cardId:te.id};e(fe=>[X,...fe].sort((ye,_)=>new Date(_.date).getTime()-new Date(ye.date).getTime()))}Ke()},wt=(M,de)=>{if(M==="transaction"){if(window.confirm("Apakah Anda yakin ingin menghapus transaksi ini? Saldo terkait akan dikembalikan.")){const z=n.find(F=>F.id===de);if(!z)return;if(z.category==="Penutupan Anggaran"||z.description.startsWith("Saldo Awal")){Re("Transaksi jenis ini tidak dapat dihapus untuk menjaga konsistensi data.");return}if(z.category==="Transfer Internal"){const F=a.find(te=>te.id===z.pocketId),K=u.find(te=>te.id===z.cardId);if(F&&K)z.description.includes("Setor ke")?(p(te=>te.map(X=>X.id===K.id?{...X,balance:X.balance+z.amount}:X)),s(te=>te.map(X=>X.id===F.id?{...X,amount:X.amount-z.amount}:X))):(s(te=>te.map(X=>X.id===F.id?{...X,amount:X.amount+z.amount}:X)),p(te=>te.map(X=>X.id===K.id?{...X,balance:X.balance-z.amount}:X)));else if(z.description.includes("Top-up saldo tunai")){const te=u.find(fe=>fe.id!==z.cardId&&fe.cardType===Rt.TUNAI),X=u.find(fe=>fe.id===z.cardId);te&&X&&p(fe=>fe.map(ye=>ye.id===X.id?{...ye,balance:ye.balance+z.amount}:ye.id===te.id?{...ye,balance:ye.balance-z.amount}:ye))}}else if(z.type===$e.INCOME)z.cardId&&p(F=>F.map(K=>K.id===z.cardId?{...K,balance:K.balance-z.amount}:K));else if(z.pocketId){s(K=>K.map(te=>te.id===z.pocketId?{...te,amount:te.amount+z.amount}:te));const F=a.find(K=>K.id===z.pocketId);F!=null&&F.sourceCardId&&p(K=>K.map(te=>te.id===F.sourceCardId?{...te,balance:te.balance+z.amount}:te))}else z.cardId&&p(F=>F.map(K=>K.id===z.cardId?{...K,balance:K.balance+z.amount}:K));e(F=>F.filter(K=>K.id!==de)),Re("Transaksi berhasil dihapus dan saldo dikembalikan.")}}else if(M==="pocket"){if(window.confirm("Yakin ingin menghapus kantong ini? Dana akan dikembalikan ke kartu sumber jika ada.")){const z=a.find(F=>F.id===de);z&&z.sourceCardId&&z.amount>0&&p(F=>F.map(K=>K.id===z.sourceCardId?{...K,balance:K.balance+z.amount}:K)),s(F=>F.filter(K=>K.id!==de))}}else if(M==="card"){if(n.some(F=>F.cardId===de)||a.some(F=>F.sourceCardId===de)){Re("Kartu tidak dapat dihapus karena sudah memiliki riwayat transaksi atau terhubung ke kantong.");return}window.confirm("Yakin ingin menghapus kartu ini?")&&p(F=>F.filter(K=>K.id!==de))}},ft=()=>{if(B){if(B.amount<=0){alert("Tidak ada sisa anggaran untuk disimpan.");return}window.confirm(`Anda akan menyimpan sisa anggaran sebesar ${ct(B.amount)} ke kantong baru. Lanjutkan?`)&&Ue(B,!1)}},Ne=C.useMemo(()=>{const M=n.filter(z=>z.type===$e.EXPENSE).reduce((z,F)=>(z[F.category]=(z[F.category]||0)+F.amount,z),{}),de=["#f87171","#fb923c","#facc15","#a3e635","#34d399","#22d3ee","#60a5fa","#a78bfa","#f472b6"];return Object.entries(M).sort(([,z],[,F])=>Number(F)-Number(z)).map(([z,F],K)=>({label:z,value:F,color:de[K%de.length]}))},[n]),Ve=M=>{const de=M.category==="Transfer Internal"||M.category==="Penutupan Anggaran"||M.method==="Sistem",z=M.projectId?r.find(te=>te.id===M.projectId):null,F=z?z.projectName:null;if(de)return F?`Proyek: ${F}`:"";let K="";if(M.type===$e.INCOME){const te=u.find(X=>X.id===M.cardId);te&&(K=te.cardType===Rt.TUNAI?"Masuk ke Tunai":`Masuk ke ${te.bankName} ${te.lastFourDigits!=="CASH"?`**** ${te.lastFourDigits}`:""}`)}else if(M.pocketId){const te=a.find(X=>X.id===M.pocketId);te&&(K=`Dibayar dari kantong "${te.name}"`)}else if(M.cardId){const te=u.find(X=>X.id===M.cardId);te&&(K=te.cardType===Rt.TUNAI?"Dibayar dari Tunai":`Dibayar dari ${te.bankName} ${te.lastFourDigits!=="CASH"?`**** ${te.lastFourDigits}`:""}`)}else K=`Metode: ${M.method}`;return K&&F?`${K}  ${F}`:K||F||""},_e=()=>{var F;const M=["ID Transaksi","Tanggal","Deskripsi","Kategori","Tipe","Jumlah"],de=Q.map(K=>[K.id,new Date(K.date).toLocaleDateString("id-ID"),K.description,K.category,K.type,K.amount]),z=q.client==="all"?"Semua-Klien":(((F=he.find(K=>K.id===q.client))==null?void 0:F.name)||"Klien").replace(/\s+/g,"-");Tg(M,de,`Laporan-Keuangan-${z}-${new Date().toISOString().split("T")[0]}.csv`)},Je=()=>{const M=["ID Klien","Nama Klien","Total Pemasukan","Total Biaya Produksi","Laba Kotor"],de=le.map(F=>[F.clientId,F.clientName,F.totalIncome,F.totalCost,F.profit]),z=`${ce.month+1}-${ce.year}`;Tg(M,de,`Laporan-Laba-Proyek-${z}-${new Date().toISOString().split("T")[0]}.csv`)},st=()=>{var M,de,z;switch(g){case"transactions":const F=({type:_,categoryName:D,amount:ae,isActive:se,onClick:Ae})=>t.jsxs("button",{onClick:Ae,className:`w-full flex justify-between items-center text-left p-3 rounded-lg text-sm transition-colors ${se?"bg-blue-500/10 text-brand-accent font-semibold":"text-brand-text-primary hover:bg-brand-input"}`,children:[t.jsx("span",{className:"truncate",children:D}),t.jsx("span",{className:`font-medium ${ae>0?_===$e.INCOME?"text-brand-success/80":"text-brand-danger/80":"text-brand-text-secondary"}`,children:new Intl.NumberFormat("id-ID",{notation:"compact"}).format(ae)})]}),K=Object.values(ue.income).reduce((_,D)=>_+D,0),te=Object.values(ue.expense).reduce((_,D)=>_+D,0);return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[B&&t.jsxs("div",{className:"bg-brand-surface p-4 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"font-semibold text-gradient mb-2",children:B.name}),t.jsx("p",{className:"text-2xl font-bold text-blue-400",children:ct(B.amount)}),t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1",children:["dari ",ct(B.goalAmount||0)]}),t.jsx("button",{onClick:ft,className:"w-full mt-3 button-secondary text-sm",children:"Tutup & Simpan Sisa"})]}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3 px-2",children:"Pemasukan"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(F,{type:$e.INCOME,categoryName:"Semua",amount:K,isActive:ne.type===$e.INCOME&&ne.category==="Semua",onClick:()=>ie({type:$e.INCOME,category:"Semua"})}),Object.entries(ue.income).map(([_,D])=>t.jsx(F,{type:$e.INCOME,categoryName:_,amount:D,isActive:ne.type===$e.INCOME&&ne.category===_,onClick:()=>ie({type:$e.INCOME,category:_})},_))]})]}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"font-semibold text-gradient mb-3 px-2",children:"Pengeluaran"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(F,{type:$e.EXPENSE,categoryName:"Semua",amount:te,isActive:ne.type===$e.EXPENSE&&ne.category==="Semua",onClick:()=>ie({type:$e.EXPENSE,category:"Semua"})}),Object.entries(ue.expense).map(([_,D])=>t.jsx(F,{type:$e.EXPENSE,categoryName:_,amount:D,isActive:ne.type===$e.EXPENSE&&ne.category===_,onClick:()=>ie({type:$e.EXPENSE,category:_})},_))]})]})]}),t.jsxs("div",{className:"lg:col-span-3 bg-brand-surface p-4 sm:p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsx("input",{name:"searchTerm",value:L.searchTerm,onChange:gt,placeholder:"Cari deskripsi, kategori...",className:"input-field !rounded-lg !border p-2.5 md:col-span-1"}),t.jsx("input",{name:"dateFrom",value:L.dateFrom,onChange:gt,type:"date",className:"input-field !rounded-lg !border p-2.5"}),t.jsx("input",{name:"dateTo",value:L.dateTo,onChange:gt,type:"date",className:"input-field !rounded-lg !border p-2.5"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-brand-bg rounded-xl",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Total Pemasukan (Filter)"}),t.jsx("p",{className:"text-lg font-bold text-brand-success",children:ct(G.income)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Total Pengeluaran (Filter)"}),t.jsx("p",{className:"text-lg font-bold text-brand-danger",children:ct(G.expense)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Laba/Rugi Bersih (Filter)"}),t.jsx("p",{className:"text-lg font-bold text-brand-text-light",children:ct(G.net)})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-left",children:"Kategori"}),t.jsx("th",{className:"p-3 text-right",children:"Jumlah"}),t.jsx("th",{className:"p-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:ke.map(_=>{const D=Ve(_);return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"p-3",children:new Date(_.date).toLocaleDateString("id-ID")}),t.jsxs("td",{className:"p-3",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:_.description}),D&&t.jsx("p",{className:"text-xs text-brand-text-secondary",children:D})]}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:"px-2 py-1 text-xs bg-brand-bg text-brand-text-primary rounded-full",children:_.category})}),t.jsx("td",{className:`p-3 text-right font-semibold ${_.type===$e.INCOME?"text-brand-success":"text-brand-danger"}`,children:ct(_.amount)}),t.jsx("td",{className:"p-3 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>Ze("transaction","edit",_),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(ln,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>wt("transaction",_.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(fn,{className:"w-4 h-4"})})]})})]},_.id)})})]}),ke.length===0&&t.jsx("p",{className:"text-center py-10 text-brand-text-secondary",children:"Tidak ada transaksi yang cocok."})]})]})]});case"pockets":return t.jsxs("div",{className:"widget-animate",children:[t.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(qe,{icon:t.jsx(Hs,{className:"w-6 h-6"}),title:"Total Dana di Kantong",value:ct(J.pocketsTotal),subtitle:"Total dana yang dialokasikan (non-hadiah)."}),t.jsx(qe,{icon:t.jsx(ia,{className:"w-6 h-6"}),title:"Total Hadiah Freelancer",value:ct(J.totalRewards),subtitle:"Total saldo hadiah yang belum ditarik."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[a.map(_=>{const D=_.sourceCardId?u.find(Ae=>Ae.id===_.sourceCardId):null,ae=_.type===tn.REWARD_POOL,se=ae?J.totalRewards:_.amount;return t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg flex flex-col cursor-pointer border border-brand-border",onClick:()=>S({type:ae?"reward_pool":"pocket",item:_}),children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center bg-brand-bg text-brand-accent",children:Ig[_.icon]}),t.jsxs("div",{className:"flex gap-1 non-printable",children:[t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),Ze("pocket","edit",_)},className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(ln,{className:"w-4 h-4"})}),t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),wt("pocket",_.id)},className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(fn,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex-grow mt-4",children:[t.jsx("h4",{className:"font-bold text-lg text-gradient",children:_.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:_.description})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("p",{className:"text-2xl font-bold text-brand-text-light",children:ct(se)}),_.goalAmount&&!ae?t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-brand-bg rounded-full h-2",children:t.jsx("div",{className:"bg-brand-accent h-2 rounded-full",style:{width:`${Math.min(se/_.goalAmount*100,100)}%`}})}),t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1 text-right",children:["Target: ",ct(_.goalAmount)]})]}):null,D&&t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1",children:["Disimpan di: ",D.bankName]})]}),!ae&&t.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-brand-border non-printable",children:[t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),Ze("transfer","add",{..._,transferType:"withdraw"})},className:"button-secondary text-sm flex-1",children:"Tarik Dana"}),t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),Ze("transfer","add",{..._,transferType:"deposit"})},className:"button-primary text-sm flex-1",children:"Setor Dana"})]})]},_.id)}),t.jsxs("button",{onClick:()=>Ze("pocket","add"),className:"border-2 border-dashed border-brand-border rounded-2xl flex flex-col items-center justify-center text-brand-text-secondary hover:bg-brand-input hover:border-brand-accent hover:text-brand-accent transition-colors min-h-[250px]",children:[t.jsx(nn,{className:"w-8 h-8"}),t.jsx("span",{className:"mt-2 font-semibold",children:"Buat Kantong Baru"})]})]})]});case"cards":return t.jsxs("div",{className:"widget-animate space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(qe,{icon:t.jsx(qa,{className:"w-6 h-6"}),title:"Total Utang Kartu Kredit",value:ct(Math.abs(Be.creditDebt)),iconBgColor:"bg-red-500/20",iconColor:"text-red-400"}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Aset (Debit & Tunai)",value:ct(Be.debitAndCashAssets),iconBgColor:"bg-green-500/20",iconColor:"text-green-400"}),t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Kartu Paling Sering Digunakan",value:Be.mostUsedCardName,subtitle:`${Be.mostUsedCardTxCount} transaksi`,iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"}),t.jsx(qe,{icon:t.jsx(qg,{className:"w-6 h-6"}),title:"Total Saldo Tunai",value:ct(Be.cashBalance),iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:[u.map(_=>{const D=a.filter(ae=>ae.sourceCardId===_.id);return t.jsx("div",{children:_.cardType===Rt.TUNAI?t.jsx(VE,{card:_,onClick:()=>S({type:"card",item:_}),onTopUp:()=>Ze("topup-cash","add",_),onEdit:()=>Ze("card","edit",_),connectedPockets:D}):t.jsx(BE,{card:_,onEdit:()=>Ze("card","edit",_),onDelete:()=>wt("card",_.id),onClick:()=>S({type:"card",item:_}),connectedPockets:D})},_.id)}),t.jsxs("button",{onClick:()=>Ze("card","add"),className:"group aspect-[1.586] border-2 border-dashed border-brand-border rounded-2xl flex flex-col items-center justify-center text-brand-text-secondary hover:bg-brand-input hover:border-brand-accent hover:text-brand-accent transition-all duration-300",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-bg group-hover:bg-brand-accent/10 flex items-center justify-center transition-colors",children:t.jsx(nn,{className:"w-8 h-8 transition-transform group-hover:scale-110"})}),t.jsx("span",{className:"mt-4 font-semibold",children:"Tambah Kartu / Akun"})]})]})]});case"cashflow":return t.jsxs("div",{className:"space-y-6 widget-animate",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(qe,{icon:t.jsx(FE,{className:"w-6 h-6"}),title:"Ketahanan Keuangan (Runway)",value:De.runway,subtitle:`Estimasi operasional berdasarkan burn rate. Burn Rate: ${ct(De.burnRate)}/bln`,iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Laba/Rugi",value:ct(G.net),subtitle:"Berdasarkan filter transaksi saat ini",iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400"}),t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Rata-rata Pemasukan/bln",value:ct(De.avgIncome),subtitle:"Selama periode data tersedia",iconBgColor:"bg-green-500/20",iconColor:"text-green-400"}),t.jsx(qe,{icon:t.jsx(Gg,{className:"w-6 h-6"}),title:"Rata-rata Pengeluaran/bln",value:ct(De.avgExpense),subtitle:"Selama periode data tersedia",iconBgColor:"bg-red-500/20",iconColor:"text-red-400"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Grafik Arus Kas"}),t.jsx(LE,{data:re})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Pengeluaran per Kategori"}),t.jsx(Ja,{data:Ne})]})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Data Arus Kas Bulanan"}),t.jsx("div",{className:"overflow-x-auto max-h-96",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs uppercase print-bg-slate bg-brand-input",children:t.jsxs("tr",{className:"print-text-black",children:[t.jsx("th",{className:"p-3 text-left",children:"Periode"}),t.jsx("th",{className:"p-3 text-right",children:"Pemasukan"}),t.jsx("th",{className:"p-3 text-right",children:"Pengeluaran"}),t.jsx("th",{className:"p-3 text-right",children:"Laba/Rugi"}),t.jsx("th",{className:"p-3 text-right",children:"Saldo Akhir"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:re.map(_=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 font-semibold",children:_.label}),t.jsx("td",{className:"p-3 text-right text-brand-success",children:ct(_.income)}),t.jsx("td",{className:"p-3 text-right text-brand-danger",children:ct(_.expense)}),t.jsx("td",{className:`p-3 text-right font-semibold ${_.income-_.expense>=0?"text-brand-success":"text-brand-danger"}`,children:ct(_.income-_.expense)}),t.jsx("td",{className:"p-3 text-right font-bold text-brand-text-light",children:ct(_.balance)})]},_.label))})]})})]})]});case"laporan":return t.jsxs("div",{className:"space-y-6 printable-area widget-animate",children:[t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl flex flex-col md:flex-row gap-4 items-center non-printable border border-brand-border",children:[t.jsx("h4",{className:"text-md font-semibold text-gradient whitespace-nowrap",children:"Filter Laporan:"}),t.jsxs("select",{name:"client",value:q.client,onChange:_=>V(D=>({...D,client:_.target.value})),className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto",children:[t.jsx("option",{value:"all",children:"Semua Klien"}),he.map(_=>t.jsx("option",{value:_.id,children:_.name},_.id))]}),t.jsx("input",{type:"date",name:"dateFrom",value:q.dateFrom,onChange:_=>V(D=>({...D,dateFrom:_.target.value})),className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto"}),t.jsx("input",{type:"date",name:"dateTo",value:q.dateTo,onChange:_=>V(D=>({...D,dateTo:_.target.value})),className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto"}),t.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[t.jsxs("button",{onClick:_e,className:"button-secondary inline-flex items-center gap-2",children:[t.jsx($i,{className:"w-5 h-5"}),"Unduh CSV"]}),t.jsxs("button",{onClick:()=>window.print(),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-5 h-5"}),"Cetak PDF"]})]})]}),q.client!=="all"?t.jsx(yt,{transactions:Q,clientName:((M=he.find(_=>_.id===q.client))==null?void 0:M.name)||"",periodText:`${q.dateFrom||""} - ${q.dateTo||""}`,profile:d}):we&&t.jsx(dt,{metrics:we,transactions:Q,periodText:`${q.dateFrom||""} - ${q.dateTo||""}`,profile:d})]});case"laporanKartu":return t.jsx(Dt,{transactions:n,cards:u,profile:d});case"labaProyek":const X=Array.from({length:12},(_,D)=>({value:D,name:new Date(0,D).toLocaleString("id-ID",{month:"long"})})),fe=new Set(r.map(_=>new Date(_.date).getFullYear()));fe.add(new Date().getFullYear());const ye=Array.from(fe).sort((_,D)=>D-_);return t.jsxs("div",{className:"space-y-6 printable-area widget-animate",children:[t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl flex flex-col md:flex-row gap-4 items-center non-printable border border-brand-border",children:[t.jsx("h4",{className:"text-md font-semibold text-gradient whitespace-nowrap",children:"Filter Laporan Laba:"}),t.jsxs("div",{className:"input-group w-full md:w-auto",children:[t.jsx("select",{name:"year",id:"laba-year-filter",value:ce.year,onChange:_=>Ce(D=>({...D,year:Number(_.target.value)})),className:"input-field",children:ye.map(_=>t.jsx("option",{value:_,children:_},_))}),t.jsx("label",{htmlFor:"laba-year-filter",className:"input-label",children:"Tahun"})]}),t.jsxs("div",{className:"input-group w-full md:w-auto",children:[t.jsx("select",{name:"month",id:"laba-month-filter",value:ce.month,onChange:_=>Ce(D=>({...D,month:Number(_.target.value)})),className:"input-field",children:X.map(_=>t.jsx("option",{value:_.value,children:_.name},_.value))}),t.jsx("label",{htmlFor:"laba-month-filter",className:"input-label",children:"Bulan"})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[t.jsxs("button",{onClick:Je,className:"button-secondary inline-flex items-center gap-2",children:[t.jsx($i,{className:"w-5 h-5"}),"Unduh CSV"]}),t.jsxs("button",{onClick:()=>window.print(),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-5 h-5"}),"Cetak PDF"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 non-printable",children:[t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Laba Periode Ini",value:ct(W.totalProfit),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"}),t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Klien Paling Profit",value:W.mostProfitableClient,iconBgColor:"bg-green-500/20",iconColor:"text-green-400"}),t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Jumlah Proyek Profit",value:`${W.profitableProjectsCount} dari ${le.length}`,iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"}),t.jsx(qe,{icon:t.jsx(qs,{className:"w-6 h-6"}),title:"Rata-rata Laba/Proyek",value:ct(W.avgProfit),iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400"})]}),t.jsxs("div",{className:"printable-report",children:[t.jsxs("div",{className:"hidden print:block text-black mb-6",children:[t.jsx("h1",{className:"text-xl font-bold",children:d.companyName}),t.jsx("p",{className:"text-sm",children:d.address}),t.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-black",children:[t.jsx("h2",{children:"Laporan Laba per Klien"}),t.jsxs("p",{children:["Periode: ",(de=X.find(_=>_.value===ce.month))==null?void 0:de.name," ",ce.year]})]})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg mt-6 border border-brand-border print:shadow-none print:border-none print:p-0 print:mt-0",children:[t.jsxs("div",{className:"print:hidden",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Laporan Laba per Klien"}),t.jsxs("p",{className:"text-sm text-brand-text-secondary mb-4",children:["Menampilkan profitabilitas untuk proyek yang dieksekusi pada ",t.jsxs("strong",{children:[(z=X.find(_=>_.value===ce.month))==null?void 0:z.name," ",ce.year]}),"."]})]}),t.jsx("div",{className:"overflow-x-auto max-h-[500px] print:max-h-none print:overflow-visible",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs uppercase print-bg-slate bg-brand-input",children:t.jsxs("tr",{className:"print-text-black",children:[t.jsx("th",{className:"p-3 text-left",children:"ID Klien"}),t.jsx("th",{className:"p-3 text-left",children:"Nama Klien"}),t.jsx("th",{className:"p-3 text-right",children:"Total Pemasukan"}),t.jsx("th",{className:"p-3 text-right",children:"Total Biaya Produksi"}),t.jsx("th",{className:"p-3 text-right",children:"Laba Kotor"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[le.map(_=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 font-mono text-xs",children:_.clientId}),t.jsx("td",{className:"p-3 font-semibold",children:_.clientName}),t.jsx("td",{className:"p-3 text-right text-brand-success",children:ct(_.totalIncome)}),t.jsx("td",{className:"p-3 text-right text-brand-danger",children:ct(_.totalCost)}),t.jsx("td",{className:`p-3 text-right font-bold ${_.profit>=0?"text-brand-success":"text-brand-danger"}`,children:ct(_.profit)})]},_.clientId)),le.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center p-8 text-brand-text-secondary",children:"Tidak ada data proyek untuk periode ini."})})]})]})})]})]})]})}},dt=({metrics:M,transactions:de,periodText:z,profile:F})=>t.jsxs("div",{className:"printable-report space-y-6",children:[t.jsxs("div",{className:"hidden print:block text-black mb-6",children:[t.jsx("h1",{className:"text-xl font-bold",children:F.companyName}),t.jsx("p",{className:"text-sm",children:F.address}),t.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-black",children:[t.jsx("h2",{children:"Laporan Keuangan Umum"}),t.jsxs("p",{children:["Periode: ",z]})]})]}),t.jsxs("div",{className:"print:hidden",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2 text-gradient",children:"Laporan Keuangan Umum"}),t.jsxs("p",{className:"mb-6 text-brand-text-primary",children:["Periode: ",z]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 StatCard-container",children:[t.jsx(qe,{icon:t.jsx(ya,{className:"w-6 h-6"}),title:"Total Pemasukan",value:ct(M.reportIncome),iconBgColor:"bg-brand-success/20",iconColor:"text-brand-success"}),t.jsx(qe,{icon:t.jsx(_a,{className:"w-6 h-6"}),title:"Total Pengeluaran",value:ct(M.reportExpense),iconBgColor:"bg-brand-danger/20",iconColor:"text-brand-danger"}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Laba / Rugi Bersih",value:ct(M.reportIncome-M.reportExpense)})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 charts-container",children:[t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border chart-wrapper",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Analisis Pemasukan"}),t.jsx(Ja,{data:M.incomeDonut})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border chart-wrapper",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Analisis Pengeluaran"}),t.jsx(Ja,{data:M.expenseDonut})]})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg mt-6 border border-brand-border",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Rincian Semua Transaksi"}),t.jsx("div",{className:"overflow-x-auto max-h-[500px] print:max-h-none print:overflow-visible",children:t.jsx(ml,{transactions:de})})]})]}),yt=({transactions:M,clientName:de,periodText:z,profile:F})=>{const K=M.filter(_=>_.type===$e.INCOME),te=M.filter(_=>_.type===$e.EXPENSE&&Sg.includes(_.category)),X=K.reduce((_,D)=>_+D.amount,0),fe=te.reduce((_,D)=>_+D.amount,0),ye=X-fe;return t.jsxs("div",{className:"printable-report space-y-6",children:[t.jsxs("div",{className:"hidden print:block text-black mb-6",children:[t.jsx("h1",{className:"text-xl font-bold",children:F.companyName}),t.jsx("p",{className:"text-sm",children:F.address}),t.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-black",children:[t.jsx("h2",{children:"Laporan Profitabilitas Klien"}),t.jsxs("p",{children:["Klien: ",de," | Periode: ",z]})]})]}),t.jsxs("div",{className:"print:hidden",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2 text-gradient",children:"Laporan Profitabilitas Klien"}),t.jsxs("p",{className:"mb-6 text-brand-text-primary",children:["Klien: ",t.jsx("span",{className:"font-semibold",children:de})," | Periode: ",z]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 StatCard-container",children:[t.jsx(qe,{icon:t.jsx(ya,{className:"w-6 h-6"}),title:"Total Pemasukan",value:ct(X),iconBgColor:"bg-brand-success/20",iconColor:"text-brand-success"}),t.jsx(qe,{icon:t.jsx(_a,{className:"w-6 h-6"}),title:"Total Biaya Produksi",value:ct(fe),iconBgColor:"bg-brand-danger/20",iconColor:"text-brand-danger"}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Laba Kotor",value:ct(ye)})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border chart-wrapper",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Rincian Pemasukan dari Klien"}),t.jsx("div",{className:"overflow-x-auto max-h-[400px] print:max-h-none print:overflow-visible",children:t.jsx(ml,{transactions:K})})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border chart-wrapper",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Rincian Biaya Produksi"}),t.jsx("div",{className:"overflow-x-auto max-h-[400px] print:max-h-none print:overflow-visible",children:t.jsx(ml,{transactions:te})})]})]})]})},Dt=({transactions:M,cards:de,profile:z})=>{const[F,K]=C.useState({cardId:"all",dateFrom:"",dateTo:""}),te=_=>{K(D=>({...D,[_.target.name]:_.target.value}))},X=C.useMemo(()=>M.filter(_=>{const D=new Date(_.date),ae=F.dateFrom?new Date(F.dateFrom):null,se=F.dateTo?new Date(F.dateTo):null;ae&&ae.setHours(0,0,0,0),se&&se.setHours(23,59,59,999);const Ae=(!ae||D>=ae)&&(!se||D<=se),ut=F.cardId==="all"||_.cardId===F.cardId;return Ae&&ut}),[M,F]),fe=C.useMemo(()=>{const _=X.filter(ae=>ae.type===$e.INCOME).reduce((ae,se)=>ae+se.amount,0),D=X.filter(ae=>ae.type===$e.EXPENSE).reduce((ae,se)=>ae+se.amount,0);return{income:_,expense:D,net:_-D}},[X]),ye=C.useMemo(()=>{const _=X.filter(ae=>ae.type===$e.EXPENSE).reduce((ae,se)=>(ae[se.category]=(ae[se.category]||0)+se.amount,ae),{}),D=["#f87171","#fb923c","#facc15","#a3e635","#34d399","#22d3ee","#60a5fa","#a78bfa","#f472b6"];return Object.entries(_).sort(([,ae],[,se])=>se-ae).map(([ae,se],Ae)=>({label:ae,value:se,color:D[Ae%D.length]}))},[X]);return t.jsxs("div",{className:"space-y-6 printable-area widget-animate",children:[t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl flex flex-col md:flex-row gap-4 items-center non-printable border border-brand-border",children:[t.jsx("h4",{className:"text-md font-semibold text-gradient whitespace-nowrap",children:"Filter Laporan:"}),t.jsxs("select",{name:"cardId",value:F.cardId,onChange:te,className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto",children:[t.jsx("option",{value:"all",children:"Semua Kartu/Akun"}),de.map(_=>t.jsxs("option",{value:_.id,children:[_.bankName," ",_.lastFourDigits!=="CASH"?`**** ${_.lastFourDigits}`:"(Tunai)"]},_.id))]}),t.jsx("input",{type:"date",name:"dateFrom",value:F.dateFrom,onChange:te,className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto"}),t.jsx("input",{type:"date",name:"dateTo",value:F.dateTo,onChange:te,className:"input-field !rounded-lg !border p-2.5 w-full md:w-auto"}),t.jsxs("button",{onClick:()=>window.print(),className:"ml-auto button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-5 h-5"}),"Cetak"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 StatCard-container",children:[t.jsx(qe,{icon:t.jsx(ya,{className:"w-6 h-6"}),title:"Total Pemasukan",value:ct(fe.income),iconBgColor:"bg-brand-success/20",iconColor:"text-brand-success"}),t.jsx(qe,{icon:t.jsx(_a,{className:"w-6 h-6"}),title:"Total Pengeluaran",value:ct(fe.expense),iconBgColor:"bg-brand-danger/20",iconColor:"text-brand-danger"}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Arus Kas Bersih",value:ct(fe.net)})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border chart-wrapper",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Pengeluaran per Kategori"}),t.jsx(Ja,{data:ye})]}),t.jsxs("div",{className:"lg:col-span-3 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h3",{className:"text-lg font-bold text-gradient mb-4",children:"Rincian Transaksi"}),t.jsx("div",{className:"overflow-x-auto max-h-[400px]",children:t.jsx(ml,{transactions:X})})]})]})]})},ze={assets:"Rincian Total Aset",pockets:"Rincian Dana di Kantong",income:`Pemasukan Bulan ${new Date().toLocaleString("id-ID",{month:"long"})}`,expense:`Pengeluaran Bulan ${new Date().toLocaleString("id-ID",{month:"long"})}`};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Keuangan",subtitle:"Pantau kesehatan finansial bisnis Anda dari transaksi hingga proyeksi masa depan.",children:t.jsxs("div",{className:"flex items-center gap-2 non-printable",children:[t.jsx("button",{onClick:()=>H(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>Ze("transaction","add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah Transaksi"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"100ms"},onClick:()=>R("assets"),children:t.jsx(qe,{icon:t.jsx(qa,{className:"w-6 h-6"}),title:"Total Aset",value:ct(J.totalAssets),subtitle:"Total gabungan saldo di semua kartu & tunai Anda."})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"200ms"},onClick:()=>R("pockets"),children:t.jsx(qe,{icon:t.jsx(Hs,{className:"w-6 h-6"}),title:"Dana di Kantong",value:ct(J.pocketsTotal),subtitle:"Total dana yang dialokasikan di semua kantong."})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"300ms"},onClick:()=>R("income"),children:t.jsx(qe,{icon:t.jsx(ya,{className:"w-6 h-6"}),title:"Pemasukan Bulan Ini",value:ct(J.totalIncomeThisMonth),subtitle:"Total pemasukan yang tercatat bulan ini."})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"400ms"},onClick:()=>R("expense"),children:t.jsx(qe,{icon:t.jsx(_a,{className:"w-6 h-6"}),title:"Pengeluaran Bulan Ini",value:ct(J.totalExpenseThisMonth),subtitle:"Total pengeluaran yang tercatat bulan ini."})})]}),t.jsx("div",{className:"border-b border-brand-border non-printable widget-animate",style:{animationDelay:"500ms"},children:t.jsxs("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>y("transactions"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="transactions"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(oa,{className:"w-5 h-5"}),"Transaksi"]}),t.jsxs("button",{onClick:()=>y("pockets"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="pockets"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(Hs,{className:"w-5 h-5"}),"Kantong"]}),t.jsxs("button",{onClick:()=>y("cards"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="cards"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(qa,{className:"w-5 h-5"}),"Kartu Saya"]}),t.jsxs("button",{onClick:()=>y("cashflow"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="cashflow"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(vs,{className:"w-5 h-5"}),"Arus Kas"]}),t.jsxs("button",{onClick:()=>y("laporan"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="laporan"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(gv,{className:"w-5 h-5"}),"Laporan Umum"]}),t.jsxs("button",{onClick:()=>y("laporanKartu"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="laporanKartu"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(qa,{className:"w-5 h-5"}),"Laporan Kartu"]}),t.jsxs("button",{onClick:()=>y("labaProyek"),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g==="labaProyek"?"border-brand-accent text-brand-accent":"border-transparent text-brand-text-secondary hover:text-brand-text-light"}`,children:[t.jsx(qs,{className:"w-5 h-5"}),"Laba Proyek"]})]})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"600ms"},children:st()}),t.jsx(nt,{isOpen:O,onClose:()=>H(!1),title:"Panduan Halaman Keuangan",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat komando finansial bisnis Anda. Gunakan berbagai tab untuk mendapatkan gambaran lengkap."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Transaksi:"})," Catat semua pemasukan dan pengeluaran. Gunakan filter di sisi kiri untuk menganalisis berdasarkan kategori."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Kantong:"}),' Buat "kantong" virtual untuk mengalokasikan dana, seperti tabungan alat atau anggaran operasional bulanan.']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Kartu Saya:"})," Daftarkan semua akun bank, kartu kredit, dan kas tunai Anda untuk melacak saldo secara akurat."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Arus Kas:"})," Lihat grafik interaktif yang menunjukkan tren pemasukan, pengeluaran, dan saldo akhir Anda dari waktu ke waktu."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Laporan:"})," Hasilkan laporan keuangan profesional. Anda bisa memfilter berdasarkan klien dan rentang tanggal, lalu mencetaknya sebagai PDF."]})]})]})}),v.type&&t.jsx(nt,{isOpen:!!v.type,onClose:Ke,title:`${v.mode==="add"?"Tambah":"Edit"} ${v.type==="transaction"?"Transaksi":v.type==="pocket"?"Kantong":v.type==="card"?"Kartu/Akun":v.type==="topup-cash"?"Top-up Tunai":v.type==="transfer"&&w.type==="withdraw"?`Tarik Dana dari "${(ot=v.data)==null?void 0:ot.name}"`:v.type==="transfer"&&w.type==="deposit"?`Setor Dana ke "${(Ie=v.data)==null?void 0:Ie.name}"`:"Transfer"}`,children:t.jsxs("form",{onSubmit:At,className:"space-y-4",children:[v.type==="transaction"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"type",name:"type",value:w.type,onChange:Qe,className:"input-field",children:[t.jsx("option",{value:$e.EXPENSE,children:"Pengeluaran"}),t.jsx("option",{value:$e.INCOME,children:"Pemasukan"})]}),t.jsx("label",{htmlFor:"type",className:"input-label",children:"Jenis"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"date",name:"date",value:w.date,onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"date",className:"input-label",children:"Tanggal"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"description",name:"description",value:w.description,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"description",className:"input-label",children:"Deskripsi"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"amount",name:"amount",value:w.amount,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"amount",className:"input-label",children:"Jumlah (IDR)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"category",name:"category",value:w.category,onChange:Qe,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Kategori..."}),(w.type===$e.INCOME?d.incomeCategories:d.expenseCategories).map(M=>t.jsx("option",{value:M,children:M},M))]}),t.jsx("label",{htmlFor:"category",className:"input-label",children:"Kategori"})]}),w.type===$e.INCOME?t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"cardId",name:"cardId",value:w.cardId||"",onChange:Qe,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Tujuan..."}),u.map(M=>t.jsxs("option",{value:M.id,children:[M.cardHolderName," ",M.cardType!==Rt.TUNAI?`(${M.bankName} **** ${M.lastFourDigits})`:"(Tunai)"," (Saldo: ",ct(M.balance),")"]},M.id))]}),t.jsx("label",{htmlFor:"cardId",className:"input-label",children:"Setor Ke"})]}):t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"sourceId",name:"sourceId",value:w.sourceId,onChange:Qe,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Sumber..."}),u.map(M=>t.jsxs("option",{value:`card-${M.id}`,children:[M.cardHolderName," ",M.cardType!==Rt.TUNAI?`(${M.bankName} **** ${M.lastFourDigits})`:"(Tunai)"," (Saldo: ",ct(M.balance),")"]},M.id)),a.filter(M=>M.type===tn.EXPENSE).map(M=>t.jsxs("option",{value:`pocket-${M.id}`,children:[M.name," (Sisa: ",ct(M.amount),")"]},M.id))]}),t.jsx("label",{htmlFor:"sourceId",className:"input-label",children:"Sumber Dana"})]})]}),v.type==="card"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"cardType",name:"cardType",value:w.cardType,onChange:Qe,className:"input-field",children:Object.values(Rt).map(M=>t.jsx("option",{value:M,children:M},M))}),t.jsx("label",{htmlFor:"cardType",className:"input-label",children:"Jenis Akun"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"cardHolderName",name:"cardHolderName",value:w.cardHolderName,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"cardHolderName",className:"input-label",children:w.cardType===Rt.TUNAI?"Nama Akun Kas":"Nama Pemegang Kartu"})]}),v.mode==="add"&&t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"initialBalance",name:"initialBalance",value:w.initialBalance,onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"initialBalance",className:"input-label",children:"Saldo Awal (Opsional)"})]}),w.cardType!==Rt.TUNAI?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"bankName",name:"bankName",value:w.bankName,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"bankName",className:"input-label",children:"Nama Bank"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"lastFourDigits",name:"lastFourDigits",value:w.lastFourDigits,onChange:Qe,className:"input-field",placeholder:" ",maxLength:4,required:!0}),t.jsx("label",{htmlFor:"lastFourDigits",className:"input-label",children:"4 Digit Terakhir"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"expiryDate",name:"expiryDate",value:w.expiryDate,onChange:Qe,className:"input-field",placeholder:"MM/YY"}),t.jsx("label",{htmlFor:"expiryDate",className:"input-label",children:"Kadaluwarsa"})]})]})]}):t.jsx("div",{className:"p-3 bg-brand-bg rounded-lg text-sm text-brand-text-secondary",children:"Anda sedang membuat akun kas tunai. Detail lainnya akan diisi secara otomatis."}),v.mode==="edit"&&t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg mt-6",children:[t.jsx("h4",{className:"font-semibold text-gradient mb-2",children:"Penyesuaian Saldo (Opsional)"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mb-3",children:"Isi untuk menambah atau mengurangi saldo. Gunakan angka negatif untuk mengurangi (misal: -50000)."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group !mt-0",children:[t.jsx("input",{type:"number",id:"adjustmentAmount",name:"adjustmentAmount",value:w.adjustmentAmount,onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"adjustmentAmount",className:"input-label",children:"Jumlah Penyesuaian"})]}),t.jsxs("div",{className:"input-group !mt-0",children:[t.jsx("input",{type:"text",id:"adjustmentReason",name:"adjustmentReason",value:w.adjustmentReason,onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"adjustmentReason",className:"input-label",children:"Alasan (e.g., Koreksi)"})]})]})]})]}),v.type==="pocket"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:w.name,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Kantong"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"description",name:"description",value:w.description,onChange:Qe,className:"input-field",placeholder:" ",rows:2}),t.jsx("label",{htmlFor:"description",className:"input-label",children:"Deskripsi"})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"sourceCardId",name:"sourceCardId",value:w.sourceCardId,onChange:Qe,className:"input-field",children:[t.jsx("option",{value:"",children:"Pilih Kartu..."}),u.map(M=>t.jsxs("option",{value:M.id,children:[M.bankName," ",M.cardType!==Rt.TUNAI&&`**** ${M.lastFourDigits}`]},M.id))]}),t.jsx("label",{htmlFor:"sourceCardId",className:"input-label",children:"Sumber Dana (Kartu)"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"icon",name:"icon",value:w.icon,onChange:Qe,className:"input-field",children:Object.keys(Ig).map(M=>t.jsx("option",{value:M,children:M},M))}),t.jsx("label",{htmlFor:"icon",className:"input-label",children:"Ikon"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{name:"type",id:"type",value:w.type,onChange:Qe,className:"input-field",children:Object.values(tn).map(M=>t.jsx("option",{value:M,children:M},M))}),t.jsx("label",{htmlFor:"type",className:"input-label",children:"Tipe Kantong"})]})]}),(w.type===tn.SAVING||w.type===tn.EXPENSE)&&t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"goalAmount",name:"goalAmount",value:w.goalAmount||"",onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"goalAmount",className:"input-label",children:"Target Jumlah (Opsional)"})]}),w.type===tn.LOCKED&&t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"lockEndDate",name:"lockEndDate",value:w.lockEndDate||"",onChange:Qe,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"lockEndDate",className:"input-label",children:"Tgl. Kunci Berakhir (Opsional)"})]})]}),v.type==="transfer"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"fromCardId",name:"fromCardId",value:w.fromCardId,onChange:Qe,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Kartu Sumber..."}),u.filter(M=>M.cardType!==Rt.TUNAI).map(M=>t.jsxs("option",{value:M.id,children:[M.bankName," **** ",M.lastFourDigits," (Saldo: ",ct(M.balance),")"]},M.id))]}),t.jsx("label",{htmlFor:"fromCardId",className:"input-label",children:"Sumber Dana"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"amount",name:"amount",value:w.amount,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"amount",className:"input-label",children:"Jumlah (IDR)"})]})]}),v.type==="topup-cash"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"fromCardId",name:"fromCardId",value:w.fromCardId,onChange:Qe,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Kartu Sumber..."}),u.filter(M=>M.cardType!==Rt.TUNAI).map(M=>t.jsxs("option",{value:M.id,children:[M.bankName," **** ",M.lastFourDigits," (Saldo: ",ct(M.balance),")"]},M.id))]}),t.jsx("label",{htmlFor:"fromCardId",className:"input-label",children:"Ambil dari Kartu"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"amount",name:"amount",value:w.amount,onChange:Qe,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"amount",className:"input-label",children:"Jumlah (IDR)"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:Ke,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:v.mode==="add"?"Simpan":"Update"})]})]})}),j&&t.jsx(nt,{isOpen:!!j,onClose:()=>S(null),title:`Riwayat: ${j.type==="card"?j.item.cardHolderName:j.item.name}`,size:"3xl",children:t.jsx("div",{children:t.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:j.type==="reward_pool"?t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left",children:"Freelancer"}),t.jsx("th",{className:"p-3 text-left",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-right",children:"Jumlah"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[f.map(M=>{var de;return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"p-3",children:new Date(M.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3 font-semibold text-brand-text-light",children:((de=h.find(z=>z.id===M.teamMemberId))==null?void 0:de.name)||"N/A"}),t.jsx("td",{className:"p-3",children:M.description}),t.jsxs("td",{className:`p-3 text-right font-semibold ${M.amount>=0?"text-brand-success":"text-brand-danger"}`,children:[M.amount>=0?"+":"",ct(M.amount)]})]},M.id)}),f.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center p-8 text-brand-text-secondary",children:"Tidak ada riwayat hadiah."})})]})]}):t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-left",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-left",children:"Sumber/Tujuan"}),t.jsx("th",{className:"p-3 text-right",children:"Jumlah"})]})}),t.jsxs("tbody",{className:"divide-y divide-brand-border",children:[n.filter(M=>{var de,z;return j.type==="card"&&M.cardId===((de=j.item)==null?void 0:de.id)||j.type==="pocket"&&M.pocketId===((z=j.item)==null?void 0:z.id)}).map(M=>{const de=u.find(F=>F.id===M.cardId);let z="";return M.category.includes("Transfer")||M.category.includes("Penutupan")?M.description.includes("Setor ke")?z=`Dari: ${(de==null?void 0:de.bankName)||"N/A"}`:M.description.includes("Tarik dari")?z=`Ke: ${(de==null?void 0:de.bankName)||"N/A"}`:z="Sistem Internal":M.type===$e.INCOME?z=`Ke: ${(de==null?void 0:de.bankName)||"N/A"}`:M.type===$e.EXPENSE&&(z=`Dari: ${(de==null?void 0:de.bankName)||"N/A"}`),t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"p-3",children:new Date(M.date).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3 font-semibold text-brand-text-light",children:M.description}),t.jsx("td",{className:"p-3 text-brand-text-secondary",children:z}),t.jsxs("td",{className:`p-3 text-right font-semibold ${M.type===$e.INCOME?"text-brand-success":"text-brand-danger"}`,children:[M.type===$e.EXPENSE?"-":"",ct(M.amount)]})]},M.id)}),n.filter(M=>{var de,z;return j.type==="card"&&M.cardId===((de=j.item)==null?void 0:de.id)||j.type==="pocket"&&M.pocketId===((z=j.item)==null?void 0:z.id)}).length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center p-8 text-brand-text-secondary",children:"Tidak ada riwayat transaksi."})})]})]})})})}),t.jsx(nt,{isOpen:!!A,onClose:()=>R(null),title:A?ze[A]:"",size:"2xl",children:t.jsxs("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:[A==="assets"&&t.jsx("div",{className:"space-y-3",children:u.map(M=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-brand-text-light",children:[M.cardHolderName," ",M.cardType!==Rt.TUNAI?`(${M.bankName} **** ${M.lastFourDigits})`:"(Tunai)"]}),t.jsx("p",{className:"font-semibold text-brand-text-light",children:ct(M.balance)})]},M.id))}),A==="pockets"&&t.jsx("div",{className:"space-y-3",children:a.map(M=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:M.name}),t.jsx("p",{className:"font-semibold text-brand-text-light",children:ct(M.amount)})]},M.id))}),A==="income"&&t.jsx("div",{className:"space-y-3",children:E.length>0?E.map(M=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:M.description}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:new Date(M.date).toLocaleDateString("id-ID")})]}),t.jsx("p",{className:"font-semibold text-brand-success",children:ct(M.amount)})]},M.id)):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada pemasukan bulan ini."})}),A==="expense"&&t.jsx("div",{className:"space-y-3",children:T.length>0?T.map(M=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:M.description}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:new Date(M.date).toLocaleDateString("id-ID")})]}),t.jsx("p",{className:"font-semibold text-brand-danger",children:ct(M.amount)})]},M.id)):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada pengeluaran bulan ini."})})]})})]})},Ag=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Mc={name:"",price:"",category:"",processingTime:"",photographers:"",videographers:"",physicalItems:[{name:"",price:""}],digitalItems:[""],coverImage:""},Eg={name:"",price:""},GE=n=>new Promise((e,a)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=r=>a(r)}),qE=({packages:n,setPackages:e,addOns:a,setAddOns:s,projects:r,profile:d})=>{const[u,p]=C.useState(!1),[h,f]=C.useState("add"),[g,y]=C.useState(null),[v,k]=C.useState(Mc),[j,S]=C.useState(Eg),[w,P]=C.useState(null),[A,R]=C.useState(!1),[O,H]=C.useState(!1),L=C.useMemo(()=>`${window.location.origin}${window.location.pathname.replace(/index\.html$/,"")}#/public-packages/VEN001`,[]),U=()=>{navigator.clipboard.writeText(L).then(()=>{alert("Tautan halaman paket berhasil disalin!"),R(!1)})},ne=C.useMemo(()=>{const Q={};for(const le of n){const W=le.category||"Tanpa Kategori";Q[W]||(Q[W]=[]),Q[W].push(le)}return Q},[n]),ie=(Q,le)=>{f(Q),Q==="edit"&&le?(y(le),k({name:le.name,price:le.price.toString(),category:le.category,processingTime:le.processingTime,photographers:le.photographers||"",videographers:le.videographers||"",physicalItems:le.physicalItems.length>0?le.physicalItems.map(W=>({...W,price:W.price.toString()})):[{name:"",price:""}],digitalItems:le.digitalItems.length>0?le.digitalItems:[""],coverImage:le.coverImage||""})):(y(null),k({...Mc,category:d.packageCategories[0]||""})),p(!0)},q=()=>{p(!1),y(null),k(Mc)},V=Q=>{if(Q.preventDefault(),!v.name||!v.price){alert("Nama Paket dan Harga tidak boleh kosong.");return}const le={name:v.name,price:Number(v.price),category:v.category,processingTime:v.processingTime,photographers:v.photographers,videographers:v.videographers,physicalItems:v.physicalItems.filter(W=>typeof W.name=="string"&&W.name.trim()!=="").map(W=>({...W,name:W.name,price:Number(W.price||0)})),digitalItems:v.digitalItems.filter(W=>W.trim()!==""),coverImage:v.coverImage};if(h==="edit"&&g)e(W=>W.map(we=>we.id===g.id?{...we,...le}:we));else{const W={...le,id:crypto.randomUUID()};e(we=>[...we,W])}q()},ce=Q=>{const{name:le,value:W}=Q.target;k(we=>({...we,[le]:W}))},Ce=async Q=>{if(Q.target.files&&Q.target.files[0]){const le=Q.target.files[0],W=await GE(le);k(we=>({...we,coverImage:W}))}},Re=(Q,le)=>{const{name:W,value:we}=le.target,Be=[...v.physicalItems];Be[Q]={...Be[Q],[W]:we},k(Ze=>({...Ze,physicalItems:Be}))},Ue=()=>{k(Q=>({...Q,physicalItems:[...Q.physicalItems,{name:"",price:""}]}))},re=Q=>{const le=[...v.physicalItems];le.splice(Q,1),k(W=>({...W,physicalItems:le}))},De=(Q,le)=>{const{value:W}=le.target,we=[...v.digitalItems];we[Q]=W,k(Be=>({...Be,digitalItems:we}))},J=()=>{k(Q=>({...Q,digitalItems:[...Q.digitalItems,""]}))},E=Q=>{const le=[...v.digitalItems];le.splice(Q,1),k(W=>({...W,digitalItems:le}))},T=Q=>{if(r.some(W=>W.packageId===Q)){alert("Paket ini tidak dapat dihapus karena sedang digunakan oleh satu atau lebih proyek. Hapus atau ubah proyek tersebut terlebih dahulu.");return}window.confirm("Apakah Anda yakin ingin menghapus paket ini?")&&e(W=>W.filter(we=>we.id!==Q))},B=Q=>{const{name:le,value:W}=Q.target;S(we=>({...we,[le]:W}))},ue=Q=>{if(Q.preventDefault(),!j.name||!j.price){alert("Nama Add-On dan Harga tidak boleh kosong.");return}const le={name:j.name,price:Number(j.price)};if(w)s(W=>W.map(we=>we.id===w?{...we,...le}:we));else{const W={...le,id:crypto.randomUUID()};s(we=>[...we,W])}ke()},ke=()=>{P(null),S(Eg)},G=Q=>{P(Q.id),S({name:Q.name,price:Q.price.toString()})},he=Q=>{if(r.some(W=>W.addOns.some(we=>we.id===Q))){alert("Add-on ini tidak dapat dihapus karena sedang digunakan oleh satu atau lebih proyek. Hapus atau ubah proyek tersebut terlebih dahulu.");return}window.confirm("Apakah Anda yakin ingin menghapus add-on ini?")&&s(W=>W.filter(we=>we.id!==Q))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Paket & Add-On",subtitle:"Kelola semua paket layanan dan item tambahan yang Anda tawarkan.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>H(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>R(!0),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Halaman Paket"]}),t.jsxs("button",{onClick:()=>ie("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Tambah Paket"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[t.jsx("div",{className:"lg:col-span-2 space-y-8",children:Object.entries(ne).map(([Q,le])=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gradient mb-4",children:Q}),t.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:le.map(W=>t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border flex flex-col overflow-hidden",children:[W.coverImage?t.jsx("img",{src:W.coverImage,alt:W.name,className:"w-full h-40 object-cover"}):t.jsx("div",{className:"w-full h-40 bg-brand-bg flex items-center justify-center",children:t.jsx(qr,{className:"w-12 h-12 text-brand-text-secondary"})}),t.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[t.jsx("h4",{className:"font-bold text-brand-text-light",children:W.name}),t.jsx("p",{className:"text-2xl font-bold text-brand-accent my-2",children:Ag(W.price)}),t.jsxs("p",{className:"text-xs text-brand-text-secondary mb-3",children:["Waktu Pengerjaan: ",W.processingTime]}),t.jsxs("div",{className:"text-sm space-y-2 flex-grow",children:[(W.photographers||W.videographers)&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-xs uppercase tracking-wider mb-1",children:"Tim"}),t.jsx("p",{className:"text-brand-text-secondary",children:[W.photographers,W.videographers].filter(Boolean).join(" & ")})]}),W.digitalItems.length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-xs uppercase tracking-wider mb-1",children:"Digital"}),t.jsx("ul",{className:"list-disc list-inside text-brand-text-secondary",children:W.digitalItems.map((we,Be)=>t.jsx("li",{children:we},Be))})]}),W.physicalItems.length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-brand-text-primary text-xs uppercase tracking-wider mb-1",children:"Fisik"}),t.jsx("ul",{className:"list-disc list-inside text-brand-text-secondary",children:W.physicalItems.map((we,Be)=>t.jsx("li",{children:we.name},Be))})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-brand-border",children:[t.jsx("button",{onClick:()=>ie("edit",W),"aria-label":`Edit ${W.name}`,className:"button-secondary flex-1 text-sm",children:"Edit"}),t.jsx("button",{onClick:()=>T(W.id),"aria-label":`Delete ${W.name}`,className:"button-secondary text-brand-danger border-brand-danger hover:bg-brand-danger/10 flex-shrink-0 px-3",children:t.jsx(fn,{className:"w-4 h-4"})})]})]})]},W.id))})]},Q))}),t.jsx("aside",{className:"lg:col-span-1 space-y-6 sticky top-24",children:t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h3",{className:"font-semibold text-brand-text-light p-4 border-b border-brand-border",children:"Add-Ons"}),t.jsx("div",{className:"p-4 space-y-2 max-h-60 overflow-y-auto",children:a.map(Q=>t.jsxs("div",{className:"flex justify-between items-center bg-brand-bg p-2 rounded-md text-sm",children:[t.jsxs("span",{className:"text-brand-text-primary",children:[Q.name," - ",Ag(Q.price)]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>G(Q),"aria-label":`Edit add-on ${Q.name}`,className:"p-1.5 text-brand-text-secondary hover:text-brand-accent",children:t.jsx(ln,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>he(Q.id),"aria-label":`Delete add-on ${Q.name}`,className:"p-1.5 text-brand-text-secondary hover:text-brand-danger",children:t.jsx(fn,{className:"w-4 h-4"})})]})]},Q.id))}),t.jsxs("form",{onSubmit:ue,className:"p-4 border-t border-brand-border space-y-2",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"addOnName",name:"name",value:j.name,onChange:B,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"addOnName",className:"input-label",children:w?"Edit Nama":"Nama Add-On Baru"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"addOnPrice",name:"price",value:j.price,onChange:B,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"addOnPrice",className:"input-label",children:"Harga"})]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[w&&t.jsx("button",{type:"button",onClick:ke,className:"button-secondary text-sm",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary text-sm",children:w?"Update":"Tambah"})]})]})]})})]}),t.jsx(nt,{isOpen:u,onClose:q,title:h==="add"?"Tambah Paket Baru":"Edit Paket",size:"3xl",children:t.jsxs("form",{onSubmit:V,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"name",value:v.name,onChange:ce,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Nama Paket"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",name:"price",value:v.price,onChange:ce,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Harga (IDR)"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{name:"category",value:v.category,onChange:ce,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih kategori..."}),d.packageCategories.map(Q=>t.jsx("option",{value:Q,children:Q},Q))]}),t.jsx("label",{className:"input-label",children:"Kategori"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"processingTime",value:v.processingTime,onChange:ce,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Waktu Pengerjaan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"photographers",value:v.photographers,onChange:ce,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Jumlah Fotografer"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"videographers",value:v.videographers,onChange:ce,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Jumlah Videografer"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 !text-brand-accent",children:"Cover Image"}),t.jsx("input",{type:"file",onChange:Ce,className:"input-field",accept:"image/*"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsx("h4",{className:"font-semibold text-brand-text-light",children:"Item Digital"}),v.digitalItems.map((Q,le)=>t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("input",{type:"text",value:Q,onChange:W=>De(le,W),className:"input-field flex-grow"}),t.jsx("button",{type:"button",onClick:()=>E(le),className:"p-2 text-brand-danger",children:t.jsx(fn,{className:"w-4 h-4"})})]},le)),t.jsx("button",{type:"button",onClick:J,className:"text-sm font-semibold text-brand-accent mt-2",children:"+ Tambah Item"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsx("h4",{className:"font-semibold text-brand-text-light",children:"Item Fisik"}),v.physicalItems.map((Q,le)=>t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("input",{type:"text",name:"name",value:Q.name,onChange:W=>Re(le,W),className:"input-field flex-grow",placeholder:"Nama Item"}),t.jsx("input",{type:"number",name:"price",value:Q.price,onChange:W=>Re(le,W),className:"input-field w-32",placeholder:"Harga"}),t.jsx("button",{type:"button",onClick:()=>re(le),className:"p-2 text-brand-danger",children:t.jsx(fn,{className:"w-4 h-4"})})]},le)),t.jsx("button",{type:"button",onClick:Ue,className:"text-sm font-semibold text-brand-accent mt-2",children:"+ Tambah Item"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:q,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:h==="add"?"Simpan":"Update"})]})]})}),t.jsxs(nt,{isOpen:A,onClose:()=>R(!1),title:"Bagikan Halaman Paket Publik",children:[t.jsx("p",{className:"text-sm text-brand-text-secondary mb-4",children:"Bagikan tautan ini kepada calon klien untuk melihat semua paket yang Anda tawarkan."}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",readOnly:!0,value:L,className:"input-field !bg-brand-input"}),t.jsx("label",{className:"input-label",children:"Tautan Publik"})]}),t.jsx("div",{className:"text-right mt-4",children:t.jsx("button",{onClick:U,className:"button-primary",children:"Salin Tautan"})})]}),t.jsx(nt,{isOpen:O,onClose:()=>H(!1),title:"Panduan Halaman Paket",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah tempat Anda membuat dan mengelola semua penawaran produk Anda."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Paket:"})," Kolom utama di kiri menampilkan semua paket layanan Anda, dikelompokkan berdasarkan kategori. Anda dapat menambah, mengedit, atau menghapus paket."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Add-Ons:"})," Kolom di kanan adalah untuk item tambahan yang bisa dipilih klien, seperti drone, MUA, dll."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Cover Image:"})," Anda bisa menambahkan gambar sampul untuk setiap paket agar lebih menarik secara visual di halaman publik."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Bagikan Halaman Paket:"})," Gunakan tombol di kanan atas untuk mendapatkan tautan ke halaman publik yang menampilkan semua paket Anda, siap untuk dibagikan kepada calon klien."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Kategori:"})," Kategori untuk paket dapat dikelola di halaman ",t.jsx("strong",{children:"Pengaturan > Kustomisasi Kategori"}),"."]})]})]})})]})},_g=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),JE=n=>{switch(n){case va.AVAILABLE:return"bg-green-500/20 text-green-400";case va.IN_USE:return"bg-blue-500/20 text-blue-400";case va.MAINTENANCE:return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},Pg={name:"",category:"",purchaseDate:new Date().toISOString().split("T")[0],purchasePrice:"",serialNumber:"",status:va.AVAILABLE,notes:""},WE=({assets:n,setAssets:e,profile:a,showNotification:s})=>{const[r,d]=C.useState(!1),[u,p]=C.useState("add"),[h,f]=C.useState(null),[g,y]=C.useState(Pg),v=C.useMemo(()=>{const A=n.reduce((H,L)=>H+L.purchasePrice,0),R=n.filter(H=>H.status===va.IN_USE).length,O=n.filter(H=>H.status===va.MAINTENANCE).length;return{totalValue:A,inUseCount:R,maintenanceCount:O}},[n]),k=(A,R)=>{p(A),A==="edit"&&R?(f(R),y({...R,purchasePrice:R.purchasePrice.toString(),serialNumber:R.serialNumber||"",notes:R.notes||""})):(f(null),y({...Pg,category:a.assetCategories[0]||""})),d(!0)},j=()=>d(!1),S=A=>{const{name:R,value:O}=A.target;y(H=>({...H,[R]:O}))},w=A=>{A.preventDefault();const R={...g,purchasePrice:Number(g.purchasePrice)};if(u==="add"){const O={...R,id:crypto.randomUUID()};e(H=>[...H,O]),s(`Aset "${O.name}" berhasil ditambahkan.`)}else if(h){const O={...h,...R};e(H=>H.map(L=>L.id===h.id?O:L)),s(`Aset "${O.name}" berhasil diperbarui.`)}j()},P=A=>{window.confirm("Apakah Anda yakin ingin menghapus aset ini?")&&(e(R=>R.filter(O=>O.id!==A)),s("Aset berhasil dihapus."))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Aset",subtitle:"Lacak semua peralatan dan aset fisik bisnis Anda.",children:t.jsxs("button",{onClick:()=>k("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Tambah Aset"]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(qe,{icon:t.jsx(qr,{className:"w-6 h-6"}),title:"Total Aset",value:n.length.toString()}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Nilai Aset",value:_g(v.totalValue)}),t.jsx(qe,{icon:t.jsx(Kg,{className:"w-6 h-6"}),title:"Dalam Perbaikan",value:v.maintenanceCount.toString()}),t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Sedang Digunakan",value:v.inUseCount.toString()})]}),t.jsx("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Nama Aset"}),t.jsx("th",{className:"px-4 py-3",children:"Kategori"}),t.jsx("th",{className:"px-4 py-3",children:"Tgl. Beli"}),t.jsx("th",{className:"px-4 py-3",children:"Harga Beli"}),t.jsx("th",{className:"px-4 py-3",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(A=>t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:A.name}),t.jsx("td",{className:"px-4 py-3",children:A.category}),t.jsx("td",{className:"px-4 py-3",children:new Date(A.purchaseDate).toLocaleDateString("id-ID")}),t.jsx("td",{className:"px-4 py-3",children:_g(A.purchasePrice)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${JE(A.status)}`,children:A.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>k("edit",A),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Edit",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>P(A.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Hapus",children:t.jsx(fn,{className:"w-5 h-5"})})]})})]},A.id))})]})})}),t.jsx(nt,{isOpen:r,onClose:j,title:u==="add"?"Tambah Aset Baru":"Edit Aset",children:t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:g.name,onChange:S,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Aset"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"category",name:"category",value:g.category,onChange:S,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Kategori..."}),a.assetCategories.map(A=>t.jsx("option",{value:A,children:A},A))]}),t.jsx("label",{htmlFor:"category",className:"input-label",children:"Kategori"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"purchaseDate",name:"purchaseDate",value:g.purchaseDate,onChange:S,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"purchaseDate",className:"input-label",children:"Tanggal Beli"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"purchasePrice",name:"purchasePrice",value:g.purchasePrice,onChange:S,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"purchasePrice",className:"input-label",children:"Harga Beli (IDR)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:g.serialNumber,onChange:S,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"serialNumber",className:"input-label",children:"Nomor Seri (Opsional)"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"status",name:"status",value:g.status,onChange:S,className:"input-field",children:Object.values(va).map(A=>t.jsx("option",{value:A,children:A},A))}),t.jsx("label",{htmlFor:"status",className:"input-label",children:"Status"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"notes",name:"notes",value:g.notes,onChange:S,className:"input-field",placeholder:" ",rows:3}),t.jsx("label",{htmlFor:"notes",className:"input-label",children:"Catatan (Opsional)"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:j,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:u==="add"?"Simpan":"Update"})]})]})})]})},pl=({enabled:n,onChange:e,id:a})=>t.jsx("button",{type:"button",id:a,className:`${n?"bg-brand-accent":"bg-gray-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-accent focus:ring-offset-2 focus:ring-offset-brand-surface`,onClick:e,children:t.jsx("span",{className:`${n?"translate-x-5":"translate-x-0"} inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})}),Ei=({title:n,categories:e,inputValue:a,onInputChange:s,onAddOrUpdate:r,onEdit:d,onDelete:u,editingValue:p,onCancelEdit:h,placeholder:f})=>{const g=v=>{v.key==="Enter"&&(v.preventDefault(),r())},y=v=>t.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-brand-bg rounded-md",children:[t.jsx("span",{className:"text-sm text-brand-text-primary",children:v}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>d(v),className:"p-1 text-brand-text-secondary hover:text-brand-accent",title:"Edit",children:t.jsx(ln,{className:"w-4 h-4"})}),t.jsx("button",{type:"button",onClick:()=>u(v),className:"p-1 text-brand-text-secondary hover:text-brand-danger",title:"Hapus",children:t.jsx(fn,{className:"w-4 h-4"})})]})]},v);return t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3 mb-4",children:n}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsxs("div",{className:"input-group flex-grow !mt-0",children:[t.jsx("input",{type:"text",id:`input-${n.replace(/\s/g,"")}`,value:a,onChange:v=>s(v.target.value),onKeyDown:g,placeholder:" ",className:"input-field"}),t.jsx("label",{htmlFor:`input-${n.replace(/\s/g,"")}`,className:"input-label",children:f})]}),t.jsx("button",{onClick:r,className:"button-primary h-fit mt-2",children:p?"Update":"Tambah"}),p&&t.jsx("button",{onClick:h,className:"button-secondary h-fit mt-2",children:"Batal"})]}),t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.map(v=>y(v))})]})},zE=({config:n,onConfigChange:e,projects:a,setProjects:s})=>{const[r,d]=C.useState(!1),[u,p]=C.useState("add"),[h,f]=C.useState(null),g={name:"",color:"#64748b",note:"",subStatuses:[]},[y,v]=C.useState(g),k=(H,L)=>{p(H),H==="edit"&&L?(f(L),v({name:L.name,color:L.color,note:L.note,subStatuses:[...L.subStatuses]})):(f(null),v(g)),d(!0)},j=()=>d(!1),S=H=>{v(L=>({...L,[H.target.name]:H.target.value}))},w=(H,L)=>{const{name:U,value:ne}=L.target,ie=[...y.subStatuses];ie[H]={...ie[H],[U]:ne},v(q=>({...q,subStatuses:ie}))},P=()=>{v(H=>({...H,subStatuses:[...H.subStatuses,{name:"",note:""}]}))},A=H=>{const L=[...y.subStatuses];L.splice(H,1),v(U=>({...U,subStatuses:L}))},R=H=>{if(H.preventDefault(),u==="add"){const L={id:crypto.randomUUID(),...y,subStatuses:y.subStatuses.filter(U=>U.name.trim()!=="")};e([...n,L])}else if(h){const L=h.name,U=y.name,ne=n.map(ie=>ie.id===h.id?{...ie,...y,subStatuses:y.subStatuses.filter(q=>q.name.trim()!=="")}:ie);e(ne),L!==U&&s(ie=>ie.map(q=>q.status===L?{...q,status:U}:q))}j()},O=H=>{const L=n.find(ne=>ne.id===H);if(!L)return;if(a.some(ne=>ne.status===L.name)){alert(`Status "${L.name}" tidak dapat dihapus karena sedang digunakan oleh proyek.`);return}window.confirm(`Yakin ingin menghapus status "${L.name}"?`)&&e(n.filter(ne=>ne.id!==H))};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light",children:"Manajemen Status Proyek"}),t.jsxs("button",{onClick:()=>k("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Tambah Status"]})]}),t.jsx("div",{className:"space-y-4",children:n.map(H=>t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:H.color}}),t.jsx("span",{className:"font-semibold text-brand-text-light",children:H.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>k("edit",H),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>O(H.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",children:t.jsx(fn,{className:"w-5 h-5"})})]})]}),H.subStatuses.length>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-brand-border/50 pl-7 space-y-2",children:H.subStatuses.map((L,U)=>t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-brand-text-primary",children:L.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:L.note})]},U))})]},H.id))}),t.jsx(nt,{isOpen:r,onClose:j,title:u==="add"?"Tambah Status Baru":`Edit Status: ${h==null?void 0:h.name}`,children:t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"input-group md:col-span-2",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:y.name,onChange:S,className:"input-field",required:!0,placeholder:" "}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Status"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"color",id:"color",name:"color",value:y.color,onChange:S,className:"input-field !p-1 h-12"}),t.jsx("label",{htmlFor:"color",className:"input-label",children:"Warna"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"note",name:"note",value:y.note,onChange:H=>v(L=>({...L,note:H.target.value})),className:"input-field",rows:2,placeholder:" "}),t.jsx("label",{htmlFor:"note",className:"input-label",children:"Catatan/Deskripsi Status"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light mb-2",children:"Sub-Status"}),t.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:y.subStatuses.map((H,L)=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg grid grid-cols-1 md:grid-cols-2 gap-3 items-center",children:[t.jsx("div",{className:"input-group !mt-0",children:t.jsx("input",{type:"text",name:"name",value:H.name,onChange:U=>w(L,U),placeholder:"Nama Sub-Status",className:"input-field !p-2 !text-sm"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"input-group flex-grow !mt-0",children:t.jsx("input",{type:"text",name:"note",value:H.note,onChange:U=>w(L,U),placeholder:"Catatan",className:"input-field !p-2 !text-sm"})}),t.jsx("button",{type:"button",onClick:()=>A(L),className:"p-2 text-brand-danger hover:bg-brand-danger/10 rounded-full",children:t.jsx(fn,{className:"w-4 h-4"})})]})]},L))}),t.jsx("button",{type:"button",onClick:P,className:"text-sm font-semibold text-brand-accent hover:underline mt-2",children:"+ Tambah Sub-Status"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:j,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:u==="add"?"Simpan Status":"Update Status"})]})]})})]})},Rc={fullName:"",email:"",password:"",confirmPassword:"",role:"Member",permissions:[]},YE=n=>new Promise((e,a)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=r=>a(r)}),QE=({profile:n,setProfile:e,transactions:a,setTransactions:s,projects:r,setProjects:d,packages:u,setPackages:p,sops:h,setSops:f,users:g,setUsers:y,currentUser:v,showNotification:k})=>{const[j,S]=C.useState("profile"),[w,P]=C.useState(!1),[A,R]=C.useState(""),[O,H]=C.useState(null),[L,U]=C.useState(""),[ne,ie]=C.useState(null),[q,V]=C.useState(""),[ce,Ce]=C.useState(null),[Re,Ue]=C.useState(""),[re,De]=C.useState(null),[J,E]=C.useState(""),[T,B]=C.useState(null),[ue,ke]=C.useState(""),[G,he]=C.useState(null),[Q,le]=C.useState(!1),[W,we]=C.useState("add"),[Be,Ze]=C.useState(null),[Ke,Qe]=C.useState(Rc),[gt,At]=C.useState(""),wt={"Manajemen Inti":[Te.DASHBOARD,Te.PROSPEK,Te.BOOKING,Te.CLIENTS,Te.PROJECTS],Operasional:[Te.TEAM,Te.FINANCE,Te.CALENDAR,Te.SOCIAL_MEDIA_PLANNER],"Konfigurasi & Aset":[Te.PACKAGES,Te.ASSETS,Te.CONTRACTS,Te.PROMO_CODES,Te.SOP],Laporan:[Te.CLIENT_REPORTS]},ft=new Map(Hc.map(Z=>[Z.view,Z])),Ne=Z=>{const{name:be,value:xe}=Z.target;e(Fe=>({...Fe,[be]:xe}))},Ve=Z=>{const{name:be,value:xe}=Z.target;e(Fe=>({...Fe,publicPageConfig:{...Fe.publicPageConfig,[be]:xe}}))},_e=async Z=>{if(Z.target.files){const xe=Array.from(Z.target.files).map(an=>YE(an)),Fe=await Promise.all(xe);e(an=>({...an,publicPageConfig:{...an.publicPageConfig,galleryImages:[...an.publicPageConfig.galleryImages,...Fe]}}))}},Je=Z=>{e(be=>({...be,publicPageConfig:{...be.publicPageConfig,galleryImages:be.publicPageConfig.galleryImages.filter((xe,Fe)=>Fe!==Z)}}))},st=Z=>{var xe;const be=(xe=Z.target.files)==null?void 0:xe[0];if(be){if(be.size>2*1024*1024){alert("Ukuran file logo tidak boleh melebihi 2MB.");return}const Fe=new FileReader;Fe.onloadend=()=>{e(an=>({...an,logoBase64:Fe.result}))},Fe.readAsDataURL(be)}},dt=Z=>{e(be=>({...be,notificationSettings:{...be.notificationSettings,[Z]:!be.notificationSettings[Z]}}))},yt=Z=>{Z.preventDefault(),P(!0),setTimeout(()=>P(!1),2e3)},Dt=(Z,be=null)=>{we(Z),Ze(be),Qe(Z==="edit"&&be?{fullName:be.fullName,email:be.email,role:be.role,password:"",confirmPassword:"",permissions:be.permissions||[]}:Rc),At(""),le(!0)},ze=()=>{le(!1),Ze(null),Qe(Rc),At("")},ot=Z=>{const{name:be,value:xe}=Z.target;Qe(Fe=>({...Fe,[be]:xe}))},Ie=(Z,be)=>{Qe(xe=>{const Fe=new Set(xe.permissions);return be?Fe.add(Z):Fe.delete(Z),{...xe,permissions:Array.from(Fe)}})},M=Z=>{if(Z.preventDefault(),At(""),Ke.password&&Ke.password!==Ke.confirmPassword){At("Konfirmasi kata sandi tidak cocok.");return}if(W==="add"){if(!Ke.email||!Ke.password||!Ke.fullName){At("Nama, email, dan kata sandi wajib diisi.");return}if(g.some(xe=>xe.email===Ke.email)){At("Email sudah digunakan di dalam vendor ini.");return}if(!v){At("Tidak dapat membuat pengguna: sesi tidak valid.");return}const be={id:crypto.randomUUID(),fullName:Ke.fullName,email:Ke.email,password:Ke.password,role:Ke.role,permissions:Ke.role==="Member"?Ke.permissions:void 0,isApproved:!0};y(xe=>[...xe,be])}else if(W==="edit"&&Be){if(g.some(be=>be.email===Ke.email&&be.id!==Be.id)){At("Email sudah digunakan oleh pengguna lain.");return}y(be=>be.map(xe=>{if(xe.id===Be.id){const Fe={...xe,fullName:Ke.fullName,email:Ke.email,role:Ke.role,permissions:Ke.role==="Member"?Ke.permissions:void 0};return Ke.password&&(Fe.password=Ke.password),Fe}return xe}))}ze()},de=Z=>{if(Z===(v==null?void 0:v.id)){alert("Anda tidak dapat menghapus akun Anda sendiri.");return}window.confirm("Apakah Anda yakin ingin menghapus pengguna ini?")&&y(be=>be.filter(xe=>xe.id!==Z))},z=Z=>{y(be=>be.map(xe=>xe.id===Z?{...xe,isApproved:!0}:xe)),k("Pengguna berhasil disetujui dan sekarang dapat login."),ze()},F=()=>{if(!A.trim())return;const Z=A.trim(),be=n.incomeCategories||[];if(O){if(Z!==O&&be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,incomeCategories:be.map(Fe=>Fe===O?Z:Fe).sort()})),s(xe=>xe.map(Fe=>Fe.category===O&&Fe.type===$e.INCOME?{...Fe,category:Z}:Fe)),H(null)}else{if(be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,incomeCategories:[...be,Z].sort()}))}R("")},K=Z=>{H(Z),R(Z)},te=Z=>{if(a.some(xe=>xe.category===Z&&xe.type===$e.INCOME)){alert(`Kategori "${Z}" tidak dapat dihapus karena sedang digunakan dalam transaksi.`);return}window.confirm(`Yakin ingin menghapus kategori "${Z}"?`)&&e(xe=>({...xe,incomeCategories:(xe.incomeCategories||[]).filter(Fe=>Fe!==Z)}))},X=()=>{if(!L.trim())return;const Z=L.trim(),be=n.expenseCategories||[];if(ne){if(Z!==ne&&be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,expenseCategories:be.map(Fe=>Fe===ne?Z:Fe).sort()})),s(xe=>xe.map(Fe=>Fe.category===ne&&Fe.type===$e.EXPENSE?{...Fe,category:Z}:Fe)),ie(null)}else{if(be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,expenseCategories:[...be,Z].sort()}))}U("")},fe=Z=>{ie(Z),U(Z)},ye=Z=>{if(a.some(xe=>xe.category===Z&&xe.type===$e.EXPENSE)){alert(`Kategori "${Z}" tidak dapat dihapus karena sedang digunakan dalam transaksi.`);return}window.confirm(`Yakin ingin menghapus kategori "${Z}"?`)&&e(xe=>({...xe,expenseCategories:(xe.expenseCategories||[]).filter(Fe=>Fe!==Z)}))},_=()=>{if(!q.trim())return;const Z=q.trim(),be=n.projectTypes||[];if(ce){if(Z!==ce&&be.includes(Z)){alert("Jenis proyek ini sudah ada.");return}e(xe=>({...xe,projectTypes:be.map(Fe=>Fe===ce?Z:Fe).sort()})),d(xe=>xe.map(Fe=>Fe.projectType===ce?{...Fe,projectType:Z}:Fe)),Ce(null)}else{if(be.includes(Z)){alert("Jenis proyek ini sudah ada.");return}e(xe=>({...xe,projectTypes:[...be,Z].sort()}))}V("")},D=Z=>{Ce(Z),V(Z)},ae=Z=>{if(r.some(xe=>xe.projectType===Z)){alert(`Jenis proyek "${Z}" tidak dapat dihapus karena sedang digunakan.`);return}window.confirm(`Yakin ingin menghapus jenis proyek "${Z}"?`)&&e(xe=>({...xe,projectTypes:(xe.projectTypes||[]).filter(Fe=>Fe!==Z)}))},se=()=>{if(!Re.trim())return;const Z=Re.trim(),be=n.eventTypes||[];if(re){if(Z!==re&&be.includes(Z)){alert("Jenis acara ini sudah ada.");return}e(xe=>({...xe,eventTypes:be.map(Fe=>Fe===re?Z:Fe).sort()})),d(xe=>xe.map(Fe=>Fe.clientName==="Acara Internal"&&Fe.projectType===re?{...Fe,projectType:Z}:Fe)),De(null)}else{if(be.includes(Z)){alert("Jenis acara ini sudah ada.");return}e(xe=>({...xe,eventTypes:[...be,Z].sort()}))}Ue("")},Ae=Z=>{De(Z),Ue(Z)},ut=Z=>{if(r.some(xe=>xe.clientName==="Acara Internal"&&xe.projectType===Z)){alert(`Jenis acara "${Z}" tidak dapat dihapus karena sedang digunakan di kalender.`);return}window.confirm(`Yakin ingin menghapus jenis acara "${Z}"?`)&&e(xe=>({...xe,eventTypes:(xe.eventTypes||[]).filter(Fe=>Fe!==Z)}))},Nt=()=>{if(!J.trim())return;const Z=J.trim(),be=n.sopCategories||[];if(T){if(Z!==T&&be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,sopCategories:be.map(Fe=>Fe===T?Z:Fe).sort()})),f(xe=>xe.map(Fe=>Fe.category===T?{...Fe,category:Z}:Fe)),B(null)}else{if(be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,sopCategories:[...be,Z].sort()}))}E("")},jt=Z=>{B(Z),E(Z)},wn=Z=>{if(h.some(xe=>xe.category===Z)){alert(`Kategori "${Z}" tidak dapat dihapus karena sedang digunakan oleh SOP.`);return}window.confirm(`Yakin ingin menghapus kategori SOP "${Z}"?`)&&e(xe=>({...xe,sopCategories:(xe.sopCategories||[]).filter(Fe=>Fe!==Z)}))},ge=()=>{if(!ue.trim())return;const Z=ue.trim(),be=n.packageCategories||[];if(G){if(Z!==G&&be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,packageCategories:be.map(Fe=>Fe===G?Z:Fe).sort()})),p(xe=>xe.map(Fe=>Fe.category===G?{...Fe,category:Z}:Fe)),he(null)}else{if(be.includes(Z)){alert("Kategori ini sudah ada.");return}e(xe=>({...xe,packageCategories:[...be,Z].sort()}))}ke("")},Se=Z=>{he(Z),ke(Z)},Me=Z=>{if(u.some(xe=>xe.category===Z)){alert(`Kategori "${Z}" tidak dapat dihapus karena sedang digunakan oleh paket.`);return}window.confirm(`Yakin ingin menghapus kategori paket "${Z}"?`)&&e(xe=>({...xe,packageCategories:(xe.packageCategories||[]).filter(Fe=>Fe!==Z)}))},et=[{id:"profile",label:"Profil Saya",icon:_n,adminOnly:!1},{id:"publicPage",label:"Halaman Publik",icon:Fn,adminOnly:!1},{id:"users",label:"Pengguna",icon:xv,adminOnly:!0},{id:"categories",label:"Kustomisasi Kategori",icon:Bc,adminOnly:!1},{id:"projectStatus",label:"Status Proyek",icon:ka,adminOnly:!0}],mt={contractNumber:"VP/CTR/2024/001",signingDate:"1 Januari 2024",vendorCompanyName:"Vena Pictures",clientName1:"Budi Santoso",projectName:"Pernikahan Budi & Sinta",projectDate:"14 Februari 2024",totalCost:"Rp 12.000.000",dpAmount:"Rp 6.000.000"},xt=()=>{switch(j){case"profile":return t.jsx("form",{onSubmit:yt,children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3",children:"Informasi Publik"}),t.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"fullName",type:"text",name:"fullName",value:n.fullName,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"fullName",className:"input-label",children:"Nama Lengkap"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"companyName",type:"text",name:"companyName",value:n.companyName,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"companyName",className:"input-label",children:"Nama Perusahaan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"email",type:"email",name:"email",value:n.email,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"phone",type:"tel",name:"phone",value:n.phone,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"phone",className:"input-label",children:"Telepon"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"website",type:"url",name:"website",value:n.website,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"website",className:"input-label",children:"Website"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"address",type:"text",name:"address",value:n.address,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"address",className:"input-label",children:"Alamat"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"bankAccount",type:"text",name:"bankAccount",value:n.bankAccount,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"bankAccount",className:"input-label",children:"Rekening Bank"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"authorizedSigner",type:"text",name:"authorizedSigner",value:n.authorizedSigner,onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"authorizedSigner",className:"input-label",children:"Nama Penanggung Jawab Tanda Tangan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"idNumber",type:"text",name:"idNumber",value:n.idNumber||"",onChange:Ne,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"idNumber",className:"input-label",children:"No. KTP Penanggung Jawab"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"bio",name:"bio",value:n.bio,onChange:Ne,className:"input-field",placeholder:" ",rows:3}),t.jsx("label",{htmlFor:"bio",className:"input-label",children:"Bio Perusahaan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"briefingTemplate",name:"briefingTemplate",value:n.briefingTemplate,onChange:Ne,className:"input-field",placeholder:" ",rows:3}),t.jsx("label",{htmlFor:"briefingTemplate",className:"input-label",children:"Template Pesan Briefing Tim"})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3 mt-8",children:"Branding & Kustomisasi"}),t.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"logoUpload",className:"text-sm font-medium text-brand-text-secondary",children:"Logo Perusahaan (u/ Invoice)"}),t.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[n.logoBase64?t.jsx("img",{src:n.logoBase64,alt:"Logo preview",className:"h-16 w-16 object-contain rounded-md bg-brand-bg p-1 border border-brand-border"}):t.jsx("div",{className:"h-16 w-16 rounded-md bg-brand-bg border border-brand-border flex items-center justify-center text-xs text-brand-text-secondary",children:"No Logo"}),t.jsx("input",{id:"logoUpload",type:"file",name:"logoBase64",onChange:st,className:"block w-full text-sm text-brand-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-accent/10 file:text-brand-accent hover:file:bg-brand-accent/20 cursor-pointer",accept:"image/png, image/jpeg, image/svg+xml"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"brandColor",className:"text-sm font-medium text-brand-text-secondary",children:"Warna Aksen Merek"}),t.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[t.jsx("div",{className:"relative",children:t.jsx("input",{id:"brandColor",type:"color",name:"brandColor",value:n.brandColor||"#3b82f6",onChange:Ne,className:"w-16 h-10 p-1 bg-brand-bg border border-brand-border rounded-md cursor-pointer"})}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Pilih warna yang mewakili merek Anda. Warna ini akan diterapkan di seluruh aplikasi, portal klien, dan dokumen."})]})]}),t.jsxs("div",{className:"input-group !mt-6",children:[t.jsx("textarea",{id:"termsAndConditions",name:"termsAndConditions",value:n.termsAndConditions||"",onChange:Ne,className:"input-field",placeholder:" ",rows:15}),t.jsx("label",{htmlFor:"termsAndConditions",className:"input-label",children:"Syarat & Ketentuan (u/ Invoice)"})]}),t.jsxs("div",{className:"input-group !mt-6",children:[t.jsx("textarea",{id:"contractTemplate",name:"contractTemplate",value:n.contractTemplate||"",onChange:Ne,className:"input-field",placeholder:" ",rows:15}),t.jsx("label",{htmlFor:"contractTemplate",className:"input-label",children:"Template Kontrak Kerja"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1",children:["Gunakan placeholder seperti ","{projectName}"," atau ","{clientName1}"," untuk mengisi data secara otomatis."]}),t.jsx("div",{title:`Daftar Placeholder: ${Object.keys(mt).join(", ")}`,className:"text-xs text-brand-accent hover:underline cursor-help",children:"Lihat Placeholder yang Tersedia"})]})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3 mt-8",children:"Notifikasi"}),t.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{htmlFor:"notif-newProject",children:"Proyek Baru Dibuat"}),t.jsx(pl,{id:"notif-newProject",enabled:n.notificationSettings.newProject,onChange:()=>dt("newProject")})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{htmlFor:"notif-paymentConfirmation",children:"Konfirmasi Pembayaran Diterima"}),t.jsx(pl,{id:"notif-paymentConfirmation",enabled:n.notificationSettings.paymentConfirmation,onChange:()=>dt("paymentConfirmation")})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{htmlFor:"notif-deadlineReminder",children:"Pengingat Deadline Proyek"}),t.jsx(pl,{id:"notif-deadlineReminder",enabled:n.notificationSettings.deadlineReminder,onChange:()=>dt("deadlineReminder")})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3 mt-8",children:"Keamanan"}),t.jsx("div",{className:"space-y-4 max-w-2xl mx-auto",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{htmlFor:"security-2fa",children:"Autentikasi Dua Faktor (2FA)"}),t.jsx(pl,{id:"security-2fa",enabled:n.securitySettings.twoFactorEnabled,onChange:()=>e(Z=>({...Z,securitySettings:{...Z.securitySettings,twoFactorEnabled:!Z.securitySettings.twoFactorEnabled}}))})]})}),t.jsx("div",{className:"text-right mt-8 pt-6 border-t border-gray-700/50",children:t.jsxs("button",{type:"submit",className:"button-primary relative",children:["Simpan Perubahan",w&&t.jsx("span",{className:"absolute -right-4 -top-2 text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-fade-in-out",children:""})]})})]})});case"publicPage":return t.jsx("form",{onSubmit:yt,children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light border-b border-gray-700/50 pb-3",children:"Desain Halaman Paket Publik"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-brand-text-secondary",children:"Pilih Template"}),t.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-4",children:["classic","modern","gallery"].map(Z=>t.jsx("div",{onClick:()=>Ve({target:{name:"template",value:Z}}),className:`p-2 rounded-lg border-2 cursor-pointer ${n.publicPageConfig.template===Z?"border-brand-accent":"border-transparent"}`,children:t.jsx("div",{className:"bg-brand-bg h-24 rounded-md flex items-center justify-center text-xs text-brand-text-secondary capitalize font-semibold border border-brand-border",children:Z})},Z))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"publicTitle",name:"title",value:n.publicPageConfig.title,onChange:Ve,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"publicTitle",className:"input-label",children:"Judul Halaman"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"publicIntro",name:"introduction",value:n.publicPageConfig.introduction,onChange:Ve,className:"input-field",placeholder:" ",rows:4}),t.jsx("label",{htmlFor:"publicIntro",className:"input-label",children:"Teks Perkenalan"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-brand-text-secondary",children:"Galeri Foto"}),t.jsxs("div",{className:"mt-2 p-4 border border-dashed border-brand-border rounded-lg",children:[t.jsx("input",{type:"file",id:"galleryUpload",multiple:!0,onChange:_e,accept:"image/*",className:"block w-full text-sm text-brand-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-accent/10 file:text-brand-accent hover:file:bg-brand-accent/20 cursor-pointer"}),t.jsx("div",{className:"mt-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:n.publicPageConfig.galleryImages.map((Z,be)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:Z,alt:`Gallery image ${be+1}`,className:"w-full h-24 object-cover rounded-md"}),t.jsx("button",{type:"button",onClick:()=>Je(be),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(fn,{className:"w-3 h-3"})})]},be))})]})]}),t.jsx("div",{className:"text-right mt-8 pt-6 border-t border-gray-700/50",children:t.jsxs("button",{type:"submit",className:"button-primary relative",children:["Simpan Pengaturan Halaman",w&&t.jsx("span",{className:"absolute -right-4 -top-2 text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-fade-in-out",children:""})]})})]})});case"users":return(v==null?void 0:v.role)!=="Admin"?t.jsx("p",{children:"Anda tidak memiliki akses ke halaman ini."}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light",children:"Manajemen Pengguna"}),t.jsxs("button",{onClick:()=>Dt("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah Pengguna"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(Z=>{var be;return t.jsxs("div",{className:"p-4 bg-brand-bg rounded-xl border border-brand-border flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-bold text-lg text-brand-text-light",children:Z.fullName}),Z.isApproved===!1&&t.jsx("span",{className:"text-xs font-semibold bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full",children:"Menunggu Persetujuan"})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Z.role==="Admin"?"bg-indigo-500/20 text-indigo-400":"bg-blue-500/20 text-blue-400"}`,children:Z.role})]}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:Z.email}),Z.role==="Member"&&t.jsxs("p",{className:"text-xs text-brand-text-secondary mt-2",children:[((be=Z.permissions)==null?void 0:be.length)||0," Izin Akses"]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-brand-border/50 justify-end",children:[t.jsx("button",{onClick:()=>Dt("edit",Z),className:"button-secondary text-sm",children:"Edit"}),t.jsx("button",{onClick:()=>de(Z.id),disabled:Z.id===(v==null?void 0:v.id),className:"button-secondary text-sm !text-brand-danger !border-brand-danger/50 hover:!bg-brand-danger/10 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:!bg-transparent",children:"Hapus"})]})]},Z.id)})})]});case"categories":return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsx(Ei,{title:"Kategori Pemasukan",categories:n.incomeCategories,inputValue:A,onInputChange:R,onAddOrUpdate:F,onEdit:K,onDelete:te,editingValue:O,onCancelEdit:()=>{H(null),R("")},placeholder:"e.g., DP Proyek"}),t.jsx(Ei,{title:"Kategori Pengeluaran",categories:n.expenseCategories,inputValue:L,onInputChange:U,onAddOrUpdate:X,onEdit:fe,onDelete:ye,editingValue:ne,onCancelEdit:()=>{ie(null),U("")},placeholder:"e.g., Gaji Freelancer"}),t.jsx(Ei,{title:"Jenis Proyek",categories:n.projectTypes,inputValue:q,onInputChange:V,onAddOrUpdate:_,onEdit:D,onDelete:ae,editingValue:ce,onCancelEdit:()=>{Ce(null),V("")},placeholder:"e.g., Pernikahan"}),t.jsx(Ei,{title:"Jenis Acara Internal",categories:n.eventTypes,inputValue:Re,onInputChange:Ue,onAddOrUpdate:se,onEdit:Ae,onDelete:ut,editingValue:re,onCancelEdit:()=>{De(null),Ue("")},placeholder:"e.g., Meeting Klien"}),t.jsx(Ei,{title:"Kategori SOP",categories:n.sopCategories,inputValue:J,onInputChange:E,onAddOrUpdate:Nt,onEdit:jt,onDelete:wn,editingValue:T,onCancelEdit:()=>{B(null),E("")},placeholder:"e.g., Fotografi"}),t.jsx(Ei,{title:"Kategori Paket",categories:n.packageCategories||[],inputValue:ue,onInputChange:ke,onAddOrUpdate:ge,onEdit:Se,onDelete:Me,editingValue:G,onCancelEdit:()=>{he(null),ke("")},placeholder:"e.g., Pernikahan"})]});case"projectStatus":return(v==null?void 0:v.role)!=="Admin"?t.jsx("p",{children:"Anda tidak memiliki akses ke halaman ini."}):t.jsx(zE,{config:n.projectStatusConfig,onConfigChange:Z=>{e(be=>({...be,projectStatusConfig:Z}))},projects:r,setProjects:d});default:return null}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Pengaturan",subtitle:"Kelola profil, pengguna, dan kustomisasi aplikasi Anda."}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[t.jsx("aside",{className:"lg:col-span-1",children:t.jsx("nav",{className:"space-y-1 sticky top-24",children:et.filter(Z=>!(Z.adminOnly&&(v==null?void 0:v.role)!=="Admin")).map(Z=>t.jsxs("button",{onClick:()=>S(Z.id),className:`w-full flex items-center px-4 py-3 text-sm font-semibold rounded-lg transition-all duration-200 text-left ${j===Z.id?"bg-brand-accent text-white":"text-brand-text-secondary hover:bg-brand-input hover:text-brand-text-light"}`,children:[t.jsx(Z.icon,{className:"w-5 h-5 mr-3"}),Z.label]},Z.id))})}),t.jsx("main",{className:"lg:col-span-3 bg-brand-surface p-6 rounded-2xl shadow-lg min-h-[60vh]",children:xt()})]}),t.jsx(nt,{isOpen:Q,onClose:ze,title:W==="add"?"Tambah Pengguna Baru":"Edit Pengguna",children:t.jsxs("form",{onSubmit:M,className:"space-y-4",children:[gt&&t.jsx("p",{className:"text-red-500 text-sm bg-red-500/10 p-3 rounded-md",children:gt}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"fullName",value:Ke.fullName,onChange:ot,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Nama Lengkap"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",name:"email",value:Ke.email,onChange:ot,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"password",name:"password",value:Ke.password,onChange:ot,className:"input-field",placeholder:" ",required:W==="add"}),t.jsx("label",{className:"input-label",children:W==="add"?"Kata Sandi":"Kata Sandi Baru (kosongkan jika tidak berubah)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"password",name:"confirmPassword",value:Ke.confirmPassword,onChange:ot,className:"input-field",placeholder:" ",required:!!Ke.password}),t.jsx("label",{className:"input-label",children:"Konfirmasi Kata Sandi"})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{name:"role",value:Ke.role,onChange:ot,className:"input-field",children:[t.jsx("option",{value:"Member",children:"Member"}),t.jsx("option",{value:"Admin",children:"Admin"})]}),t.jsx("label",{className:"input-label",children:"Peran"})]}),Ke.role==="Member"&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-brand-text-secondary mb-2",children:"Izin Akses Halaman"}),t.jsx("div",{className:"space-y-4",children:Object.entries(wt).map(([Z,be])=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-brand-text-light mb-2",children:Z}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:be.map(xe=>{const Fe=ft.get(xe);if(!Fe)return null;const an=Fe.icon;return t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-brand-input cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:Ke.permissions.includes(xe),onChange:ve=>Ie(xe,ve.target.checked),className:"h-4 w-4 rounded"}),t.jsx(an,{className:"w-4 h-4 text-brand-text-secondary"}),t.jsx("span",{className:"text-sm text-brand-text-primary",children:Fe.label})]},xe)})})]},Z))})]}),t.jsxs("div",{className:"flex justify-end items-center gap-3 pt-6 border-t border-brand-border",children:[W==="edit"&&Be&&Be.isApproved===!1&&t.jsx("button",{type:"button",onClick:()=>z(Be.id),className:"button-primary !bg-brand-success hover:!bg-green-700 mr-auto",children:"Setujui Pengguna"}),t.jsx("button",{type:"button",onClick:ze,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:W==="add"?"Simpan Pengguna":"Update Pengguna"})]})]})})]})},iy=n=>n?n.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase():"??",XE=["Min","Sen","Sel","Rab","Kam","Jum","Sab"],vu={"Meeting Klien":"#3b82f6","Survey Lokasi":"#22c55e",Libur:"#94a3b8",Workshop:"#a855f7",Lainnya:"#eab308"},kl=(n,e)=>{var s;return e.eventTypes.includes(n.projectType)?vu[n.projectType]||"#64748b":((s=e.projectStatusConfig.find(r=>r.name===n.status))==null?void 0:s.color)||"#64748b"},ZE=({profile:n,isClientProjectVisible:e,visibleEventTypes:a,onAddEvent:s,onClientFilterChange:r,onEventTypeFilterChange:d})=>t.jsxs("div",{className:"w-64 border-r border-brand-border p-4 flex-col hidden lg:flex",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-bg flex items-center justify-center font-bold text-brand-text-secondary",children:iy(n.fullName)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-sm text-brand-text-light",children:n.fullName.split(" ")[0]}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:n.email})]})]}),t.jsxs("button",{onClick:s,className:"button-primary w-full mb-6 inline-flex items-center justify-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Buat Acara"]}),t.jsx("h3",{className:"text-xs font-semibold text-brand-text-secondary uppercase tracking-wider mb-2",children:"Filter Kalender"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-brand-bg cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:e,onChange:u=>r(u.target.checked),style:{accentColor:"#ef4444"}}),t.jsx("span",{className:"ml-2 text-sm font-medium text-brand-text-light",children:"Proyek Klien"})]}),n.eventTypes.map(u=>t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-brand-bg cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:a.has(u),onChange:()=>d(u),style:{accentColor:vu[u]||"#94a3b8"}}),t.jsx("span",{className:"w-2 h-2 rounded-full ml-2",style:{backgroundColor:vu[u]||"#94a3b8"}}),t.jsx("span",{className:"ml-2 text-sm font-medium text-brand-text-light",children:u})]},u))]})]}),e_=({currentDate:n,viewMode:e,onPrev:a,onNext:s,onToday:r,onViewModeChange:d,onInfoClick:u,onExportIcs:p})=>t.jsxs("div",{className:"flex-shrink-0 p-4 flex items-center justify-between border-b border-brand-border",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-brand-input",children:t.jsx(Jg,{className:"w-5 h-5"})}),t.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-brand-input",children:t.jsx(Hr,{className:"w-5 h-5"})}),t.jsx("h2",{className:"text-lg font-semibold text-brand-text-light ml-2 hidden sm:block",children:n.toLocaleDateString("id-ID",{month:"long",year:"numeric"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:u,className:"button-secondary px-3 py-1.5 text-sm hidden md:block",children:"Pelajari Halaman Ini"}),t.jsx("button",{onClick:r,className:"button-secondary px-3 py-1.5 text-sm",children:"Hari Ini"}),t.jsxs("button",{onClick:p,className:"button-secondary px-3 py-1.5 text-sm inline-flex items-center gap-2",children:[t.jsx($i,{className:"w-4 h-4"})," Export .ics"]}),t.jsx("div",{className:"p-1 bg-brand-bg rounded-lg hidden sm:flex",children:["Month","Agenda"].map(h=>t.jsx("button",{onClick:()=>d(h),className:`px-3 py-1 text-sm font-medium rounded-md ${e===h?"bg-brand-surface shadow-sm":"text-brand-text-secondary"}`,children:h},h))})]})]}),t_=({currentDate:n,daysInMonth:e,eventsByDate:a,profile:s,onDayClick:r,onEventClick:d})=>t.jsxs("div",{className:"grid grid-cols-7 flex-grow h-full calendar-grid",children:[XE.map(u=>t.jsx("div",{className:"text-center py-2 text-xs font-semibold text-brand-text-secondary border-b border-l border-brand-border",children:u},u)),e.map((u,p)=>{const h=u.getMonth()===n.getMonth(),f=u.toDateString()===new Date().toDateString(),g=a.get(u.toDateString())||[];return t.jsxs("div",{onClick:()=>r(u),className:`relative border-b border-l border-brand-border p-1 sm:p-1.5 flex flex-col min-h-[6rem] sm:min-h-[8rem] ${h?"bg-brand-surface":"bg-brand-bg"} cursor-pointer hover:bg-brand-input transition-colors`,children:[t.jsx("span",{className:`text-xs font-semibold self-start mb-1 ${h?"text-brand-text-light":"text-brand-text-secondary/50"} ${f?"bg-brand-accent text-white rounded-full w-5 h-5 flex items-center justify-center":""}`,children:u.getDate()}),t.jsx("div",{className:"flex-grow space-y-1 overflow-hidden",children:g.map(y=>{const v=kl(y,s);return t.jsxs("div",{onClick:k=>{k.stopPropagation(),d(y)},className:"text-[10px] sm:text-xs p-1 rounded text-white truncate cursor-pointer leading-tight",style:{backgroundColor:v},children:[y.image&&t.jsx("img",{src:y.image,alt:y.projectName,className:"h-4 w-full object-cover rounded-sm mb-1"}),t.jsx("p",{className:"font-semibold truncate",children:y.projectName})]},y.id)})})]},p)})]}),n_=({agendaByDate:n,profile:e,onEventClick:a})=>t.jsxs("div",{className:"p-4 md:p-6",children:[n.map(([s,r])=>t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:"font-semibold text-brand-text-light mb-4",children:new Date(s).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"})}),t.jsx("div",{className:"relative pl-8 border-l-2 border-brand-border",children:r.map(d=>{const u=kl(d,e);return t.jsxs("div",{className:"relative mb-6",children:[t.jsx("div",{className:"absolute -left-[3.1rem] top-1 text-xs text-brand-text-secondary",children:d.startTime}),t.jsx("div",{className:"absolute -left-[0.6rem] top-1 w-4 h-4 rounded-full border-4 border-brand-surface",style:{backgroundColor:u}}),t.jsxs("div",{onClick:()=>a(d),className:"ml-4 p-4 rounded-lg cursor-pointer hover:bg-brand-input",style:{border:`1px solid ${u}40`,backgroundColor:`${u}10`},children:[t.jsx("h4",{className:"font-semibold text-brand-text-light",children:d.projectName}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:d.projectType})]})]},d.id)})})]},s)),n.length===0&&t.jsx("p",{className:"text-center text-brand-text-secondary py-16",children:"Tidak ada acara mendatang."})]}),a_=({isOpen:n,mode:e,selectedEvent:a,eventForm:s,teamMembers:r,profile:d,onClose:u,onSetMode:p,onFormChange:h,onTeamChange:f,onSubmit:g,onDelete:y})=>{const v=C.useMemo(()=>{if(!a)return"#";const k=A=>A.toISOString().replace(/[-:.]/g,"").slice(0,15)+"Z",j=A=>{const R=A.getFullYear(),O=(A.getMonth()+1).toString().padStart(2,"0"),H=A.getDate().toString().padStart(2,"0");return`${R}${O}${H}`},S=new Date(a.date);let w;if(a.startTime){const[A,R]=a.startTime.split(":").map(Number);if(S.setHours(A,R,0,0),a.endTime){w=new Date(a.date);const[L,U]=a.endTime.split(":").map(Number);w.setHours(L,U,0,0)}else w=new Date(S.getTime()+72e5);const O=`${k(S)}/${k(w)}`,H=`Proyek: ${a.projectName}
Klien: ${a.clientName||"Acara Internal"}
Catatan: ${a.notes||"Tidak ada"}`;return`https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(a.projectName)}&dates=${O}&details=${encodeURIComponent(H)}&location=${encodeURIComponent(a.location||"")}`}else{w=new Date(S),w.setDate(S.getDate()+1);const A=`${j(S)}/${j(w)}`,R=`Proyek: ${a.projectName}
Klien: ${a.clientName||"Acara Internal"}
Catatan: ${a.notes||"Tidak ada"}`;return`https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(a.projectName)}&dates=${A}&details=${encodeURIComponent(R)}&location=${encodeURIComponent(a.location||"")}`}},[a]);return t.jsxs("div",{className:`flex-shrink-0 w-full md:w-96 border-l border-brand-border flex flex-col bg-brand-surface transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"translate-x-full absolute right-0"}`,children:[t.jsx("div",{className:"p-4 border-b border-brand-border",children:t.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-brand-input",children:t.jsx(Hr,{className:"w-5 h-5"})})}),t.jsx("div",{className:"overflow-y-auto flex-1",children:e==="detail"&&a?t.jsxs("div",{className:"flex-1 flex flex-col",children:[a.image&&t.jsx("img",{src:a.image,alt:a.projectName,className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-6 flex-1",children:[t.jsx("h3",{className:"text-xl font-semibold text-brand-text-light",children:a.projectName}),t.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full mt-2 inline-block",style:{backgroundColor:`${kl(a,d)}30`,color:kl(a,d)},children:a.projectType}),t.jsxs("div",{className:"mt-6 space-y-5 text-sm",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(ks,{className:"w-5 h-5 text-brand-text-secondary flex-shrink-0 mt-0.5"}),t.jsxs("p",{className:"text-brand-text-primary font-medium",children:[new Date(a.date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"})," ",t.jsx("br",{}),t.jsx("span",{className:"text-brand-text-secondary",children:a.startTime&&a.endTime?`${a.startTime} - ${a.endTime}`:"Sepanjang hari"})]})]}),a.location&&t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(ju,{className:"w-5 h-5 text-brand-text-secondary flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-brand-text-primary font-medium",children:a.location})]}),a.team.length>0&&t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(_n,{className:"w-5 h-5 text-brand-text-secondary flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-brand-text-light mb-2",children:"Tim yang Bertugas"}),t.jsx("div",{className:"flex items-center -space-x-2",children:a.team.map(k=>t.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-input flex items-center justify-center text-xs font-bold text-brand-text-secondary border-2 border-brand-surface",title:k.name,children:iy(k.name)},k.memberId))})]})]}),a.notes&&t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(oa,{className:"w-5 h-5 text-brand-text-secondary flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-brand-text-primary whitespace-pre-wrap",children:a.notes})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-brand-border flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>p("edit"),className:"button-primary flex-1",children:"Edit Detail Acara"}),t.jsxs("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"button-secondary inline-flex items-center justify-center gap-2 flex-1",children:[t.jsx(Gs,{className:"w-4 h-4"}),"Tambah ke GCal"]})]})]}):t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-brand-text-light mb-6",children:a?"Edit Detail Acara":"Buat Acara Baru"}),t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"eventName",name:"projectName",value:s.projectName,onChange:h,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"eventName",className:"input-label",children:"Nama Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{name:"projectType",id:"projectType",value:s.projectType,onChange:h,className:"input-field",children:d.eventTypes.map(k=>t.jsx("option",{value:k,children:k},k))}),t.jsx("label",{htmlFor:"projectType",className:"input-label",children:"Jenis Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"eventDate",name:"date",value:s.date,onChange:h,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"eventDate",className:"input-label",children:"Tanggal"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"time",id:"startTime",name:"startTime",value:s.startTime,onChange:h,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"startTime",className:"input-label",children:"Mulai"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"time",id:"endTime",name:"endTime",value:s.endTime,onChange:h,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"endTime",className:"input-label",children:"Selesai"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:s.location,onChange:h,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Lokasi"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"url",id:"imageUrl",name:"image",value:s.image,onChange:h,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"imageUrl",className:"input-label",children:"URL Gambar Sampul (Opsional)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 !text-brand-accent",children:"Tim"}),t.jsx("div",{className:"p-3 border border-brand-border bg-brand-bg rounded-md max-h-32 overflow-y-auto space-y-2 mt-2",children:r.map(k=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:s.team.some(j=>j.memberId===k.id),onChange:()=>f(k.id)}),t.jsx("span",{className:"ml-2 text-sm",children:k.name})]},k.id))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{name:"notes",id:"eventNotes",value:s.notes,onChange:h,className:"input-field",rows:3,placeholder:" "}),t.jsx("label",{htmlFor:"eventNotes",className:"input-label",children:"Catatan"})]}),t.jsxs("div",{className:"flex justify-between items-center pt-4 mt-4 border-t border-brand-border",children:[a&&t.jsx("button",{type:"button",onClick:y,className:"text-brand-danger hover:underline text-sm font-semibold",children:"Hapus Acara"}),t.jsxs("div",{className:"flex-grow text-right space-x-2",children:[t.jsx("button",{type:"button",onClick:e==="edit"&&a?()=>p("detail"):u,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:a?"Update":"Simpan"})]})]})]})]})})]})},s_=({projects:n,setProjects:e,teamMembers:a,profile:s})=>{const[r,d]=C.useState(new Date),[u,p]=C.useState("Month"),[h,f]=C.useState(!1),[g,y]=C.useState(null),[v,k]=C.useState("detail"),[j,S]=C.useState(!1),[w,P]=C.useState({isClientProjectVisible:!0,visibleEventTypes:new Set(s.eventTypes)}),A=C.useMemo(()=>({id:"",projectName:"",projectType:s.eventTypes[0]||"Lainnya",date:new Date().toISOString().split("T")[0],startTime:"",endTime:"",notes:"",team:[],image:"",location:""}),[s.eventTypes]),[R,O]=C.useState(A);C.useEffect(()=>{f(!1)},[r,u]),C.useEffect(()=>(h?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[h]);const H=C.useMemo(()=>new Date(r.getFullYear(),r.getMonth(),1),[r]),L=C.useMemo(()=>new Date(r.getFullYear(),r.getMonth()+1,0),[r]),U=C.useMemo(()=>{const E=[],T=new Date(H);T.setDate(T.getDate()-T.getDay());const B=new Date(L);B.setDate(B.getDate()+(6-B.getDay()));let ue=T;for(;ue<=B;)E.push(new Date(ue)),ue.setDate(ue.getDate()+1);return E},[H,L]),ne=C.useMemo(()=>n.filter(E=>s.eventTypes.includes(E.projectType)?w.visibleEventTypes.has(E.projectType):w.isClientProjectVisible),[n,w,s.eventTypes]),ie=C.useMemo(()=>{const E=new Date;E.setHours(0,0,0,0);const T=new Map;return ne.filter(B=>new Date(B.date)>=E).sort((B,ue)=>{const ke=new Date(B.date).getTime()-new Date(ue.date).getTime();return ke!==0?ke:B.startTime&&ue.startTime?B.startTime.localeCompare(ue.startTime):0}).forEach(B=>{const ue=new Date(B.date).toDateString();T.has(ue)||T.set(ue,[]),T.get(ue).push(B)}),Array.from(T.entries())},[ne]),q=C.useMemo(()=>{const E=new Map;return ne.forEach(T=>{const B=new Date(T.date).toDateString();E.has(B)||E.set(B,[]),E.get(B).push(T)}),E},[ne]),V=E=>{y(null),O({...A,date:E.toISOString().split("T")[0]}),k("edit"),f(!0)},ce=E=>{y(E),O({id:E.id,projectName:E.projectName,projectType:E.projectType,date:E.date,startTime:E.startTime||"",endTime:E.endTime||"",notes:E.notes||"",team:E.team||[],image:E.image||"",location:E.location||""}),k("detail"),f(!0)},Ce=E=>O(T=>({...T,[E.target.name]:E.target.value})),Re=E=>{const T=a.find(B=>B.id===E);T&&O(B=>{const ue=B.team.some(ke=>ke.memberId===E);return{...B,team:ue?B.team.filter(ke=>ke.memberId!==E):[...B.team,{memberId:T.id,name:T.name,role:T.role,fee:T.standardFee,reward:0}]}})},Ue=E=>{E.preventDefault();const T=s.eventTypes.includes(R.projectType);if(g){const B={...g,projectName:R.projectName,projectType:R.projectType,date:R.date,startTime:R.startTime,endTime:R.endTime,notes:R.notes,team:R.team,image:R.image,location:R.location};e(ue=>ue.map(ke=>ke.id===g.id?B:ke)),y(B),k("detail")}else{const B={id:`EVT-${Date.now()}`,...R,clientName:T?"Acara Internal":"N/A",clientId:T?"INTERNAL":"N/A",packageName:"",packageId:"",addOns:[],deadlineDate:"",progress:T?100:0,status:"Dikonfirmasi",totalCost:0,amountPaid:0,paymentStatus:_t.LUNAS};e(ue=>[...ue,B].sort((ke,G)=>new Date(G.date).getTime()-new Date(ke.date).getTime())),f(!1)}},re=()=>{g&&window.confirm(`Yakin ingin menghapus acara "${g.projectName}"?`)&&(e(E=>E.filter(T=>T.id!==g.id)),f(!1))},De=(E,T)=>{P(E==="client"?B=>({...B,isClientProjectVisible:T}):B=>{const ue=new Set(B.visibleEventTypes);return ue.has(T)?ue.delete(T):ue.add(T),{...B,visibleEventTypes:ue}})},J=()=>{const E=Q=>Q.toISOString().replace(/[-:.]/g,"").slice(0,15)+"Z",T=n.filter(Q=>new Date(Q.date)>=new Date);if(T.length===0){alert("Tidak ada acara mendatang untuk diekspor.");return}const ue=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Vena Pictures//Calendar Exporter v1.0//EN",T.map(Q=>{const le=new Date(Q.date);if(Q.startTime){const[Be,Ze]=Q.startTime.split(":");le.setHours(Number(Be),Number(Ze))}let W;if(Q.endTime){W=new Date(Q.date);const[Be,Ze]=Q.endTime.split(":");W.setHours(Number(Be),Number(Ze))}else W=new Date(le.getTime()+7200*1e3);const we=`Proyek: ${Q.projectName}\\nKlien: ${Q.clientName}\\nLokasi: ${Q.location}\\nCatatan: ${Q.notes||"Tidak ada"}`.replace(/\n/g,"\\n");return["BEGIN:VEVENT",`UID:${Q.id}@venapictures.com`,`DTSTAMP:${E(new Date)}`,`DTSTART:${E(le)}`,`DTEND:${E(W)}`,`SUMMARY:${Q.projectName}`,`DESCRIPTION:${we}`,`LOCATION:${Q.location||""}`,"END:VEVENT"].join(`\r
`)}).join(`\r
`),"END:VCALENDAR"].join(`\r
`),ke=new Blob([ue],{type:"text/calendar;charset=utf-8;"}),G=document.createElement("a"),he=URL.createObjectURL(ke);G.setAttribute("href",he),G.setAttribute("download","vena_pictures_calendar.ics"),document.body.appendChild(G),G.click(),document.body.removeChild(G)};return t.jsxs("div",{className:"flex h-[calc(100vh-8rem)] bg-brand-surface rounded-2xl overflow-hidden",children:[t.jsx(ZE,{profile:s,onAddEvent:()=>V(new Date),isClientProjectVisible:w.isClientProjectVisible,visibleEventTypes:w.visibleEventTypes,onClientFilterChange:E=>De("client",E),onEventTypeFilterChange:E=>De("event",E)}),t.jsxs("div",{className:"flex-1 flex flex-row overflow-hidden",children:[t.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[t.jsx(e_,{currentDate:r,viewMode:u,onPrev:()=>d(new Date(r.getFullYear(),r.getMonth()-1,1)),onNext:()=>d(new Date(r.getFullYear(),r.getMonth()+1,1)),onToday:()=>d(new Date),onViewModeChange:p,onInfoClick:()=>S(!0),onExportIcs:J}),t.jsx("div",{className:"flex-1 calendar-grid-container",children:u==="Month"?t.jsx(t_,{currentDate:r,daysInMonth:U,eventsByDate:q,profile:s,onDayClick:V,onEventClick:ce}):t.jsx(n_,{agendaByDate:ie,profile:s,onEventClick:ce})})]}),t.jsx(a_,{isOpen:h,mode:v,selectedEvent:g,eventForm:R,teamMembers:a,profile:s,onClose:()=>f(!1),onSetMode:k,onFormChange:Ce,onTeamChange:Re,onSubmit:Ue,onDelete:re})]}),t.jsx(nt,{isOpen:j,onClose:()=>S(!1),title:"Panduan Halaman Kalender",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman Kalender membantu Anda memvisualisasikan semua jadwal penting dalam satu tempat."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Tampilan Bulan & Agenda:"})," Pilih antara tampilan kalender bulanan tradisional atau tampilan agenda untuk melihat daftar acara mendatang secara berurutan."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Proyek & Acara Internal:"})," Kalender ini secara otomatis menampilkan semua proyek klien Anda. Anda juga bisa menambahkan acara internal seperti rapat, survei lokasi, atau hari libur."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Filter:"})," Gunakan filter di sidebar (tampilan desktop) untuk menampilkan atau menyembunyikan jenis acara tertentu agar tampilan lebih fokus."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Detail Acara:"})," Klik pada acara mana pun di kalender untuk membuka panel detail di sebelah kanan, yang berisi semua informasi relevan tentang acara tersebut."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Tambah Acara Cepat:"})," Klik pada tanggal kosong di tampilan bulan untuk langsung membuka form pembuatan acara baru pada tanggal tersebut."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Integrasi Kalender:"}),' Gunakan tombol "Export .ics" untuk mengunduh file kalender yang bisa diimpor ke Google Calendar atau Apple Calendar. Gunakan tombol "Tambah ke GCal" di detail acara untuk menambahkan acara individual.']})]})]})})]})},i_="https://cgscmkxxrsveyydtimah.supabase.co",r_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnc2Nta3h4cnN2ZXl5ZHRpbWFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3MTc2OTYsImV4cCI6MjA3MzI5MzY5Nn0.ZGqT6YV3ukUiFtAgZUSWQRIlFJE8j1inrc-YTcII9pU",rn=Zx(i_,r_),o_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),l_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),d_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),c_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),t.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 11 8 11 8a18.35 18.35 0 0 1-2.18 3.22"}),t.jsx("path",{d:"M1.42 1.42A19.88 19.88 0 0 0 1 12s4 8 11 8a18.35 18.35 0 0 0 3.22-2.18"}),t.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),Dg=({onLoginSuccess:n,users:e})=>{const[a,s]=C.useState(""),[r,d]=C.useState(""),[u,p]=C.useState(!1),[h,f]=C.useState(""),[g,y]=C.useState(!1),v=async k=>{k.preventDefault(),f(""),y(!0);try{const{data:j,error:S}=await rn.auth.signInWithPassword({email:a,password:r});if(S)f("Email atau kata sandi salah.");else{const w=j.user;if(w){const P={id:w.id,email:w.email||a,password:"",fullName:w.email||a,role:"Member",isApproved:!0};n(P)}}}catch{f("Terjadi kesalahan saat login. Coba lagi.")}finally{y(!1)}};return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 p-4",children:t.jsx("div",{className:"w-full max-w-sm mx-auto",children:t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-slate-200",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold",style:{color:"#4f46e5"},children:"Login"}),t.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Hey, masukkan detail Anda untuk masuk ke akun Anda"})]}),t.jsxs("form",{className:"space-y-5",onSubmit:v,children:[h&&t.jsx("div",{className:"p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:h}),t.jsxs("div",{className:"relative",children:[t.jsx(o_,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),t.jsx("input",{id:"email",name:"email",type:"text",required:!0,className:"w-full h-12 pl-12 pr-4 bg-slate-100 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800",placeholder:"Enter your username/email",value:a,onChange:k=>s(k.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(l_,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),t.jsx("input",{id:"password",name:"password",type:u?"text":"password",required:!0,className:"w-full h-12 pl-12 pr-12 bg-slate-100 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800",placeholder:"Enter your password",value:r,onChange:k=>d(k.target.value)}),t.jsx("button",{type:"button",onClick:()=>p(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 focus:outline-none","aria-label":u?"Sembunyikan kata sandi":"Tampilkan kata sandi",children:u?t.jsx(c_,{className:"w-5 h-5"}):t.jsx(d_,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"pt-2",children:t.jsx("button",{type:"submit",disabled:g,className:"button-primary w-full",children:g?"Logging In...":"Log In"})})]}),t.jsxs("div",{className:"text-center mt-6 text-xs text-slate-400 bg-slate-50 p-3 rounded-lg",children:[t.jsx("p",{className:"font-bold text-slate-500",children:"Masuk dengan akun Supabase Anda"}),t.jsx("p",{className:"text-slate-500",children:"Gunakan email dan password yang telah dibuat di Supabase Auth."})]})]})})})},gs=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),u_={clientName:"",email:"",phone:"",instagram:"",projectType:"",location:"",date:new Date().toISOString().split("T")[0],packageId:"",selectedAddOnIds:[],promoCode:"",dp:"",dpPaymentRef:"",transportCost:""},m_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t.jsx("polyline",{points:"17 8 12 3 7 8"}),t.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),p_=n=>new Promise((e,a)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=r=>a(r)}),h_=({setClients:n,setProjects:e,packages:a,addOns:s,setTransactions:r,userProfile:d,cards:u,setCards:p,pockets:h,setPockets:f,promoCodes:g,setPromoCodes:y,showNotification:v,leads:k,setLeads:j,addNotification:S})=>{const[w,P]=C.useState({...u_,projectType:d.projectTypes[0]||""}),[A,R]=C.useState(!1),[O,H]=C.useState(!1),[L,U]=C.useState({type:"",message:""}),[ne,ie]=C.useState(null),[q,V]=C.useState(!1),[ce,Ce]=C.useState(!1),Re=C.useRef(null),[Ue,re]=C.useState(null);C.useEffect(()=>{const W=window.location.hash;if(W.includes("?")){const Be=new URLSearchParams(W.substring(W.indexOf("?"))).get("leadId");if(Be){re(Be);const Ze=k.find(Ke=>Ke.id===Be);Ze&&P(Ke=>({...Ke,clientName:Ze.name,phone:Ze.whatsapp||"",location:Ze.location}))}}},[k]);const De=d.publicPageConfig.template||"classic",J=C.useMemo(()=>d.termsAndConditions?d.termsAndConditions.split(`
`).map((W,we)=>W.trim()===""?t.jsx("div",{className:"h-4"},we):/^(|||||)\s/.test(W)?t.jsx("h3",{className:"text-lg font-semibold text-gradient mt-4 mb-2",children:W},we):W.trim().startsWith("- ")?t.jsx("p",{className:"ml-4 text-brand-text-primary",children:W.trim().substring(2)},we):t.jsx("p",{className:"text-brand-text-primary",children:W},we)):null,[d.termsAndConditions]),{totalBeforeDiscount:E,discountAmount:T,totalProject:B,discountText:ue}=C.useMemo(()=>{const W=a.find(ft=>ft.id===w.packageId),we=(W==null?void 0:W.price)||0,Be=s.filter(ft=>w.selectedAddOnIds.includes(ft.id)).reduce((ft,Ne)=>ft+Ne.price,0),Ze=Number(w.transportCost)||0,Ke=we+Be;let Qe=0,gt="";const At=w.promoCode.toUpperCase().trim();if(At){const ft=g.find(Ne=>Ne.code===At&&Ne.isActive);if(ft){const Ne=ft.expiryDate&&new Date(ft.expiryDate)<new Date,Ve=ft.maxUsage!=null&&ft.usageCount>=ft.maxUsage;!Ne&&!Ve?(ft.discountType==="percentage"?(Qe=Ke*ft.discountValue/100,gt=`${ft.discountValue}%`):(Qe=ft.discountValue,gt=gs(ft.discountValue)),U({type:"success",message:`Kode promo diterapkan! Diskon ${gt}.`})):U({type:"error",message:"Kode promo tidak valid atau sudah habis."})}else U({type:"error",message:"Kode promo tidak ditemukan."})}else U({type:"",message:""});const wt=Ke-Qe+Ze;return{totalBeforeDiscount:Ke,discountAmount:Qe,totalProject:wt,discountText:gt}},[w.packageId,w.selectedAddOnIds,w.promoCode,w.transportCost,a,s,g]),ke=W=>{const{name:we,value:Be,type:Ze}=W.target;if(Ze==="checkbox"){const{id:Ke,checked:Qe}=W.target;P(gt=>({...gt,selectedAddOnIds:Qe?[...gt.selectedAddOnIds,Ke]:gt.selectedAddOnIds.filter(At=>At!==Ke)}))}else P(Ke=>({...Ke,[we]:Be}))},G=W=>{if(W.target.files&&W.target.files[0]){const we=W.target.files[0];if(we.size>10*1024*1024){v("Ukuran file tidak boleh melebihi 10MB."),W.target.value="";return}ie(we)}},he=async W=>{W.preventDefault(),R(!0);const we=Number(w.dp)||0,Be=a.find(_e=>_e.id===w.packageId);if(!Be){alert("Silakan pilih paket."),R(!1);return}const Ze=u.find(_e=>_e.id!=="CARD_CASH")||u[0];if(!Ze){alert("Sistem pembayaran tidak dikonfigurasi. Hubungi vendor."),R(!1);return}let Ke;if(T>0&&w.promoCode){const _e=g.find(Je=>Je.code===w.promoCode.toUpperCase().trim());_e&&(Ke=_e.id)}let Qe="";if(ne)try{Qe=await p_(ne)}catch(_e){console.error("Error reading file:",_e),v("Gagal memproses file bukti transfer."),R(!1);return}const gt=s.filter(_e=>w.selectedAddOnIds.includes(_e.id)),At=B-we,wt=Number(w.transportCost)||0,ft=`CLI${Date.now()}`,Ne={id:ft,name:w.clientName,email:w.email,phone:w.phone,instagram:w.instagram,since:new Date().toISOString().split("T")[0],status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:new Date().toISOString(),portalAccessId:crypto.randomUUID()},Ve={id:`PRJ${Date.now()}`,projectName:`Acara ${w.clientName} (${Be.name})`,clientName:Ne.name,clientId:Ne.id,projectType:w.projectType,packageName:Be.name,packageId:Be.id,addOns:gt,date:w.date,location:w.location,progress:0,status:"Dikonfirmasi",bookingStatus:sa.BARU,totalCost:B,amountPaid:we,paymentStatus:we>0?At<=0?_t.LUNAS:_t.DP_TERBAYAR:_t.BELUM_BAYAR,team:[],notes:`Referensi Pembayaran DP: ${w.dpPaymentRef}`,promoCodeId:Ke,discountAmount:T>0?T:void 0,dpProofUrl:Qe||void 0,transportCost:wt>0?wt:void 0};try{const{supabase:_e}=await js(async()=>{const{supabase:st}=await Promise.resolve().then(()=>ey);return{supabase:st}},void 0);await _e.from("clients").insert({id:Ne.id,name:Ne.name,email:Ne.email,phone:Ne.phone,whatsapp:Ne.whatsapp??null,instagram:Ne.instagram??null,client_type:"DIRECT",since:Ne.since,status:"ACTIVE",last_contact:Ne.lastContact,portal_access_id:Ne.portalAccessId}),await _e.from("projects").insert({id:Ve.id,project_name:Ve.projectName,client_id:Ne.id,client_name:Ne.name,project_type:Ve.projectType,package_id:Ve.packageId,package_name:Ve.packageName,date:Ve.date,location:Ve.location,progress:0,status:"Dikonfirmasi",booking_status:"BARU",total_cost:B,amount_paid:we,payment_status:we>=B?"LUNAS":we>0?"DP_TERBAYAR":"BELUM_BAYAR",notes:Ve.notes||null,dp_proof_url:Qe||null,promo_code_id:Ke,discount_amount:T>0?T:null,transport_cost:wt>0?wt:null,completed_digital_items:[]});const Je=`LEAD-FORM-${Date.now()}`;if(await _e.from("leads").insert({id:Je,name:Ne.name,contact_channel:"Website",location:Ve.location,whatsapp:null,notes:`Dikonversi otomatis dari formulir pemesanan publik. Proyek: ${Ve.projectName}. Klien ID: ${Ne.id}`,status:"Dikonversi",date:new Date().toISOString()}),we>0&&Ze&&await _e.from("transactions").insert({id:`TRN-DP-${Ve.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${Ve.projectName}`,category:"DP Proyek",amount:we,type:"INCOME",method:"Transfer Bank",card_id:Ze.id,pocket_id:null,project_id:Ve.id}),Ke)try{await _e.rpc("increment_promo_usage",{pid:Ke})}catch{const{data:st}=await _e.from("promo_codes").select("usage_count").eq("id",Ke).single(),dt=(st==null?void 0:st.usage_count)??0;await _e.from("promo_codes").update({usage_count:dt+1}).eq("id",Ke)}}catch(_e){console.error("Supabase persistence failed:",_e)}if(Ue)j(_e=>_e.map(Je=>Je.id===Ue?{...Je,status:Tt.CONVERTED,notes:`Dikonversi dari formulir booking. Klien ID: ${ft}`}:Je));else{const _e={id:`LEAD-FORM-${Date.now()}`,name:Ne.name,contactChannel:Ft.WEBSITE,location:Ve.location,status:Tt.CONVERTED,date:new Date().toISOString().split("T")[0],notes:`Dikonversi secara otomatis dari formulir pemesanan publik. Proyek: ${Ve.projectName}. Klien ID: ${Ne.id}`};j(Je=>[_e,...Je])}if(n(_e=>[Ne,..._e]),e(_e=>[Ve,..._e]),Ke&&y(_e=>_e.map(Je=>Je.id===Ke?{...Je,usageCount:Je.usageCount+1}:Je)),we>0){const _e={id:`TRN-DP-${Ve.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${Ve.projectName}`,amount:we,type:$e.INCOME,projectId:Ve.id,category:"DP Proyek",method:"Transfer Bank",cardId:Ze.id};r(Je=>[...Je,_e].sort((st,dt)=>new Date(dt.date).getTime()-new Date(st.date).getTime())),p(Je=>Je.map(st=>st.id===Ze.id?{...st,balance:st.balance+we}:st))}R(!1),H(!0),S({title:"Booking Baru Diterima!",message:`Booking dari ${Ne.name} untuk proyek "${Ve.projectName}" menunggu konfirmasi Anda.`,icon:"booking",link:{view:Te.BOOKING}})},Q=()=>{const W=new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return t.jsxs("div",{className:"printable-content bg-white text-black p-8 font-serif leading-relaxed text-sm max-h-[70vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-center mb-1",children:"CONTOH SURAT PERJANJIAN KERJA SAMA"}),t.jsx("h3",{className:"text-lg font-bold text-center mb-6",children:"JASA FOTOGRAFI & VIDEOGRAFI"}),t.jsxs("p",{children:["Pada hari ini, ",W,", telah dibuat dan disepakati perjanjian kerja sama antara:"]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK PERTAMA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsxs("td",{children:[": ",d.authorizedSigner]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Jabatan"}),t.jsx("td",{children:": Pemilik Usaha"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsxs("td",{children:[": ",d.address]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsxs("td",{children:[": ",d.phone]})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama perusahaannya, ",d.companyName,", selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK PERTAMA"}),"."]})]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK KEDUA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsx("td",{children:": [Nama Klien]"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsx("td",{children:": [Alamat Klien]"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsx("td",{children:": [Nomor Telepon Klien]"})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama pribadi, selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK KEDUA"}),"."]})]}),t.jsx("p",{children:"Kedua belah pihak sepakat untuk mengikatkan diri dalam perjanjian ini dengan syarat dan ketentuan sebagai berikut:"}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 1: DEFINISI"}),t.jsx("p",{children:"Pekerjaan adalah jasa fotografi dan/atau videografi yang diberikan oleh PIHAK PERTAMA untuk acara PIHAK KEDUA. Hari Pelaksanaan adalah tanggal [Tanggal Acara]. Lokasi Pelaksanaan adalah [Lokasi Acara]."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 2: RUANG LINGKUP PEKERJAAN"}),t.jsx("p",{children:"PIHAK PERTAMA akan memberikan jasa sesuai dengan paket layanan yang dipilih oleh PIHAK KEDUA yang mencakup: Durasi pemotretan, Jumlah foto yang dijamin, Detail album cetak, Format file digital, dan item lainnya sesuai detail paket. PIHAK PERTAMA akan menyediakan jumlah personel yang sesuai. Penyerahan hasil akhir dilakukan maksimal [Waktu Pengerjaan] setelah acara."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 3: HAK DAN KEWAJIBAN PIHAK PERTAMA"}),t.jsx("p",{children:"Hak: Menerima pembayaran sesuai kesepakatan; Menggunakan hasil foto untuk promosi/portofolio dengan persetujuan PIHAK KEDUA. Kewajiban: Melaksanakan pekerjaan secara profesional; Menyerahkan hasil tepat waktu; Menjaga privasi PIHAK KEDUA."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 4: HAK DAN KEWAJIBAN PIHAK KEDUA"}),t.jsx("p",{children:"Hak: Menerima hasil pekerjaan sesuai paket; Meminta revisi minor jika ada kesalahan teknis. Kewajiban: Melakukan pembayaran sesuai jadwal; Memberikan informasi yang dibutuhkan; Menjamin akses kerja di lokasi."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 5: BIAYA DAN CARA PEMBAYARAN"}),t.jsxs("p",{children:["Total biaya jasa adalah sebesar [Total Biaya Paket]. Pembayaran dilakukan dengan sistem: Uang Muka (DP) sebesar 30-50% saat penandatanganan kontrak, dan pelunasan paling lambat H-3 sebelum Hari Pelaksanaan. Pembayaran ditransfer ke rekening: ",d.bankAccount,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 6: PEMBATALAN"}),t.jsx("p",{children:"Jika terjadi pembatalan oleh PIHAK KEDUA, maka Uang Muka (DP) yang telah dibayarkan tidak dapat dikembalikan (non-refundable). Ketentuan lebih lanjut diatur dalam Syarat & Ketentuan Umum."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 7: PENYELESAIAN SENGKETA"}),t.jsx("p",{children:"Segala sengketa yang timbul akan diselesaikan secara musyawarah. Apabila tidak tercapai, maka akan diselesaikan secara hukum di wilayah hukum yang disepakati."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 8: PENUTUP"}),t.jsx("p",{children:"Demikian surat perjanjian ini dibuat dalam 2 (dua) rangkap bermaterai cukup dan mempunyai kekuatan hukum yang sama, ditandatangani dengan penuh kesadaran oleh kedua belah pihak."})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-16",children:[t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK PERTAMA"}),t.jsx("div",{className:"h-28 my-1 flex flex-col items-center justify-center text-gray-400 text-xs",children:t.jsx("span",{className:"italic",children:"(Tanda Tangan & Nama)"})}),t.jsxs("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1",children:["(",d.authorizedSigner,")"]})]}),t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK KEDUA"}),t.jsx("div",{className:"h-28 border-b-2 border-dotted w-4/5 mx-auto my-1 flex items-center justify-center text-gray-400 text-xs italic",children:"(Tanda Tangan & Nama)"}),t.jsx("p",{children:"([Nama Klien])"})]})]}),t.jsx("p",{className:"text-center text-xs text-gray-500 mt-12 italic",children:"Ini adalah contoh. Kontrak asli akan disesuaikan dengan detail proyek dan paket yang Anda pilih."})]})};if(O)return t.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-public-surface rounded-2xl shadow-lg border border-public-border",children:[t.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Terima Kasih!"}),t.jsx("p",{className:"mt-4 text-public-text-primary",children:"Formulir pemesanan Anda telah berhasil kami terima. Tim kami akan segera menghubungi Anda untuk konfirmasi lebih lanjut."}),t.jsx("a",{href:"#",className:"mt-6 button-primary inline-block",children:"Kembali ke Beranda"})]})});const le=B*.3;return t.jsxs("div",{className:`template-wrapper template-${De} min-h-screen p-4 sm:p-6 lg:p-8 flex items-center justify-center`,children:[t.jsx("style",{children:`
                .template-wrapper { background-color: var(--public-bg); color: var(--public-text-primary); }
                .template-classic .form-container { max-width: 48rem; width: 100%; margin: auto; }
                .template-modern .form-container { max-width: 64rem; width: 100%; margin: auto; display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: start; }
                .template-gallery .form-container { max-width: 42rem; width: 100%; margin: auto; font-family: serif; }
                @media (max-width: 768px) { .template-modern .form-container { grid-template-columns: 1fr; } }
            `}),t.jsxs("div",{ref:Re,className:"form-container",children:[De==="modern"&&t.jsxs("div",{className:"p-4 sm:p-6 md:p-8 bg-public-surface rounded-2xl border border-public-border hidden md:block",children:[d.logoBase64?t.jsx("img",{src:d.logoBase64,alt:"logo",className:"h-12 mb-4"}):t.jsx("h2",{className:"text-2xl font-bold text-gradient",children:d.companyName}),t.jsx("p",{className:"text-public-text-secondary text-sm mt-4",children:d.bio})]}),t.jsxs("div",{className:"bg-public-surface p-4 sm:p-6 md:p-8 rounded-2xl shadow-lg border border-public-border",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gradient",children:d.companyName}),t.jsx("p",{className:"text-sm text-public-text-secondary mt-2",children:"Formulir Pemesanan Layanan"})]}),t.jsxs("form",{className:"space-y-4",onSubmit:he,children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-public-border pb-2",children:"Informasi Klien & Acara"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:w.clientName,onChange:ke,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Lengkap"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"phone",name:"phone",value:w.phone,onChange:ke,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"phone",className:"input-label",children:"Nomor Telepon (WhatsApp)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",id:"email",name:"email",value:w.email,onChange:ke,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"instagram",name:"instagram",value:w.instagram,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"instagram",className:"input-label",children:"Instagram"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"projectType",name:"projectType",value:w.projectType,onChange:ke,className:"input-field",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Pilih Jenis..."}),d.projectTypes.map(W=>t.jsx("option",{value:W,children:W},W))]}),t.jsx("label",{htmlFor:"projectType",className:"input-label",children:"Jenis Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"date",name:"date",value:w.date,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"date",className:"input-label",children:"Tanggal Acara"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:w.location,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Alamat Acara"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-public-border pb-2",children:"Detail Paket & Pembayaran"}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"packageId",name:"packageId",value:w.packageId,onChange:ke,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih paket..."}),a.map(W=>t.jsxs("option",{value:W.id,children:[W.name," - ",gs(W.price)]},W.id))]}),t.jsx("label",{htmlFor:"packageId",className:"input-label",children:"Paket"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 text-public-accent",children:"Add-On Lainnya (Opsional)"}),t.jsx("div",{className:"p-3 border border-public-border bg-public-bg rounded-lg max-h-32 overflow-y-auto space-y-2 mt-2",children:s.map(W=>t.jsxs("label",{className:"flex items-center justify-between p-2 rounded-md hover:bg-public-surface cursor-pointer",children:[t.jsx("span",{className:"text-sm text-public-text-primary",children:W.name}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-public-text-secondary",children:gs(W.price)}),t.jsx("input",{type:"checkbox",id:W.id,name:"addOns",checked:w.selectedAddOnIds.includes(W.id),onChange:ke})]})]},W.id))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"promoCode",name:"promoCode",value:w.promoCode,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"promoCode",className:"input-label",children:"Kode Promo (Opsional)"}),L.message&&t.jsx("p",{className:`text-xs mt-1 ${L.type==="success"?"text-green-500":"text-red-500"}`,children:L.message})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"transportCost",name:"transportCost",value:w.transportCost,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"transportCost",className:"input-label",children:"Fee Transport (Opsional)"})]}),t.jsxs("div",{className:"p-4 bg-public-bg rounded-lg space-y-3",children:[T>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-public-text-secondary",children:"Subtotal"}),t.jsx("span",{className:"text-public-text-primary",children:gs(E)})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsxs("span",{className:"text-public-text-secondary",children:["Diskon (",ue,")"]}),t.jsxs("span",{className:"text-green-500",children:["-",gs(T)]})]})]}),Number(w.transportCost)>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-public-text-secondary",children:"Fee Transport"}),t.jsx("span",{className:"text-public-text-primary",children:gs(Number(w.transportCost)||0)})]}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[t.jsx("span",{className:"text-public-text-secondary",children:"Total Biaya"}),t.jsx("span",{className:"text-public-text-primary",children:gs(B)})]}),t.jsx("hr",{className:"border-public-border"}),t.jsx("p",{className:"text-sm text-public-text-secondary",children:"Silakan transfer Uang Muka (DP) ke rekening berikut:"}),t.jsx("p",{className:"font-semibold text-public-text-primary text-center py-2 bg-public-surface rounded-md border border-public-border",children:d.bankAccount}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group !mt-2",children:[t.jsx("input",{type:"number",name:"dp",id:"dp",value:w.dp,onChange:ke,className:"input-field text-right",placeholder:" "}),t.jsx("label",{htmlFor:"dp",className:"input-label",children:"Jumlah DP Ditransfer"}),t.jsxs("p",{className:"text-xs text-public-text-secondary mt-1 text-right",children:["Saran DP (30%): ",gs(le)]})]}),t.jsxs("div",{className:"input-group !mt-2",children:[t.jsx("input",{type:"text",name:"dpPaymentRef",id:"dpPaymentRef",value:w.dpPaymentRef,onChange:ke,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"dpPaymentRef",className:"input-label",children:"No. Ref / 4 Digit Rek"})]})]}),t.jsxs("div",{className:"input-group !mt-2",children:[t.jsx("label",{htmlFor:"dpPaymentProof",className:"input-label !static !-top-4 text-public-accent",children:"Bukti Transfer DP (Opsional)"}),t.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-public-border px-6 py-10",children:t.jsxs("div",{className:"text-center",children:[t.jsx(m_,{className:"mx-auto h-12 w-12 text-public-text-secondary"}),t.jsxs("div",{className:"mt-4 flex text-sm leading-6 text-public-text-secondary",children:[t.jsxs("label",{htmlFor:"dpPaymentProof",className:"relative cursor-pointer rounded-md bg-public-surface font-semibold text-public-accent focus-within:outline-none focus-within:ring-2 focus-within:ring-public-accent focus-within:ring-offset-2 focus-within:ring-offset-public-bg hover:text-public-accent-hover",children:[t.jsx("span",{children:"Unggah file"}),t.jsx("input",{id:"dpPaymentProof",name:"dpPaymentProof",type:"file",className:"sr-only",onChange:G,accept:"image/png, image/jpeg, image/jpg, application/pdf"})]}),t.jsx("p",{className:"pl-1",children:"atau seret dan lepas"})]}),t.jsx("p",{className:"text-xs leading-5 text-public-text-secondary",children:"PNG, JPG, PDF hingga 10MB"})]})}),ne&&t.jsxs("div",{className:"mt-2 text-sm text-public-text-primary bg-public-bg p-2 rounded-md",children:["File terpilih: ",t.jsx("span",{className:"font-semibold",children:ne.name})]})]})]})]})]}),t.jsx("div",{className:"pt-6",children:t.jsx("button",{type:"submit",disabled:A,className:"w-full button-primary",children:A?"Mengirim...":"Kirim Formulir Pemesanan"})})]}),t.jsxs("div",{className:"mt-6 flex justify-center items-center gap-4",children:[t.jsx("button",{type:"button",onClick:()=>V(!0),className:"text-xs font-semibold text-public-accent hover:underline",children:"Lihat Syarat & Ketentuan Umum"}),t.jsx("span",{className:"text-public-text-secondary text-xs",children:"|"}),t.jsx("button",{type:"button",onClick:()=>Ce(!0),className:"text-xs font-semibold text-public-accent hover:underline",children:"Lihat Contoh Kontrak Kerja"})]})]})]}),t.jsx(nt,{isOpen:q,onClose:()=>V(!1),title:"Syarat & Ketentuan Umum",children:t.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-4",children:J?t.jsx("div",{children:J}):t.jsx("p",{className:"text-brand-text-secondary text-center py-8",children:"Syarat dan ketentuan belum diatur oleh vendor."})})}),t.jsx(nt,{isOpen:ce,onClose:()=>Ce(!1),title:"Contoh Kontrak Kerja",size:"3xl",children:Q()})]})},Aa=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),f_=n=>new Promise((e,a)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=r=>a(r)}),g_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t.jsx("polyline",{points:"17 8 12 3 7 8"}),t.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),x_=({addOn:n})=>t.jsxs("div",{className:"border-b border-public-border last:border-b-0 p-4 flex justify-between items-center",children:[t.jsx("p",{className:"font-semibold text-public-text-primary",children:n.name}),t.jsx("p",{className:"text-sm font-bold text-public-accent",children:Aa(n.price)})]}),Mg={clientName:"",email:"",phone:"",instagram:"",date:new Date().toISOString().split("T")[0],location:"",transportCost:"",selectedAddOnIds:[],promoCode:"",dp:"",dpPaymentRef:""},y_=({packages:n,addOns:e,userProfile:a,showNotification:s,setClients:r,setProjects:d,setTransactions:u,setCards:p,setLeads:h,addNotification:f,cards:g,promoCodes:y,setPromoCodes:v})=>{var At,wt,ft;const{publicPageConfig:k}=a;k.template;const[j,S]=C.useState({isOpen:!1,pkg:null}),[w,P]=C.useState(Mg),[A,R]=C.useState(null),[O,H]=C.useState(!1),[L,U]=C.useState(!1),[ne,ie]=C.useState({type:"",message:""}),[q,V]=C.useState(!1),[ce,Ce]=C.useState(!1),[Re,Ue]=C.useState(null),[re,De]=C.useState(null),J=Ne=>t.jsx("svg",{...Ne,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("polyline",{points:"6 9 12 15 18 9"})}),E=C.useMemo(()=>{const Ne={};for(const _e of n){const Je=_e.category||"Lainnya";Ne[Je]||(Ne[Je]=[]),Ne[Je].push(_e)}const Ve={};return a.packageCategories.forEach(_e=>{Ne[_e]&&(Ve[_e]=Ne[_e],delete Ne[_e])}),Object.keys(Ne).forEach(_e=>{Ve[_e]=Ne[_e]}),Ve},[n,a.packageCategories]),T={Pernikahan:"Paket lengkap untuk mengabadikan hari bahagia pernikahan Anda, dari akad hingga resepsi.",Lamaran:"Momen spesial lamaran Anda akan kami rekam dengan indah dan penuh makna.",Prewedding:"Sesi foto prewedding yang kreatif dan personal untuk menceritakan kisah cinta Anda.",Korporat:"Dokumentasi profesional untuk berbagai acara perusahaan, dari seminar hingga gathering.","Ulang Tahun":"Abadikan keceriaan pesta ulang tahun Anda atau orang terkasih dengan hasil yang tak terlupakan.",Produk:"Tingkatkan nilai jual produk Anda dengan foto komersial berkualitas tinggi.",Keluarga:"Rekam kehangatan dan momen berharga bersama keluarga Anda dalam sesi foto yang santai dan menyenangkan."},B=C.useMemo(()=>a.termsAndConditions?a.termsAndConditions.replace(/^(||||)\s/gm,"").split(/\n\s*\n/).map((Ve,_e)=>{const Je=Ve.split(`
`).filter(Ie=>Ie.trim()!=="");if(Je.length===0)return null;const dt=Je[0].match(/^\*\*(.*)\*\*$/),yt=dt?dt[1]:null,Dt=yt?Je.slice(1):Je,ze=Dt.map((Ie,M)=>{const de=Ie.trim().match(/^(\*|-)\s(.*)$/);return de?t.jsx("li",{children:de[2]},M):null}).filter(Boolean),ot=Dt.map((Ie,M)=>Ie.trim().match(/^(\*|-)\s(.*)$/)?null:t.jsx("p",{className:"text-public-text-secondary",children:Ie.trim()},M)).filter(Boolean);return t.jsxs("div",{className:"mb-2 last:mb-0",children:[yt&&t.jsx("h4",{className:"font-bold text-public-text-primary mb-2",children:yt}),ze.length>0&&t.jsx("ul",{className:"list-disc list-inside space-y-1",children:ze}),ot.length>0&&t.jsx("div",{className:"space-y-1",children:ot})]},_e)}):null,[a.termsAndConditions]),ue=()=>{const Ne=new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return t.jsxs("div",{className:"printable-content bg-white text-black p-8 font-serif leading-relaxed text-sm max-h-[70vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-center mb-1",children:"CONTOH SURAT PERJANJIAN KERJA SAMA"}),t.jsx("h3",{className:"text-lg font-bold text-center mb-6",children:"JASA FOTOGRAFI & VIDEOGRAFI"}),t.jsxs("p",{children:["Pada hari ini, ",Ne,", telah dibuat dan disepakati perjanjian kerja sama antara:"]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK PERTAMA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsxs("td",{children:[": ",a.authorizedSigner]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Jabatan"}),t.jsx("td",{children:": Pemilik Usaha"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsxs("td",{children:[": ",a.address]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsxs("td",{children:[": ",a.phone]})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama perusahaannya, ",a.companyName,", selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK PERTAMA"}),"."]})]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK KEDUA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsx("td",{children:": [Nama Klien]"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsx("td",{children:": [Alamat Klien]"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsx("td",{children:": [Nomor Telepon Klien]"})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama pribadi, selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK KEDUA"}),"."]})]}),t.jsx("p",{children:"Kedua belah pihak sepakat untuk mengikatkan diri dalam perjanjian ini dengan syarat dan ketentuan sebagai berikut:"}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 1: DEFINISI"}),t.jsx("p",{children:"Pekerjaan adalah jasa fotografi dan/atau videografi yang diberikan oleh PIHAK PERTAMA untuk acara PIHAK KEDUA. Hari Pelaksanaan adalah tanggal [Tanggal Acara]. Lokasi Pelaksanaan adalah [Lokasi Acara]."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 2: RUANG LINGKUP PEKERJAAN"}),t.jsx("p",{children:"PIHAK PERTAMA akan memberikan jasa sesuai dengan paket layanan yang dipilih oleh PIHAK KEDUA yang mencakup: Durasi pemotretan, Jumlah foto yang dijamin, Detail album cetak, Format file digital, dan item lainnya sesuai detail paket. PIHAK PERTAMA akan menyediakan jumlah personel yang sesuai. Penyerahan hasil akhir dilakukan maksimal [Waktu Pengerjaan] setelah acara."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 3: HAK DAN KEWAJIBAN PIHAK PERTAMA"}),t.jsx("p",{children:"Hak: Menerima pembayaran sesuai kesepakatan; Menggunakan hasil foto untuk promosi/portofolio dengan persetujuan PIHAK KEDUA. Kewajiban: Melaksanakan pekerjaan secara profesional; Menyerahkan hasil tepat waktu; Menjaga privasi PIHAK KEDUA."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 4: HAK DAN KEWAJIBAN PIHAK KEDUA"}),t.jsx("p",{children:"Hak: Menerima hasil pekerjaan sesuai paket; Meminta revisi minor jika ada kesalahan teknis. Kewajiban: Melakukan pembayaran sesuai jadwal; Memberikan informasi yang dibutuhkan; Menjamin akses kerja di lokasi."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 5: BIAYA DAN CARA PEMBAYARAN"}),t.jsxs("p",{children:["Total biaya jasa adalah sebesar [Total Biaya Paket]. Pembayaran dilakukan dengan sistem: Uang Muka (DP) sebesar 30-50% saat penandatanganan kontrak, dan pelunasan paling lambat H-3 sebelum Hari Pelaksanaan. Pembayaran ditransfer ke rekening: ",a.bankAccount,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 6: PEMBATALAN"}),t.jsx("p",{children:"Jika terjadi pembatalan oleh PIHAK KEDUA, maka Uang Muka (DP) yang telah dibayarkan tidak dapat dikembalikan (non-refundable). Ketentuan lebih lanjut diatur dalam Syarat & Ketentuan Umum."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 7: PENYELESAIAN SENGKETA"}),t.jsx("p",{children:"Segala sengketa yang timbul akan diselesaikan secara musyawarah. Apabila tidak tercapai, maka akan diselesaikan secara hukum di wilayah hukum yang disepakati."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 8: PENUTUP"}),t.jsx("p",{children:"Demikian surat perjanjian ini dibuat dalam 2 (dua) rangkap bermaterai cukup dan mempunyai kekuatan hukum yang sama, ditandatangani dengan penuh kesadaran oleh kedua belah pihak."})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-16",children:[t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK PERTAMA"}),t.jsx("div",{className:"h-28 my-1 flex flex-col items-center justify-center text-gray-400 text-xs",children:t.jsx("span",{className:"italic",children:"(Tanda Tangan & Nama)"})}),t.jsxs("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1",children:["(",a.authorizedSigner,")"]})]}),t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK KEDUA"}),t.jsx("div",{className:"h-28 border-b-2 border-dotted w-4/5 mx-auto my-1 flex items-center justify-center text-gray-400 text-xs italic",children:"(Tanda Tangan & Nama)"}),t.jsx("p",{children:"([Nama Klien])"})]})]}),t.jsx("p",{className:"text-center text-xs text-gray-500 mt-12 italic",children:"Ini adalah contoh. Kontrak asli akan disesuaikan dengan detail proyek dan paket yang Anda pilih."})]})},ke=C.useMemo(()=>{if(!j.pkg||!L)return"";const Ne=`Halo, saya ${w.clientName}, baru saja melakukan booking untuk paket "${j.pkg.name}". Mohon untuk diproses. Terima kasih.`;return`https://wa.me/${Wa(a.phone)}?text=${encodeURIComponent(Ne)}`},[L,w.clientName,j.pkg,a.phone]),{totalBeforeDiscount:G,discountAmount:he,totalProject:Q,discountText:le}=C.useMemo(()=>{if(!j.pkg)return{totalBeforeDiscount:0,discountAmount:0,totalProject:0,discountText:""};const Ne=j.pkg.price,Ve=e.filter(ze=>w.selectedAddOnIds.includes(ze.id)).reduce((ze,ot)=>ze+ot.price,0),_e=Number(w.transportCost)||0,Je=Ne+Ve;let st=0,dt="";const yt=w.promoCode.toUpperCase().trim();if(yt){const ze=y.find(ot=>ot.code===yt&&ot.isActive);if(ze){const ot=ze.expiryDate&&new Date(ze.expiryDate)<new Date,Ie=ze.maxUsage!=null&&ze.usageCount>=ze.maxUsage;!ot&&!Ie?(ze.discountType==="percentage"?(st=Je*ze.discountValue/100,dt=`${ze.discountValue}%`):(st=ze.discountValue,dt=Aa(ze.discountValue)),ie({type:"success",message:`Kode promo diterapkan! Diskon ${dt}.`})):ie({type:"error",message:"Kode promo tidak valid atau sudah habis."})}else ie({type:"error",message:"Kode promo tidak ditemukan."})}else ie({type:"",message:""});const Dt=Je-st+_e;return{totalBeforeDiscount:Je,discountAmount:st,totalProject:Dt,discountText:dt}},[w.selectedAddOnIds,w.promoCode,w.transportCost,j.pkg,e,y]),W=Ne=>{S({isOpen:!0,pkg:Ne}),U(!1),P(Mg),R(null),ie({type:"",message:""})},we=()=>{S({isOpen:!1,pkg:null})},Be=Ne=>{const{name:Ve,value:_e,type:Je}=Ne.target;if(Je==="checkbox"){const{id:st,checked:dt}=Ne.target;P(yt=>({...yt,selectedAddOnIds:dt?[...yt.selectedAddOnIds,st]:yt.selectedAddOnIds.filter(Dt=>Dt!==st)}))}else P(st=>({...st,[Ve]:_e}))},Ze=Ne=>{if(Ne.target.files&&Ne.target.files[0]){const Ve=Ne.target.files[0];if(Ve.size>10*1024*1024){alert("Ukuran file tidak boleh melebihi 10MB."),Ne.target.value="";return}R(Ve)}},Ke=async Ne=>{var M,de,z,F,K,te;if(Ne.preventDefault(),!j.pkg)return;H(!0);const Ve=Number(w.dp)||0,_e=g.find(X=>X.id!=="CARD_CASH")||g[0];if(Ve>0&&!_e){alert("Sistem pembayaran tidak dikonfigurasi. Hubungi vendor."),H(!1);return}let Je;if(he>0&&w.promoCode){const X=y.find(fe=>fe.code===w.promoCode.toUpperCase().trim());X&&(Je=X.id)}let st="";if(A)try{st=await f_(A)}catch(X){console.error("Error reading file:",X),alert("Gagal memproses file bukti transfer."),H(!1);return}const dt=e.filter(X=>w.selectedAddOnIds.includes(X.id)),yt=Number(w.transportCost)||0,ze={id:`CLI${Date.now()}`,name:w.clientName,email:w.email,phone:w.phone,instagram:w.instagram,since:new Date().toISOString().split("T")[0],status:Ot.ACTIVE,clientType:An.DIRECT,lastContact:new Date().toISOString(),portalAccessId:crypto.randomUUID()},ot={id:`PRJ${Date.now()}`,projectName:`Acara ${w.clientName} (${j.pkg.name})`,clientName:ze.name,clientId:ze.id,projectType:j.pkg.category,packageName:j.pkg.name,packageId:j.pkg.id,addOns:dt,date:w.date,location:w.location||"Akan dikonfirmasi",progress:0,status:"Dikonfirmasi",bookingStatus:sa.BARU,totalCost:Q,amountPaid:Ve,paymentStatus:Ve>=Q?_t.LUNAS:Ve>0?_t.DP_TERBAYAR:_t.BELUM_BAYAR,team:[],notes:`Booking dari halaman paket. Ref: ${w.dpPaymentRef}`,dpProofUrl:st||void 0,promoCodeId:Je,discountAmount:he>0?he:void 0,transportCost:yt>0?yt:void 0},Ie={id:`LEAD-PKG-${Date.now()}`,name:ze.name,contactChannel:Ft.WEBSITE,location:"Akan dikonfirmasi",status:Tt.CONVERTED,date:new Date().toISOString(),notes:`Dikonversi dari halaman paket. Proyek: ${ot.projectName}. Klien ID: ${ze.id}`};try{await gu({id:ze.id,name:ze.name,email:ze.email,phone:ze.phone,whatsapp:void 0,instagram:ze.instagram,client_type:"DIRECT",since:new Date().toISOString().split("T")[0],status:"ACTIVE",last_contact:new Date().toISOString(),portal_access_id:ze.portalAccessId}),await xu({id:ot.id,project_name:ot.projectName,client_id:ze.id,client_name:ze.name,project_type:((M=j.pkg)==null?void 0:M.category)||null,package_id:((de=j.pkg)==null?void 0:de.id)||null,package_name:((z=j.pkg)==null?void 0:z.name)||null,date:w.date||null,location:ot.location||null,progress:0,status:"Dikonfirmasi",booking_status:"BARU",total_cost:Q,amount_paid:Ve,payment_status:Ve>=Q?"LUNAS":Ve>0?"DP_TERBAYAR":"BELUM_BAYAR",notes:ot.notes||null,dp_proof_url:st||null,promo_code_id:Je,discount_amount:he>0?he:null,transport_cost:yt>0?yt:null,completed_digital_items:[]}),Ve>0&&_e&&await yu({id:`TRN-DP-${ot.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${ot.projectName}`,category:"DP Proyek",amount:Ve,type:"INCOME",method:"Transfer Bank",card_id:_e.id,pocket_id:null,project_id:ot.id}),await Ng({id:Ie.id,name:Ie.name,contact_channel:"Website",location:Ie.location,whatsapp:void 0,notes:Ie.notes,status:"Dikonversi",date:new Date().toISOString()}),Je&&await bu(Je)}catch(X){console.error("Supabase persistence failed:",X)}try{await gu({id:ze.id,name:ze.name,email:ze.email,phone:ze.phone,whatsapp:void 0,instagram:ze.instagram,client_type:"DIRECT",since:new Date().toISOString().split("T")[0],status:"ACTIVE",last_contact:new Date().toISOString(),portal_access_id:ze.portalAccessId}),await xu({id:ot.id,project_name:ot.projectName,client_id:ze.id,client_name:ze.name,project_type:((F=j.pkg)==null?void 0:F.category)||null,package_id:((K=j.pkg)==null?void 0:K.id)||null,package_name:((te=j.pkg)==null?void 0:te.name)||null,date:w.date||null,location:ot.location||null,progress:0,status:"Dikonfirmasi",booking_status:"BARU",total_cost:Q,amount_paid:Ve,payment_status:Ve>=Q?"LUNAS":Ve>0?"DP_TERBAYAR":"BELUM_BAYAR",notes:ot.notes||null,dp_proof_url:st||null,promo_code_id:Je,discount_amount:he>0?he:null,transport_cost:yt>0?yt:null,completed_digital_items:[]}),Ve>0&&_e&&await yu({id:`TRN-DP-${ot.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${ot.projectName}`,category:"DP Proyek",amount:Ve,type:"INCOME",method:"Transfer Bank",card_id:_e.id,pocket_id:null,project_id:ot.id}),await Ng({id:Ie.id,name:Ie.name,contact_channel:"Website",location:Ie.location,whatsapp:void 0,notes:Ie.notes,status:"Dikonversi",date:new Date().toISOString()}),Je&&await bu(Je)}catch(X){console.error("Supabase persistence error:",X)}if(r(X=>[ze,...X]),d(X=>[ot,...X]),h(X=>[Ie,...X]),Je&&v(X=>X.map(fe=>fe.id===Je?{...fe,usageCount:fe.usageCount+1}:fe)),Ve>0){const X={id:`TRN-DP-${ot.id}`,date:new Date().toISOString().split("T")[0],description:`DP Proyek ${ot.projectName}`,amount:Ve,type:$e.INCOME,projectId:ot.id,category:"DP Proyek",method:"Transfer Bank",cardId:_e.id};u(fe=>[...fe,X].sort((ye,_)=>new Date(_.date).getTime()-new Date(ye.date).getTime())),p(fe=>fe.map(ye=>ye.id===_e.id?{...ye,balance:ye.balance+Ve}:ye))}f({title:"Booking Baru Diterima!",message:`Booking dari ${ze.name} untuk paket "${j.pkg.name}" menunggu konfirmasi.`,icon:"lead",link:{view:Te.BOOKING}}),H(!1),U(!0)},Qe=Q*.3,gt=()=>t.jsxs("div",{className:"text-sm text-public-text-secondary space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-public-text-primary mb-2",children:"Wedding Timeline"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"Preview (Sampel) Foto  7 hari"}),t.jsx("li",{children:"Video Teaser 1 Menit  14 hari"}),t.jsx("li",{children:"Final Edit Foto  14 hari"}),t.jsx("li",{children:"Video 3-5 Menit  30 hari"}),t.jsx("li",{children:"Draft Layout Album  14 hari"}),t.jsx("li",{children:"Produksi Album + Box  60 hari"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-public-text-primary mb-2",children:"Prewedding / Couple Session Timeline"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"Sneak Peek (Foto Cepat)  7 hari"}),t.jsx("li",{children:"Video Teaser 1 Menit  14 hari"}),t.jsx("li",{children:"Final Edit Foto  14 hari"}),t.jsx("li",{children:"Cetak Foto Selesai  21 hari"})]})]})]});return t.jsxs("div",{className:"public-page-body min-h-screen",children:[t.jsxs("div",{className:"w-full max-w-7xl mx-auto py-12 px-4",children:[t.jsxs("header",{className:"text-center mb-12 md:mb-16 widget-animate",children:[a.logoBase64?t.jsx("img",{src:a.logoBase64,alt:"Company Logo",className:"h-20 mx-auto mb-4 object-contain"}):t.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gradient",children:a.companyName}),t.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-public-text-primary mt-4",children:k.title}),t.jsx("p",{className:"text-lg text-public-text-secondary mt-4 max-w-3xl mx-auto",children:k.introduction})]}),k.galleryImages&&k.galleryImages.length>0&&t.jsxs("section",{className:"mb-12 md:mb-16 widget-animate",style:{animationDelay:"100ms"},children:[t.jsx("div",{className:"text-center mb-8",children:t.jsx("h3",{className:"text-3xl font-bold text-public-text-primary",children:"Galeri Kami"})}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:k.galleryImages.map((Ne,Ve)=>t.jsx("div",{className:"aspect-square overflow-hidden rounded-lg shadow-md cursor-pointer group",onClick:()=>Ue(Ne),children:t.jsx("img",{src:Ne,alt:`Gallery image ${Ve+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"})},Ve))})]}),t.jsx("section",{className:"my-12 md:my-16 widget-animate",style:{animationDelay:"400ms"},children:t.jsxs("div",{className:"max-w-7xl mx-auto grid md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-public-surface rounded-2xl shadow-lg border border-public-border overflow-hidden transition-all duration-300",children:[t.jsxs("button",{onClick:()=>De(re==="workflow"?null:"workflow"),className:"w-full flex justify-between items-center p-6 text-left",children:[t.jsx("h3",{className:"text-xl font-bold text-public-text-primary",children:"Wedding Workflow"}),t.jsx(J,{className:`w-6 h-6 text-public-text-secondary transition-transform duration-300 ${re==="workflow"?"rotate-180":""}`})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${re==="workflow"?"max-h-[1000px]":"max-h-0"}`,children:t.jsx("div",{className:"px-6 pb-6",children:t.jsx("div",{className:"border-t border-public-border pt-4",children:t.jsx(gt,{})})})})]}),t.jsxs("div",{className:"bg-public-surface rounded-2xl shadow-lg border border-public-border overflow-hidden transition-all duration-300",children:[t.jsxs("button",{onClick:()=>De(re==="terms"?null:"terms"),className:"w-full flex justify-between items-center p-6 text-left",children:[t.jsx("h3",{className:"text-xl font-bold text-public-text-primary",children:"Syarat & Ketentuan"}),t.jsx(J,{className:`w-6 h-6 text-public-text-secondary transition-transform duration-300 ${re==="terms"?"rotate-180":""}`})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${re==="terms"?"max-h-[1000px]":"max-h-0"}`,children:t.jsx("div",{className:"px-6 pb-6",children:t.jsx("div",{className:"border-t border-public-border pt-4 text-sm text-public-text-secondary space-y-2",children:B})})})]})]})}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[t.jsx("section",{className:"lg:col-span-2 space-y-16",children:Object.entries(E).map(([Ne,Ve])=>t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:"text-3xl font-bold text-public-text-primary",children:Ne}),t.jsx("p",{className:"text-public-text-secondary mt-2 max-w-2xl",children:T[Ne]||`Berbagai pilihan paket untuk kebutuhan ${Ne.toLowerCase()} Anda.`})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Ve.map((_e,Je)=>t.jsxs("div",{className:"bg-public-surface rounded-2xl shadow-lg border border-public-border flex flex-col overflow-hidden transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl widget-animate",style:{animationDelay:`${200+Je*100}ms`},children:[_e.coverImage?t.jsx("img",{src:_e.coverImage,alt:_e.name,className:"w-full h-48 object-cover"}):t.jsx("div",{className:"w-full h-48 bg-public-bg flex items-center justify-center",children:t.jsx(qr,{className:"w-12 h-12 text-public-text-secondary"})}),t.jsxs("div",{className:"p-4 sm:p-6 flex flex-col flex-grow",children:[t.jsx("h4",{className:"text-xl font-bold text-gradient",children:_e.name}),t.jsx("p",{className:"text-3xl font-bold text-public-text-primary my-3",children:Aa(_e.price)}),t.jsxs("div",{className:"space-y-4 text-sm flex-grow",children:[(_e.photographers||_e.videographers)&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-public-text-primary mb-1",children:"Tim"}),t.jsxs("div",{className:"flex items-start gap-2 text-public-text-secondary",children:[t.jsx(fc,{className:"w-4 h-4 text-brand-success flex-shrink-0 mt-0.5"}),t.jsx("span",{children:[_e.photographers,_e.videographers].filter(Boolean).join(" & ")})]})]}),_e.physicalItems.length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-public-text-primary mb-1",children:"Output Fisik"}),t.jsx("div",{className:"space-y-1",children:_e.physicalItems.map((st,dt)=>t.jsxs("div",{className:"flex items-start gap-2 text-public-text-secondary",children:[t.jsx(fc,{className:"w-4 h-4 text-brand-success flex-shrink-0 mt-0.5"}),t.jsx("span",{children:st.name})]},dt))})]}),_e.digitalItems.length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-public-text-primary mb-1",children:"Output Digital"}),t.jsx("div",{className:"space-y-1",children:_e.digitalItems.map((st,dt)=>t.jsxs("div",{className:"flex items-start gap-2 text-public-text-secondary",children:[t.jsx(fc,{className:"w-4 h-4 text-brand-success flex-shrink-0 mt-0.5"}),t.jsx("span",{children:st})]},dt))})]})]}),t.jsx("div",{className:"mt-6 pt-4 border-t border-public-border",children:t.jsx("button",{onClick:()=>W(_e),className:"button-primary w-full text-center",children:"Booking Paket Ini"})})]})]},_e.id))})]},Ne))}),e.length>0&&t.jsx("aside",{className:"lg:col-span-1 lg:sticky lg:top-8 widget-animate",style:{animationDelay:"500ms"},children:t.jsxs("div",{className:"bg-public-surface rounded-2xl shadow-lg border border-public-border",children:[t.jsx("h3",{className:"text-xl font-bold text-public-text-primary p-6",children:"Tambahan Opsional"}),t.jsx("div",{className:"border-t border-public-border",children:e.map(Ne=>t.jsx(x_,{addOn:Ne},Ne.id))})]})})]}),t.jsxs("footer",{className:"text-center py-12 mt-16 border-t border-public-border widget-animate",style:{animationDelay:"600ms"},children:[t.jsx("h3",{className:"text-2xl font-bold text-gradient mb-2",children:"Tertarik Bekerja Sama?"}),t.jsx("p",{className:"text-public-text-secondary mb-6 max-w-lg mx-auto",children:"Hubungi kami untuk diskusi lebih lanjut atau langsung lakukan pemesanan melalui formulir kami."}),t.jsx("a",{href:`https://wa.me/${Wa(a.phone)}`,target:"_blank",rel:"noopener noreferrer",className:"button-primary",children:"Hubungi via WhatsApp"}),t.jsxs("p",{className:"text-xs text-public-text-secondary mt-12",children:[" ",new Date().getFullYear()," ",a.companyName,"."]})]})]}),t.jsx(nt,{isOpen:j.isOpen,onClose:we,title:`Booking: ${(At=j.pkg)==null?void 0:At.name}`,size:"4xl",children:L?t.jsxs("div",{className:"text-center p-8",children:[t.jsx("h3",{className:"text-2xl font-bold text-gradient",children:"Terima Kasih!"}),t.jsx("p",{className:"mt-4 text-public-text-primary",children:"Formulir booking Anda telah kami terima. Tim kami akan segera menghubungi Anda untuk konfirmasi."}),t.jsx("a",{href:ke,target:"_blank",rel:"noopener noreferrer",className:"mt-6 button-primary w-full max-w-xs mx-auto",children:"Konfirmasi ke Admin via WhatsApp"}),t.jsx("button",{onClick:we,className:"mt-4 button-secondary w-full max-w-xs mx-auto",children:"Tutup"})]}):t.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-public-border pb-2",children:"Informasi Anda & Acara"}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:w.clientName,onChange:Be,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Lengkap"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"email",id:"email",name:"email",value:w.email,onChange:Be,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"phone",name:"phone",value:w.phone,onChange:Be,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"phone",className:"input-label",children:"Nomor WhatsApp"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"instagram",name:"instagram",value:w.instagram,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"instagram",className:"input-label",children:"Instagram"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"date",name:"date",value:w.date,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"date",className:"input-label",children:"Tanggal Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"location",name:"location",value:w.location,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"location",className:"input-label",children:"Alamat Acara"})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-public-border pb-2 pt-4",children:"Paket & Pembayaran"}),t.jsxs("div",{className:"p-4 bg-public-bg rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsxs("span",{className:"text-public-text-secondary",children:["Paket: ",(wt=j.pkg)==null?void 0:wt.name]}),t.jsx("span",{className:"text-public-text-primary font-semibold",children:Aa(((ft=j.pkg)==null?void 0:ft.price)||0)})]}),w.selectedAddOnIds.length>0&&e.filter(Ne=>w.selectedAddOnIds.includes(Ne.id)).map(Ne=>t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsxs("span",{className:"text-public-text-secondary pl-4",children:["Add-on: ",Ne.name]}),t.jsx("span",{className:"text-public-text-primary font-semibold",children:Aa(Ne.price)})]},Ne.id)),Number(w.transportCost)>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-public-text-secondary",children:"Fee Transport"}),t.jsx("span",{className:"text-public-text-primary font-semibold",children:Aa(Number(w.transportCost)||0)})]}),he>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsxs("span",{className:"text-public-text-secondary",children:["Diskon (",le,")"]}),t.jsxs("span",{className:"text-green-500 font-semibold",children:["-",Aa(he)]})]}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg pt-2 border-t border-public-border",children:[t.jsx("span",{className:"text-public-text-secondary",children:"Total Biaya"}),t.jsx("span",{className:"text-public-text-primary",children:Aa(Q)})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-public-border pb-2",children:"Tambahan"}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{className:"input-label !static !-top-4 text-public-accent",children:"Add-On Lainnya (Opsional)"}),t.jsx("div",{className:"p-3 border border-public-border bg-public-bg rounded-lg max-h-32 overflow-y-auto space-y-2 mt-2",children:e.map(Ne=>t.jsxs("label",{className:"flex items-center justify-between p-2 rounded-md hover:bg-public-surface cursor-pointer",children:[t.jsx("span",{className:"text-sm text-public-text-primary",children:Ne.name}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-public-text-secondary",children:Aa(Ne.price)}),t.jsx("input",{type:"checkbox",id:Ne.id,name:"addOns",checked:w.selectedAddOnIds.includes(Ne.id),onChange:Be})]})]},Ne.id))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"promoCode",name:"promoCode",value:w.promoCode,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"promoCode",className:"input-label",children:"Kode Promo (Opsional)"}),ne.message&&t.jsx("p",{className:`text-xs mt-1 ${ne.type==="success"?"text-green-500":"text-red-500"}`,children:ne.message})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"transportCost",name:"transportCost",value:w.transportCost,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"transportCost",className:"input-label",children:"Fee Transport (Opsional)"})]}),t.jsxs("div",{className:"p-4 bg-public-bg rounded-lg",children:[t.jsx("p",{className:"text-sm text-public-text-secondary",children:"Silakan transfer Uang Muka (DP) ke rekening:"}),t.jsx("p",{className:"font-semibold text-public-text-primary text-center py-2 bg-public-surface rounded-md border border-public-border mt-2",children:a.bankAccount}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[t.jsxs("div",{className:"input-group !mt-0",children:[t.jsx("input",{type:"number",name:"dp",id:"dp",value:w.dp,onChange:Be,className:"input-field text-right",placeholder:" "}),t.jsx("label",{htmlFor:"dp",className:"input-label",children:"Jumlah DP"}),t.jsxs("p",{className:"text-xs text-public-text-secondary mt-1 text-right",children:["Saran DP (30%): ",Aa(Qe)]})]}),t.jsxs("div",{className:"input-group !mt-0",children:[t.jsx("input",{type:"text",name:"dpPaymentRef",id:"dpPaymentRef",value:w.dpPaymentRef,onChange:Be,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"dpPaymentRef",className:"input-label",children:"No. Ref / 4 Digit Rek"})]})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{htmlFor:"dpPaymentProof",className:"input-label !static !-top-4 text-public-accent",children:"Unggah Bukti Transfer DP"}),t.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-public-border px-6 py-10",children:t.jsxs("div",{className:"text-center",children:[t.jsx(g_,{className:"mx-auto h-12 w-12 text-public-text-secondary"}),t.jsxs("div",{className:"mt-4 flex text-sm leading-6 text-public-text-secondary",children:[t.jsxs("label",{htmlFor:"dpPaymentProof",className:"relative cursor-pointer rounded-md bg-public-surface font-semibold text-public-accent focus-within:outline-none hover:text-public-accent-hover",children:[t.jsx("span",{children:"Unggah file"}),t.jsx("input",{id:"dpPaymentProof",name:"dpPaymentProof",type:"file",className:"sr-only",onChange:Ze,accept:"image/png, image/jpeg, image/jpg, application/pdf"})]}),t.jsx("p",{className:"pl-1",children:"atau seret dan lepas"})]}),t.jsx("p",{className:"text-xs leading-5 text-public-text-secondary",children:"PNG, JPG, PDF hingga 10MB"})]})}),A&&t.jsxs("div",{className:"mt-2 text-sm text-public-text-primary bg-public-bg p-2 rounded-md",children:["File terpilih: ",t.jsx("span",{className:"font-semibold",children:A.name})]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-public-border",children:[t.jsx("button",{type:"button",onClick:we,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",disabled:O,className:"button-primary",children:O?"Mengirim...":"Kirim Booking"})]})]})}),t.jsx(nt,{isOpen:q,onClose:()=>V(!1),title:"Syarat & Ketentuan Umum",children:t.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-4",children:B?t.jsx("div",{children:B}):t.jsx("p",{className:"text-public-text-secondary text-center py-8",children:"Syarat dan ketentuan belum diatur oleh vendor."})})}),t.jsx(nt,{isOpen:ce,onClose:()=>Ce(!1),title:"Contoh Kontrak Kerja",size:"3xl",children:ue()}),Re&&t.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>Ue(null),children:t.jsx("img",{src:Re,alt:"Enlarged view",className:"max-w-full max-h-full object-contain rounded-lg"})})]})};async function b_(n){const{error:e}=await Ma.from("client_feedback").insert(n);if(e)throw e}const v_=n=>n>=5?Ct.VERY_SATISFIED:n>=4?Ct.SATISFIED:n>=3?Ct.NEUTRAL:Ct.UNSATISFIED,N_=({setClientFeedback:n})=>{const[e,a]=C.useState({clientName:"",rating:0,feedback:""}),[s,r]=C.useState(!1),[d,u]=C.useState(!1),p=g=>{const{name:y,value:v}=g.target;a(k=>({...k,[y]:v}))},h=g=>{a(y=>({...y,rating:g}))},f=async g=>{if(g.preventDefault(),e.rating===0){alert("Mohon berikan peringkat bintang.");return}r(!0);const y={id:crypto.randomUUID(),clientName:e.clientName,rating:e.rating,satisfaction:v_(e.rating),feedback:e.feedback,date:new Date().toISOString()};try{await b_({id:y.id,client_name:y.clientName,rating:y.rating,satisfaction:y.satisfaction,feedback:y.feedback,date:y.date})}catch(v){console.error("Supabase insert feedback failed:",v)}n(v=>[y,...v].sort((k,j)=>new Date(j.date).getTime()-new Date(k.date).getTime())),r(!1),u(!0)};return d?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Terima Kasih!"}),t.jsx("p",{className:"mt-4 text-brand-text-primary",children:"Saran dan masukan Anda sangat berharga bagi kami. Tim kami akan segera meninjaunya untuk menjadi lebih baik lagi."}),t.jsx("a",{href:"#",className:"mt-6 button-primary inline-block",children:"Kembali ke Beranda"})]})}):t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsx("div",{className:"w-full max-w-2xl mx-auto",children:t.jsxs("div",{className:"bg-brand-surface p-8 rounded-2xl shadow-lg border border-brand-border",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Formulir Masukan Klien"}),t.jsx("p",{className:"text-sm text-brand-text-secondary mt-2",children:"Kami sangat menghargai waktu Anda untuk memberikan masukan."})]}),t.jsxs("form",{className:"space-y-4",onSubmit:f,children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:e.clientName,onChange:p,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Anda"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsx("label",{className:"text-sm text-brand-text-secondary",children:"Peringkat Kepuasan Anda"}),t.jsx("div",{className:"flex items-center justify-center gap-4 mt-3",children:[1,2,3,4,5].map(g=>t.jsx("button",{type:"button",onClick:()=>h(g),className:`p-2 rounded-full transition-colors ${e.rating>=g?"bg-yellow-400/20":"bg-brand-input hover:bg-brand-input/70"}`,children:t.jsx(ia,{className:`w-8 h-8 ${e.rating>=g?"text-yellow-400 fill-current":"text-gray-500"}`})},g))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"feedback",name:"feedback",value:e.feedback,onChange:p,className:"input-field",placeholder:" ",required:!0,rows:5}),t.jsx("label",{htmlFor:"feedback",className:"input-label",children:"Saran & Masukan Anda"})]}),t.jsx("div",{className:"pt-6",children:t.jsx("button",{type:"submit",disabled:s,className:"w-full button-primary",children:s?"Mengirim...":"Kirim Masukan"})})]})]})})})},k_=({projects:n,teamMembers:e,onUpdateRevision:a})=>{const[s,r]=C.useState(null),[d,u]=C.useState(""),[p,h]=C.useState(!0),[f,g]=C.useState(!1),[y,v]=C.useState({freelancerNotes:"",driveLink:"",status:qt.IN_PROGRESS});C.useEffect(()=>{try{const P=window.location.hash,A=new URLSearchParams(P.substring(P.indexOf("?"))),R=A.get("projectId"),O=A.get("freelancerId"),H=A.get("revisionId");if(!R||!O||!H)throw new Error("Parameter URL tidak lengkap.");r({projectId:R,freelancerId:O,revisionId:H})}catch{u("Tautan revisi tidak valid atau rusak.")}finally{h(!1)}},[]);const{project:k,freelancer:j,revision:S}=C.useMemo(()=>{var O;if(!s)return{project:null,freelancer:null,revision:null};const P=n.find(H=>H.id===s.projectId),A=e.find(H=>H.id===s.freelancerId),R=(O=P==null?void 0:P.revisions)==null?void 0:O.find(H=>H.id===s.revisionId&&H.freelancerId===s.freelancerId);return{project:P,freelancer:A,revision:R}},[s,n,e]);if(C.useEffect(()=>{S&&v(P=>({...P,freelancerNotes:S.freelancerNotes||"",driveLink:S.driveLink||"",status:S.status===qt.PENDING?qt.IN_PROGRESS:S.status}))},[S]),p)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg",children:t.jsx("p",{children:"Memuat..."})});if(d||!k||!j||!S)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-brand-surface rounded-2xl shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-brand-danger",children:"Tautan Tidak Valid"}),t.jsx("p",{className:"mt-4 text-brand-text-primary",children:d||"Tugas revisi tidak ditemukan. Mohon periksa kembali tautan yang Anda terima."})]})});if(f)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-brand-surface rounded-2xl shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Terima Kasih!"}),t.jsxs("p",{className:"mt-4 text-brand-text-primary",children:["Pembaruan revisi Anda untuk proyek ",t.jsx("strong",{children:k.projectName})," telah berhasil dikirim."]})]})});const w=async P=>{P.preventDefault();try{const{upsertRevision:A}=await js(async()=>{const{upsertRevision:R}=await import("./revisions-UFBL70iF.js");return{upsertRevision:R}},[]);await A({id:S.id,project_id:k.id,freelancer_id:s.freelancerId,admin_notes:S.adminNotes,deadline:S.deadline,status:y.status,freelancer_notes:y.freelancerNotes,drive_link:y.driveLink,completed_date:y.status===qt.COMPLETED?new Date().toISOString():null})}catch(A){console.error("Supabase update revision failed:",A)}a(k.id,S.id,{freelancerNotes:y.freelancerNotes,driveLink:y.driveLink,status:y.status}),g(!0)};return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsx("div",{className:"w-full max-w-2xl mx-auto",children:t.jsxs("div",{className:"bg-brand-surface p-8 rounded-2xl shadow-lg border border-brand-border",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Formulir Update Revisi"}),t.jsxs("p",{className:"text-sm text-brand-text-secondary mt-2",children:["Untuk: ",j.name," / Proyek: ",k.projectName]})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsx("h4",{className:"text-base font-semibold text-brand-text-light",children:"Catatan Revisi dari Admin"}),t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"text-sm text-brand-text-primary whitespace-pre-wrap",children:S.adminNotes}),t.jsxs("p",{className:"text-right text-xs text-brand-text-secondary mt-3",children:["Deadline: ",t.jsx("strong",{children:new Date(S.deadline).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]})]})]}),t.jsxs("form",{className:"space-y-4",onSubmit:w,children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"status",name:"status",value:y.status,onChange:P=>v(A=>({...A,status:P.target.value})),className:"input-field",required:!0,children:[t.jsx("option",{value:qt.IN_PROGRESS,children:"Sedang Dikerjakan"}),t.jsx("option",{value:qt.COMPLETED,children:"Revisi Selesai"})]}),t.jsx("label",{htmlFor:"status",className:"input-label",children:"Update Status Revisi Anda"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"freelancerNotes",name:"freelancerNotes",value:y.freelancerNotes,onChange:P=>v(A=>({...A,freelancerNotes:P.target.value})),className:"input-field",placeholder:" ",rows:3}),t.jsx("label",{htmlFor:"freelancerNotes",className:"input-label",children:"Catatan dari Anda (Opsional)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"url",id:"driveLink",name:"driveLink",value:y.driveLink,onChange:P=>v(A=>({...A,driveLink:P.target.value})),className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"driveLink",className:"input-label",children:"Tautan Google Drive Hasil Revisi"})]}),t.jsx("div",{className:"pt-6",children:t.jsx("button",{type:"submit",className:"w-full button-primary",children:"Kirim Pembaruan"})})]})]})})})},j_=({setLeads:n,userProfile:e,showNotification:a,addNotification:s})=>{const[r,d]=C.useState({name:"",whatsapp:"",eventType:e.projectTypes[0]||"",eventDate:"",eventLocation:""}),[u,p]=C.useState(!1),[h,f]=C.useState(!1),g=e.publicPageConfig.template||"classic",y=j=>{const{name:S,value:w}=j.target;d(P=>({...P,[S]:w}))},v=async j=>{j.preventDefault(),p(!0);const S=`Jenis Acara: ${r.eventType}
Tanggal Acara: ${new Date(r.eventDate).toLocaleDateString("id-ID")}
Lokasi Acara: ${r.eventLocation}`,w={id:crypto.randomUUID(),name:r.name,whatsapp:r.whatsapp,contactChannel:Ft.WEBSITE,location:r.eventLocation,status:Tt.DISCUSSION,date:new Date().toISOString(),notes:S};try{const P={id:w.id,name:w.name,contact_channel:"Website",location:w.location,whatsapp:w.whatsapp,notes:w.notes,status:"Sedang Diskusi",date:new Date().toISOString()},{supabase:A}=await js(async()=>{const{supabase:O}=await Promise.resolve().then(()=>ey);return{supabase:O}},void 0),{error:R}=await A.from("leads").insert(P);if(R)throw R}catch(P){console.error("Supabase insert lead failed:",P)}n(P=>[w,...P]),s({title:"Prospek Baru Diterima!",message:`Prospek baru dari ${w.name} telah masuk melalui formulir web.`,icon:"lead",link:{view:Te.PROSPEK}}),p(!1),f(!0)},k=C.useMemo(()=>{if(h){const S=`Halo ${e.companyName}, saya ${r.name}, baru saja mengisi formulir prospek untuk acara ${r.eventType} pada tanggal ${new Date(r.eventDate).toLocaleDateString("id-ID")}.`;return`https://wa.me/${Wa(e.phone)}?text=${encodeURIComponent(S)}`}const j=`Halo ${e.companyName}, saya tertarik dengan layanan Anda dan ingin bertanya lebih lanjut.`;return`https://wa.me/${Wa(e.phone)}?text=${encodeURIComponent(j)}`},[h,r,e]);return h?t.jsx("div",{className:`template-wrapper template-${g} flex items-center justify-center min-h-screen p-4`,children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-public-surface rounded-2xl shadow-xl border border-public-border animate-fade-in",children:[t.jsx(Da,{className:"w-16 h-16 text-brand-success mx-auto mb-4"}),t.jsxs("h1",{className:"text-2xl font-bold text-gradient",children:["Terima Kasih, ",r.name.split(" ")[0],"!"]}),t.jsx("p",{className:"mt-4 text-public-text-primary",children:"Formulir Anda telah berhasil kami terima. Tim kami akan segera menghubungi Anda melalui WhatsApp untuk diskusi lebih lanjut."}),t.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"mt-6 button-primary inline-flex items-center gap-2",children:[t.jsx($r,{className:"w-5 h-5"}),"Konfirmasi & Lanjutkan via WhatsApp"]})]})}):t.jsxs("div",{className:`template-wrapper template-${g} flex items-center justify-center min-h-screen p-4`,children:[t.jsx("style",{children:`
                .template-wrapper { background-color: var(--public-bg); color: var(--public-text-primary); }
                .template-classic .form-container { max-width: 48rem; width: 100%; margin: auto; }
                .template-modern .form-container { max-width: 56rem; width: 100%; margin: auto; display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: center; }
                .template-gallery .form-container { max-width: 36rem; width: 100%; margin: auto; font-family: serif; }
                @media (max-width: 768px) { .template-modern .form-container { grid-template-columns: 1fr; } }
            `}),t.jsx("div",{className:"form-container",children:t.jsxs("div",{className:"bg-public-surface p-6 sm:p-8 md:p-10 rounded-2xl shadow-xl border border-public-border animate-fade-in",children:[t.jsxs("div",{className:"text-center mb-8",children:[e.logoBase64?t.jsx("img",{src:e.logoBase64,alt:"Company Logo",className:"h-16 mx-auto mb-4 object-contain"}):t.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gradient",children:e.companyName}),t.jsx("p",{className:"text-md text-public-text-secondary mt-4 max-w-md mx-auto",children:"Terima kasih atas ketertarikan Anda. Mohon isi detail di bawah ini agar kami dapat segera memberikan informasi ketersediaan dan pricelist."})]}),t.jsxs("form",{className:"space-y-8",onSubmit:v,children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-public-text-primary border-b border-public-border pb-3 mb-6",children:"1. Informasi Kontak Anda"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:y,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Lengkap"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"tel",id:"whatsapp",name:"whatsapp",value:r.whatsapp,onChange:y,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"whatsapp",className:"input-label",children:"Nomor WhatsApp"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-public-text-primary border-b border-public-border pb-3 mb-6",children:"2. Detail Acara Anda"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"eventType",name:"eventType",value:r.eventType,onChange:y,className:"input-field",required:!0,children:e.projectTypes.map(j=>t.jsx("option",{value:j,children:j},j))}),t.jsx("label",{htmlFor:"eventType",className:"input-label",children:"Jenis Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"eventDate",name:"eventDate",value:r.eventDate,onChange:y,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"eventDate",className:"input-label",children:"Tanggal Acara"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"eventLocation",name:"eventLocation",value:r.eventLocation,onChange:y,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"eventLocation",className:"input-label",children:"Lokasi (Kota)"})]})]})]}),t.jsx("div",{className:"pt-4 border-t border-public-border",children:t.jsxs("div",{className:"flex flex-col sm:flex-row-reverse gap-4",children:[t.jsx("button",{type:"submit",disabled:u,className:"button-primary w-full text-lg py-4",children:u?"Mengirim...":"Kirim & Dapatkan Info"}),t.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"button-secondary w-full text-lg py-4 inline-flex items-center justify-center gap-3",children:[t.jsx($r,{className:"w-6 h-6"}),"Hubungi Langsung"]})]})})]})]})})]})},w_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),t.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),t.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),C_=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"11",cy:"11",r:"8"}),t.jsx("line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"})]}),Rg=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),t.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),T_=n=>{const e=new Date,a=new Date(n),s=Math.floor((e.getTime()-a.getTime())/1e3),r=Math.floor(s/60);if(r<60)return`${r}m lalu`;const d=Math.floor(r/60);return d<24?`${d}j lalu`:`${Math.floor(d/24)}h lalu`},S_={lead:t.jsx(Gr,{className:"w-5 h-5 text-yellow-400"}),deadline:t.jsx(ks,{className:"w-5 h-5 text-orange-400"}),revision:t.jsx(Ur,{className:"w-5 h-5 text-purple-400"}),feedback:t.jsx(Js,{className:"w-5 h-5 text-blue-400"}),payment:t.jsx(on,{className:"w-5 h-5 text-red-400"}),completed:t.jsx(Ur,{className:"w-5 h-5 text-green-400"}),comment:t.jsx(Js,{className:"w-5 h-5 text-cyan-400"}),booking:t.jsx(Hs,{className:"w-5 h-5 text-teal-400"})},I_=({pageTitle:n,toggleSidebar:e,setIsSearchOpen:a,notifications:s,handleNavigation:r,handleMarkAllAsRead:d,currentUser:u,profile:p,handleLogout:h})=>{const[f,g]=C.useState(!1),[y,v]=C.useState(!1),k=C.useRef(null),j=C.useRef(null),S=s.filter(A=>!A.isRead).length;C.useEffect(()=>{const A=R=>{k.current&&!k.current.contains(R.target)&&g(!1),j.current&&!j.current.contains(R.target)&&v(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const w=A=>{A.link&&r(A.link.view,A.link.action,A.id),g(!1)},P=A=>A?A.split(" ").map(R=>R[0]).slice(0,2).join("").toUpperCase():"??";return t.jsx("div",{className:"flex-shrink-0",children:t.jsxs("header",{id:"app-header",className:`
                    bg-brand-surface 
                    flex items-center justify-between 
                    px-3 sm:px-4 md:px-6 lg:px-8 
                    border-b border-brand-border/50
                    sticky top-0 z-40
                    shadow-soft
                `,style:{paddingTop:"calc(0.75rem + var(--safe-area-inset-top, 0px))",height:"calc(4.5rem + var(--safe-area-inset-top, 0px))"},children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[t.jsx("button",{onClick:e,className:`
                            text-brand-text-secondary 
                            hover:text-brand-text-light 
                            active:text-brand-text-light
                            p-2 sm:p-2.5 
                            rounded-xl 
                            hover:bg-brand-input 
                            active:bg-brand-input/80
                            xl:hidden
                            min-w-[44px] min-h-[44px]
                            flex items-center justify-center
                            transition-all duration-200
                            focus:outline-none
                            focus:ring-2 focus:ring-brand-accent/20
                        `,"aria-label":"Toggle sidebar",children:t.jsx(w_,{className:"h-5 w-5 sm:h-6 sm:h-6"})}),t.jsx("h1",{className:`
                        text-lg xl:text-xl 
                        font-bold 
                        text-brand-text-light 
                        truncate
                        select-none
                    `,children:n})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsx("button",{onClick:()=>a(!0),className:`
                            p-2 sm:p-2.5 
                            text-brand-text-secondary 
                            hover:text-brand-text-light 
                            active:text-brand-text-light
                            rounded-xl 
                            hover:bg-brand-input 
                            active:bg-brand-input/80
                            min-w-[44px] min-h-[44px]
                            flex items-center justify-center
                            transition-all duration-200
                            focus:outline-none
                            focus:ring-2 focus:ring-brand-accent/20
                        `,"aria-label":"Buka pencarian global",children:t.jsx(C_,{className:"w-5 h-5"})}),t.jsxs("div",{className:"relative",ref:k,children:[t.jsxs("button",{onClick:()=>g(A=>!A),className:`
                                relative 
                                p-2 sm:p-2.5 
                                text-brand-text-secondary 
                                hover:text-brand-text-light 
                                active:text-brand-text-light
                                rounded-xl 
                                hover:bg-brand-input 
                                active:bg-brand-input/80
                                min-w-[44px] min-h-[44px]
                                flex items-center justify-center
                                transition-all duration-200
                                focus:outline-none
                                focus:ring-2 focus:ring-brand-accent/20
                            `,"aria-label":`Notifikasi${S>0?` (${S} baru)`:""}`,children:[t.jsx(Rg,{className:"w-5 h-5"}),S>0&&t.jsxs("span",{className:"absolute top-1 right-1 flex",children:[t.jsx("span",{className:`
                                        animate-ping absolute inline-flex 
                                        h-3 w-3 
                                        rounded-full 
                                        bg-red-400 
                                        opacity-75
                                    `}),t.jsx("span",{className:`
                                        relative inline-flex 
                                        rounded-full 
                                        h-3 w-3 
                                        bg-red-500
                                        border-2 border-brand-surface
                                        shadow-sm
                                    `})]})]}),f&&t.jsxs("div",{className:`
                                absolute top-full right-0 
                                mt-3 
                                w-80 sm:w-96 
                                bg-brand-surface 
                                rounded-2xl 
                                shadow-2xl 
                                border border-brand-border/50 
                                z-50 
                                animate-slide-down
                                max-h-96
                                flex flex-col
                                overflow-hidden
                            `,children:[t.jsxs("div",{className:`
                                    flex justify-between items-center 
                                    p-4 sm:p-5 
                                    border-b border-brand-border/50
                                    bg-brand-surface/90
                                    flex-shrink-0
                                `,children:[t.jsx("h4",{className:"font-semibold text-brand-text-light",children:"Notifikasi"}),S>0&&t.jsx("button",{onClick:d,className:`
                                                text-xs 
                                                font-semibold 
                                                text-brand-accent 
                                                hover:text-brand-accent-hover
                                                active:text-brand-accent-hover 
                                                px-3 py-1.5
                                                rounded-lg
                                                hover:bg-brand-accent/10
                                                active:bg-brand-accent/20
                                                transition-all duration-200
                                                min-h-[32px]
                                            `,children:"Tandai semua dibaca"})]}),t.jsx("div",{className:`
                                    max-h-80 
                                    overflow-y-auto 
                                    overscroll-contain
                                    flex-1
                                `,style:{WebkitOverflowScrolling:"touch"},children:s.length>0?s.map(A=>t.jsxs("div",{onClick:()=>w(A),className:`
                                                    flex items-start gap-3 sm:gap-4 
                                                    p-3 sm:p-4 
                                                    border-b border-brand-border/30 
                                                    last:border-b-0 
                                                    cursor-pointer 
                                                    transition-all duration-200
                                                    hover:bg-brand-input/50
                                                    active:bg-brand-input/80
                                                    min-h-[60px]
                                                    ${A.isRead?"":"bg-blue-500/5 border-l-4 border-l-blue-400"}
                                                `,children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:S_[A.icon]}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsx("p",{className:`
                                                        font-semibold 
                                                        text-sm 
                                                        text-brand-text-light
                                                        leading-tight
                                                        mb-1
                                                    `,children:A.title}),t.jsx("p",{className:`
                                                        text-xs 
                                                        text-brand-text-secondary
                                                        leading-relaxed
                                                        line-clamp-2
                                                    `,children:A.message})]}),t.jsxs("div",{className:`
                                                    flex-shrink-0 
                                                    text-right
                                                    flex flex-col items-end
                                                    gap-1
                                                `,children:[t.jsx("p",{className:`
                                                        text-xs 
                                                        text-brand-text-secondary
                                                        whitespace-nowrap
                                                    `,children:T_(A.timestamp)}),!A.isRead&&t.jsx("div",{className:`
                                                            w-2 h-2 
                                                            bg-brand-accent 
                                                            rounded-full 
                                                            shadow-sm
                                                        `})]})]},A.id)):t.jsxs("div",{className:`
                                            text-center 
                                            text-sm 
                                            text-brand-text-secondary 
                                            p-8
                                            flex flex-col items-center
                                            gap-3
                                        `,children:[t.jsx(Rg,{className:"w-8 h-8 opacity-50"}),t.jsx("p",{children:"Tidak ada notifikasi."})]})})]})]}),t.jsxs("div",{className:"relative",ref:j,children:[t.jsx("button",{onClick:()=>v(A=>!A),className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-brand-accent/20 to-brand-accent/10 flex items-center justify-center border-2 border-brand-accent/20 shadow-sm hover:ring-2 hover:ring-brand-accent/50 transition-all","aria-haspopup":"true","aria-expanded":y,children:t.jsx("span",{className:"font-bold text-sm text-brand-accent",children:P((u==null?void 0:u.fullName)||"")})}),y&&t.jsxs("div",{className:"absolute top-full right-0 mt-3 w-72 bg-brand-surface rounded-2xl shadow-2xl border border-brand-border/50 z-50 animate-slide-down overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-brand-border/50",children:[t.jsx("p",{className:"font-semibold text-brand-text-light truncate",children:u==null?void 0:u.fullName}),t.jsx("p",{className:"text-sm text-brand-text-secondary truncate",children:u==null?void 0:u.email})]}),t.jsx("div",{className:"p-2",children:t.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-brand-text-primary hover:bg-brand-input transition-colors",children:[t.jsx(cv,{className:"w-5 h-5 text-brand-text-secondary"}),t.jsx("span",{children:"Keluar"})]})})]})]})]}),t.jsx("style",{children:`
                    @keyframes slideDown {
                        from { 
                            opacity: 0; 
                            transform: translateY(-10px) scale(0.95); 
                        }
                        to { 
                            opacity: 1; 
                            transform: translateY(0) scale(1); 
                        }
                    }
                    
                    .animate-slide-down { 
                        animation: slideDown 0.2s ease-out forwards; 
                    }
                    
                    /* Text truncation utility */
                    .line-clamp-2 {
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                        overflow: hidden;
                    }
                    
                    /* Enhanced scrollbar for notifications */
                    .overflow-y-auto::-webkit-scrollbar {
                        width: 6px;
                    }
                    
                    .overflow-y-auto::-webkit-scrollbar-track {
                        background: transparent;
                    }
                    
                    .overflow-y-auto::-webkit-scrollbar-thumb {
                        background: var(--color-border);
                        border-radius: 3px;
                    }
                    
                    .overflow-y-auto::-webkit-scrollbar-thumb:hover {
                        background: var(--color-text-secondary);
                    }
                `})]})})},A_=({setLeads:n,addNotification:e})=>{const[a,s]=C.useState(""),[r,d]=C.useState(""),[u,p]=C.useState(""),[h,f]=C.useState(!1),[g,y]=C.useState(!1),v=j=>{j.preventDefault(),f(!0);const S={id:crypto.randomUUID(),name:a,contactChannel:Ft.SUGGESTION_FORM,location:"Form Online",status:Tt.DISCUSSION,date:new Date().toISOString().split("T")[0],notes:`Kontak: ${r}

Pesan:
${u}`};setTimeout(()=>{n(w=>[S,...w]),e({title:"Saran Baru Diterima",message:`Masukan baru dari ${a} telah diterima.`,icon:"lead",link:{view:Te.PROSPEK}}),f(!1),y(!0)},1e3)},k=()=>t.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#FFF27A"}),t.jsx("path",{d:"M15.44 26L12 19.6667L15.44 13.3333H22.32L25.76 19.6667L22.32 26H15.44ZM17.18 23.8333H20.58L22.32 20.5833L20.58 17.3333H17.18L15.44 20.5833L17.18 23.8333Z",fill:"#1E1E21"})]});return g?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-brand-surface rounded-2xl shadow-lg border border-gray-700/50",children:[t.jsx("h1",{className:"text-2xl font-bold text-brand-text-light",children:"Terima Kasih!"}),t.jsx("p",{className:"mt-4 text-brand-text-primary",children:"Saran dan masukan Anda telah berhasil kami terima. Tim kami akan segera meninjaunya."}),t.jsx("button",{onClick:()=>{y(!1),s(""),d(""),p("")},className:"mt-6 button-primary",children:"Kirim Masukan Lain"}),t.jsx("a",{href:"#",className:"mt-4 text-sm text-brand-text-secondary hover:underline block",children:"Kembali ke Beranda"})]})}):t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-brand-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 space-y-6 bg-brand-surface rounded-2xl shadow-lg border border-gray-700/50",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx(k,{})}),t.jsx("h1",{className:"text-2xl font-bold text-brand-text-light",children:"Formulir Saran & Masukan"}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Punya ide atau pertanyaan untuk Vena Pictures? Kami ingin mendengarnya dari Anda!"})]}),t.jsxs("form",{className:"space-y-4",onSubmit:v,children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"input-field",placeholder:" ",value:a,onChange:j=>s(j.target.value)}),t.jsx("label",{htmlFor:"name",className:"input-label",children:"Nama Anda"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{id:"contact",name:"contact",type:"text",required:!0,className:"input-field",placeholder:" ",value:r,onChange:j=>d(j.target.value)}),t.jsx("label",{htmlFor:"contact",className:"input-label",children:"Kontak (Email / No. WhatsApp)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"message",name:"message",rows:5,required:!0,className:"input-field",placeholder:" ",value:u,onChange:j=>p(j.target.value)}),t.jsx("label",{htmlFor:"message",className:"input-label",children:"Pesan atau Saran Anda"})]}),t.jsx("div",{className:"pt-2",children:t.jsx("button",{type:"submit",disabled:h,className:"w-full button-primary",children:h?"Mengirim...":"Kirim Masukan"})})]})]})})},Lg=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Fg=({rating:n})=>t.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>t.jsx(ia,{className:`w-5 h-5 ${e<=n?"text-yellow-400 fill-current":"text-gray-600"}`},e))}),Ug={clientName:"",rating:5,feedback:""},E_=({clients:n,leads:e,projects:a,feedback:s,setFeedback:r,showNotification:d})=>{const[u,p]=C.useState(!1),[h,f]=C.useState(!1),[g,y]=C.useState(Ug),[v,k]=C.useState(null),[j,S]=C.useState(""),[w,P]=C.useState(""),A=C.useMemo(()=>{if(!j&&!w)return e;const E=j?new Date(j):null,T=w?new Date(w):null;return E&&E.setHours(0,0,0,0),T&&T.setHours(23,59,59,999),e.filter(B=>{const ue=new Date(B.date);return(!E||ue>=E)&&(!T||ue<=T)})},[e,j,w]),R=C.useMemo(()=>{if(!j&&!w)return n;const E=j?new Date(j):null,T=w?new Date(w):null;return E&&E.setHours(0,0,0,0),T&&T.setHours(23,59,59,999),n.filter(B=>{const ue=new Date(B.since);return(!E||ue>=E)&&(!T||ue<=T)})},[n,j,w]),O=C.useMemo(()=>{if(!j&&!w)return a;const E=j?new Date(j):null,T=w?new Date(w):null;return E&&E.setHours(0,0,0,0),T&&T.setHours(23,59,59,999),a.filter(B=>{const ue=new Date(B.date);return(!E||ue>=E)&&(!T||ue<=T)})},[a,j,w]),H=C.useMemo(()=>{if(!j&&!w)return s;const E=j?new Date(j):null,T=w?new Date(w):null;return E&&E.setHours(0,0,0,0),T&&T.setHours(23,59,59,999),s.filter(B=>{const ue=new Date(B.date);return(!E||ue>=E)&&(!T||ue<=T)})},[s,j,w]),L=C.useMemo(()=>{const E=A.length,T=R.length,B=E>0?T/E*100:0,ue=O.reduce((le,W)=>le+W.totalCost,0),ke=T>0?ue/T:0,G=A.reduce((le,W)=>(le[W.contactChannel]=(le[W.contactChannel]||0)+1,le),{}),he={[Ft.INSTAGRAM]:"#c13584",[Ft.WHATSAPP]:"#25D366",[Ft.WEBSITE]:"#3b82f6",[Ft.REFERRAL]:"#f59e0b",[Ft.PHONE]:"#8b5cf6",[Ft.SUGGESTION_FORM]:"#14b8a6",[Ft.OTHER]:"#64748b"},Q=Object.entries(G).sort(([,le],[,W])=>Number(W)-Number(le)).map(([le,W])=>({label:le,value:W,color:he[le]||"#64748b"}));return{totalClients:R.length,activeClients:R.filter(le=>le.status===Ot.ACTIVE).length,conversionRate:B.toFixed(1)+"%",avgRevenuePerClient:Lg(ke),leadSourceDonutData:Q}},[R,A,O]),U=C.useMemo(()=>H.reduce((E,T)=>(E[T.satisfaction]||(E[T.satisfaction]=[]),E[T.satisfaction].push(T),E),{}),[H]),ne=C.useMemo(()=>({[Ct.VERY_SATISFIED]:(U[Ct.VERY_SATISFIED]||[]).length,[Ct.SATISFIED]:(U[Ct.SATISFIED]||[]).length,[Ct.NEUTRAL]:(U[Ct.NEUTRAL]||[]).length,[Ct.UNSATISFIED]:(U[Ct.UNSATISFIED]||[]).length}),[U]),ie=C.useMemo(()=>{const E=[];return ne[Ct.UNSATISFIED]>0&&E.push({id:"follow-up",icon:t.jsx(kh,{className:"w-6 h-6 text-red-400"}),title:"Tindak Lanjuti Umpan Balik Negatif",text:`Ada ${ne[Ct.UNSATISFIED]} klien yang tidak puas. Segera hubungi mereka untuk memahami masalah dan menawarkan solusi.`}),ne[Ct.VERY_SATISFIED]>2&&E.push({id:"testimonials",icon:t.jsx(vh,{className:"w-6 h-6 text-green-400"}),title:"Manfaatkan Testimoni Positif",text:"Anda memiliki banyak ulasan 'Sangat Puas'. Minta izin kepada klien tersebut untuk menjadikan masukan mereka sebagai testimoni di media sosial atau website Anda."}),ne[Ct.NEUTRAL]>0&&E.push({id:"analyze",icon:t.jsx(Nh,{className:"w-6 h-6 text-yellow-400"}),title:"Analisis Umpan Balik Netral",text:"Pelajari masukan dari klien yang merasa biasa saja untuk menemukan area-area kecil yang bisa ditingkatkan untuk pengalaman yang lebih baik."}),E},[ne]),q=E=>{switch(E){case Ct.VERY_SATISFIED:return"bg-green-500/20 text-green-400";case Ct.SATISFIED:return"bg-sky-500/20 text-sky-400";case Ct.NEUTRAL:return"bg-yellow-500/20 text-yellow-400";case Ct.UNSATISFIED:return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},V=C.useMemo(()=>`${window.location.origin}${window.location.pathname}#/feedback`,[]),ce=()=>{navigator.clipboard.writeText(V).then(()=>{d("Tautan berhasil disalin!"),f(!1)},E=>{console.error("Could not copy text: ",E),alert("Gagal menyalin tautan.")})},Ce=E=>{const{name:T,value:B}=E.target;y(ue=>({...ue,[T]:T==="rating"?Number(B):B}))},Re=E=>E>=5?Ct.VERY_SATISFIED:E>=4?Ct.SATISFIED:E>=3?Ct.NEUTRAL:Ct.UNSATISFIED,Ue=E=>{E.preventDefault();const T={id:crypto.randomUUID(),date:new Date().toISOString(),clientName:g.clientName,rating:g.rating,satisfaction:Re(g.rating),feedback:g.feedback};r(B=>[T,...B].sort((ue,ke)=>new Date(ke.date).getTime()-new Date(ue.date).getTime())),p(!1),y(Ug),d("Masukan berhasil ditambahkan.")},re=C.useMemo(()=>R.filter(E=>E.status===Ot.ACTIVE),[R]),De={total:"Daftar Semua Klien",active:"Daftar Klien Aktif","very-satisfied":"Masukan: Sangat Puas",satisfied:"Masukan: Puas",neutral:"Masukan: Biasa Saja",unsatisfied:"Masukan: Tidak Puas"};let J;if(v)if(v==="total"||v==="active"){const E=v==="total"?R:re;J=t.jsx("div",{className:"space-y-3",children:E.length>0?E.map(T=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:T.name}),t.jsx("p",{className:"text-sm text-brand-text-secondary",children:T.email})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.status===Ot.ACTIVE?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:T.status})]},T.id)):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada klien dalam periode ini."})})}else{let E;v==="very-satisfied"&&(E=Ct.VERY_SATISFIED),v==="satisfied"&&(E=Ct.SATISFIED),v==="neutral"&&(E=Ct.NEUTRAL),v==="unsatisfied"&&(E=Ct.UNSATISFIED);const T=E?U[E]||[]:[];J=t.jsx("div",{className:"space-y-3",children:T.length>0?T.map(B=>t.jsxs("div",{className:"p-3 bg-brand-bg rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:B.clientName}),t.jsx(Fg,{rating:B.rating})]}),t.jsxs("p",{className:"text-sm text-brand-text-primary italic",children:['"',B.feedback,'"']})]},B.id)):t.jsx("p",{className:"text-center text-brand-text-secondary py-8",children:"Tidak ada masukan dalam kategori ini."})})}return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Laporan Klien",subtitle:"Analisis terpusat untuk performa akuisisi dan retensi klien Anda."}),t.jsxs("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:[t.jsx("div",{className:"text-sm font-semibold text-brand-text-secondary whitespace-nowrap",children:"Filter Laporan Berdasarkan Tanggal"}),t.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[t.jsx("input",{type:"date",value:j,onChange:E=>S(E.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsx("span",{className:"text-brand-text-secondary",children:"-"}),t.jsx("input",{type:"date",value:w,onChange:E=>P(E.target.value),className:"input-field !rounded-lg !border !bg-brand-bg p-2.5 w-full"}),t.jsx("button",{onClick:()=>{S(""),P("")},className:"button-secondary",children:"Reset"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"100ms"},onClick:()=>k("total"),children:t.jsx(qe,{icon:t.jsx(_n,{className:"w-6 h-6"}),title:"Total Klien",value:L.totalClients.toString(),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"})}),t.jsx("div",{className:"widget-animate cursor-pointer transition-transform duration-200 hover:scale-105",style:{animationDelay:"200ms"},onClick:()=>k("active"),children:t.jsx(qe,{icon:t.jsx(vs,{className:"w-6 h-6"}),title:"Klien Aktif",value:L.activeClients.toString(),iconBgColor:"bg-green-500/20",iconColor:"text-green-400"})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"300ms"},children:t.jsx(qe,{icon:t.jsx(qs,{className:"w-6 h-6"}),title:"Tingkat Konversi Prospek",value:L.conversionRate,iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"400ms"},children:t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Rata-rata Nilai per Klien",value:L.avgRevenuePerClient,iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 widget-animate",style:{animationDelay:"500ms"},children:[t.jsxs("div",{className:"lg:col-span-2 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Sumber Prospek"}),t.jsx(Ja,{data:L.leadSourceDonutData})]}),t.jsxs("div",{className:"lg:col-span-3 bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient mb-4",children:"Daftar Klien Terbaru"}),t.jsx("div",{className:"overflow-x-auto max-h-96",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-brand-input",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left font-semibold text-brand-text-secondary",children:"Klien"}),t.jsx("th",{className:"p-3 text-left font-semibold text-brand-text-secondary",children:"Bergabung Sejak"}),t.jsx("th",{className:"p-3 text-left font-semibold text-brand-text-secondary",children:"Total Nilai Proyek"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:R.slice(0,10).map(E=>{const B=a.filter(ue=>ue.clientId===E.id).reduce((ue,ke)=>ue+ke.totalCost,0);return t.jsxs("tr",{children:[t.jsx("td",{className:"p-3 font-medium text-brand-text-primary",children:E.name}),t.jsx("td",{className:"p-3 text-brand-text-secondary",children:new Date(E.since).toLocaleDateString("id-ID")}),t.jsx("td",{className:"p-3 font-semibold text-brand-text-primary",children:Lg(B)})]},E.id)})})]})})]})]}),t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border widget-animate",style:{animationDelay:"600ms"},children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-4 gap-4",children:[t.jsx("h4",{className:"text-lg font-bold text-gradient",children:"Analisis Kepuasan Klien"}),t.jsxs("div",{className:"flex items-center gap-2 self-start md:self-center",children:[t.jsxs("button",{onClick:()=>f(!0),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Fn,{className:"w-4 h-4"})," Bagikan Form"]}),t.jsxs("button",{onClick:()=>p(!0),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-4 h-4"})," Tambah Masukan"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",onClick:()=>k("very-satisfied"),children:t.jsx(qe,{icon:t.jsx(vh,{className:"w-6 h-6"}),title:"Sangat Puas",value:ne[Ct.VERY_SATISFIED].toString(),iconBgColor:"bg-green-500/20",iconColor:"text-green-400"})}),t.jsx("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",onClick:()=>k("satisfied"),children:t.jsx(qe,{icon:t.jsx(yv,{className:"w-6 h-6"}),title:"Puas",value:ne[Ct.SATISFIED].toString(),iconBgColor:"bg-sky-500/20",iconColor:"text-sky-400"})}),t.jsx("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",onClick:()=>k("neutral"),children:t.jsx(qe,{icon:t.jsx(Nh,{className:"w-6 h-6"}),title:"Biasa Saja",value:ne[Ct.NEUTRAL].toString(),iconBgColor:"bg-yellow-500/20",iconColor:"text-yellow-400"})}),t.jsx("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",onClick:()=>k("unsatisfied"),children:t.jsx(qe,{icon:t.jsx(kh,{className:"w-6 h-6"}),title:"Tidak Puas",value:ne[Ct.UNSATISFIED].toString(),iconBgColor:"bg-red-500/20",iconColor:"text-red-400"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-6 pt-6 border-t border-brand-border",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsx("h5",{className:"font-semibold text-brand-text-light mb-3",children:"Rekomendasi Aksi"}),t.jsx("div",{className:"space-y-3",children:ie.length>0?ie.map(E=>t.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg flex items-start gap-4",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:E.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-brand-text-light text-sm",children:E.title}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:E.text})]})]},E.id)):t.jsx("p",{className:"text-sm text-center text-brand-text-secondary py-8",children:"Tidak ada rekomendasi khusus saat ini."})})]}),t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx("h5",{className:"font-semibold text-brand-text-light mb-3",children:"Detail Masukan Terbaru"}),t.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:[H.map(E=>t.jsxs("div",{className:"bg-brand-bg p-4 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:E.clientName}),t.jsx("span",{className:`mt-1 inline-block px-2 py-0.5 text-xs font-medium rounded-full ${q(E.satisfaction)}`,children:E.satisfaction})]}),t.jsx(Fg,{rating:E.rating})]}),t.jsxs("p",{className:"text-sm text-brand-text-primary mt-3 pt-3 border-t border-brand-border",children:['"',E.feedback,'"']}),t.jsx("p",{className:"text-right text-xs text-brand-text-secondary mt-2",children:new Date(E.date).toLocaleDateString("id-ID")})]},E.id)),H.length===0&&t.jsx("p",{className:"text-center text-brand-text-secondary py-10",children:"Belum ada masukan dari klien pada periode ini."})]})]})]})]}),t.jsx(nt,{isOpen:u,onClose:()=>p(!1),title:"Tambah Masukan Klien Manual",children:t.jsxs("form",{onSubmit:Ue,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"clientName",name:"clientName",value:g.clientName,onChange:Ce,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"clientName",className:"input-label",children:"Nama Klien"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-brand-text-secondary",children:"Rating"}),t.jsx("div",{className:"flex items-center gap-2 mt-2",children:[1,2,3,4,5].map(E=>t.jsx("button",{type:"button",onClick:()=>y(T=>({...T,rating:E})),className:`p-2 rounded-full ${g.rating>=E?"bg-yellow-400/20":"bg-brand-input"}`,children:t.jsx(ia,{className:`w-6 h-6 ${g.rating>=E?"text-yellow-400 fill-current":"text-gray-500"}`})},E))})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"feedback",name:"feedback",value:g.feedback,onChange:Ce,className:"input-field",placeholder:" ",required:!0,rows:4}),t.jsx("label",{htmlFor:"feedback",className:"input-label",children:"Saran / Masukan"})]}),t.jsxs("div",{className:"flex justify-end items-center gap-3 pt-4 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:()=>p(!1),className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:"Simpan Masukan"})]})]})}),t.jsx(nt,{isOpen:h,onClose:()=>f(!1),title:"Bagikan Formulir Masukan Klien",size:"lg",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-brand-text-secondary mb-4",children:"Bagikan tautan ini kepada klien Anda setelah proyek selesai. Mereka dapat memberikan peringkat dan masukan yang akan langsung tampil di dasbor ini."}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",readOnly:!0,value:V,className:"input-field !bg-brand-input"}),t.jsx("label",{className:"input-label",children:"Tautan Formulir Masukan"})]}),t.jsx("div",{className:"text-right mt-6",children:t.jsx("button",{onClick:ce,className:"button-primary",children:"Salin Tautan"})})]})}),t.jsx(nt,{isOpen:!!v,onClose:()=>k(null),title:v?De[v]:"",size:"2xl",children:t.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:J})})]})},__=n=>t.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"11",cy:"11",r:"8"}),t.jsx("line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"})]}),P_=({isOpen:n,onClose:e,clients:a,projects:s,teamMembers:r,handleNavigation:d})=>{const[u,p]=C.useState(""),h=C.useRef(null);C.useEffect(()=>{n&&(p(""),setTimeout(()=>{var j;return(j=h.current)==null?void 0:j.focus()},100))},[n]);const f=C.useMemo(()=>{if(!u.trim())return{clients:[],projects:[],teamMembers:[]};const j=u.toLowerCase();return{clients:a.filter(S=>S.name.toLowerCase().includes(j)||S.email.toLowerCase().includes(j)),projects:s.filter(S=>S.projectName.toLowerCase().includes(j)||S.clientName.toLowerCase().includes(j)),teamMembers:r.filter(S=>S.name.toLowerCase().includes(j)||S.role.toLowerCase().includes(j))}},[u,a,s,r]),g=j=>{d(Te.CLIENTS,{type:"VIEW_CLIENT_DETAILS",id:j.id})},y=j=>{d(Te.PROJECTS,{type:"VIEW_PROJECT_DETAILS",id:j.id})},v=j=>{d(Te.TEAM,{type:"VIEW_FREELANCER_DETAILS",id:j.id})},k=f.clients.length>0||f.projects.length>0||f.teamMembers.length>0;return t.jsx(nt,{isOpen:n,onClose:e,title:"Pencarian Global",size:"2xl",children:t.jsxs("div",{className:"flex flex-col h-[60vh]",children:[t.jsxs("div",{className:"input-group mb-4",children:[t.jsx(__,{className:"absolute left-0 top-2.5 w-5 h-5 text-brand-text-secondary pointer-events-none"}),t.jsx("input",{ref:h,type:"search",id:"globalSearch",value:u,onChange:j=>p(j.target.value),placeholder:" ",className:"input-field !pl-8"}),t.jsx("label",{htmlFor:"globalSearch",className:"input-label !pl-8",children:"Cari klien, proyek, atau freelancer..."})]}),u.trim()?t.jsx("div",{className:"overflow-y-auto flex-grow pr-2",children:k?t.jsxs("div",{className:"space-y-6",children:[f.clients.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-brand-text-secondary uppercase tracking-wider mb-2",children:"Klien"}),t.jsx("div",{className:"space-y-1",children:f.clients.map(j=>t.jsxs("button",{onClick:()=>g(j),className:"w-full text-left p-3 rounded-lg hover:bg-brand-bg flex items-center gap-3 transition-colors",children:[t.jsx(_n,{className:"w-5 h-5 text-brand-text-secondary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:j.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:j.email})]})]},j.id))})]}),f.projects.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-brand-text-secondary uppercase tracking-wider mb-2",children:"Proyek"}),t.jsx("div",{className:"space-y-1",children:f.projects.map(j=>t.jsxs("button",{onClick:()=>y(j),className:"w-full text-left p-3 rounded-lg hover:bg-brand-bg flex items-center gap-3 transition-colors",children:[t.jsx(ka,{className:"w-5 h-5 text-brand-text-secondary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:j.projectName}),t.jsxs("p",{className:"text-xs text-brand-text-secondary",children:["Klien: ",j.clientName]})]})]},j.id))})]}),f.teamMembers.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-brand-text-secondary uppercase tracking-wider mb-2",children:"Freelancer"}),t.jsx("div",{className:"space-y-1",children:f.teamMembers.map(j=>t.jsxs("button",{onClick:()=>v(j),className:"w-full text-left p-3 rounded-lg hover:bg-brand-bg flex items-center gap-3 transition-colors",children:[t.jsx(Kr,{className:"w-5 h-5 text-brand-text-secondary"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:j.name}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:j.role})]})]},j.id))})]})]}):t.jsx("div",{className:"text-center py-16 text-brand-text-secondary",children:t.jsxs("p",{children:['Tidak ada hasil yang ditemukan untuk "',u,'".']})})}):t.jsx("div",{className:"text-center py-16 text-brand-text-secondary",children:t.jsx("p",{children:"Mulai ketik untuk mencari di seluruh aplikasi."})})]})})},hl=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Ka=n=>n?new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"[Tanggal belum diisi]",Lc={signingDate:new Date().toISOString().split("T")[0],signingLocation:"",clientName1:"",clientAddress1:"",clientPhone1:"",clientName2:"",clientAddress2:"",clientPhone2:"",shootingDuration:"",guaranteedPhotos:"",albumDetails:"",digitalFilesFormat:"JPG High-Resolution",otherItems:"",personnelCount:"",deliveryTimeframe:"30 hari kerja",dpDate:"",finalPaymentDate:"",cancellationPolicy:`DP yang sudah dibayarkan tidak dapat dikembalikan.
Jika pembatalan dilakukan H-7 sebelum hari pelaksanaan, PIHAK KEDUA wajib membayar 50% dari total biaya.`,jurisdiction:""},D_=n=>n.vendorSignature&&n.clientSignature?{text:"Lengkap",color:"bg-green-500/20 text-green-400",icon:t.jsx(Ur,{className:"w-4 h-4 text-green-500"})}:n.vendorSignature&&!n.clientSignature?{text:"Menunggu TTD Klien",color:"bg-blue-500/20 text-blue-400",icon:t.jsx(ks,{className:"w-4 h-4 text-blue-500"})}:{text:"Menunggu TTD Anda",color:"bg-yellow-500/20 text-yellow-400",icon:t.jsx(ks,{className:"w-4 h-4 text-yellow-500"})},M_=({contracts:n,setContracts:e,clients:a,projects:s,profile:r,showNotification:d,initialAction:u,setInitialAction:p,packages:h,onSignContract:f})=>{const[g,y]=C.useState(!1),[v,k]=C.useState(!1),[j,S]=C.useState("add"),[w,P]=C.useState(null),[A,R]=C.useState(null),[O,H]=C.useState(!1),[L,U]=C.useState(Lc),[ne,ie]=C.useState(""),[q,V]=C.useState(""),[ce,Ce]=C.useState(!1);C.useEffect(()=>{if(A){const G=document.getElementById("contract-portal-qrcode");G&&typeof window.QRCode<"u"&&(G.innerHTML="",new window.QRCode(G,{text:A.url,width:200,height:200,colorDark:"#020617",colorLight:"#ffffff",correctLevel:2}))}},[A]);const Re=G=>{const he=a.find(Q=>Q.id===G.clientId);if(he){const Q=window.location.pathname.replace(/index\.html$/,""),le=`${window.location.origin}${Q}#/portal/${he.portalAccessId}`;R({title:`Portal QR Code untuk ${he.name}`,url:le})}else d("Klien untuk kontrak ini tidak ditemukan.")},Ue=C.useMemo(()=>s.filter(G=>G.clientId===ne),[ne,s]);C.useEffect(()=>{if(q){const G=s.find(Q=>Q.id===q),he=a.find(Q=>Q.id===(G==null?void 0:G.clientId));if(G&&he){const Q=h.find(W=>W.id===G.packageId),le=he.name.split(/&|,/);U(W=>{var we,Be,Ze,Ke,Qe;return{...W,clientName1:((we=le[0])==null?void 0:we.trim())||he.name,clientPhone1:he.phone,clientAddress1:G.location,clientName2:((Be=le[1])==null?void 0:Be.trim())||"",clientPhone2:he.phone,clientAddress2:G.location,jurisdiction:((Ze=G.location.split(",")[1])==null?void 0:Ze.trim())||((Ke=G.location.split(",")[0])==null?void 0:Ke.trim())||"Indonesia",signingLocation:r.address,dpDate:G.amountPaid>0?new Date().toISOString().split("T")[0]:"",finalPaymentDate:G.date?new Date(new Date(G.date).setDate(new Date(G.date).getDate()-7)).toISOString().split("T")[0]:"",shootingDuration:(Q==null?void 0:Q.photographers)||"Sesuai detail paket",guaranteedPhotos:(Q==null?void 0:Q.digitalItems.find(gt=>gt.toLowerCase().includes("foto")))||"Sesuai detail paket",albumDetails:((Qe=Q==null?void 0:Q.physicalItems.find(gt=>gt.name.toLowerCase().includes("album")))==null?void 0:Qe.name)||"Sesuai detail paket",otherItems:G.addOns.map(gt=>gt.name).join(", ")||"Sesuai detail paket",personnelCount:`${Q!=null&&Q.photographers?"1+":"0"} Fotografer, ${Q!=null&&Q.videographers?"1+":"0"} Videografer`,deliveryTimeframe:(Q==null?void 0:Q.processingTime)||"30 hari kerja"}})}}},[q,s,a,h,r.address]);const re=(G,he)=>{G==="view"&&he?(P(he),k(!0)):(S(G),G==="edit"&&he?(P(he),ie(he.clientId),V(he.projectId),U({...Lc,...he})):(P(null),ie((u==null?void 0:u.id)||""),V(""),U(Lc),u&&u.type==="CREATE_CONTRACT_FOR_CLIENT"&&u.id&&ie(u.id)),y(!0))};C.useEffect(()=>{if(u){if(u.type==="CREATE_CONTRACT_FOR_CLIENT"&&u.id&&re("add"),u.type==="VIEW_CONTRACT"&&u.id){const G=n.find(he=>he.id===u.id);G&&re("view",G)}p(null)}},[u,n]);const De=()=>{y(!1),k(!1),P(null)},J=G=>{const{name:he,value:Q}=G.target;U(le=>({...le,[he]:Q}))},E=G=>{if(G.preventDefault(),!q){d("Harap pilih proyek terlebih dahulu.");return}if(j==="add"){const he=n.length+1,Q={id:crypto.randomUUID(),contractNumber:`VP/CTR/${new Date().getFullYear()}/${String(he).padStart(3,"0")}`,clientId:ne,projectId:q,createdAt:new Date().toISOString(),...L};e(le=>[...le,Q]),d("Kontrak baru berhasil dibuat.")}else if(w){const he={...w,...L};e(Q=>Q.map(le=>le.id===w.id?he:le)),d("Kontrak berhasil diperbarui.")}De()},T=G=>{window.confirm("Apakah Anda yakin ingin menghapus kontrak ini?")&&(e(he=>he.filter(Q=>Q.id!==G)),d("Kontrak berhasil dihapus."))},B=G=>{w&&(f(w.id,G,"vendor"),P(he=>he?{...he,vendorSignature:G}:null)),Ce(!1)},ue=C.useMemo(()=>{const G=n.filter(le=>le.vendorSignature&&!le.clientSignature).length,he=n.filter(le=>!le.vendorSignature).length,Q=n.reduce((le,W)=>{const we=s.find(Be=>Be.id===W.projectId);return le+((we==null?void 0:we.totalCost)||0)},0);return{waitingForClient:G,waitingForVendor:he,totalValue:Q}},[n,s]),ke=G=>{const he=s.find(W=>W.id===G.projectId);if(!he)return t.jsx("p",{children:"Data proyek tidak ditemukan."});const Q=W=>{const we={"{vendorCompanyName}":r.companyName,"{vendorSignerName}":r.authorizedSigner,"{vendorAddress}":r.address,"{vendorPhone}":r.phone,"{vendorIdNumber}":r.idNumber||"","{clientName1}":G.clientName1,"{clientAddress1}":G.clientAddress1,"{clientPhone1}":G.clientPhone1,"{clientName2}":G.clientName2||"","{clientAddress2}":G.clientAddress2||"","{clientPhone2}":G.clientPhone2||"","{projectName}":he.projectName,"{projectType}":he.projectType,"{projectDate}":Ka(he.date),"{projectLocation}":he.location,"{contractNumber}":G.contractNumber,"{signingDate}":Ka(G.signingDate),"{signingLocation}":G.signingLocation,"{shootingDuration}":G.shootingDuration,"{guaranteedPhotos}":G.guaranteedPhotos,"{albumDetails}":G.albumDetails,"{otherItems}":G.otherItems,"{personnelCount}":G.personnelCount,"{deliveryTimeframe}":G.deliveryTimeframe,"{totalCost}":hl(he.totalCost),"{dpAmount}":hl(he.amountPaid),"{dpDate}":Ka(G.dpDate),"{finalPaymentDate}":Ka(G.finalPaymentDate),"{cancellationPolicy}":G.cancellationPolicy,"{jurisdiction}":G.jurisdiction};let Be=W;for(const Ze in we)Be=Be.replace(new RegExp(Ze.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),we[Ze]);return Be},le=()=>t.jsxs("section",{className:"mt-16 pt-8 border-t-2 border-slate-200 signature-section avoid-break",children:[t.jsx("h4",{className:"font-bold text-center text-lg mb-8",children:"Tanda Tangan Para Pihak"}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{className:"font-semibold",children:"PIHAK PERTAMA"}),t.jsxs("p",{className:"text-xs mb-2",children:["(",r.companyName,")"]}),t.jsx("div",{className:"h-28 my-1 flex flex-col items-center justify-center",children:G.vendorSignature?t.jsx("img",{src:G.vendorSignature,alt:"Tanda Tangan Vendor",className:"h-24 object-contain"}):t.jsx("span",{className:"italic text-gray-400 text-sm",children:"Belum Ditandatangani"})}),t.jsx("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1 font-semibold",children:r.authorizedSigner})]}),t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{className:"font-semibold",children:"PIHAK KEDUA"}),t.jsxs("p",{className:"text-xs mb-2",children:["(",G.clientName1,G.clientName2?` & ${G.clientName2}`:"",")"]}),t.jsx("div",{className:"h-28 my-1 flex items-center justify-center",children:G.clientSignature?t.jsx("img",{src:G.clientSignature,alt:"Tanda Tangan Klien",className:"h-24 object-contain"}):t.jsx("span",{className:"italic text-gray-400 text-sm",children:"Belum Ditandatangani"})}),t.jsxs("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1 font-semibold",children:[G.clientName1,G.clientName2?` & ${G.clientName2}`:""]})]})]})]});if(r.contractTemplate){const W=Q(r.contractTemplate);return t.jsxs("div",{className:"printable-content bg-white text-black p-8 font-serif leading-relaxed text-sm",children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:W.replace(/\n/g,"<br />")}}),t.jsx(le,{})]})}return t.jsxs("div",{className:"printable-content bg-white text-black p-8 font-serif leading-relaxed text-sm",children:[t.jsx("h2",{className:"text-xl font-bold text-center mb-1",children:"SURAT PERJANJIAN KERJA SAMA"}),t.jsxs("h3",{className:"text-lg font-bold text-center mb-6",children:["JASA ",he.projectType.toUpperCase()]}),t.jsxs("p",{children:["Pada hari ini, ",Ka(G.signingDate),", bertempat di ",G.signingLocation,", telah dibuat dan disepakati perjanjian kerja sama antara:"]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK PERTAMA"}),t.jsxs("p",{children:[r.companyName,", yang diwakili oleh ",r.authorizedSigner," beralamat di ",r.address,"."]})]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK KEDUA"}),t.jsxs("p",{children:[G.clientName1," (No. Tlp: ",G.clientPhone1,"), beralamat di ",G.clientAddress1,"."]}),G.clientName2&&t.jsxs("p",{children:[G.clientName2," (No. Tlp: ",G.clientPhone2,"), beralamat di ",G.clientAddress2,"."]})]}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 1: RUANG LINGKUP PEKERJAAN"}),t.jsxs("p",{children:["PIHAK PERTAMA akan memberikan jasa ",he.projectType.toLowerCase()," yang diberikan oleh PIHAK PERTAMA untuk acara PIHAK KEDUA pada tanggal ",Ka(he.date)," di ",he.location,". Rincian layanan adalah sebagai berikut: ",G.shootingDuration,", ",G.guaranteedPhotos,", ",G.albumDetails,", dan ",G.otherItems,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 2: BIAYA DAN PEMBAYARAN"}),t.jsxs("p",{children:["Total biaya jasa adalah sebesar ",hl(he.totalCost),". Pembayaran dilakukan dengan Uang Muka (DP) pada ",Ka(G.dpDate)," dan pelunasan pada ",Ka(G.finalPaymentDate),"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 3: PEMBATALAN"}),t.jsx("p",{dangerouslySetInnerHTML:{__html:G.cancellationPolicy.replace(/\n/g,"<br/>")}})]})]}),t.jsx(le,{})]})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Kontrak",subtitle:"Buat, kelola, dan arsipkan semua kontrak kerja Anda.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>H(!0),className:"button-secondary",children:"Pelajari Halaman Ini"}),t.jsxs("button",{onClick:()=>re("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Buat Kontrak"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(qe,{icon:t.jsx(oa,{className:"w-6 h-6"}),title:"Total Kontrak",value:n.length.toString()}),t.jsx(qe,{icon:t.jsx(ks,{className:"w-6 h-6"}),title:"Menunggu TTD Klien",value:ue.waitingForClient.toString()}),t.jsx(qe,{icon:t.jsx(on,{className:"w-6 h-6"}),title:"Total Nilai Terkontrak",value:hl(ue.totalValue)})]}),t.jsx("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"No. Kontrak"}),t.jsx("th",{className:"px-4 py-3",children:"Klien & Proyek"}),t.jsx("th",{className:"px-4 py-3",children:"Tgl. Penandatanganan"}),t.jsx("th",{className:"px-4 py-3",children:"Status TTD"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(G=>{const he=a.find(W=>W.id===G.clientId),Q=s.find(W=>W.id===G.projectId),le=D_(G);return t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:G.contractNumber}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:(he==null?void 0:he.name)||G.clientName1}),t.jsx("p",{className:"text-xs text-brand-text-secondary",children:(Q==null?void 0:Q.projectName)||"N/A"})]}),t.jsx("td",{className:"px-4 py-3",children:Ka(G.signingDate)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${le.color}`,children:le.text})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>re("view",G),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Lihat",children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>re("edit",G),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Edit",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>T(G.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Hapus",children:t.jsx(fn,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Re(G),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Bagikan Portal",children:t.jsx(vv,{className:"w-5 h-5"})})]})})]},G.id)})})]})})}),t.jsx(nt,{isOpen:O,onClose:()=>H(!1),title:"Panduan Halaman Kontrak",children:t.jsxs("div",{className:"space-y-4 text-sm text-brand-text-primary",children:[t.jsx("p",{children:"Halaman ini adalah pusat arsip digital untuk semua perjanjian kerja Anda."}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Buat Kontrak:"}),' Klik tombol "Buat Kontrak" untuk membuka formulir. Pilih klien dan proyek yang relevan, dan sebagian besar data akan terisi otomatis.']}),t.jsxs("li",{children:[t.jsx("strong",{children:"E-Signature:"})," Setelah kontrak dibuat, Anda dapat menandatanganinya secara digital. Klien juga dapat melakukan hal yang sama melalui Portal Klien mereka."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Lacak Status:"})," Pantau dengan mudah kontrak mana yang sudah lengkap, mana yang menunggu tanda tangan Anda, dan mana yang menunggu tanda tangan klien."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Bagikan Portal:"})," Gunakan ikon QR code untuk membagikan tautan Portal Klien, tempat mereka dapat melihat dan menandatangani kontrak."]})]})]})}),t.jsx(nt,{isOpen:g,onClose:De,title:j==="add"?"Buat Kontrak Baru":"Edit Kontrak",size:"4xl",children:t.jsxs("form",{onSubmit:E,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{value:ne,onChange:G=>ie(G.target.value),className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Klien..."}),a.map(G=>t.jsx("option",{value:G.id,children:G.name},G.id))]}),t.jsx("label",{className:"input-label",children:"Klien"})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{value:q,onChange:G=>V(G.target.value),className:"input-field",required:!0,disabled:!ne,children:[t.jsx("option",{value:"",children:"Pilih Proyek..."}),Ue.map(G=>t.jsx("option",{value:G.id,children:G.projectName},G.id))]}),t.jsx("label",{className:"input-label",children:"Proyek"})]})]}),t.jsx("p",{className:"text-sm text-brand-text-secondary pt-2",children:"Memilih proyek akan mengisi sebagian besar data di bawah ini secara otomatis."}),t.jsxs("div",{className:"max-h-[50vh] overflow-y-auto pr-2 space-y-4 pt-4",children:[t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2",children:"Detail Penandatanganan"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",name:"signingDate",value:L.signingDate,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Tanggal TTD"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"signingLocation",value:L.signingLocation,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Lokasi TTD"})]})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Pihak Klien 1"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientName1",value:L.clientName1,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Nama Klien 1"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientPhone1",value:L.clientPhone1,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Telepon Klien 1"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientAddress1",value:L.clientAddress1,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Alamat Klien 1"})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Pihak Klien 2 (Opsional)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientName2",value:L.clientName2,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Nama Klien 2"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientPhone2",value:L.clientPhone2,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Telepon Klien 2"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"clientAddress2",value:L.clientAddress2,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Alamat Klien 2"})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Ruang Lingkup Pekerjaan"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"shootingDuration",value:L.shootingDuration,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Durasi Pemotretan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"guaranteedPhotos",value:L.guaranteedPhotos,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Jumlah Foto Dijamin"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"albumDetails",value:L.albumDetails,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Detail Album"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"otherItems",value:L.otherItems,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Item Lainnya"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"personnelCount",value:L.personnelCount,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Jumlah Personel"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"deliveryTimeframe",value:L.deliveryTimeframe,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Waktu Pengerjaan"})]})]}),t.jsx("h4",{className:"text-base font-semibold text-gradient border-b border-brand-border pb-2 pt-4",children:"Pembayaran & Hukum"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",name:"dpDate",value:L.dpDate,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Tanggal DP"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",name:"finalPaymentDate",value:L.finalPaymentDate,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Tanggal Pelunasan"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{name:"cancellationPolicy",value:L.cancellationPolicy,onChange:J,className:"input-field",placeholder:" ",rows:4}),t.jsx("label",{className:"input-label",children:"Kebijakan Pembatalan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",name:"jurisdiction",value:L.jurisdiction,onChange:J,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Wilayah Hukum"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:De,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:j==="add"?"Simpan":"Update"})]})]})}),t.jsx(nt,{isOpen:v,onClose:De,title:`Kontrak: ${w==null?void 0:w.contractNumber}`,size:"4xl",children:w&&t.jsxs("div",{children:[t.jsx("div",{className:"printable-area max-h-[65vh] overflow-y-auto",children:ke(w)}),t.jsxs("div",{className:"mt-6 flex justify-between items-center non-printable border-t border-brand-border pt-4",children:[t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:`font-semibold ${w.vendorSignature?"text-green-500":"text-yellow-500"}`,children:["Status Anda: ",w.vendorSignature?"Sudah TTD":"Belum TTD"]}),t.jsxs("p",{className:`font-semibold ${w.clientSignature?"text-green-500":"text-yellow-500"}`,children:["Status Klien: ",w.clientSignature?"Sudah TTD":"Belum TTD"]})]}),t.jsxs("div",{className:"space-x-2",children:[!w.vendorSignature&&t.jsx("button",{onClick:()=>Ce(!0),className:"button-primary",children:"Tanda Tangani Kontrak"}),t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak / Simpan PDF"]})]})]})]})}),t.jsx(nt,{isOpen:ce,onClose:()=>Ce(!1),title:"Bubuhkan Tanda Tangan Anda",children:t.jsx(Al,{onClose:()=>Ce(!1),onSave:B})}),A&&t.jsx(nt,{isOpen:!!A,onClose:()=>R(null),title:A.title,size:"sm",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{id:"contract-portal-qrcode",className:"p-4 bg-white rounded-lg inline-block mx-auto"}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-4 break-all",children:A.url}),t.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.url),d("Tautan berhasil disalin!")},className:"button-secondary w-full",children:"Salin Tautan"}),t.jsx("button",{onClick:()=>{const G=document.querySelector("#contract-portal-qrcode canvas");if(G){const he=document.createElement("a");he.download="portal-qr-code.png",he.href=G.toDataURL(),he.click()}},className:"button-primary w-full",children:"Unduh QR"})]})]})})]})},Uu=n=>new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),pn=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),R_=n=>n>=5?Ct.VERY_SATISFIED:n>=4?Ct.SATISFIED:n>=3?Ct.NEUTRAL:Ct.UNSATISFIED,L_=({accessId:n,clients:e,projects:a,contracts:s,transactions:r,setClientFeedback:d,showNotification:u,userProfile:p,packages:h,onClientConfirmation:f,onClientSubStatusConfirmation:g,onSignContract:y})=>{const v=p,k=C.useMemo(()=>e.find(ie=>ie.portalAccessId===n),[e,n]),j=(k==null?void 0:k.clientType)==="Vendor",[S,w]=C.useState(j?"proyek":"beranda"),P=C.useMemo(()=>a.filter(ie=>ie.clientId===(k==null?void 0:k.id)).sort((ie,q)=>new Date(q.date).getTime()-new Date(ie.date).getTime()),[a,k]),A=C.useMemo(()=>s.filter(ie=>ie.clientId===(k==null?void 0:k.id)),[s,k]),[R,O]=C.useState(null),H=v.publicPageConfig.template||"classic";if(!k)return t.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-public-bg",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-public-surface rounded-2xl shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Portal Tidak Ditemukan"}),t.jsx("p",{className:"mt-4 text-public-text-primary",children:"Tautan yang Anda gunakan tidak valid atau sudah tidak berlaku."})]})});const L=[{id:"beranda",label:"Beranda",icon:jl},{id:"proyek",label:"Proyek Saya",icon:ka},{id:"galeri",label:"Galeri & File",icon:bv},{id:"keuangan",label:"Keuangan",icon:qa},{id:"kontrak",label:"Kontrak",icon:oa},{id:"umpan-balik",label:"Umpan Balik",icon:Js}],U=C.useMemo(()=>j?L.filter(ie=>["proyek","galeri","umpan-balik"].includes(ie.id)):L,[j]),ne=()=>{switch(S){case"beranda":return t.jsx(F_,{client:k,projects:P,profile:v});case"proyek":return t.jsx(U_,{projects:P,profile:v,onConfirm:g});case"galeri":return t.jsx(O_,{projects:P,packages:h});case"keuangan":return t.jsx($_,{projects:P,contracts:s,transactions:r,onSignContract:y,profile:v,packages:h,client:k,onViewDocument:O});case"kontrak":return t.jsx(B_,{contracts:A,projects:P,onViewContract:ie=>O({type:"contract",project:P.find(q=>q.id===ie.projectId),data:ie})});case"umpan-balik":return t.jsx(V_,{client:k,setClientFeedback:d,showNotification:u});default:return null}};return t.jsxs("div",{className:`template-wrapper template-${H} min-h-screen`,children:[t.jsx("style",{children:`
                .template-wrapper { background-color: var(--public-bg); color: var(--public-text-primary); }
                .portal-surface { background-color: var(--public-surface); border-color: var(--public-border); }
                .portal-text-primary { color: var(--public-text-primary); }
                .portal-text-secondary { color: var(--public-text-secondary); }
                .portal-border { border-color: var(--public-border); }
                .portal-accent-text { color: var(--public-accent); }
                .portal-accent-bg { background-color: var(--public-accent); }
                .portal-accent-bg-light { background-color: hsla(var(--public-accent-hsl), 0.1); }
            `}),t.jsxs("div",{className:"max-w-7xl mx-auto lg:grid lg:grid-cols-12 lg:gap-8",children:[t.jsx("aside",{className:"hidden lg:block lg:col-span-3 xl:col-span-2 py-8",children:t.jsxs("div",{className:"sticky top-8",children:[t.jsx("div",{className:"px-4 mb-8",children:t.jsx("h1",{className:"text-2xl font-bold text-gradient",children:v.companyName})}),t.jsx("nav",{className:"space-y-2 px-2",children:U.map(ie=>t.jsxs("button",{onClick:()=>w(ie.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-semibold transition-colors ${S===ie.id?"portal-accent-bg-light portal-accent-text":"portal-text-secondary hover:bg-slate-200"}`,children:[t.jsx(ie.icon,{className:"w-5 h-5"}),t.jsx("span",{children:ie.label})]},ie.id))})]})}),t.jsxs("main",{className:"lg:col-span-9 xl:col-span-10 p-4 lg:py-8 lg:px-6",children:[t.jsxs("header",{className:"mb-8 widget-animate",children:[t.jsxs("h2",{className:"text-3xl font-bold portal-text-primary",children:["Selamat Datang, ",k.name.split(" ")[0],"!"]}),t.jsx("p",{className:"portal-text-secondary mt-1",children:"Ini adalah pusat informasi untuk semua proyek Anda bersama kami."})]}),t.jsx("div",{children:ne()})]})]}),t.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 portal-surface border-t portal-border shadow-up-lg",children:t.jsx("div",{className:"flex justify-around",children:U.map(ie=>t.jsxs("button",{onClick:()=>w(ie.id),className:`flex flex-col items-center justify-center w-full py-2 transition-colors ${S===ie.id?"portal-accent-text":"portal-text-secondary"}`,children:[t.jsx(ie.icon,{className:"w-6 h-6 mb-1"}),t.jsx("span",{className:"text-[10px] font-bold",children:ie.label})]},ie.id))})}),t.jsx("div",{className:"h-20 lg:hidden"}),t.jsx(K_,{viewingDocument:R,onClose:()=>O(null),profile:v,packages:h,client:k,onSignContract:y})]})},F_=({client:n,projects:e,profile:a})=>{const s=C.useMemo(()=>e.find(u=>u.status!=="Selesai"&&u.status!=="Dibatalkan"),[e]),r=C.useMemo(()=>e.filter(u=>new Date(u.date)>=new Date).sort((u,p)=>new Date(u.date).getTime()-new Date(p.date).getTime())[0],[e]),d=C.useMemo(()=>{const u=e.reduce((h,f)=>h+f.totalCost,0),p=e.reduce((h,f)=>h+f.amountPaid,0);return{totalValue:u,totalPaid:p,totalDue:u-p}},[e]);return t.jsxs("div",{className:"space-y-6",children:[r&&t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:"100ms"},children:[t.jsx("h3",{className:"text-lg font-bold portal-text-primary mb-4",children:"Proyek Mendatang"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-xl portal-accent-text",children:r.projectName}),t.jsx("p",{className:"text-sm portal-text-secondary mt-1",children:r.location})]}),t.jsx("p",{className:"font-semibold portal-text-primary text-right bg-slate-100 px-4 py-2 rounded-lg",children:Uu(r.date)})]})]}),t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:"200ms"},children:[t.jsx("h3",{className:"text-lg font-bold portal-text-primary mb-4",children:"Ringkasan Keuangan"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 widget-animate",style:{animationDelay:"300ms"},children:[t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Total Nilai Proyek"}),t.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:pn(d.totalValue)})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 widget-animate",style:{animationDelay:"400ms"},children:[t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Total Terbayar"}),t.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:pn(d.totalPaid)})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 widget-animate",style:{animationDelay:"500ms"},children:[t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Sisa Tagihan"}),t.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:pn(d.totalDue)})]})]})]}),s&&t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:"600ms"},children:[t.jsxs("h3",{className:"text-lg font-bold portal-text-primary mb-4",children:["Progres Proyek Aktif: ",s.projectName]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:t.jsx("div",{className:"portal-accent-bg h-2.5 rounded-full",style:{width:`${s.progress}%`}})}),t.jsxs("span",{className:"font-bold portal-accent-text",children:[s.progress,"%"]})]}),t.jsxs("p",{className:"text-center text-sm portal-text-secondary mt-2",children:["Status saat ini: ",t.jsx("span",{className:"font-semibold portal-text-primary",children:s.status})]})]})]})},U_=({projects:n,profile:e,onConfirm:a})=>{var p;const[s,r]=C.useState(((p=n[0])==null?void 0:p.id)||null),d=C.useMemo(()=>n.find(h=>h.id===s),[n,s]),u=h=>{switch(h){case qt.COMPLETED:return"bg-green-100 text-green-700";case qt.IN_PROGRESS:return"bg-blue-100 text-blue-700";case qt.PENDING:return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"space-y-6",children:[n.length>1&&t.jsxs("div",{className:"portal-surface p-4 rounded-2xl shadow-md border widget-animate",children:[t.jsx("label",{htmlFor:"project-selector",className:"text-sm font-medium portal-text-primary",children:"Pilih Proyek:"}),t.jsx("select",{id:"project-selector",value:s||"",onChange:h=>r(h.target.value),className:"w-full mt-1 p-2 border portal-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50",children:n.map(h=>t.jsx("option",{value:h.id,children:h.projectName},h.id))})]}),d?t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:"100ms"},children:[t.jsxs("h3",{className:"text-xl font-bold portal-text-primary mb-6",children:["Perjalanan Proyek: ",d.projectName]}),e.projectStatusConfig.map((h,f)=>h.subStatuses.length===0&&d.status!==h.name&&(h.name!=="Revisi"||(d.revisions||[]).length===0)?null:t.jsxs("div",{className:"mb-8 widget-animate",style:{animationDelay:`${f*150}ms`},children:[t.jsxs("h4",{className:"text-lg font-bold portal-text-primary mb-4 flex items-center gap-3",children:[t.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color}}),h.name]}),t.jsxs("div",{className:"relative border-l-2 portal-border",children:[h.subStatuses.map((g,y)=>{var P,A,R;const v=(P=d.confirmedSubStatuses)==null?void 0:P.includes(g.name),k=((A=d.activeSubStatuses)==null?void 0:A.includes(g.name))&&d.status===h.name,j=(R=d.clientSubStatusNotes)==null?void 0:R[g.name],S=f*150+(y+1)*100;let w="bg-gray-300";return v?w="bg-green-500":k&&(w="portal-accent-bg active-pulse"),t.jsxs("div",{className:"timeline-item widget-animate",style:{"--animation-delay":`${S}ms`,animationDelay:`${S}ms`},children:[t.jsx("div",{className:`timeline-icon-container ${w}`,children:v&&t.jsx(Da,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:`font-semibold ${!v&&!k?"portal-text-secondary":"portal-text-primary"}`,children:g.name}),t.jsx("p",{className:"text-sm portal-text-secondary",children:g.note}),j&&t.jsxs("blockquote",{className:"mt-2 p-2 bg-slate-100 rounded-md border-l-4 border-slate-400",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-600",children:"Catatan Anda:"}),t.jsxs("p",{className:"text-sm text-slate-800 italic",children:['"',j,'"']})]}),k&&!v&&t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-800",children:"Tugas ini memerlukan konfirmasi Anda"}),t.jsxs("button",{onClick:()=>{d&&a(d.id,g.name,"")},className:"mt-2 text-sm font-semibold text-white portal-accent-bg hover:bg-opacity-80 px-4 py-2 rounded-lg inline-flex items-center gap-2",children:[t.jsx(Jr,{className:"w-4 h-4"})," Konfirmasi"]})]})]})]},g.name)}),h.name==="Revisi"&&(d.revisions||[]).length>0&&(d.revisions||[]).map((g,y)=>{const v=g.status===qt.COMPLETED;let k=v?"bg-green-500":"portal-accent-bg";const j=f*150+(h.subStatuses.length+y+1)*100;return t.jsxs("div",{className:"timeline-item widget-animate",style:{"--animation-delay":`${j}ms`,animationDelay:`${j}ms`},children:[t.jsx("div",{className:`timeline-icon-container ${k}`,children:v&&t.jsx(Da,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"ml-4 p-3 bg-slate-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"font-semibold portal-text-primary",children:"Tugas Revisi"}),t.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${u(g.status)}`,children:g.status})]}),t.jsxs("p",{className:"text-sm portal-text-secondary mt-2",children:[t.jsx("strong",{children:"Catatan:"})," ",g.adminNotes]}),t.jsxs("p",{className:"text-xs portal-text-secondary mt-1",children:[t.jsx("strong",{children:"Deadline:"})," ",Uu(g.deadline)]})]})]},g.id)})]})]},h.id))]}):t.jsx("div",{className:"portal-surface p-8 rounded-2xl shadow-md border text-center widget-animate",children:t.jsx("p",{className:"portal-text-secondary",children:"Pilih proyek untuk melihat perjalanannya."})})]})},O_=({projects:n,packages:e})=>t.jsx("div",{className:"space-y-6",children:n.map((a,s)=>{const r=e.find(d=>d.id===a.packageId);return t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:`${s*100}ms`},children:[t.jsxs("h3",{className:"text-lg font-bold portal-text-primary mb-4",children:["File & Deliverables: ",a.projectName]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold portal-text-primary text-md",children:"Tautan Penting"}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium portal-text-primary",children:"Hasil Akhir Foto & Video"}),t.jsx("p",{className:"text-xs portal-text-secondary",children:"Tautan final untuk semua hasil editan."})]}),a.finalDriveLink?t.jsx("a",{href:a.finalDriveLink,target:"_blank",rel:"noopener noreferrer",className:"button-primary text-sm px-4 py-2",children:"Buka Galeri"}):t.jsx("span",{className:"text-sm font-medium portal-text-secondary",children:"Belum Tersedia"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[t.jsx("div",{children:t.jsx("p",{className:"font-medium portal-text-primary",children:"Moodboard/Brief Proyek"})}),a.driveLink?t.jsx("a",{href:a.driveLink,target:"_blank",rel:"noopener noreferrer",className:"button-secondary text-sm px-4 py-2",children:"Lihat Tautan"}):t.jsx("span",{className:"text-sm font-medium portal-text-secondary",children:"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[t.jsx("div",{children:t.jsx("p",{className:"font-medium portal-text-primary",children:"File dari Anda"})}),a.clientDriveLink?t.jsx("a",{href:a.clientDriveLink,target:"_blank",rel:"noopener noreferrer",className:"button-secondary text-sm px-4 py-2",children:"Lihat Tautan"}):t.jsx("span",{className:"text-sm font-medium portal-text-secondary",children:"N/A"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 mt-4 border-t portal-border",children:[t.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold portal-text-primary mb-3",children:"Checklist Digital"}),t.jsx("div",{className:"space-y-2 text-sm",children:((r==null?void 0:r.digitalItems)||[]).map((d,u)=>{var h;const p=(h=a.completedDigitalItems)==null?void 0:h.includes(d);return t.jsxs("div",{className:"flex items-center gap-3 p-2",children:[t.jsx(Da,{className:`w-5 h-5 flex-shrink-0 ${p?"text-green-500":"text-gray-300"}`}),t.jsx("span",{className:`portal-text-primary ${p?"line-through portal-text-secondary":""}`,children:d})]},u)})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold portal-text-primary mb-3",children:"Output Fisik"}),t.jsxs("ul",{className:"space-y-2 text-sm list-disc list-inside",children:[(a.printingDetails||(r==null?void 0:r.physicalItems)||[]).map((d,u)=>t.jsx("li",{className:"portal-text-primary",children:d.customName||d.name},u)),(a.printingDetails||(r==null?void 0:r.physicalItems)||[]).length===0&&t.jsx("p",{className:"text-xs portal-text-secondary italic",children:"Tidak ada output fisik."})]})]})]})]})]},a.id)})}),$_=({projects:n,contracts:e,transactions:a,profile:s,client:r,onViewDocument:d})=>t.jsx("div",{className:"space-y-6",children:n.map((u,p)=>{const h=a.filter(f=>f.projectId===u.id&&f.type==="Pemasukan");return e.find(f=>f.projectId===u.id),t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",style:{animationDelay:`${p*100}ms`},children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[t.jsx("h3",{className:"text-lg font-bold portal-text-primary mb-2 sm:mb-0",children:u.projectName}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("button",{onClick:()=>d({type:"invoice",project:u,data:u}),className:"button-primary text-sm px-3 py-1.5",children:"Lihat Invoice"})})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t portal-border",children:[t.jsx("h4",{className:"font-semibold portal-text-primary mb-2",children:"Riwayat Pembayaran"}),t.jsxs("div",{className:"space-y-2",children:[h.map(f=>t.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium portal-text-primary",children:f.description}),t.jsx("p",{className:"text-xs portal-text-secondary",children:Uu(f.date)})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("p",{className:"font-semibold text-green-600",children:pn(f.amount)}),t.jsx("button",{onClick:()=>d({type:"receipt",project:u,data:f}),className:"p-1 text-slate-500 hover:text-blue-600",title:"Lihat Tanda Terima",children:t.jsx(Na,{className:"w-5 h-5"})})]})]},f.id)),h.length===0&&t.jsx("p",{className:"text-sm portal-text-secondary",children:"Belum ada pembayaran."})]})]})]},u.id)})}),B_=({contracts:n,projects:e,onViewContract:a})=>t.jsxs("div",{className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border widget-animate",children:[t.jsx("h3",{className:"text-lg font-bold portal-text-primary mb-4",children:"Kontrak Kerja Anda"}),t.jsx("div",{className:"space-y-3",children:n.length>0?n.map(s=>{const r=e.find(d=>d.id===s.projectId);return t.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold portal-text-primary",children:s.contractNumber}),t.jsxs("p",{className:"text-sm portal-text-secondary",children:["Proyek: ",(r==null?void 0:r.projectName)||"N/A"]})]}),t.jsx("button",{onClick:()=>a(s),className:"button-secondary text-sm px-4 py-2",children:"Lihat Dokumen"})]},s.id)}):t.jsx("p",{className:"portal-text-secondary text-center py-8",children:"Belum ada kontrak yang tersedia."})})]}),V_=({client:n,setClientFeedback:e,showNotification:a})=>{const[s,r]=C.useState(0),[d,u]=C.useState(""),[p,h]=C.useState(!1),f=g=>{if(g.preventDefault(),s===0){alert("Mohon berikan peringkat.");return}h(!0);const y={id:`FB-PORTAL-${Date.now()}`,clientName:n.name,rating:s,satisfaction:R_(s),feedback:d,date:new Date().toISOString()};setTimeout(()=>{e(v=>[y,...v]),a("Terima kasih! Masukan Anda telah kami terima."),r(0),u(""),h(!1)},1e3)};return t.jsxs("form",{onSubmit:f,className:"portal-surface p-4 sm:p-6 rounded-2xl shadow-md border flex flex-col widget-animate",children:[t.jsx("h3",{className:"text-lg font-bold portal-text-primary",children:"Berikan Masukan"}),t.jsx("p",{className:"text-sm portal-text-secondary mt-1",children:"Masukan Anda sangat berharga untuk kami menjadi lebih baik."}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"text-sm font-medium portal-text-primary",children:"Peringkat Kepuasan"}),t.jsx("div",{className:"flex items-center gap-1 mt-2",children:[1,2,3,4,5].map(g=>t.jsx("button",{type:"button",onClick:()=>r(g),"aria-label":`Beri ${g} bintang`,children:t.jsx(ia,{className:`w-8 h-8 transition-colors ${s>=g?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},g))})]}),t.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[t.jsx("label",{htmlFor:"feedbackText",className:"text-sm font-medium portal-text-primary",children:"Saran & masukan..."}),t.jsx("textarea",{id:"feedbackText",value:d,onChange:g=>u(g.target.value),className:"w-full mt-2 p-3 border portal-border rounded-lg flex-grow focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50",rows:5})]}),t.jsx("button",{type:"submit",disabled:p,className:"mt-4 w-full py-3 px-4 portal-accent-bg text-white font-semibold rounded-full shadow-md hover:bg-opacity-80 transition-all duration-300 disabled:opacity-50",children:p?"Mengirim...":"Kirim Masukan"})]})},K_=({viewingDocument:n,onClose:e,profile:a,packages:s,client:r,onSignContract:d})=>{const[u,p]=C.useState(!1),h=g=>{(n==null?void 0:n.type)==="contract"&&d(n.data.id,g,"client"),p(!1)},f=()=>{if(!n)return null;const{type:g,project:y,data:v}=n,k=j=>new Date(j).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});if(g==="invoice"){const j=s.find(P=>P.id===y.packageId),S=y.totalCost+(y.discountAmount||0),w=y.totalCost-y.amountPaid;return t.jsx("div",{id:"invoice-content",className:"p-1",children:t.jsx("div",{className:"printable-content bg-slate-50 font-sans text-slate-800 printable-area",children:t.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 sm:p-12 shadow-lg",children:[t.jsxs("header",{className:"flex justify-between items-start mb-12",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:a.companyName}),t.jsx("p",{className:"text-sm text-slate-500",children:a.address}),t.jsxs("p",{className:"text-sm text-slate-500",children:[a.phone," | ",a.email]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("h2",{className:"text-2xl font-bold uppercase text-slate-400 tracking-widest",children:"Invoice"}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["No: ",t.jsxs("span",{className:"font-semibold text-slate-700",children:["INV-",y.id.slice(-6)]})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:["Tanggal: ",t.jsx("span",{className:"font-semibold text-slate-700",children:new Date().toLocaleDateString("id-ID")})]})]})]}),t.jsxs("section",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Ditagihkan Kepada"}),t.jsx("p",{className:"font-bold text-slate-800",children:r.name}),t.jsx("p",{className:"text-sm text-slate-600",children:r.email}),t.jsx("p",{className:"text-sm text-slate-600",children:r.phone})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:"Diterbitkan Oleh"}),t.jsx("p",{className:"font-bold text-slate-800",children:a.companyName}),t.jsx("p",{className:"text-sm text-slate-600",children:a.email}),t.jsx("p",{className:"text-sm text-slate-600",children:a.phone})]}),t.jsxs("div",{className:"bg-blue-600 text-white p-6 rounded-xl printable-bg-blue printable-text-white",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase text-blue-200 mb-2",children:"Sisa Tagihan"}),t.jsx("p",{className:"font-extrabold text-3xl tracking-tight",children:pn(w)}),t.jsxs("p",{className:"text-sm text-blue-200 mt-1",children:["Jatuh Tempo: ",k(y.date)]})]})]}),t.jsx("section",{children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b-2 border-slate-200",children:[t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500",children:"Deskripsi"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-center",children:"Jml"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-right",children:"Harga"}),t.jsx("th",{className:"p-3 text-sm font-semibold uppercase text-slate-500 text-right",children:"Total"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsxs("td",{className:"p-3 align-top",children:[t.jsx("p",{className:"font-semibold text-slate-800",children:y.packageName}),t.jsx("p",{className:"text-xs text-slate-500",children:j==null?void 0:j.digitalItems.join(", ")})]}),t.jsx("td",{className:"p-3 text-center align-top",children:"1"}),t.jsx("td",{className:"p-3 text-right align-top",children:pn((j==null?void 0:j.price)||0)}),t.jsx("td",{className:"p-3 text-right align-top",children:pn((j==null?void 0:j.price)||0)})]}),y.addOns.map(P=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-3 text-slate-600 align-top",children:["- ",P.name]}),t.jsx("td",{className:"p-3 text-center align-top",children:"1"}),t.jsx("td",{className:"p-3 text-right align-top",children:pn(P.price)}),t.jsx("td",{className:"p-3 text-right align-top",children:pn(P.price)})]},P.id))]})]})}),t.jsx("section",{className:"mt-12",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("div",{className:"w-2/5",children:[t.jsx("h4",{className:"font-semibold text-slate-600",children:"Tanda Tangan"}),y.invoiceSignature?t.jsx("img",{src:y.invoiceSignature,alt:"Tanda Tangan",className:"h-20 mt-2 object-contain"}):t.jsx("div",{className:"h-20 mt-2 flex items-center justify-center text-xs text-slate-400 italic border border-dashed rounded-lg",children:"Belum Ditandatangani"})]}),t.jsxs("div",{className:"w-2/5 space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Subtotal"}),t.jsx("span",{className:"font-semibold text-slate-800",children:pn(S)})]}),y.discountAmount&&y.discountAmount>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Diskon"}),t.jsxs("span",{className:"font-semibold text-green-600 print-text-green",children:["-",pn(y.discountAmount)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Telah Dibayar"}),t.jsxs("span",{className:"font-semibold text-slate-800",children:["-",pn(y.amountPaid)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-900 border-t-2 border-slate-300 pt-2 mt-2",children:[t.jsx("span",{children:"Sisa Tagihan"}),t.jsx("span",{children:pn(w)})]})]})]})}),t.jsxs("footer",{className:"mt-12 pt-8 border-t-2 border-slate-200",children:[t.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Jika Anda memiliki pertanyaan, silakan hubungi kami di ",a.phone]}),t.jsx("div",{className:"w-full h-2 bg-blue-600 mt-6 rounded"})]})]})})})}else if(g==="receipt"){const j=v;return t.jsx("div",{id:"receipt-content",className:"p-1",children:t.jsx("div",{className:"printable-content bg-slate-50 font-sans text-slate-800 printable-area",children:t.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-xl",children:[t.jsxs("header",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"KWITANSI PEMBAYARAN"}),t.jsx("p",{className:"text-sm text-slate-500",children:a.companyName})]}),t.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-200 rounded-lg text-center mb-8 printable-bg-green-light",children:[t.jsx("p",{className:"text-sm font-semibold text-green-700 print-text-green",children:"PEMBAYARAN DITERIMA"}),t.jsx("p",{className:"text-3xl font-bold text-green-800 print-text-green mt-1",children:pn(j.amount)})]}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"No. Kwitansi"}),t.jsx("span",{className:"font-semibold text-slate-700 font-mono",children:j.id.slice(0,12)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Tanggal Bayar"}),t.jsx("span",{className:"font-semibold text-slate-700",children:k(j.date)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Diterima dari"}),t.jsx("span",{className:"font-semibold text-slate-700",children:r.name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:"Metode"}),t.jsx("span",{className:"font-semibold text-slate-700",children:j.method})]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Untuk pembayaran:"}),t.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:j.description}),y&&t.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[t.jsxs("p",{children:["Proyek: ",y.projectName]}),t.jsxs("p",{children:["Total Tagihan: ",pn(y.totalCost)," | Sisa: ",pn(y.totalCost-y.amountPaid)]})]})]}),t.jsxs("footer",{className:"mt-12 flex justify-between items-end",children:[t.jsx("p",{className:"text-xs text-slate-400",children:"Terima kasih."}),t.jsxs("div",{className:"text-center",children:[j.vendorSignature?t.jsx("img",{src:j.vendorSignature,alt:"Tanda Tangan",className:"h-16 object-contain"}):t.jsx("div",{className:"h-16 flex items-center justify-center text-xs text-slate-400 italic border-b border-dashed",children:"Belum Ditandatangani"}),t.jsxs("p",{className:"text-xs font-semibold text-slate-600 mt-1",children:["(",a.authorizedSigner||a.companyName,")"]})]})]})]})})})}else if(g==="contract"){const j=v;return y?t.jsxs("div",{className:"printable-content bg-white text-black p-8 font-serif leading-relaxed text-sm",children:[t.jsx("h2",{className:"text-xl font-bold text-center mb-1",children:"SURAT PERJANJIAN KERJA SAMA"}),t.jsxs("h3",{className:"text-lg font-bold text-center mb-6",children:["JASA ",y.projectType.toUpperCase()]}),t.jsxs("p",{children:["Pada hari ini, ",k(j.signingDate),", bertempat di ",j.signingLocation,", telah dibuat dan disepakati perjanjian kerja sama antara:"]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK PERTAMA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsxs("td",{children:[": ",a.authorizedSigner]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Jabatan"}),t.jsx("td",{children:": Pemilik Usaha"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsxs("td",{children:[": ",a.address]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsxs("td",{children:[": ",a.phone]})]}),a.idNumber&&t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Identitas"}),t.jsxs("td",{children:[": ",a.idNumber]})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama perusahaannya, ",t.jsx("strong",{children:a.companyName}),", selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK PERTAMA"}),"."]})]}),t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"font-bold",children:"PIHAK KEDUA"}),t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsxs("td",{children:[": ",j.clientName1]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsxs("td",{children:[": ",j.clientAddress1]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsxs("td",{children:[": ",j.clientPhone1]})]}),j.clientName2&&t.jsxs(t.Fragment,{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nama"}),t.jsxs("td",{children:[": ",j.clientName2]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Alamat"}),t.jsxs("td",{children:[": ",j.clientAddress2]})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"pr-4 align-top",children:"Nomor Telepon"}),t.jsxs("td",{children:[": ",j.clientPhone2]})]})]})]})}),t.jsxs("p",{className:"mt-1",children:["Dalam hal ini bertindak atas nama pribadi/bersama, selanjutnya disebut sebagai ",t.jsx("strong",{children:"PIHAK KEDUA"}),"."]})]}),t.jsxs("div",{className:"space-y-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 1: DEFINISI"}),t.jsxs("p",{children:["Pekerjaan adalah jasa ",y.projectType.toLowerCase()," yang diberikan oleh PIHAK PERTAMA untuk acara PIHAK KEDUA. Hari Pelaksanaan adalah tanggal ",k(y.date),". Lokasi Pelaksanaan adalah ",y.location,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 2: RUANG LINGKUP PEKERJAAN"}),t.jsxs("p",{children:["PIHAK PERTAMA akan memberikan jasa fotografi sesuai dengan paket ",y.packageName," yang mencakup: Durasi pemotretan ",j.shootingDuration,", Jumlah foto ",j.guaranteedPhotos,", ",j.albumDetails,", File digital ",j.digitalFilesFormat,", dan ",j.otherItems,". PIHAK PERTAMA akan menyediakan ",j.personnelCount,". Penyerahan hasil akhir dilakukan maksimal ",j.deliveryTimeframe," setelah acara."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 3: HAK DAN KEWAJIBAN PIHAK PERTAMA"}),t.jsx("p",{children:"Hak: Menerima pembayaran sesuai kesepakatan; Menggunakan hasil foto untuk promosi/portofolio dengan persetujuan PIHAK KEDUA. Kewajiban: Melaksanakan pekerjaan secara profesional; Menyerahkan hasil tepat waktu; Menjaga privasi PIHAK KEDUA."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 4: HAK DAN KEWAJIBAN PIHAK KEDUA"}),t.jsx("p",{children:"Hak: Menerima hasil pekerjaan sesuai paket; Meminta revisi minor jika ada kesalahan teknis. Kewajiban: Melakukan pembayaran sesuai jadwal; Memberikan informasi yang dibutuhkan; Menjamin akses kerja di lokasi."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 5: BIAYA DAN CARA PEMBAYARAN"}),t.jsxs("p",{children:["Total biaya jasa adalah sebesar ",pn(y.totalCost),". Pembayaran dilakukan dengan sistem: Uang Muka (DP) sebesar ",pn(y.amountPaid)," dibayarkan pada ",k(j.dpDate),"; Pelunasan sebesar ",pn(y.totalCost-y.amountPaid)," dibayarkan paling lambat pada ",k(j.finalPaymentDate),". Pembayaran dapat ditransfer ke rekening: ",a.bankAccount,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 6: PEMBATALAN"}),t.jsx("p",{dangerouslySetInnerHTML:{__html:j.cancellationPolicy.replace(/\n/g,"<br/>")}})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 7: PENYELESAIAN SENGKETA"}),t.jsxs("p",{children:["Segala sengketa yang timbul akan diselesaikan secara musyawarah. Apabila tidak tercapai, maka akan diselesaikan secara hukum di wilayah hukum ",j.jurisdiction,"."]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-center my-3",children:"PASAL 8: PENUTUP"}),t.jsx("p",{children:"Demikian surat perjanjian ini dibuat dalam 2 (dua) rangkap bermaterai cukup dan mempunyai kekuatan hukum yang sama, ditandatangani dengan penuh kesadaran oleh kedua belah pihak."})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-16",children:[t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK PERTAMA"}),t.jsx("div",{className:"h-28 my-1 flex flex-col items-center justify-center text-gray-400 text-xs",children:j.vendorSignature?t.jsx("img",{src:j.vendorSignature,alt:"Tanda Tangan Vendor",className:"h-24 object-contain"}):t.jsx("span",{className:"italic",children:"(Menunggu TTD Vendor)"})}),t.jsxs("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1",children:["(",a.authorizedSigner,")"]})]}),t.jsxs("div",{className:"text-center w-2/5",children:[t.jsx("p",{children:"PIHAK KEDUA"}),t.jsx("div",{className:"h-28 w-full mx-auto my-1 flex items-center justify-center text-gray-400 text-xs italic",children:j.clientSignature?t.jsx("img",{src:j.clientSignature,alt:"Tanda Tangan Klien",className:"h-24 object-contain"}):t.jsx("span",{className:"italic",children:"Belum Ditandatangani"})}),t.jsxs("p",{className:"border-t-2 border-dotted w-4/5 mx-auto pt-1",children:["(",j.clientName1,j.clientName2?` & ${j.clientName2}`:"",")"]})]})]})]}):t.jsx("div",{className:"text-center p-8",children:t.jsx("p",{className:"text-red-500",children:"Error: Data proyek tidak ditemukan untuk kontrak ini."})})}return null};return t.jsxs(t.Fragment,{children:[t.jsx(nt,{isOpen:!!n,onClose:e,title:n?`${n.type.charAt(0).toUpperCase()+n.type.slice(1)}: ${n.project.projectName}`:"",size:"4xl",children:n&&t.jsxs("div",{children:[t.jsx("div",{className:"printable-area max-h-[65vh] overflow-y-auto pr-4",children:f()}),t.jsxs("div",{className:"mt-6 flex justify-between items-center non-printable border-t border-public-border pt-4",children:[n.type==="contract"&&t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:`font-semibold ${n.data.clientSignature?"text-green-500":"text-yellow-500"}`,children:["Status Anda: ",n.data.clientSignature?"Sudah TTD":"Belum TTD"]}),t.jsxs("p",{className:`font-semibold ${n.data.vendorSignature?"text-green-500":"text-yellow-500"}`,children:["Status ",a.companyName,": ",n.data.vendorSignature?"Sudah TTD":"Belum TTD"]})]}),t.jsxs("div",{className:"space-x-2",children:[n.type==="contract"&&!n.data.clientSignature&&t.jsx("button",{onClick:()=>p(!0),className:"button-primary",children:"Tanda Tangani Kontrak"}),t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-secondary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak / Simpan PDF"]})]})]})]})}),t.jsx(nt,{isOpen:u,onClose:()=>p(!1),title:"Bubuhkan Tanda Tangan Anda",children:t.jsx(Al,{onSave:h,onClose:()=>p(!1)})})]})},Vr=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),Ji=n=>new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),H_=({accessId:n,teamMembers:e,projects:a,teamProjectPayments:s,teamPaymentRecords:r,rewardLedgerEntries:d,showNotification:u,onUpdateRevision:p,sops:h,userProfile:f})=>{const[g,y]=C.useState("dashboard"),[v,k]=C.useState(null),[j,S]=C.useState(null),w=f,P=C.useMemo(()=>e.find(L=>L.portalAccessId===n),[e,n]),A=C.useMemo(()=>a.filter(L=>L.team.some(U=>U.memberId===(P==null?void 0:P.id))).sort((L,U)=>new Date(U.date).getTime()-new Date(L.date).getTime()),[a,P]);if(!P)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-public-bg p-4",children:t.jsxs("div",{className:"w-full max-w-lg p-8 text-center bg-public-surface rounded-2xl shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Portal Tidak Ditemukan"}),t.jsx("p",{className:"mt-4 text-public-text-primary",children:"Tautan yang Anda gunakan tidak valid. Silakan hubungi admin."})]})});const R=[{id:"dashboard",label:"Dasbor",icon:jl},{id:"projects",label:"Proyek & Revisi",icon:ka},{id:"payments",label:"Pembayaran",icon:qa},{id:"performance",label:"Kinerja",icon:ia},{id:"sop",label:"SOP",icon:Or}],O=L=>{if(!P)return null;const U=s.filter(ne=>L.projectPaymentIds.includes(ne.id));return t.jsxs("div",{id:`payment-slip-content-${L.id}`,className:"printable-content bg-white text-black p-6 font-sans",children:[t.jsxs("header",{className:"flex justify-between items-start pb-4 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"SLIP PEMBAYARAN"}),t.jsxs("p",{className:"text-sm text-slate-500",children:["No: ",L.recordNumber]})]}),t.jsx("div",{className:"text-right",children:t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:w.companyName})})]}),t.jsxs("section",{className:"my-6 space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Dibayarkan Kepada:"})," ",P.name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Nomor Rekening:"})," ",P.noRek]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Tanggal Bayar:"})," ",Ji(L.date)]})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-slate-600 mb-2 text-sm",children:"Rincian Proyek:"}),t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-slate-100 print-bg-slate",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 text-left",children:"Proyek"}),t.jsx("th",{className:"p-2 text-right",children:"Fee"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-200",children:U.map(ne=>{var ie;return t.jsxs("tr",{children:[t.jsx("td",{className:"p-2",children:((ie=a.find(q=>q.id===ne.projectId))==null?void 0:ie.projectName)||"N/A"}),t.jsx("td",{className:"p-2 text-right",children:Vr(ne.fee)})]},ne.id)})})]})]}),t.jsx("section",{className:"mt-6 flex justify-end",children:t.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 space-y-2 text-sm text-slate-700",children:t.jsxs("div",{className:"flex justify-between font-bold text-base border-t border-slate-200 mt-2 pt-2 text-slate-900",children:[t.jsx("span",{children:"TOTAL DIBAYAR"}),t.jsx("span",{children:Vr(L.totalAmount)})]})})}),t.jsx("footer",{className:"mt-12 text-xs text-slate-500",children:t.jsxs("div",{className:"flex justify-between items-end",children:[t.jsx("p",{children:"Terima kasih atas kerja samanya."}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{children:"Diverifikasi oleh,"}),L.vendorSignature?t.jsx("img",{src:L.vendorSignature,alt:"Tanda Tangan",className:"h-20 object-contain my-2"}):t.jsx("div",{className:"h-20 flex items-center justify-center my-2 italic text-gray-400",children:"Belum Ditandatangani"}),t.jsxs("p",{className:"font-medium text-slate-900 mt-1 border-t pt-1",children:["(",w.authorizedSigner||w.companyName,")"]})]})]})})]})},H=()=>{switch(g){case"dashboard":return t.jsx(G_,{freelancer:P,projects:A,teamProjectPayments:s});case"projects":return t.jsx(q_,{projects:A,onProjectClick:k,freelancerId:P.id});case"payments":return t.jsx(J_,{freelancer:P,projects:a,teamProjectPayments:s,teamPaymentRecords:r,onSlipView:S});case"performance":return t.jsx(W_,{freelancer:P});case"sop":return t.jsx(z_,{sops:h,assignedProjects:A});default:return null}};return t.jsx("div",{className:"min-h-screen bg-public-bg text-public-text-primary p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("header",{className:"mb-8 p-4 sm:p-6 bg-public-surface rounded-2xl shadow-lg border border-public-border widget-animate",children:[t.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Portal Freelancer"}),t.jsxs("p",{className:"text-lg text-public-text-secondary mt-2",children:["Selamat Datang, ",P.name,"!"]})]}),t.jsx("div",{className:"border-b border-public-border mb-6 widget-animate",style:{animationDelay:"100ms"},children:t.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:R.map(L=>t.jsxs("button",{onClick:()=>y(L.id),className:`shrink-0 inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm ${g===L.id?"border-public-accent text-public-accent":"border-transparent text-public-text-secondary hover:text-public-text-primary"}`,children:[t.jsx(L.icon,{className:"w-5 h-5"})," ",L.label]},L.id))})}),t.jsx("main",{children:H()}),t.jsx(nt,{isOpen:!!v,onClose:()=>k(null),title:`Detail Proyek: ${v==null?void 0:v.projectName}`,size:"3xl",children:v&&t.jsx(Y_,{project:v,freelancer:P,onUpdateRevision:p,showNotification:u,onClose:()=>k(null)})}),t.jsxs(nt,{isOpen:!!j,onClose:()=>S(null),title:`Slip Pembayaran: ${j==null?void 0:j.recordNumber}`,size:"3xl",children:[j&&t.jsx("div",{className:"printable-area",children:O(j)}),t.jsx("div",{className:"mt-6 text-right non-printable",children:t.jsxs("button",{type:"button",onClick:()=>window.print(),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(Na,{className:"w-4 h-4"})," Cetak"]})})]})]})})},G_=({freelancer:n,projects:e,teamProjectPayments:a})=>{const s=C.useMemo(()=>{const d=a.filter(f=>f.teamMemberId===n.id&&f.status==="Unpaid").reduce((f,g)=>f+g.fee,0),u=a.filter(f=>f.teamMemberId===n.id&&f.status==="Paid").reduce((f,g)=>f+g.fee,0),p=e.flatMap(f=>f.revisions||[]).filter(f=>f.freelancerId===n.id&&f.status===qt.PENDING).length,h=e.filter(f=>f.status==="Selesai"&&f.team.some(g=>g.memberId===n.id)).length;return{unpaidFee:d,paidFee:u,pendingRevisions:p,completedProjects:h,activeProjects:e.filter(f=>f.status!=="Selesai"&&f.status!=="Dibatalkan").length}},[n,e,a]),r=C.useMemo(()=>{const d=e.flatMap(h=>(h.revisions||[]).map(f=>({...f,type:"revision",projectName:h.projectName,projectId:h.id,date:f.deadline}))).filter(h=>h.freelancerId===n.id&&h.status===qt.PENDING),u=e.filter(h=>new Date(h.date)>=new Date&&h.status!=="Selesai"&&h.status!=="Dibatalkan").sort((h,f)=>new Date(h.date).getTime()-new Date(f.date).getTime())[0],p=[...d];return u&&p.push({...u,type:"project"}),p.sort((h,f)=>new Date(h.date).getTime()-new Date(f.date).getTime())},[e,n]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"widget-animate",style:{animationDelay:"200ms"},children:t.jsx(qe,{icon:t.jsx(qa,{className:"w-6 h-6"}),title:"Total Fee Diterima",value:Vr(s.paidFee),iconBgColor:"bg-green-500/20",iconColor:"text-green-400"})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"300ms"},children:t.jsx(qe,{icon:t.jsx(wl,{className:"w-6 h-6"}),title:"Fee Belum Dibayar",value:Vr(s.unpaidFee),iconBgColor:"bg-red-500/20",iconColor:"text-red-400"})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"400ms"},children:t.jsx(qe,{icon:t.jsx(ka,{className:"w-6 h-6"}),title:"Proyek Aktif",value:s.activeProjects.toString(),iconBgColor:"bg-blue-500/20",iconColor:"text-blue-400"})}),t.jsx("div",{className:"widget-animate",style:{animationDelay:"500ms"},children:t.jsx(qe,{icon:t.jsx(Ur,{className:"w-6 h-6"}),title:"Proyek Selesai",value:s.completedProjects.toString(),iconBgColor:"bg-indigo-500/20",iconColor:"text-indigo-400"})})]}),t.jsxs("div",{className:"bg-public-surface p-4 sm:p-6 rounded-2xl shadow-lg border border-public-border widget-animate",style:{animationDelay:"600ms"},children:[t.jsx("h3",{className:"text-xl font-bold text-public-text-primary mb-4",children:"Agenda & Tugas Mendesak"}),t.jsx("div",{className:"space-y-3",children:r.length>0?r.map((d,u)=>t.jsxs("div",{className:"p-3 bg-public-bg rounded-lg flex justify-between items-center widget-animate",style:{animationDelay:`${700+u*100}ms`},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[d.type==="revision"?t.jsx(ks,{className:"w-5 h-5 text-purple-400"}):t.jsx(Gs,{className:"w-5 h-5 text-blue-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-public-text-primary",children:d.type==="revision"?"Deadline Revisi":"Proyek Mendatang"}),t.jsx("p",{className:"text-sm text-public-text-secondary",children:d.projectName})]})]}),t.jsx("p",{className:"text-sm font-medium text-public-text-primary",children:Ji(d.date)})]},u)):t.jsx("p",{className:"text-center text-public-text-secondary py-8",children:"Tidak ada agenda atau tugas mendesak."})})]})]})},q_=({projects:n,onProjectClick:e,freelancerId:a})=>t.jsxs("div",{className:"space-y-4",children:[n.map((s,r)=>{const d=(s.revisions||[]).filter(p=>p.freelancerId===a&&p.status===qt.PENDING).length,u=s.team.find(p=>p.memberId===a);return t.jsxs("div",{onClick:()=>e(s),className:"p-4 bg-public-surface rounded-xl border border-public-border cursor-pointer hover:border-public-accent flex justify-between items-center transition-all duration-200 hover:shadow-md widget-animate",style:{animationDelay:`${r*100}ms`},children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-public-text-primary",children:s.projectName}),t.jsxs("p",{className:"text-sm text-public-text-secondary mt-1",children:[s.clientName," - ",Ji(s.date)]}),(u==null?void 0:u.subJob)&&t.jsx("p",{className:"text-xs font-semibold text-public-accent mt-2 bg-public-accent/10 px-2 py-1 rounded-md inline-block",children:u.subJob})]}),d>0&&t.jsxs("span",{className:"bg-purple-500/20 text-purple-300 text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 flex-shrink-0",children:[t.jsx(ks,{className:"w-4 h-4"}),d," Menunggu Update"]})]},s.id)}),n.length===0&&t.jsx("div",{className:"bg-public-surface p-6 rounded-2xl text-center widget-animate",children:t.jsx("p",{className:"text-public-text-secondary py-8",children:"Anda belum ditugaskan ke proyek manapun."})})]}),J_=({freelancer:n,projects:e,teamProjectPayments:a,teamPaymentRecords:s,onSlipView:r})=>t.jsxs("div",{className:"bg-public-surface p-4 sm:p-6 rounded-2xl shadow-lg border border-public-border widget-animate",children:[t.jsx("h2",{className:"text-xl font-bold text-public-text-primary mb-4",children:"Riwayat Pembayaran"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-public-bg",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left",children:"Proyek"}),t.jsx("th",{className:"p-3 text-left",children:"Tanggal"}),t.jsx("th",{className:"p-3 text-right",children:"Fee"}),t.jsx("th",{className:"p-3 text-center",children:"Status & Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-public-border",children:a.filter(d=>d.teamMemberId===n.id).map((d,u)=>{var f;const h=d.status==="Paid"?s.find(g=>g.projectPaymentIds.includes(d.id)):null;return t.jsxs("tr",{className:"widget-animate",style:{animationDelay:`${u*50}ms`},children:[t.jsx("td",{className:"p-3 font-semibold text-public-text-primary",children:((f=e.find(g=>g.id===d.projectId))==null?void 0:f.projectName)||"N/A"}),t.jsx("td",{className:"p-3 text-public-text-secondary",children:Ji(d.date)}),t.jsx("td",{className:"p-3 text-right font-medium text-public-text-primary",children:Vr(d.fee)}),t.jsxs("td",{className:"p-3 text-center space-x-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d.status==="Paid"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:d.status==="Paid"?"Lunas":"Belum Lunas"}),h&&t.jsx("button",{onClick:()=>r(h),className:"text-xs font-semibold text-public-accent hover:underline",children:"Lihat Slip"})]})]},d.id)})})]})})]}),W_=({freelancer:n})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-public-surface p-6 rounded-2xl shadow-lg border border-public-border text-center widget-animate",style:{animationDelay:"100ms"},children:[t.jsx("h3",{className:"text-lg font-bold text-public-text-primary mb-2",children:"Peringkat Kinerja"}),t.jsxs("div",{className:"flex justify-center items-center gap-2",children:[t.jsx(ia,{className:"w-8 h-8 text-yellow-400 fill-current"}),t.jsxs("p",{className:"text-3xl font-bold text-public-text-primary",children:[n.rating.toFixed(1)," / 5.0"]})]})]}),t.jsxs("div",{className:"bg-public-surface p-6 rounded-2xl shadow-lg border border-public-border widget-animate",style:{animationDelay:"200ms"},children:[t.jsx("h3",{className:"text-xl font-bold text-public-text-primary mb-4",children:"Catatan Kinerja dari Admin"}),t.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:[n.performanceNotes.map((e,a)=>t.jsxs("div",{className:`p-4 rounded-lg border-l-4 widget-animate ${e.type===xa.PRAISE?"border-green-400 bg-green-500/5":"border-yellow-400 bg-yellow-500/5"}`,style:{animationDelay:`${300+a*100}ms`},children:[t.jsxs("p",{className:"text-sm text-public-text-primary italic",children:['"',e.note,'"']}),t.jsxs("p",{className:"text-right text-xs text-public-text-secondary mt-2",children:["- ",Ji(e.date)]})]},e.id)),n.performanceNotes.length===0&&t.jsx("p",{className:"text-center text-public-text-secondary py-8",children:"Belum ada catatan kinerja."})]})]})]}),z_=({sops:n,assignedProjects:e})=>{const[a,s]=C.useState(null),r=C.useMemo(()=>new Set(e.map(p=>p.projectType)),[e]),d=n.filter(p=>r.has(p.category)),u=n.filter(p=>!r.has(p.category));return t.jsxs("div",{className:"space-y-6",children:[d.length>0&&t.jsxs("div",{className:"bg-public-surface p-4 sm:p-6 rounded-2xl shadow-lg border border-public-border widget-animate",style:{animationDelay:"100ms"},children:[t.jsx("h2",{className:"text-xl font-bold text-public-text-primary mb-4",children:"SOP Relevan untuk Proyek Anda"}),t.jsx("div",{className:"space-y-3",children:d.map(p=>t.jsxs("div",{onClick:()=>s(p),className:"p-3 bg-public-bg rounded-lg flex justify-between items-center cursor-pointer hover:bg-public-bg/70",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Or,{className:"w-5 h-5 text-public-accent"}),t.jsx("p",{className:"font-semibold text-public-text-primary",children:p.title})]}),t.jsx("span",{className:"text-xs font-medium bg-public-surface text-public-text-secondary px-2 py-1 rounded-full",children:p.category})]},p.id))})]}),t.jsxs("div",{className:"bg-public-surface p-4 sm:p-6 rounded-2xl shadow-lg border border-public-border widget-animate",style:{animationDelay:"200ms"},children:[t.jsx("h2",{className:"text-xl font-bold text-public-text-primary mb-4",children:"Semua SOP"}),t.jsx("div",{className:"space-y-3",children:u.map(p=>t.jsxs("div",{onClick:()=>s(p),className:"p-3 bg-public-bg rounded-lg flex justify-between items-center cursor-pointer hover:bg-public-bg/70",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Or,{className:"w-5 h-5 text-public-accent"}),t.jsx("p",{className:"font-semibold text-public-text-primary",children:p.title})]}),t.jsx("span",{className:"text-xs font-medium bg-public-surface text-public-text-secondary px-2 py-1 rounded-full",children:p.category})]},p.id))})]}),t.jsx(nt,{isOpen:!!a,onClose:()=>s(null),title:(a==null?void 0:a.title)||"",size:"4xl",children:a&&t.jsx("div",{className:"prose prose-sm md:prose-base prose-invert max-w-none max-h-[70vh] overflow-y-auto",dangerouslySetInnerHTML:{__html:a.content.replace(/\n/g,"<br />")}})})]})},Y_=({project:n,freelancer:e,onUpdateRevision:a,showNotification:s,onClose:r})=>{const[d,u]=C.useState({});C.useEffect(()=>{if(n&&n.revisions){const y=n.revisions.reduce((v,k)=>(v[k.id]={freelancerNotes:k.freelancerNotes||"",driveLink:k.driveLink||""},v),{});u(y)}},[n]);const p=y=>{if(!n)return;const v=`${window.location.origin}${window.location.pathname}#/revision-form?projectId=${n.id}&freelancerId=${y.freelancerId}&revisionId=${y.id}`;navigator.clipboard.writeText(v).then(()=>{s("Tautan revisi berhasil disalin!")},k=>{s("Gagal menyalin tautan."),console.error("Could not copy text: ",k)})},h=(y,v,k)=>{u(j=>({...j,[y]:{...j[y]||{freelancerNotes:"",driveLink:""},[v]:k}}))},f=y=>{const v=d[y.id];if(!v||!v.driveLink){alert("Harap isi tautan Google Drive hasil revisi.");return}a(n.id,y.id,{freelancerNotes:v.freelancerNotes||"",driveLink:v.driveLink||"",status:qt.COMPLETED}),s("Update revisi telah berhasil dikirim!"),r()},g=n.team.find(y=>y.memberId===e.id);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-2",children:"Informasi Umum"}),t.jsxs("div",{className:"text-sm space-y-2 p-3 bg-public-bg rounded-lg",children:[g&&t.jsxs("p",{children:[t.jsx("strong",{children:"Peran Anda:"})," ",g.role," ",g.subJob&&t.jsxs("span",{className:"text-public-text-secondary",children:["(",g.subJob,")"]})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Klien:"})," ",n.clientName]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Lokasi:"})," ",n.location]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Waktu:"})," ",n.startTime||"N/A"," - ",n.endTime||"N/A"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Brief/Moodboard:"})," ",n.driveLink?t.jsx("a",{href:n.driveLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Buka Tautan"}):"N/A"]}),n.notes&&t.jsxs("p",{className:"whitespace-pre-wrap mt-2 pt-2 border-t border-public-border",children:[t.jsx("strong",{children:"Catatan:"})," ",n.notes]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gradient mb-2",children:"Tugas Revisi Anda"}),t.jsxs("div",{className:"space-y-3",children:[(n.revisions||[]).filter(y=>y.freelancerId===e.id).map(y=>{var v,k;return t.jsxs("div",{className:"p-4 bg-public-bg rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("p",{className:"text-xs text-public-text-secondary",children:["Deadline: ",Ji(y.deadline)]}),t.jsxs("button",{onClick:()=>p(y),className:"text-xs font-semibold text-public-accent hover:underline inline-flex items-center gap-1",children:[t.jsx(Fn,{className:"w-3 h-3"})," Bagikan Tautan Revisi"]})]}),t.jsxs("p",{className:"text-sm my-2 p-3 bg-public-surface rounded-md whitespace-pre-wrap",children:[t.jsx("strong",{children:"Catatan dari Admin:"}),t.jsx("br",{}),y.adminNotes]}),y.status===qt.COMPLETED?t.jsx("div",{className:"p-3 bg-green-500/10 rounded-md text-sm",children:t.jsx("p",{className:"font-semibold text-green-400",children:"Revisi Selesai"})}):t.jsxs("form",{onSubmit:j=>{j.preventDefault(),f(y)},className:"space-y-3 pt-3 border-t border-public-border",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{onChange:j=>h(y.id,"freelancerNotes",j.target.value),value:((v=d[y.id])==null?void 0:v.freelancerNotes)||"",rows:2,className:"input-field",placeholder:" "}),t.jsx("label",{className:"input-label",children:"Catatan Tambahan (Opsional)"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"url",onChange:j=>h(y.id,"driveLink",j.target.value),value:((k=d[y.id])==null?void 0:k.driveLink)||"",className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{className:"input-label",children:"Tautan Google Drive Hasil Revisi"})]}),t.jsx("button",{type:"submit",className:"button-primary w-full",children:"Tandai Selesai & Kirim"})]})]},y.id)}),(n.revisions||[]).filter(y=>y.freelancerId===e.id).length===0&&t.jsx("p",{className:"text-sm text-center text-public-text-secondary py-4",children:"Tidak ada tugas revisi untuk proyek ini."})]})]})]})},Q_=n=>new Date(n).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),Og=n=>{switch(n){case Xt.DRAFT:return"border-gray-500";case Xt.SCHEDULED:return"border-blue-500";case Xt.POSTED:return"border-green-500";case Xt.CANCELED:return"border-red-500";default:return"border-gray-500"}},X_=n=>n==="Instagram"?"":n==="TikTok"?"":n==="Website"?"":"",Fc={projectId:"",postType:Ns.INSTAGRAM_FEED,scheduledDate:new Date().toISOString().split("T")[0],caption:"",mediaUrl:"",status:Xt.DRAFT,notes:""},Z_=({posts:n,onPostClick:e,onDayClick:a})=>{const[s,r]=C.useState(new Date),d=new Date(s.getFullYear(),s.getMonth(),1),u=new Date(s.getFullYear(),s.getMonth()+1,0),p=C.useMemo(()=>{const k=[],j=new Date(d);j.setDate(j.getDate()-j.getDay());const S=new Date(u);S.setDate(S.getDate()+(6-S.getDay()));let w=j;for(;w<=S;)k.push(new Date(w)),w.setDate(w.getDate()+1);return k},[s]),h=C.useMemo(()=>{const k=new Map;return n.forEach(j=>{if(j.status===Xt.SCHEDULED||j.status===Xt.POSTED){const S=new Date(j.scheduledDate).toDateString();k.has(S)||k.set(S,[]),k.get(S).push(j)}}),k},[n]),f=()=>r(new Date(s.getFullYear(),s.getMonth()-1,1)),g=()=>r(new Date(s.getFullYear(),s.getMonth()+1,1)),y=()=>r(new Date),v=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];return t.jsxs("div",{className:"bg-brand-surface p-4 rounded-2xl shadow-lg border border-brand-border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-brand-input",children:t.jsx(Jg,{className:"w-5 h-5"})}),t.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-brand-input",children:t.jsx(Hr,{className:"w-5 h-5"})}),t.jsx("h2",{className:"text-lg font-semibold text-brand-text-light ml-2",children:s.toLocaleDateString("id-ID",{month:"long",year:"numeric"})})]}),t.jsx("button",{onClick:y,className:"button-secondary px-3 py-1.5 text-sm",children:"Hari Ini"})]}),t.jsxs("div",{className:"grid grid-cols-7",children:[v.map(k=>t.jsx("div",{className:"text-center py-2 text-xs font-bold text-brand-text-secondary border-b border-l border-brand-border",children:k},k)),p.map((k,j)=>{const S=k.getMonth()===s.getMonth(),w=k.toDateString()===new Date().toDateString(),P=h.get(k.toDateString())||[];return t.jsxs("div",{onClick:()=>a(k),className:`relative border-t border-l border-brand-border p-1.5 flex flex-col min-h-[120px] ${S?"bg-brand-surface":"bg-brand-bg"} cursor-pointer hover:bg-brand-input transition-colors`,children:[t.jsx("span",{className:`text-xs font-semibold self-start mb-1 ${S?"text-brand-text-light":"text-brand-text-secondary/50"} ${w?"bg-brand-accent text-white rounded-full w-5 h-5 flex items-center justify-center":""}`,children:k.getDate()}),t.jsxs("div",{className:"flex-grow space-y-1 overflow-hidden",children:[P.slice(0,3).map(A=>t.jsx("div",{onClick:R=>{R.stopPropagation(),e(A)},className:"text-xs p-1 rounded text-white truncate cursor-pointer",style:{backgroundColor:A.status===Xt.POSTED?"#16a34a":"#3b82f6"},children:t.jsx("p",{className:"font-semibold truncate",children:A.clientName})},A.id)),P.length>3&&t.jsxs("p",{className:"text-xs text-brand-text-secondary text-center mt-1",children:["+",P.length-3," lagi"]})]})]},j)})]})]})},eP=({posts:n,setPosts:e,projects:a,showNotification:s})=>{const[r,d]=C.useState(null),[u,p]=C.useState(!1),[h,f]=C.useState("add"),[g,y]=C.useState(null),[v,k]=C.useState(Fc),[j,S]=C.useState(!1),[w,P]=C.useState([]),[A,R]=C.useState(!1),[O,H]=C.useState("kanban"),[L,U]=C.useState("all"),ne=C.useMemo(()=>{const E=new Date,T=new Date(E.getFullYear(),E.getMonth(),1),B=new Date(E.getFullYear(),E.getMonth()+1,0),ue=n.filter(he=>{const Q=new Date(he.scheduledDate);return he.status===Xt.SCHEDULED&&Q>=T&&Q<=B}).length,ke=n.filter(he=>he.status===Xt.DRAFT).length,G=n.filter(he=>he.status===Xt.POSTED).length;return{scheduledThisMonth:ue,inDraft:ke,postedTotal:G}},[n]),ie=(E,T)=>{E.dataTransfer.setData("postId",T),d(T)},q=E=>E.preventDefault(),V=(E,T)=>{E.preventDefault();const B=E.dataTransfer.getData("postId");e(ke=>ke.map(G=>G.id===B?{...G,status:T}:G)),d(null),U("all");const ue=n.find(ke=>ke.id===B);ue&&s(`Post untuk "${ue.clientName}" dipindahkan ke "${T}".`)},ce=(E,T)=>{if(f(E),E==="edit"&&T){y(T);const{clientName:B,platform:ue,...ke}=T;k(ke)}else y(null),k(Fc);p(!0)},Ce=()=>{p(!1)},Re=E=>{const{name:T,value:B}=E.target;k(ue=>({...ue,[T]:B}))},Ue=E=>{if(E.preventDefault(),!v.projectId){alert("Harap pilih proyek terlebih dahulu.");return}const T=a.find(ke=>ke.id===v.projectId);if(!T){alert("Proyek tidak valid.");return}let B="Instagram";v.postType===Ns.TIKTOK&&(B="TikTok"),v.postType===Ns.BLOG&&(B="Website");const ue={...v,clientName:T.clientName,platform:B};if(h==="add"){const ke={...ue,id:crypto.randomUUID()};e(G=>[...G,ke]),s("Postingan baru berhasil ditambahkan ke draf.")}else if(g){const ke={...ue,id:g.id};e(G=>G.map(he=>he.id===g.id?ke:he)),s("Postingan berhasil diperbarui.")}Ce()},re=E=>{window.confirm("Yakin ingin menghapus postingan ini?")&&(e(T=>T.filter(B=>B.id!==E)),s("Postingan berhasil dihapus."),Ce())},De=E=>{ce("add"),k({...Fc,scheduledDate:E.toISOString().split("T")[0]})},J=async()=>{if(!v.projectId){s("Pilih proyek terlebih dahulu untuk membuat caption.");return}const E=a.find(T=>T.id===v.projectId);if(!E){s("Detail proyek tidak ditemukan.");return}S(!0),P([]);try{const T=new Mx({apiKey:"AIzaSyABhVXFTXJu0Y1bPHETLTxv_GSa_OuW064"}),B=`
                Based on the following photography project details, generate 3 creative and engaging social media caption options in Indonesian. The tone should be professional and celebratory.

                Project Details:
                - Client Names: ${E.clientName}
                - Event Type: ${E.projectType}
                - Location: ${E.location}

                Return the response as a JSON object with a single key 'captions' which is an array of strings. For example: {"captions": ["caption 1", "caption 2", "caption 3"]}
            `,ke=(await T.models.generateContent({model:"gemini-2.5-flash",contents:B,config:{responseMimeType:"application/json",responseSchema:{type:ba.OBJECT,properties:{captions:{type:ba.ARRAY,items:{type:ba.STRING}}}}}})).text.trim(),G=JSON.parse(ke);if(G.captions&&Array.isArray(G.captions))P(G.captions),R(!0);else throw new Error("Invalid response format from AI.")}catch(T){console.error("Error generating captions:",T),s("Gagal membuat caption. Coba lagi nanti.")}finally{S(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Perencana Media Sosial",subtitle:"Rencanakan, kelola, dan lacak semua postingan media sosial Anda.",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"p-1 bg-brand-bg rounded-lg flex items-center h-fit",children:[t.jsxs("button",{onClick:()=>H("kanban"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${O==="kanban"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:[t.jsx(Vc,{className:"w-5 h-5"})," Papan"]}),t.jsxs("button",{onClick:()=>H("calendar"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${O==="calendar"?"bg-brand-surface shadow-sm text-brand-text-light":"text-brand-text-secondary"}`,children:[t.jsx(Gs,{className:"w-5 h-5"})," Kalender"]})]}),t.jsxs("button",{onClick:()=>ce("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"})," Buat Postingan"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("button",{onClick:()=>U(E=>E===Xt.SCHEDULED?"all":Xt.SCHEDULED),className:"text-left w-full",children:t.jsx(qe,{icon:t.jsx(Gs,{className:"w-6 h-6"}),title:"Terjadwal Bulan Ini",value:ne.scheduledThisMonth.toString()})}),t.jsx("button",{onClick:()=>U(E=>E===Xt.DRAFT?"all":Xt.DRAFT),className:"text-left w-full",children:t.jsx(qe,{icon:t.jsx(ln,{className:"w-6 h-6"}),title:"Dalam Draf",value:ne.inDraft.toString()})}),t.jsx("button",{onClick:()=>U(E=>E===Xt.POSTED?"all":Xt.POSTED),className:"text-left w-full",children:t.jsx(qe,{icon:t.jsx(Ur,{className:"w-6 h-6"}),title:"Total Diposting",value:ne.postedTotal.toString()})}),t.jsx("button",{onClick:()=>U("all"),className:"text-left w-full",children:t.jsx(qe,{icon:t.jsx(Fn,{className:"w-6 h-6"}),title:"Tampilkan Semua",value:n.length.toString()})})]}),O==="kanban"?t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:Object.values(Xt).map(E=>t.jsxs("div",{onDragOver:q,onDrop:T=>V(T,E),className:`w-72 flex-shrink-0 bg-brand-bg rounded-2xl border border-brand-border flex flex-col transition-opacity duration-300 ${L!=="all"&&L!==E?"opacity-40":"opacity-100"}`,children:[t.jsxs("div",{className:`p-4 font-semibold text-brand-text-light border-b-2 ${Og(E)} flex justify-between items-center sticky top-0 bg-brand-bg/80 backdrop-blur-sm rounded-t-2xl z-10`,children:[t.jsx("span",{children:E}),t.jsx("span",{className:"text-sm font-normal bg-brand-surface text-brand-text-secondary px-2.5 py-1 rounded-full",children:n.filter(T=>T.status===E).length})]}),t.jsx("div",{className:"p-3 space-y-3 h-[calc(100vh-500px)] overflow-y-auto",children:n.filter(T=>T.status===E).map(T=>t.jsxs("div",{draggable:!0,onDragStart:B=>ie(B,T.id),onClick:()=>ce("edit",T),className:`p-4 bg-brand-surface rounded-xl cursor-grab border-l-4 shadow-lg ${r===T.id?"opacity-50 ring-2 ring-brand-accent":"opacity-100"}`,style:{borderLeftColor:Og(T.status).replace("border-","")},children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"font-semibold text-sm text-brand-text-light",children:T.clientName}),t.jsx("span",{className:"text-lg",children:X_(T.platform)})]}),t.jsx("p",{className:"text-xs text-brand-text-secondary mt-1",children:T.postType}),t.jsxs("p",{className:"text-xs text-brand-text-primary mt-2 pt-2 border-t border-brand-border italic truncate",children:['"',T.caption||"Tanpa caption",'"']}),t.jsx("div",{className:"flex justify-between items-center mt-3 text-xs",children:t.jsx("span",{className:"text-brand-text-secondary",children:Q_(T.scheduledDate)})})]},T.id))})]},E))}):t.jsx(Z_,{posts:n,onPostClick:E=>ce("edit",E),onDayClick:De}),t.jsx(nt,{isOpen:u,onClose:Ce,title:h==="add"?"Buat Postingan Baru":"Edit Postingan",children:t.jsxs("form",{onSubmit:Ue,className:"space-y-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"projectId",name:"projectId",value:v.projectId,onChange:Re,className:"input-field",required:!0,children:[t.jsx("option",{value:"",children:"Pilih Proyek Terkait..."}),a.map(E=>t.jsx("option",{value:E.id,children:E.projectName},E.id))]}),t.jsx("label",{htmlFor:"projectId",className:"input-label",children:"Proyek"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"postType",name:"postType",value:v.postType,onChange:Re,className:"input-field",required:!0,children:Object.values(Ns).map(E=>t.jsx("option",{value:E,children:E},E))}),t.jsx("label",{htmlFor:"postType",className:"input-label",children:"Jenis Postingan"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"scheduledDate",name:"scheduledDate",value:v.scheduledDate,onChange:Re,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"scheduledDate",className:"input-label",children:"Tanggal Jadwal"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"caption",name:"caption",value:v.caption,onChange:Re,className:"input-field",rows:5,placeholder:" "}),t.jsx("label",{htmlFor:"caption",className:"input-label",children:"Caption"}),t.jsxs("button",{type:"button",onClick:J,disabled:j,className:"absolute right-2 top-2 text-xs font-semibold text-brand-accent hover:underline inline-flex items-center gap-1",children:[t.jsx(Wg,{className:"w-4 h-4"})," ",j?"Membuat...":"Buat dengan AI"]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"url",id:"mediaUrl",name:"mediaUrl",value:v.mediaUrl,onChange:Re,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"mediaUrl",className:"input-label",children:"Tautan Media (Google Drive)"})]}),t.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-brand-border",children:[t.jsx("div",{children:h==="edit"&&g&&t.jsx("button",{type:"button",onClick:()=>re(g.id),className:"button-secondary !text-brand-danger !border-brand-danger hover:!bg-brand-danger/10",children:"Hapus"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:Ce,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:h==="add"?"Simpan Draf":"Update Postingan"})]})]})]})}),t.jsx(nt,{isOpen:A,onClose:()=>R(!1),title:"Pilih Caption dari AI",children:t.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:w.map((E,T)=>t.jsxs("div",{className:"p-4 bg-brand-bg rounded-lg",children:[t.jsx("p",{className:"text-sm text-brand-text-primary whitespace-pre-wrap",children:E}),t.jsx("button",{onClick:()=>{k(B=>({...B,caption:E})),R(!1)},className:"button-secondary text-xs mt-3",children:"Gunakan Caption Ini"})]},T))})})]})},tP=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),$g={code:"",discountType:"percentage",discountValue:"",isActive:!0,maxUsage:"",expiryDate:""},nP=({promoCodes:n,setPromoCodes:e,projects:a,showNotification:s})=>{const[r,d]=C.useState(!1),[u,p]=C.useState("add"),[h,f]=C.useState(null),[g,y]=C.useState($g),v=(P,A)=>{var R;p(P),P==="edit"&&A?(f(A),y({code:A.code,discountType:A.discountType,discountValue:A.discountValue.toString(),isActive:A.isActive,maxUsage:((R=A.maxUsage)==null?void 0:R.toString())||"",expiryDate:A.expiryDate||""})):(f(null),y($g)),d(!0)},k=()=>{d(!1)},j=P=>{const{name:A,value:R,type:O}=P.target,H=O==="checkbox",L=H?P.target.checked:!1;y(U=>({...U,[A]:H?L:R}))},S=P=>{if(P.preventDefault(),u==="add"){const A={id:crypto.randomUUID(),code:g.code.toUpperCase(),discountType:g.discountType,discountValue:Number(g.discountValue),isActive:g.isActive,usageCount:0,maxUsage:g.maxUsage?Number(g.maxUsage):null,expiryDate:g.expiryDate||null,createdAt:new Date().toISOString()};e(R=>[...R,A]),s(`Kode promo "${A.code}" berhasil dibuat.`)}else if(h){const A={...h,code:g.code.toUpperCase(),discountType:g.discountType,discountValue:Number(g.discountValue),isActive:g.isActive,maxUsage:g.maxUsage?Number(g.maxUsage):null,expiryDate:g.expiryDate||null};e(R=>R.map(O=>O.id===h.id?A:O)),s(`Kode promo "${A.code}" berhasil diperbarui.`)}k()},w=P=>{if(a.some(R=>R.promoCodeId===P)){s("Kode promo tidak dapat dihapus karena sedang digunakan pada proyek.");return}window.confirm("Apakah Anda yakin ingin menghapus kode promo ini?")&&(e(R=>R.filter(O=>O.id!==P)),s("Kode promo berhasil dihapus."))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Manajemen Kode Promo",subtitle:"Buat dan kelola kode diskon untuk klien Anda.",children:t.jsxs("button",{onClick:()=>v("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Buat Kode Baru"]})}),t.jsx("div",{className:"bg-brand-surface p-4 rounded-xl shadow-lg border border-brand-border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-xs text-brand-text-secondary uppercase",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Kode"}),t.jsx("th",{className:"px-4 py-3",children:"Diskon"}),t.jsx("th",{className:"px-4 py-3",children:"Status"}),t.jsx("th",{className:"px-4 py-3",children:"Penggunaan"}),t.jsx("th",{className:"px-4 py-3",children:"Kadaluwarsa"}),t.jsx("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),t.jsx("tbody",{className:"divide-y divide-brand-border",children:n.map(P=>t.jsxs("tr",{className:"hover:bg-brand-bg",children:[t.jsx("td",{className:"px-4 py-3 font-semibold text-brand-text-light",children:P.code}),t.jsx("td",{className:"px-4 py-3",children:P.discountType==="percentage"?`${P.discountValue}%`:tP(P.discountValue)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:P.isActive?"Aktif":"Tidak Aktif"})}),t.jsxs("td",{className:"px-4 py-3",children:[P.usageCount," / ",P.maxUsage??""]}),t.jsx("td",{className:"px-4 py-3",children:P.expiryDate?new Date(P.expiryDate).toLocaleDateString("id-ID"):"Tidak ada"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("button",{onClick:()=>v("edit",P),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Edit",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>w(P.id),className:"p-2 text-brand-text-secondary hover:bg-brand-input rounded-full",title:"Hapus",children:t.jsx(fn,{className:"w-5 h-5"})})]})})]},P.id))})]})})}),t.jsx(nt,{isOpen:r,onClose:k,title:u==="add"?"Buat Kode Promo Baru":"Edit Kode Promo",children:t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"code",name:"code",value:g.code,onChange:j,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"code",className:"input-label",children:"Kode Promo"})]}),t.jsxs("div",{className:"input-group",children:[t.jsxs("select",{id:"discountType",name:"discountType",value:g.discountType,onChange:j,className:"input-field",children:[t.jsx("option",{value:"percentage",children:"Persentase"}),t.jsx("option",{value:"fixed",children:"Nominal Tetap"})]}),t.jsx("label",{htmlFor:"discountType",className:"input-label",children:"Jenis Diskon"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"discountValue",name:"discountValue",value:g.discountValue,onChange:j,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"discountValue",className:"input-label",children:g.discountType==="percentage"?"Nilai Persentase (%)":"Jumlah Diskon (IDR)"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"number",id:"maxUsage",name:"maxUsage",value:g.maxUsage,onChange:j,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"maxUsage",className:"input-label",children:"Maks. Penggunaan (kosongkan = )"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:g.expiryDate,onChange:j,className:"input-field",placeholder:" "}),t.jsx("label",{htmlFor:"expiryDate",className:"input-label",children:"Tanggal Kadaluwarsa (kosongkan = )"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:g.isActive,onChange:j,className:"h-4 w-4 rounded"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Aktifkan Kode Promo"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:k,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:u==="add"?"Simpan":"Update"})]})]})})]})},aP=({sops:n,setSops:e,profile:a,showNotification:s})=>{const[r,d]=C.useState(!1),[u,p]=C.useState("add"),[h,f]=C.useState(null),g={title:"",category:a.sopCategories[0]||"",content:""},[y,v]=C.useState(g),[k,j]=C.useState(()=>new Set(a.sopCategories)),S=(L,U)=>{p(L),(L==="edit"||L==="view")&&U?(f(U),v({title:U.title,category:U.category,content:U.content})):(f(null),v(g)),d(!0)},w=()=>d(!1),P=L=>{const{name:U,value:ne}=L.target;v(ie=>({...ie,[U]:ne}))},A=L=>{if(L.preventDefault(),u==="add"){const U={id:crypto.randomUUID(),...y,lastUpdated:new Date().toISOString()};e(ne=>[...ne,U].sort((ie,q)=>ie.title.localeCompare(q.title))),s("SOP baru berhasil ditambahkan.")}else if(h){const U={...h,...y,lastUpdated:new Date().toISOString()};e(ne=>ne.map(ie=>ie.id===h.id?U:ie)),s("SOP berhasil diperbarui.")}w()},R=L=>{window.confirm("Yakin ingin menghapus SOP ini?")&&(e(U=>U.filter(ne=>ne.id!==L)),s("SOP berhasil dihapus."))},O=L=>{j(U=>{const ne=new Set(U);return ne.has(L)?ne.delete(L):ne.add(L),ne})},H=n.reduce((L,U)=>(L[U.category]||(L[U.category]=[]),L[U.category].push(U),L),{});return t.jsxs("div",{className:"space-y-6",children:[t.jsx(Hn,{title:"Standar Operasional Prosedur (SOP)",subtitle:"Kelola panduan kerja untuk menjaga kualitas dan konsistensi tim.",children:t.jsxs("button",{onClick:()=>S("add"),className:"button-primary inline-flex items-center gap-2",children:[t.jsx(nn,{className:"w-5 h-5"}),"Tambah SOP Baru"]})}),t.jsx("div",{className:"space-y-4",children:a.sopCategories.map(L=>t.jsxs("div",{className:"bg-brand-surface rounded-2xl shadow-lg border border-brand-border",children:[t.jsxs("button",{onClick:()=>O(L),className:"w-full flex justify-between items-center p-4",children:[t.jsx("h3",{className:"font-semibold text-lg text-brand-text-light",children:L}),k.has(L)?t.jsx(ya,{className:"w-5 h-5 text-brand-text-secondary"}):t.jsx(_a,{className:"w-5 h-5 text-brand-text-secondary"})]}),k.has(L)&&t.jsxs("div",{className:"p-4 border-t border-brand-border space-y-3",children:[(H[L]||[]).map(U=>t.jsxs("div",{onClick:()=>S("view",U),className:"p-3 bg-brand-bg rounded-lg flex justify-between items-center cursor-pointer hover:bg-brand-input",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Or,{className:"w-5 h-5 text-brand-accent"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-brand-text-light",children:U.title}),t.jsxs("p",{className:"text-xs text-brand-text-secondary",children:["Diperbarui: ",new Date(U.lastUpdated).toLocaleDateString("id-ID")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ne=>{ne.stopPropagation(),S("edit",U)},className:"p-2 text-brand-text-secondary hover:text-brand-accent rounded-full",children:t.jsx(ln,{className:"w-5 h-5"})}),t.jsx("button",{onClick:ne=>{ne.stopPropagation(),R(U.id)},className:"p-2 text-brand-text-secondary hover:text-brand-danger rounded-full",children:t.jsx(fn,{className:"w-5 h-5"})})]})]},U.id)),!H[L]&&t.jsx("p",{className:"text-center text-sm text-brand-text-secondary p-4",children:"Belum ada SOP di kategori ini."})]})]},L))}),t.jsx(nt,{isOpen:r,onClose:w,title:u==="add"?"Tambah SOP":u==="edit"?"Edit SOP":(h==null?void 0:h.title)||"Lihat SOP",size:"4xl",children:u==="view"&&h?t.jsx("div",{className:"prose prose-sm md:prose-base prose-invert max-w-none max-h-[70vh] overflow-y-auto",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:h.content.replace(/\n/g,"<br />")}})}):t.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("input",{type:"text",id:"title",name:"title",value:y.title,onChange:P,className:"input-field",placeholder:" ",required:!0}),t.jsx("label",{htmlFor:"title",className:"input-label",children:"Judul SOP"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("select",{id:"category",name:"category",value:y.category,onChange:P,className:"input-field",required:!0,children:a.sopCategories.map(L=>t.jsx("option",{value:L,children:L},L))}),t.jsx("label",{htmlFor:"category",className:"input-label",children:"Kategori"})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("textarea",{id:"content",name:"content",value:y.content,onChange:P,className:"input-field",placeholder:" ",rows:15,required:!0}),t.jsx("label",{htmlFor:"content",className:"input-label",children:"Konten SOP (mendukung Markdown)"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[t.jsx("button",{type:"button",onClick:w,className:"button-secondary",children:"Batal"}),t.jsx("button",{type:"submit",className:"button-primary",children:u==="add"?"Simpan":"Update"})]})]})})]})},Uc=({title:n,description:e,icon:a})=>t.jsxs("div",{className:"bg-brand-surface p-6 rounded-2xl shadow-lg border border-brand-border text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-accent/10 flex items-center justify-center mx-auto mb-4 text-brand-accent",children:a}),t.jsx("h3",{className:"text-xl font-bold text-brand-text-light mb-2",children:n}),t.jsx("p",{className:"text-brand-text-secondary",children:e})]}),sP=()=>t.jsxs("div",{className:"bg-brand-bg text-brand-text-primary",children:[t.jsxs("header",{className:"py-4 px-6 md:px-12 flex justify-between items-center bg-brand-surface/80 backdrop-blur-sm sticky top-0 z-50 border-b border-brand-border",children:[t.jsx("span",{className:"text-xl font-extrabold text-gradient",children:"Vena Pictures"}),t.jsxs("div",{className:"space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>window.location.hash="#/signup",className:"button-secondary px-6 py-2 text-sm",children:"Daftar"}),t.jsx("button",{type:"button",onClick:()=>window.location.hash="#/login",className:"button-primary px-6 py-2 text-sm",children:"Masuk"})]})]}),t.jsxs("section",{className:"text-center py-20 md:py-32 px-6 bg-gradient-to-b from-brand-surface to-brand-bg",children:[t.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-brand-text-light leading-tight",children:["Sistem Manajemen All-in-One ",t.jsx("br",{})," untuk ",t.jsx("span",{className:"text-gradient",children:"Bisnis Fotografi Anda"})]}),t.jsx("p",{className:"max-w-2xl mx-auto mt-6 text-lg text-brand-text-secondary",children:"Dari manajemen klien dan proyek hingga keuangan dan penjadwalan tim, Vena Pictures menyediakan semua yang Anda butuhkan untuk berkembang."}),t.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[t.jsx("button",{type:"button",onClick:()=>window.location.hash="#/signup",className:"button-primary text-lg w-full sm:w-auto",children:"Mulai Gratis"}),t.jsx("button",{type:"button",onClick:()=>window.location.hash="#/login",className:"button-secondary text-lg w-full sm:w-auto",children:"Masuk ke Dasbor"})]})]}),t.jsx("section",{id:"features",className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold text-brand-text-light",children:"Sederhanakan Alur Kerja Anda"}),t.jsx("p",{className:"text-brand-text-secondary mt-2",children:"Fokus pada kreativitas Anda, biarkan kami yang mengurus administrasinya."})]}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[t.jsx(Uc,{title:"Manajemen Proyek",description:"Lacak setiap proyek dari prospek hingga selesai dengan papan Kanban visual dan checklist progres.",icon:t.jsx(ka,{className:"w-8 h-8"})}),t.jsx(Uc,{title:"Keuangan Terintegrasi",description:"Catat setiap transaksi, kelola akun, dan pantau arus kas bisnis Anda secara real-time.",icon:t.jsx(on,{className:"w-8 h-8"})}),t.jsx(Uc,{title:"Portal Klien & Tim",description:"Berikan akses eksklusif kepada klien dan freelancer untuk melihat progres, file, dan jadwal.",icon:t.jsx(_n,{className:"w-8 h-8"})})]})]})}),t.jsx("footer",{className:"py-12 px-6 text-center text-brand-text-secondary text-sm",children:t.jsxs("p",{children:[" ",new Date().getFullYear()," Vena Pictures. All rights reserved."]})})]}),Oc={},iP=typeof import.meta<"u"&&(Oc==null?void 0:Oc.VITE_FULL_SUPABASE)||typeof window<"u"&&window.VITE_FULL_SUPABASE;async function rP(n,e){try{const{data:a,error:s}=await rn.from(n).select("id");s&&console.warn(`[Supabase] select ids failed for ${n}:`,s);const r=new Set((a??[]).map(p=>p.id)),d=new Set(e.map(p=>p.id)),u=[...r].filter(p=>!d.has(p));if(u.length){const{error:p}=await rn.from(n).delete().in("id",u);p&&console.warn(`[Supabase] delete failed for ${n}:`,p)}if(e.length){const p=e.map(f=>({id:f.id,data:f})),{error:h}=await rn.from(n).upsert(p,{onConflict:"id"});h&&console.warn(`[Supabase] upsert failed for ${n}:`,h)}}catch(a){console.warn(`[Supabase] sync error for ${n}:`,a)}}function un(n,e){return a=>{e(s=>{const r=typeof a=="function"?a(s):a;return rP(n,r),r})}}function oP(n,e){return a=>{e(s=>{const r=typeof a=="function"?a(s):a;return(async()=>{const d={id:r.id,data:r},{error:u}=await rn.from(n).upsert(d,{onConflict:"id"});u&&console.warn(`[Supabase] upsert failed for ${n}:`,u)})(),r})}}async function lP(){async function n(L,U){if(iP==="true"){const{data:ce,error:Ce}=await rn.from(L).select("id, data");return!Ce&&ce&&ce.length>0?ce.map(Re=>Re.data):[]}const{data:ne,error:ie}=await rn.from(L).select("id, data");if(!ie&&ne&&ne.length>0)return ne.map(ce=>ce.data);if(ie&&console.warn(`[Supabase] select failed for ${L}:`,ie),U.length>0){const ce=U.map(Re=>({id:Re.id,data:Re})),{error:Ce}=await rn.from(L).insert(ce);Ce&&console.warn(`[Supabase] seed insert failed for ${L}:`,Ce)}const{data:q,error:V}=await rn.from(L).select("id, data");return V&&console.warn(`[Supabase] reload after seed failed for ${L}:`,V),(q??[]).map(ce=>ce.data)}const[e,a,s,r,d,u,p,h,f,g,y,v,k,j,S,w,P,A,R,O,H]=await Promise.all([n("users",[]),n("profiles",[kt.profile]),n("clients",kt.clients),n("team_members",kt.teamMembers),n("packages",kt.packages),n("add_ons",kt.addOns),n("projects",kt.projects),n("transactions",kt.transactions),n("cards",kt.cards),n("financial_pockets",kt.pockets),n("leads",kt.leads),n("notifications",kt.notifications),n("sops",kt.sops),n("promo_codes",kt.promoCodes),n("social_media_posts",kt.socialMediaPosts),n("assets",kt.assets),n("client_feedback",kt.clientFeedback),n("contracts",kt.contracts),n("team_project_payments",kt.teamProjectPayments),n("team_payment_records",kt.teamPaymentRecords),n("reward_ledger_entries",kt.rewardLedgerEntries)]);return{users:e,profile:a[0]??kt.profile,clients:s,teamMembers:r,packages:d,addOns:u,projects:p,transactions:h,cards:f,pockets:g,leads:y,notifications:v,sops:k,promoCodes:j,socialMediaPosts:S,assets:w,clientFeedback:P,contracts:A,teamProjectPayments:R,teamPaymentRecords:O,rewardLedgerEntries:H}}const $c={},zt=(n,e)=>{const[a,s]=C.useState(()=>{try{const r=window.localStorage.getItem(n);return r?JSON.parse(r):(window.localStorage.setItem(n,JSON.stringify(e)),e)}catch(r){return console.warn(`Error reading localStorage key "${n}":`,r),e}});return C.useEffect(()=>{try{window.localStorage.setItem(n,JSON.stringify(a))}catch(r){console.warn(`Error setting localStorage key "${n}":`,r)}},[n,a]),[a,s]},dP=({onBackToDashboard:n})=>t.jsxs("div",{className:`
        flex flex-col items-center justify-center 
        h-full 
        text-center 
        p-4 sm:p-6 md:p-8
        animate-fade-in
    `,children:[t.jsx("div",{className:`
            w-16 h-16 sm:w-20 sm:h-20
            rounded-full 
            bg-red-100 dark:bg-red-900/20
            flex items-center justify-center
            mb-4 sm:mb-6
        `,children:t.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h2",{className:`
            text-xl sm:text-2xl 
            font-bold 
            text-red-600 dark:text-red-400 
            mb-2 sm:mb-3
        `,children:"Akses Ditolak"}),t.jsx("p",{className:`
            text-brand-text-secondary 
            mb-6 sm:mb-8 
            max-w-md
            leading-relaxed
        `,children:"Anda tidak memiliki izin untuk mengakses halaman ini."}),t.jsx("button",{onClick:n,className:"button-primary",children:"Kembali ke Dasbor"})]}),cP=({activeView:n,handleNavigation:e})=>{const a=[{view:Te.DASHBOARD,label:"Beranda",icon:jl},{view:Te.PROJECTS,label:"Proyek",icon:ka},{view:Te.CLIENTS,label:"Klien",icon:_n},{view:Te.FINANCE,label:"Keuangan",icon:on}];return t.jsx("nav",{className:`
            bottom-nav 
            xl:hidden
            bg-brand-surface/95 
            backdrop-blur-xl
            border-t border-brand-border/50
        `,children:t.jsx("div",{className:`
                flex justify-around items-center 
                h-16
                px-2
            `,style:{paddingBottom:"var(--safe-area-inset-bottom, 0px)"},children:a.map(s=>t.jsxs("button",{onClick:()=>e(s.view),className:`
                            flex flex-col items-center justify-center 
                            w-full h-full
                            px-2 py-2
                            rounded-xl
                            transition-all duration-200 
                            min-w-[64px] min-h-[48px]
                            relative
                            group
                            ${n===s.view?"text-brand-accent bg-brand-accent/10":"text-brand-text-secondary hover:text-brand-text-primary hover:bg-brand-input/50 active:bg-brand-input"}
                        `,"aria-label":s.label,children:[t.jsxs("div",{className:`
                            relative
                            mb-1
                        `,children:[t.jsx(s.icon,{className:`
                                w-5 h-5 sm:w-6 sm:h-6
                                transition-all duration-200
                                ${n===s.view?"transform scale-110":"group-active:scale-95"}
                            `}),n===s.view&&t.jsx("div",{className:`
                                    absolute -top-1 -right-1
                                    w-2 h-2
                                    bg-brand-accent
                                    animate-pulse-soft
                                `})]}),t.jsx("span",{className:`
                            text-xs font-semibold
                            leading-tight
                            transition-all duration-200
                            ${n===s.view?"font-bold":""}
                        `,children:s.label}),t.jsx("div",{className:`
                            absolute inset-0
                            rounded-xl
                            transition-all duration-300
                            ${n===s.view?"bg-gradient-to-t from-brand-accent/10 to-transparent":"bg-transparent group-hover:bg-brand-input/30"}
                        `})]},s.view))})})},uP=()=>{const[n,e]=zt("vena-isAuthenticated",!1),[a,s]=zt("vena-currentUser",null),[r,d]=C.useState(Te.HOMEPAGE),[u,p]=C.useState(""),[h,f]=C.useState(null),[g,y]=C.useState(!1),[v,k]=C.useState(window.location.hash||"#/home"),[j,S]=C.useState(!1),[w,P]=zt("vena-users",JSON.parse(JSON.stringify(jv))),[A,R]=zt("vena-clients",JSON.parse(JSON.stringify(kt.clients))),[O,H]=zt("vena-projects",JSON.parse(JSON.stringify(kt.projects))),[L,U]=zt("vena-teamMembers",JSON.parse(JSON.stringify(kt.teamMembers))),[ne,ie]=zt("vena-transactions",JSON.parse(JSON.stringify(kt.transactions))),[q,V]=zt("vena-teamProjectPayments",JSON.parse(JSON.stringify(kt.teamProjectPayments))),[ce,Ce]=zt("vena-teamPaymentRecords",JSON.parse(JSON.stringify(kt.teamPaymentRecords))),[Re,Ue]=zt("vena-pockets",JSON.parse(JSON.stringify(kt.pockets))),[re,De]=zt("vena-profile",JSON.parse(JSON.stringify(kt.profile))),[J,E]=zt("vena-leads",JSON.parse(JSON.stringify(kt.leads))),[T,B]=zt("vena-rewardLedgerEntries",JSON.parse(JSON.stringify(kt.rewardLedgerEntries))),[ue,ke]=zt("vena-cards",JSON.parse(JSON.stringify(kt.cards))),[G,he]=zt("vena-assets",JSON.parse(JSON.stringify(kt.assets))),[Q,le]=zt("vena-contracts",JSON.parse(JSON.stringify(kt.contracts))),[W,we]=zt("vena-clientFeedback",JSON.parse(JSON.stringify(kt.clientFeedback))),[Be,Ze]=zt("vena-notifications",JSON.parse(JSON.stringify(kt.notifications))),[Ke,Qe]=zt("vena-socialMediaPosts",JSON.parse(JSON.stringify(kt.socialMediaPosts))),[gt,At]=zt("vena-promoCodes",JSON.parse(JSON.stringify(kt.promoCodes))),[wt,ft]=zt("vena-sops",JSON.parse(JSON.stringify(kt.sops))),[Ne,Ve]=zt("vena-packages",JSON.parse(JSON.stringify(kt.packages))),[_e,Je]=zt("vena-addOns",JSON.parse(JSON.stringify(kt.addOns))),st=un("users",P),dt=un("clients",R),yt=un("projects",H),Dt=un("team_members",U),ze=un("transactions",ie),ot=un("team_project_payments",V),Ie=un("team_payment_records",Ce),M=un("financial_pockets",Ue),de=oP("profiles",De),z=un("leads",E),F=un("reward_ledger_entries",B),K=un("cards",ke),te=un("assets",he),X=un("contracts",le),fe=un("client_feedback",we),ye=un("social_media_posts",Qe),_=un("promo_codes",At),D=un("sops",ft),ae=un("packages",Ve),se=un("add_ons",Je),Ae=(ve,je)=>{console.log(`
        ========================================
        [SIMULASI EMAIL] Mengirim notifikasi ke: ${ve}
        ----------------------------------------
        Judul: ${je.title}
        Pesan: ${je.message}
        Waktu: ${new Date(je.timestamp).toLocaleString("id-ID")}
        ========================================
        `)},ut=ve=>{const je={id:crypto.randomUUID(),timestamp:new Date().toISOString(),isRead:!1,...ve};Ze(He=>[je,...He]),re.email?Ae(re.email,je):console.warn("[SIMULASI EMAIL] Gagal: Alamat email vendor tidak diatur di Pengaturan Profil.")};C.useEffect(()=>{const ve=()=>{const je=window.location.hash||"#/home";k(je),n?(je.startsWith("#/login")||je==="#/home"||je==="#")&&(window.location.hash="#/dashboard"):je.startsWith("#/public")||je.startsWith("#/feedback")||je.startsWith("#/suggestion-form")||je.startsWith("#/revision-form")||je.startsWith("#/portal")||je.startsWith("#/freelancer-portal")||je.startsWith("#/login")||je==="#/home"||je==="#"||(window.location.hash="#/home")};return window.addEventListener("hashchange",ve),ve(),()=>window.removeEventListener("hashchange",ve)},[n]),C.useEffect(()=>{const ve=(v.split("?")[0].split("/")[1]||"home").toLowerCase(),je=Object.values(Te).find(He=>He.toLowerCase().replace(/ /g,"-")===ve);je?d(je):ve==="team"&&d(Te.TEAM)},[v]),C.useEffect(()=>{const ve=typeof import.meta<"u"&&($c==null?void 0:$c.VITE_FULL_SUPABASE)||typeof window<"u"&&window.VITE_FULL_SUPABASE;(async()=>{try{if(ve==="true")console.info("[Supabase] FULL_SUPABASE enabled: skipping local mock bootstrap");else{const je=await lP();P(je.users),De(je.profile),R(je.clients),H(je.projects),U(je.teamMembers),ie(je.transactions),V(je.teamProjectPayments),Ce(je.teamPaymentRecords),Ue(je.pockets),E(je.leads),B(je.rewardLedgerEntries),ke(je.cards),he(je.assets),le(je.contracts),we(je.clientFeedback),Ze(je.notifications),Qe(je.socialMediaPosts),At(je.promoCodes),ft(je.sops),Ve(je.packages),Je(je.addOns)}}catch(je){console.warn("[Supabase] initialization failed:",je)}})()},[]),C.useEffect(()=>{const ve=[];try{ve.push(rn.channel("rt:leads").on("postgres_changes",{event:"*",schema:"public",table:"leads"},je=>{const He=String(je.eventType||"").toLowerCase(),Ge=He==="delete"?je.old:je.new;E(Ye=>He==="insert"?[Nt(Ge),...Ye]:He==="update"?Ye.map(lt=>lt.id===Ge.id?Nt(Ge):lt):He==="delete"?Ye.filter(lt=>lt.id!==Ge.id):Ye)}).subscribe()),ve.push(rn.channel("rt:client_feedback").on("postgres_changes",{event:"*",schema:"public",table:"client_feedback"},je=>{const He=String(je.eventType||"").toLowerCase(),Ge=He==="delete"?je.old:je.new;we(Ye=>He==="insert"?[jt(Ge),...Ye]:He==="update"?Ye.map(lt=>lt.id===Ge.id?jt(Ge):lt):He==="delete"?Ye.filter(lt=>lt.id!==Ge.id):Ye)}).subscribe()),ve.push(rn.channel("rt:projects").on("postgres_changes",{event:"*",schema:"public",table:"projects"},je=>{const He=String(je.eventType||"").toLowerCase(),Ge=He==="delete"?je.old:je.new;H(Ye=>He==="insert"?[ge(Ge),...Ye]:He==="update"?Ye.map(lt=>lt.id===Ge.id?ge(Ge):lt):He==="delete"?Ye.filter(lt=>lt.id!==Ge.id):Ye)}).subscribe()),ve.push(rn.channel("rt:clients").on("postgres_changes",{event:"*",schema:"public",table:"clients"},je=>{const He=String(je.eventType||"").toLowerCase(),Ge=He==="delete"?je.old:je.new;R(Ye=>He==="insert"?[wn(Ge),...Ye]:He==="update"?Ye.map(lt=>lt.id===Ge.id?wn(Ge):lt):He==="delete"?Ye.filter(lt=>lt.id!==Ge.id):Ye)}).subscribe()),ve.push(rn.channel("rt:transactions").on("postgres_changes",{event:"*",schema:"public",table:"transactions"},je=>{const He=String(je.eventType||"").toLowerCase(),Ge=He==="delete"?je.old:je.new;ie(Ye=>He==="insert"?[Se(Ge),...Ye]:He==="update"?Ye.map(lt=>lt.id===Ge.id?Se(Ge):lt):He==="delete"?Ye.filter(lt=>lt.id!==Ge.id):Ye)}).subscribe())}catch(je){console.warn("[Supabase Realtime] subscribe error:",je)}return()=>{ve.forEach(je=>{try{rn.removeChannel(je)}catch{}})}},[]);const Nt=ve=>({id:ve.id,name:ve.name,contactChannel:ve.contact_channel,location:ve.location||"",status:ve.status,date:typeof ve.date=="string"?ve.date:new Date(ve.date).toISOString(),notes:ve.notes||"",whatsapp:ve.whatsapp||void 0}),jt=ve=>({id:ve.id,clientName:ve.client_name,rating:ve.rating,satisfaction:ve.satisfaction,feedback:ve.feedback,date:typeof ve.date=="string"?ve.date:new Date(ve.date).toISOString()}),wn=ve=>({id:ve.id,name:ve.name,email:ve.email||"",phone:ve.phone||"",whatsapp:ve.whatsapp||void 0,since:ve.since||new Date().toISOString().split("T")[0],instagram:ve.instagram||"",status:ve.status||"ACTIVE",clientType:ve.client_type||"Langsung",lastContact:ve.last_contact||new Date().toISOString(),portalAccessId:ve.portal_access_id||crypto.randomUUID()}),ge=ve=>({id:ve.id,projectName:ve.project_name,clientName:ve.client_name,clientId:ve.client_id,projectType:ve.project_type||"",packageName:ve.package_name||"",packageId:ve.package_id||"",addOns:ve.add_ons||[],date:ve.date||new Date().toISOString().split("T")[0],location:ve.location||"",progress:ve.progress||0,status:ve.status||"Dikonfirmasi",totalCost:ve.total_cost||0,amountPaid:ve.amount_paid||0,paymentStatus:ve.payment_status||"BELUM_BAYAR",team:[],notes:ve.notes||"",promoCodeId:ve.promo_code_id||void 0,discountAmount:ve.discount_amount||void 0}),Se=ve=>({id:ve.id,date:ve.date,description:ve.description,amount:ve.amount,type:ve.type||"Pemasukan",projectId:ve.project_id||void 0,category:ve.category||"",method:ve.method||"Transfer Bank",cardId:ve.card_id||void 0,pocketId:ve.pocket_id||void 0});C.useEffect(()=>{const ve=(Ye,lt)=>{const vn=(Ye||"").toLowerCase();return vn==="admin@vena.pictures"?{id:lt,email:vn,password:"",fullName:"Andi Vena",role:"Admin",isApproved:!0}:vn==="member@vena.pictures"?{id:lt,email:vn,password:"",fullName:"Rina Asisten",role:"Member",permissions:[Te.CLIENTS,Te.PROJECTS,Te.CALENDAR,Te.SOCIAL_MEDIA_PLANNER],isApproved:!0}:{id:lt,email:vn,password:"",fullName:vn,role:"Member",permissions:[],isApproved:!0}},je=async Ye=>{const{data:lt,error:vn}=await rn.from("users").select("id, data").eq("id",Ye.id);if(!vn&&lt&&lt.length>0){const Pn=lt[0].data;return{...Pn,id:Ye.id,email:Ye.email||Pn.email,password:Pn.password||""}}const Yt=ve(Ye.email,Ye.id);return await rn.from("users").upsert({id:Ye.id,data:Yt},{onConflict:"id"}),st(Pn=>Pn.some(Ts=>Ts.id===Yt.id)?Pn.map(Ts=>Ts.id===Yt.id?Yt:Ts):[Yt,...Pn]),Yt},He=async()=>{const{data:Ye}=await rn.auth.getSession(),lt=Ye==null?void 0:Ye.session;if(lt!=null&&lt.user)try{const vn=await je({id:lt.user.id,email:lt.user.email});s(vn),e(!0)}catch(vn){console.warn("[Supabase Auth] ensure metadata error:",vn),e(!0)}else e(!1),s(null)};He();const{data:Ge}=rn.auth.onAuthStateChange((Ye,lt)=>{He()});return()=>{Ge.subscription.unsubscribe()}},[]),C.useEffect(()=>{const ve=document.getElementById("public-theme-style"),je=v.startsWith("#/public")||v.startsWith("#/portal")||v.startsWith("#/freelancer-portal");if(document.body.classList.toggle("app-theme",!je),document.body.classList.toggle("public-page-body",je),je){const He=re.brandColor||"#3b82f6";if(ve){const Ge=ov(He,10),Ye=lv(He);ve.innerHTML=`
                    :root {
                        --public-accent: ${He};
                        --public-accent-hover: ${Ge};
                        --public-accent-hsl: ${Ye};
                    }
                `}}else ve&&(ve.innerHTML="")},[v,re.brandColor]);const Me=(ve,je=3e3)=>{p(ve),setTimeout(()=>{p("")},je)},et=ve=>{window.location.hash="#/dashboard"},mt=async()=>{try{await rn.auth.signOut()}catch(ve){console.warn("[Supabase Auth] signOut error:",ve)}e(!1),s(null),window.location.hash="#/home"},xt=ve=>{Ze(je=>je.map(He=>He.id===ve?{...He,isRead:!0}:He))},Z=()=>{Ze(ve=>ve.map(je=>({...je,isRead:!0})))},be=(ve,je,He)=>{const Ye=`#/${{[Te.HOMEPAGE]:"home",[Te.DASHBOARD]:"dashboard",[Te.PROSPEK]:"prospek",[Te.BOOKING]:"booking",[Te.CLIENTS]:"clients",[Te.PROJECTS]:"projects",[Te.TEAM]:"team",[Te.FINANCE]:"finance",[Te.CALENDAR]:"calendar",[Te.SOCIAL_MEDIA_PLANNER]:"social-media-planner",[Te.PACKAGES]:"packages",[Te.ASSETS]:"assets",[Te.CONTRACTS]:"contracts",[Te.PROMO_CODES]:"promo-codes",[Te.SOP]:"sop",[Te.CLIENT_REPORTS]:"client-reports",[Te.SETTINGS]:"settings"}[ve]||ve.toLowerCase().replace(/ /g,"-")}`;window.location.hash=Ye,d(ve),f(je||null),y(!1),S(!1),He&&xt(He)},xe=ve=>{var je;return a?a.role==="Admin"?!0:((je=a.permissions)==null?void 0:je.includes(ve))||!1:!1},Fe=(ve,je,He)=>{H(Ge=>{var vn;const Ye=Ge.find(Yt=>Yt.id===ve);if(!Ye)return Ge;const lt=(vn=Ye.revisions)==null?void 0:vn.find(Yt=>Yt.id===je);if(!lt)return Ge;if(He.status===qt.COMPLETED&&lt.status!==qt.COMPLETED){const Yt=L.find(Pn=>Pn.id===lt.freelancerId);ut({title:"Revisi Telah Diselesaikan",message:`${(Yt==null?void 0:Yt.name)||"Seorang freelancer"} telah menyelesaikan tugas revisi untuk proyek "${Ye.projectName}".`,icon:"revision",link:{view:Te.PROJECTS,action:{type:"VIEW_PROJECT_DETAILS",id:ve}}})}return Ge.map(Yt=>{var Pn;return Yt.id===ve?{...Yt,revisions:(Pn=Yt.revisions)==null?void 0:Pn.map(Cs=>Cs.id===je?{...Cs,...He,completedDate:new Date().toISOString()}:Cs)}:Yt})})},an=()=>{if(!xe(r))return t.jsx(dP,{onBackToDashboard:()=>be(Te.DASHBOARD)});switch(r){case Te.DASHBOARD:return t.jsx(Y2,{projects:O,clients:A,transactions:ne,teamMembers:L,cards:ue,pockets:Re,handleNavigation:be,leads:J,teamProjectPayments:q,packages:Ne,assets:G,clientFeedback:W,contracts:Q,currentUser:a,projectStatusConfig:re.projectStatusConfig});case Te.PROSPEK:return t.jsx(dE,{leads:J,setLeads:z,clients:A,setClients:dt,projects:O,setProjects:yt,packages:Ne,addOns:_e,transactions:ne,setTransactions:ze,userProfile:re,setProfile:de,showNotification:Me,cards:ue,setCards:K,pockets:Re,setPockets:M,promoCodes:gt,setPromoCodes:_});case Te.BOOKING:return t.jsx(pE,{leads:J,clients:A,projects:O,setProjects:yt,packages:Ne,userProfile:re,setProfile:de,handleNavigation:be,showNotification:Me});case Te.CLIENTS:return t.jsx(vE,{clients:A,setClients:dt,projects:O,setProjects:yt,packages:Ne,addOns:_e,transactions:ne,setTransactions:ze,userProfile:re,showNotification:Me,initialAction:h,setInitialAction:f,cards:ue,setCards:K,pockets:Re,setPockets:M,contracts:Q,handleNavigation:be,clientFeedback:W,promoCodes:gt,setPromoCodes:_,onSignInvoice:(ve,je)=>yt(He=>He.map(Ge=>Ge.id===ve?{...Ge,invoiceSignature:je}:Ge)),onSignTransaction:(ve,je)=>ze(He=>He.map(Ge=>Ge.id===ve?{...Ge,vendorSignature:je}:Ge)),addNotification:ut});case Te.PROJECTS:return t.jsx(SE,{projects:O,setProjects:yt,clients:A,packages:Ne,teamMembers:L,teamProjectPayments:q,setTeamProjectPayments:ot,transactions:ne,setTransactions:ze,initialAction:h,setInitialAction:f,profile:re,showNotification:Me,cards:ue,setCards:K,handleNavigation:be});case Te.TEAM:return t.jsx(RE,{teamMembers:L,setTeamMembers:Dt,teamProjectPayments:q,setTeamProjectPayments:ot,teamPaymentRecords:ce,setTeamPaymentRecords:Ie,transactions:ne,setTransactions:ze,userProfile:re,showNotification:Me,initialAction:h,setInitialAction:f,projects:O,setProjects:yt,rewardLedgerEntries:T,setRewardLedgerEntries:F,pockets:Re,setPockets:M,cards:ue,setCards:K,onSignPaymentRecord:(ve,je)=>Ie(He=>He.map(Ge=>Ge.id===ve?{...Ge,vendorSignature:je}:Ge))});case Te.FINANCE:return t.jsx(HE,{transactions:ne,setTransactions:ze,pockets:Re,setPockets:M,projects:O,profile:re,cards:ue,setCards:K,teamMembers:L,rewardLedgerEntries:T});case Te.PACKAGES:return t.jsx(qE,{packages:Ne,setPackages:ae,addOns:_e,setAddOns:se,projects:O,profile:re});case Te.ASSETS:return t.jsx(WE,{assets:G,setAssets:te,profile:re,showNotification:Me});case Te.CONTRACTS:return t.jsx(M_,{contracts:Q,setContracts:X,clients:A,projects:O,profile:re,showNotification:Me,initialAction:h,setInitialAction:f,packages:Ne,onSignContract:(ve,je,He)=>X(Ge=>Ge.map(Ye=>Ye.id===ve?{...Ye,[He==="vendor"?"vendorSignature":"clientSignature"]:je}:Ye))});case Te.SOP:return t.jsx(aP,{sops:wt,setSops:D,profile:re,showNotification:Me});case Te.SETTINGS:return t.jsx(QE,{profile:re,setProfile:de,transactions:ne,setTransactions:ze,projects:O,setProjects:yt,packages:Ne,setPackages:ae,sops:wt,setSops:D,users:w,setUsers:st,currentUser:a,showNotification:Me});case Te.CALENDAR:return t.jsx(s_,{projects:O,setProjects:H,teamMembers:L,profile:re});case Te.CLIENT_REPORTS:return t.jsx(E_,{clients:A,leads:J,projects:O,feedback:W,setFeedback:fe,showNotification:Me});case Te.SOCIAL_MEDIA_PLANNER:return t.jsx(eP,{posts:Ke,setPosts:ye,projects:O,showNotification:Me});case Te.PROMO_CODES:return t.jsx(nP,{promoCodes:gt,setPromoCodes:_,projects:O,showNotification:Me});default:return t.jsx("div",{})}};if(v.startsWith("#/home")||v==="#/")return t.jsx(sP,{});if(v.startsWith("#/login"))return t.jsx(Dg,{onLoginSuccess:et,users:w});if(v.startsWith("#/public-packages"))return t.jsx(y_,{packages:Ne,addOns:_e,userProfile:re,showNotification:Me,setClients:dt,setProjects:yt,setTransactions:ze,setCards:K,setLeads:z,addNotification:ut,cards:ue,promoCodes:gt,setPromoCodes:_});if(v.startsWith("#/public-booking")){const ve={clients:A,projects:O,teamMembers:L,transactions:ne,teamProjectPayments:q,teamPaymentRecords:ce,pockets:Re,profile:re,leads:J,rewardLedgerEntries:T,cards:ue,assets:G,contracts:Q,clientFeedback:W,notifications:Be,socialMediaPosts:Ke,promoCodes:gt,sops:wt,packages:Ne,addOns:_e};return t.jsx(h_,{...ve,userProfile:re,showNotification:Me,setClients:dt,setProjects:yt,setTransactions:ze,setCards:K,setPockets:M,setPromoCodes:_,setLeads:z,addNotification:ut})}if(v.startsWith("#/public-lead-form"))return t.jsx(j_,{setLeads:z,userProfile:re,showNotification:Me,addNotification:ut});if(v.startsWith("#/feedback"))return t.jsx(N_,{setClientFeedback:we});if(v.startsWith("#/suggestion-form"))return t.jsx(A_,{setLeads:E,addNotification:ut});if(v.startsWith("#/revision-form"))return t.jsx(k_,{projects:O,teamMembers:L,onUpdateRevision:Fe});if(v.startsWith("#/portal/")){const ve=v.split("/portal/")[1];return t.jsx(L_,{accessId:ve,clients:A,projects:O,setClientFeedback:fe,showNotification:Me,contracts:Q,transactions:ne,userProfile:re,packages:Ne,onClientConfirmation:(je,He)=>yt(Ge=>Ge.map(Ye=>Ye.id===je?{...Ye,[`is${He.charAt(0).toUpperCase()+He.slice(1)}ConfirmedByClient`]:!0}:Ye)),onClientSubStatusConfirmation:(je,He,Ge)=>yt(Ye=>Ye.map(lt=>lt.id===je?{...lt,confirmedSubStatuses:[...lt.confirmedSubStatuses||[],He],clientSubStatusNotes:{...lt.clientSubStatusNotes||{},[He]:Ge}}:lt)),onSignContract:(je,He,Ge)=>X(Ye=>Ye.map(lt=>lt.id===je?{...lt,[Ge==="vendor"?"vendorSignature":"clientSignature"]:He}:lt))})}if(v.startsWith("#/freelancer-portal/")){const ve=v.split("/freelancer-portal/")[1];return t.jsx(H_,{accessId:ve,teamMembers:L,projects:O,teamProjectPayments:q,teamPaymentRecords:ce,rewardLedgerEntries:T,showNotification:Me,onUpdateRevision:Fe,sops:wt,userProfile:re,addNotification:ut})}return n?t.jsxs("div",{className:`
        flex h-screen 
        bg-brand-bg 
        text-brand-text-primary
        overflow-hidden
    `,children:[t.jsx(Hv,{activeView:r,setActiveView:ve=>be(ve),isOpen:g,setIsOpen:y,currentUser:a}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(I_,{pageTitle:r,toggleSidebar:()=>y(!g),setIsSearchOpen:S,notifications:Be,handleNavigation:be,handleMarkAllAsRead:Z,currentUser:a,profile:re,handleLogout:mt}),t.jsx("main",{className:`
            flex-1 
            overflow-x-hidden 
            overflow-y-auto 
            p-3 sm:p-4 md:p-6 lg:p-8 
            pb-20 xl:pb-8
            overscroll-contain
        `,style:{WebkitOverflowScrolling:"touch",paddingBottom:"calc(5rem + var(--safe-area-inset-bottom, 0px))"},children:t.jsx("div",{className:"animate-fade-in",children:an()})})]}),u&&t.jsx("div",{className:`
            fixed top-4 right-4 
            sm:top-6 sm:right-6
            bg-brand-accent 
            text-white 
            py-3 px-4 sm:py-4 sm:px-6
            rounded-xl 
            shadow-2xl 
            z-50 
            animate-fade-in-out
            backdrop-blur-sm
            border border-brand-accent-hover/20
            max-w-sm
            break-words
        `,style:{top:"calc(1rem + var(--safe-area-inset-top, 0px))",right:"calc(1rem + var(--safe-area-inset-right, 0px))"},children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse-soft"}),t.jsx("span",{className:"font-medium text-sm sm:text-base",children:u})]})}),t.jsx(P_,{isOpen:j,onClose:()=>S(!1),clients:A,projects:O,teamMembers:L,handleNavigation:be}),t.jsx(cP,{activeView:r,handleNavigation:be})]}):t.jsx(Dg,{onLoginSuccess:et,users:w})},ry=document.getElementById("root");if(!ry)throw new Error("Could not find root element to mount to");const mP=rv.createRoot(ry);mP.render(t.jsx(Bg.StrictMode,{children:t.jsx(uP,{})}));export{Ma as s};
